{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://jacdac-docs/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/blockly/blockly.js","webpack://jacdac-docs/./node_modules/blockly/blocks.js","webpack://jacdac-docs/./node_modules/blockly/blocks_compressed.js","webpack://jacdac-docs/./node_modules/blockly/browser.js","webpack://jacdac-docs/./node_modules/blockly/core-browser.js","webpack://jacdac-docs/./node_modules/blockly/index.js","webpack://jacdac-docs/./node_modules/blockly/javascript.js","webpack://jacdac-docs/./node_modules/blockly/javascript_compressed.js","webpack://jacdac-docs/./node_modules/blockly/msg/en.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/BlocklyWorkspace.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/debounce.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/index.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/useBlocklyWorkspace.js","webpack://jacdac-docs/./jacdac-ts/src/vm/ir.ts","webpack://jacdac-docs/./src/components/hooks/toneContext.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/PaperBox.tsx","webpack://jacdac-docs/./node_modules/@blockly/theme-modern/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/theme-dark/src/index.js","webpack://jacdac-docs/./src/components/ui/AppTheme.tsx","webpack://jacdac-docs/./src/components/vm/fields/ValueContext.tsx","webpack://jacdac-docs/./src/components/vm/WorkspaceContext.tsx","webpack://jacdac-docs/./src/components/vm/fields/ReactField.tsx","webpack://jacdac-docs/./src/components/vm/fields/NoteField.tsx","webpack://jacdac-docs/./src/components/vm/fields/KeyboardKeyField.tsx","webpack://jacdac-docs/./src/components/widgets/svg.ts","webpack://jacdac-docs/./src/components/vm/fields/ReactImageField.tsx","webpack://jacdac-docs/./src/components/vm/fields/LEDMatrixField.tsx","webpack://jacdac-docs/./src/components/vm/fields/SliderField.tsx","webpack://jacdac-docs/./src/components/vm/fields/ServoAngleField.tsx","webpack://jacdac-docs/./src/components/vm/fields/LEDColorField.tsx","webpack://jacdac-docs/./src/components/vm/fields/ReactInlineField.tsx","webpack://jacdac-docs/./src/components/vm/fields/NoServiceAlert.tsx","webpack://jacdac-docs/./src/components/vm/fields/TwinField.tsx","webpack://jacdac-docs/./src/components/vm/fields/JDomTreeField.tsx","webpack://jacdac-docs/./src/components/vm/fields/fields.ts","webpack://jacdac-docs/./src/components/vm/toolbox.ts","webpack://jacdac-docs/./src/components/vm/useToolbox.ts","webpack://jacdac-docs/./src/components/vm/BlocklyModalDialogs.tsx","webpack://jacdac-docs/./src/components/vm/jsongenerator.ts","webpack://jacdac-docs/./src/components/vm/it4generator.ts","webpack://jacdac-docs/./src/components/vm/useBlocklyEvents.ts","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/field_slider.js","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/insertion_marker_manager_monkey_patch.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_if.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_text_join.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_list_create.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/disable-top-blocks/src/index.js","webpack://jacdac-docs/./src/components/vm/useBlocklyPlugins.ts","webpack://jacdac-docs/./src/components/vm/VMBlockEditor.tsx"],"names":["getServiceFromRole","info","role","shortId","roles","find","pair","def","serviceSpecificationFromName","serviceShortId","assert","service","toIdentifier","id","type","name","toMemberExpression","root","field","object","property","computed","handlerVisitor","handler","visitITE","visitCommand","commands","forEach","visitBase","base","ite","else","then","compileProgram","prog","newProgram","slice","handlers","map","h","removeIfThenElse","newSequence","labels","labelId","time","end","push","command","callee","arguments","expr","length","pop","cmd","checkProgram","allErrors","goodHandlers","errorFun","e","errors","file","line","undefined","message","symbolResolver","SpecSymbolResolver","checker","IT4Checker","_","index","c","checkCommand","IT4Functions","registers","s","split","fld","register","events","event","args","prompt","context","VOLUME_GAIN","createToneContext","defaultVolume","console","log","ctx","window","AudioContext","webkitAudioContext","buffer","createBuffer","source","createBufferSource","connect","destination","start","volume","createGain","gain","value","setVolume","v","isNaN","playTone","frequency","duration","tone","createOscillator","stop","currentTime","debug","close","state","warn","useServices","options","useContext","JacdacContext","bus","services","useChange","b","JSON","stringify","PaperBox","props","children","padding","elevation","bgcolor","others","theme","useTheme","spacing","AppTheme","DarkModeContext","darkMode","isDark","themeDef","palette","primary","main","secondary","contrastThreshold","rawTheme","createMuiTheme","responsiveFontSizes","ValueContext","createContext","onValueChange","displayName","ValueProvider","initialValue","onFieldValueChange","useState","setValue","newValue","WorkspaceServices","_runner","emit","CHANGE","_roleManager","JDEventSource","WorkspaceContext","workspace","flyout","roleServiceShortId","roleService","WorkspaceProvider","getSourceBlock","sourceBlock","setSourceBlock","jacdacServices","roleManager","runner","resolveRole","newSourceBlock","roleInput","inputList","roleField","fieldRow","f","FieldVariable","xml","document","createElement","toXml","newRole","getVariable","resolveRoleService","newRoleService","getService","setRole","setRoleService","r","isInFlyout","setFlyout","useEffect","subscribe","SOURCE_BLOCK_CHANGE","VALUE_CHANGE","MOUNT","UNMOUNT","ReactField","validator","size","SERIALIZABLE","size_","Blockly","width","height","initCustomView","updateView","getText_","fromXml","fieldElement","parse","textContent","emitChange","block","changed","sourceBlock_","initView","view","updateSize_","doValueUpdate_","change","value_","showEditor_","div_","ReactDOM","render","border","getColourTertiary","getColour","setTimeout","dropdownDispose_","bind","hide","error","renderField","dispose","getValue","defaultValue","toShadowDefinition","fieldType","KEY","kind","message0","args0","style","output","template","PianoWidget","lazy","NoteField","fromJson","on","toneContext","handlePlayTone","newFrequency","SHADOW","KeyboardKeyInput","KeyboardKeyField","selector","modifiers","renderKeyboardKey","handleChange","newSelector","newModifiers","mkTitle","txt","t","elt","title","el","appendChild","hydrate","k","setAttributeNS","createElementNS","child","parent","ReactImageField","setSize","img","setAttribute","imgUri","renderValue","getText","fieldGroup_","alt","LEDMatrixWidget","LEDMatrixField","rows","columns","leds","columnspadded","ledsBytes","fromHex","cvs","pw","ph","w","getContext","fillStyle","fillRect","x","y","bitindex","byte","bit","dataUri","toDataURL","onChange","newLeds","toHex","Uint8Array","FieldWithSlider","ev","nv","Math","round","SliderField","renderWidget","ServoWidget","ServiceFieldWidget","ServoAngleField","LEDWidget","LEDColorFieldWidget","LEDColorField","cx","cy","strokeWidth","stroke","rgbToHtmlColor","circle","ReactInlineField","fo","container","display","minWidth","resizeObserver","ResizeObserver","entries","entry","contentRect","forceRerender","observe","renderBlock","disconnect","renderInlineField","bindEvents_","getClickTarget_","NoServiceAlert","spec","handleStartSimulator","startServiceProviderFromServiceClass","classIdentifier","TwinWidget","onPointerStopPropagation","stopPropagation","cursor","TwinField","EDITABLE","JDomServiceTreeView","JDomTreeWidget","JDomTreeField","reactFieldShadows","registerFields","registerType","key","fieldTypes","fieldShadows","NEW_PROJET_XML","WHILE_CONDITION_BLOCK","WHILE_CONDITION_BLOCK_CONDITION","WAIT_BLOCK","SET_STATUS_LIGHT_BLOCK","TWIN_BLOCK","INSPECT_BLOCK","WATCH_BLOCK","isBooleanField","isStringField","toBlocklyType","isNumericType","enumInfo","srv","enums","ignoredServices","SRV_CONTROL","SRV_LOGGER","SRV_ROLE_MANAGER","SRV_PROTO_TEST","SRV_SETTINGS","SRV_BOOTLOADER","ignoredEvents","SystemEvent","includedRegisters","SystemReg","customMessages","SRV_JOYSTICK","JoystickReg","get","createBlockTheme","sensorColor","success","otherColor","commandColor","warning","debuggerColor","grey","serviceColor","isSensor","loadBlocks","customShadows","serviceClass","SRV_SERVO","identifier","ServoReg","shadow","lookupCustomShadow","cs","serviceHelp","withPrefix","fieldsSupported","pkt","fields","every","fieldName","reg","fieldToShadow","unit","test","min","typicalMin","absoluteMin","max","typicalMax","absoluteMax","variableName","humanify","camelName","toLowerCase","fieldVariable","variable","variableTypes","defaultType","fieldsToFieldInputs","check","fieldsToValues","toMap","fieldsToMessage","i","join","isEnabledRegister","customMessage","m","allServices","serviceSpecifications","filter","status","indexOf","resolveService","cls","arrayConcatMany","packets","isRegister","isEvent","kv","isCommand","customBlockDefinitions","SRV_HID_KEYBOARD","colour","inputsInline","previousStatement","nextStatement","tooltip","helpUrl","expression","SRV_LED","values","color","speed","SRV_BUZZER","SRV_SEVEN_SEGMENT_DISPLAY","digits","SRV_LED_MATRIX","eventBlocks","eventFieldBlocks","registerChangeByEventBlocks","some","splitFilter","registerSimples","registerComposites","registerSimpleTypes","registerSimpleOthers","registerSimplesGetBlocks","description","registerSimpleEnumTypes","einfo","registerCompositeEnumTypes","registerEnumGetBlocks","Object","keys","members","member","registerNumericsGetBlocks","re","registerSetBlocks","commandBlocks","serviceBlocks","shadowBlocks","precision","colourOptions","runtimeBlocks","mathBlocks","extensions","blocks","jacdacDefinition","init","jsonInit","jdBlocks","uniqueMap","BUILTIN_TYPES","scanServices","variables","patchCategoryJSONtoXML","cat","button","contents","unshift","node","exists","Flags","blockxml","useToolbox","blockServices","useMemo","liveServices","specification","toolboxServices","srvid","sort","l","localeCompare","servicesCategories","text","callbackKey","commandsCategory","modulesCategory","logicCategory","A","B","BOOL","mathCategory","NUM","variablesCategory","custom","toolboxConfiguration","newProjectXml","useToolboxButtons","buttons","btn","registerButtonCallback","BlocklyModalDialogs","dialogType","setDialogType","setMessage","valueId","useId","callback","useRef","showDialog","previous","alert","confirm","cb","current","handleCloseConfirm","handleCancel","handleOk","handleValueChange","target","domToJSON","clean","o","builtins","logic_null","getFieldValue","math_number","Number","logic_boolean","jacdac_on_off","jacdac_time_picker","jacdac_angle","jacdac_percent","jacdac_ratio","variableToJSON","getId","fieldsToJSON","fieldToJSON","xmlToJSON","j","outerHTML","getAttributeNames","getAttribute","childNodes","nodeType","Node","TEXT_NODE","ELEMENT_NODE","isSerializable","fieldXml","flattenNext","next","blockToJSON","blockToJSONHidden","isEnabled","isInsertionMarker","getChildren","definition","element","inputs","input","connection","targetBlock","getNextBlock","top","getTopBlocks","json","visitBlock","visitor","visitInput","visitField","visitWorkspace","ops","AND","OR","EQ","NEQ","LT","GT","LTE","GTE","NEG","ADD","MULTIPLY","DIVIDE","MINUS","workspaceJSONToIT4Program","blockToExpression","raw","argument","op","operator","prefix","left","right","identifierName","blockToCommand","ret","sourceId","addCommands","val","serviceCommand","a","acc","topEvent","condition","eventName","toString","useBlocklyEvents","getBlockById","blockId","twinInput","twinField","addChangeListener","removeChangeListener","useBlocklyPlugins","disableTopBlocksPlugin","DisableTopBlocks","useStyles","makeStyles","createStyles","editor","fontFamily","typography","fontWeight","VMBlockEditor","className","onXmlChange","onJSONChange","onIT4ProgramChange","initialXml","classes","AppContext","setError","setServices","DarkTheme","Theme","gridColor","blocklyRef","useBlocklyWorkspace","ref","workspaceConfiguration","collapse","disable","comments","css","trashcan","sounds","grid","snap","renderer","oneBasedIndex","move","scrollbars","vertical","horizontal","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","pinch","onImportXmlError","ws","isDragging","program","newServices","clsx"],"mappings":";;;;;;;;;;;;;;;AAAiD;AAClC;AACf;AACA,aAAa,iCAAc;AAC3B;AACA;;AAEA;AACA,C;;ACR+C;AAChC;AACf;AACA;AACA,GAAG;AACH;AACA,iBAAiB,cAAa;AAC9B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;;ACnB0D;AAC3B;AACe;AACP;AAChC;AACP;AACA;AACA;AACA;AACA;AACA,qCAAqC,6CAAgB;AACrD,sBAAsB,gDAAmB,CAAC,yDAAU,EAAE,oFAAQ;AAC9D;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,yDAAe,oEAAU;AACzB;AACA,CAAC,oBAAoB,E;;;;;;;;;ACrBR;;AAEb,6BAA6B,mBAAO,CAAC,KAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,KAA+C;;AAErF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,SAAe,Y;;;;;;;ACnBf;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAsB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC7C,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC,E;;;;;;;AC7BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAqB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC5C,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AC9BD,yHAAyB;;AAEzB;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAyB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChD,GAAG,MAAM,EAMN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,0BAA0B;AAC1C;AACA,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA,gBAAgB,0BAA0B;AAC1C;AACA,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,qBAAqB,GAAG,mBAAmB,MAAM,qBAAqB,MAAM,oBAAoB;AACjH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,uBAAuB;AACvC;AACA,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,iBAAiB,uBAAuB,GAAG,yBAAyB,MAAM,yBAAyB,MAAM,uBAAuB;AAChI;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,yBAAyB;AACzC;AACA,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iBAAiB,6BAA6B;AAC9C;AACA;AACA,gBAAgB,+BAA+B;AAC/C,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,yDAAyD,qBAAqB;AAC9E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,kBAAkB,6BAA6B;AAC/C;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;;AAEA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB,gBAAgB,wBAAwB;AACnF,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,wBAAwB,eAAe,uBAAuB;AAClF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,eAAe;AAChC;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,gCAAgC;AACjD;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C,GAAG;AACH;AACA,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,YAAY,gCAAgC;AAC5C,WAAW,+BAA+B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,gDAAgD,6BAA6B;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,yBAAyB;AAC9C;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA,KAAK;AACL;AACA,qBAAqB,wBAAwB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,uCAAuC,iBAAiB,uCAAuC;AACnH,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,gCAAgC;AAChD;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAA4C,iBAAiB,+CAA+C;AAChI,KAAK;AACL;AACA;AACA,gBAAgB,qCAAqC;AACrD;AACA,GAAG;AACH;AACA,cAAc,sCAAsC;AACpD,cAAc,sCAAsC;AACpD;AACA;AACA;AACA,cAAc,2CAA2C;AACzD,iBAAiB,8CAA8C;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,yBAAyB;AAC/H,0GAA0G,6BAA6B;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,wBAAwB;AACxC;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,yBAAyB,eAAe,4BAA4B,iBAAiB,+BAA+B,oBAAoB,yBAAyB,kBAAkB,sBAAsB;AAC7N,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB,gBAAgB,4BAA4B;AACxF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB,eAAe,kBAAkB,eAAe,kBAAkB,eAAe,mBAAmB,gBAAgB,mBAAmB,gBAAgB,mBAAmB;AAChN,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,iBAAiB,gBAAgB,gBAAgB,eAAe,kBAAkB,iBAAiB,kBAAkB,iBAAiB,qBAAqB,oBAAoB,qBAAqB,oBAAoB,yBAAyB;AACrQ,KAAK;AACL;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,8BAA8B,iBAAiB,gCAAgC,mBAAmB,kCAAkC;AACxJ,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B,eAAe,6BAA6B,eAAe,6BAA6B,eAAe,iCAAiC,mBAAmB,gCAAgC,kBAAkB,8BAA8B,gBAAgB,iCAAiC,mBAAmB,gCAAgC;AAChY,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,mCAAmC;AACpD;AACA;AACA,gBAAgB,8BAA8B;AAC9C,gBAAgB,8BAA8B;AAC9C,GAAG;AACH;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,YAAY,gCAAgC;AAC5C,cAAc,kCAAkC;AAChD,iBAAiB,qCAAqC;AACtD,eAAe,mCAAmC;AAClD,cAAc,kCAAkC;AAChD,aAAa,6BAA6B;AAC1C,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,WAAW,2BAA2B;AACtC,cAAc,8BAA8B;AAC5C,YAAY,4BAA4B;AACxC,cAAc,8BAA8B;AAC5C,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C,aAAa,6BAA6B;AAC1C,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qGAAqG,wBAAwB;AAC7H;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,qBAAqB,oCAAoC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,kDAAkD,6BAA6B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2MAA2M;AAC3M;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,oCAAoC;AACnE;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,yCAAyC,oCAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,oHAAoH,UAAU;AAC9H;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oCAAoC;AAChF;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,6GAA6G,cAAc;AAC3H;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,uCAAuC;AACvC,gFAAgF;AAChF;AACA;AACA,sDAAsD;AACtD;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;;AAEA;AACA,2CAA2C,4BAA4B;AACvE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB,4BAA4B;AACjD;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;;AAEA,YAAY,0BAA0B;AACtC;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,gCAAgC,qBAAqB;AACrD;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA,iBAAiB,gCAAgC;AACjD;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,gBAAgB,kCAAkC;AAClD;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,gCAAgC,iBAAiB,+BAA+B;AACpG,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,2BAA2B,sBAAsB,yBAAyB,oBAAoB,sBAAsB,iBAAiB,qBAAqB,gBAAgB,uBAAuB;AACrN,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,8CAA8C;AAC9C,+CAA+C;AAC/C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,yDAAyD,qBAAqB;AAC9E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,kBAAkB,6BAA6B;AAC/C;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;;AAEA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qGAAqG,wBAAwB;;AAE7H;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AChgFD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAgB,EAAE,0BAAU,EAAE,0BAAU,EAAE,0BAAc,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC/E,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC,E;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,CAAC,E;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC,E;;;;;;;AC7BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAQ,EAAE,0BAA4B,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC7D,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AC9BD,yHAAyB;;AAEzB;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAyB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChD,GAAG,MAAM,EAMN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,2EAA2E,cAAc;AACzF;AACA;;AAEA;;AAEA,eAAe,cAAc;AAC7B;AACA;;AAEA,uFAAuF;AACvF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,wBAAwB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,oIAAoI,4DAA4D,2DAA2D,KAAK;AAChQ;;AAEA;AACA;AACA;AACA;AACA,wIAAwI,uDAAuD,uDAAuD,uDAAuD,8DAA8D,8DAA8D,8DAA8D,6BAA6B,KAAK;AACzgB;;AAEA;AACA;AACA;AACA;AACA,gJAAgJ,sDAAsD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,wDAAwD,wDAAwD,wDAAwD,kDAAkD,kDAAkD,kDAAkD,6BAA6B,KAAK;AACt0B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C,kBAAkB;AAC9D;AACA;;AAEA;AACA;;AAEA;AACA,2IAA2I,qBAAqB,qBAAqB,OAAO,OAAO,yBAAyB,OAAO,mBAAmB,KAAK;AAC3P;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA,sJAAsJ,sDAAsD,mBAAmB,oCAAoC,OAAO,OAAO,uBAAuB,OAAO,KAAK;AACpT;AACA,wCAAwC;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD,2DAA2D;AAC3D;;AAEA;AACA,qFAAqF;AACrF,wDAAwD;AACxD;;AAEA;AACA;AACA,4DAA4D;AAC5D,wEAAwE;AACxE;;AAEA;AACA;AACA;AACA,oFAAoF;AACpF,gGAAgG;AAChG;;AAEA;AACA;AACA;AACA,2EAA2E;AAC3E,iEAAiE;AACjE,6EAA6E;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0JAA0J,0BAA0B,mCAAmC,yCAAyC,EAAE,iCAAiC,wDAAwD,EAAE,wCAAwC,oFAAoF,EAAE,SAAS,uCAAuC,6BAA6B,kCAAkC,EAAE,KAAK;AACjlB;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,kDAAkD;AACrG;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,KAAK;;AAEL,oTAAoT,YAAY;AAChU;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kLAAkL;AAClL,wCAAwC,uBAAuB,eAAe,YAAY;AAC1F;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,uCAAuC;AAC7E;AACA,oFAAoF,YAAY;AAChG,KAAK,mMAAmM,yLAAyL,8KAA8K,iCAAiC,4CAA4C,uDAAuD,aAAa,sCAAsC,kEAAkE,0BAA0B,YAAY;;AAE90B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0JAA0J;AAC1J;AACA,iEAAiE;AACjE,mDAAmD,YAAY;AAC/D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;AACA,6BAA6B;AAC7B;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,sJAAsJ,gGAAgG,oBAAoB,OAAO,iLAAiL,qBAAqB,OAAO,oFAAoF,uBAAuB,UAAU,mDAAmD,uBAAuB,SAAS,OAAO,kBAAkB,KAAK;;AAEpsB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8EAA8E;AAC9E;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,cAAc;AACpD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sIAAsI,2CAA2C,cAAc,kBAAkB,KAAK;AACtN;AACA;AACA;;AAEA;AACA,wIAAwI,kDAAkD,6BAA6B,EAAE,yCAAyC,qCAAqC,cAAc,EAAE,sCAAsC,2FAA2F,OAAO,OAAO,qDAAqD,OAAO,KAAK;AACvgB;AACA;AACA;;AAEA;AACA,uIAAuI,qBAAqB,sBAAsB,uBAAuB,qBAAqB,mBAAmB,OAAO,8BAA8B,0BAA0B,sBAAsB,uBAAuB,mBAAmB,OAAO,uCAAuC,uCAAuC,yBAAyB,kBAAkB,WAAW,SAAS,qBAAqB,kCAAkC,wBAAwB,SAAS,iDAAiD,OAAO,qBAAqB,mBAAmB,OAAO,uCAAuC,qCAAqC,SAAS,OAAO,mBAAmB,KAAK;AACvzB;AACA;AACA;;AAEA;AACA,oJAAoJ,6BAA6B,0BAA0B,gDAAgD,cAAc,MAAM,uBAAuB,qBAAqB,OAAO,OAAO,mDAAmD,OAAO,8BAA8B,iCAAiC,KAAK;AACvc;AACA;AACA;;AAEA;AACA,0IAA0I,sDAAsD,qBAAqB,KAAK;AAC1N;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yIAAyI,kBAAkB,iEAAiE,cAAc,cAAc,OAAO,yDAAyD,KAAK;AAC7T;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;;AAE5D,4CAA4C,cAAc;AAC1D;AACA;;AAEA,mDAAmD,4BAA4B;AAC/E;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kJAAkJ,cAAc;AAChK;AACA;;AAEA;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA,sHAAsH;AACtH;AACA,qKAAqK,gDAAgD;AACrN,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uBAAuB,kBAAkB;AACzC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gJAAgJ,sDAAsD,qBAAqB,KAAK;AAChO;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sJAAsJ,0DAA0D,8DAA8D,EAAE,KAAK;AACrR;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,qHAAqH;AACrH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iJAAiJ,gCAAgC,mCAAmC,OAAO,OAAO,iDAAiD,OAAO,KAAK;AAC/R;;AAEA;AACA;AACA;AACA;AACA,gKAAgK,4CAA4C,kFAAkF,oEAAoE,KAAK;AACvW;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;AC5/BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA,mBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+HAA+H;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;AClcY;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D,mDAAmD,mBAAO,CAAC,KAAuB;;AAElF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,eAAe,Y;;;;;;;;AC1FF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf;AACA;AACA;;AAEA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;ACjCa;;AAEb,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,sCAAsD;AACtD;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,6BAAmD;AACnD;AACA;AACA;AACA;AACA,CAAC,CAAC;;AAEF,kDAAkD,mBAAO,CAAC,KAAuB;;AAEjF,+CAA+C,mBAAO,CAAC,IAAoB;;AAE3E;AACA;AACA;AACA;AACA,C;;;;;;;;AC1Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,sCAAsC,mBAAO,CAAC,KAAS;;AAEvD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AA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AE,EAAEE,KAAK,CAACE,OAAN,CAAc,IAAd;AAAvC,mBACH,iDAAC,+DAAD;AAAO,UAAM,MAAb;AAAc,aAAS,EAAEL;AAAzB,KACKD,OAAO,KAAK,CAAZ,iBAAiB,iDAAC,+DAAD;AAAK,KAAC,EAAEI,KAAK,CAACE,OAAN,CAAcN,OAAO,IAAI,IAAzB;AAAR,KACbD,QADa,CADtB,EAIKC,OAAO,KAAK,CAAZ,IAAiBD,QAJtB,CADG,CAAP;AAQH,C;;;;;;;;;;;;;;;;;;;;;;ACfD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACmC;AACnC,wCAAe,wCAAyB;AACxC,UAAU,uCAAsB;AAChC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,uBAAuB;AACvB,iBAAiB;AACjB;AACA,CAAC,CAAC,E;;ACjGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACmC;AACnC;AACA;AACA;;AAEA,mDAAe,wCAAyB;AACxC,UAAU,uCAAsB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BF;AAMA;CAGA;;AACe,SAASQ,QAAT,CAAk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P,EAAE,2BAAS;;AAEX;;AAEA;AACA;AACA,aAAa,eAAe;AAC5B;AACA,aAAa,kBAAkB;AAC/B,aAAa,kBAAkB;AAC/B,aAAa,kBAAkB;AAC/B,aAAa,WAAW;AACxB;AACA;AACA,aAAa,QAAQ;AACrB,+CAA+C;AAC/C;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA,IAAI,iCAAe;;AAEnB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,cAAc,aAAa;AAC3B;AACA;AACA;;;AAGA,EAAE,8BAAY;AACd;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,mCAA8B,IAAI,oCAA+B,IAAI,iCAA4B;;AAErH,MAAM,sBAAI,CAAC,iCAAe,yEAAyE;;;AAGnG;AACA,MAAM,sCAAiC;AACvC,MAAM,kCAA6B;AACnC,MAAM,8CAAyC;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA,MAAM,sBAAI,CAAC,iCAAe;;AAE1B;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iCAA4B;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,+BAA+B;AAC1D;AACA,UAAU,yBAAoB;AAC9B;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC,CAAC,wBAAmB;AACrB,mCAA8B;AAC9B;AACA;AACA;;AAEA,yBAAoB;AACpB;AACA,wBAAwB,4BAA4B,sBAAsB,qBAAqB,gCAAgC,qBAAqB,OAAO,oBAAoB,iCAAiC,gCAAgC,mDAAmD,mBAAmB,oBAAoB,OAAO,0BAA0B,sBAAsB,OAAO,qEAAqE,yBAAyB,2BAA2B,qBAAqB,OAAO,0CAA0C,iCAAiC,yBAAyB,2BAA2B,oDAAoD,wBAAwB,qBAAqB,yBAAyB,oBAAoB,OAAO,yDAAyD,yBAAyB,2BAA2B,qBAAqB,OAAO,sCAAsC,yBAAyB,qBAAqB,2BAA2B,oDAAoD,wBAAwB,qBAAqB,oBAAoB,OAAO,sCAAsC,+DAA+D,OAAO,6CAA6C,kGAAkG,kCAAkC,6BAA6B,kEAAkE,qBAAqB,oBAAoB,uBAAuB,OAAO,qCAAqC,yBAAyB,2BAA2B,OAAO,qCAAqC,yBAAyB,2BAA2B,OAAO,+BAA+B,yBAAyB,qBAAqB,2BAA2B,oDAAoD,wBAAwB,qBAAqB,oBAAoB,OAAO;AAC5gE;AACA,G;;ACrNA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACwC;;AAExC,oDAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;;AAGA,IAAI,2BAAsB;AAC1B;AACA;AACA,IAAI,0BAAqB;AACzB;AACA;;AAEA,iBAAiB,qDAAgD;;AAEjE,qDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,E;;ACpDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,8BAA4B;AAC5B;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,oCAAkC;AACtD;AACA,iEAAiE,mCAAiC;AAClG,iDAAiD,qCAAmC;AACpF;AACA;AACA,oBAAoB,0CAAwC;AAC5D,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0EAA0E,mCAAiC;AAC3G,0DAA0D,qCAAmC;;AAE7F,qBAAqB,yBAAyB;AAC9C,sFAAsF,uCAAqC;AAC3H,sEAAsE,qCAAmC;AACzG;AACA;;AAEA;;AAEA;AACA,oDAAoD,qCAAmC;AACvF;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,oBAAoB;AACjC,cAAc,QAAQ;AACtB;AACA;AACA,mBAAmB,2BAA2B;AAC9C;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,6EAA6E,uCAAqC;AAClH,6DAA6D,qCAAmC;AAChG;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA,4BAA4B,2BAAsB;AAClD,oDAAoD,qCAAmC;AACvF;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;;AAEtB,mBAAmB,+BAA+B;AAClD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK,EAAE;;AAEP;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B,mCAAiC;AAC/D;AACA;AACA;AACA,E;;AC5MA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,qCAAmC;AACnC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,kCAAgC;AACpD;AACA,8CAA8C,2CAAyC;AACvF;AACA;AACA,oBAAoB,kCAAgC;AACpD,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oCAAoC,2CAAyC;AAC7E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO,EAAE;AACT;;AAEA;AACA,sCAAsC,2CAAyC;AAC/E;AACA;AACA;AACA,E;;ACjKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,uCAAqC;AACrC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,0CAAwC;AAC5D;AACA,8CAA8C,6CAA2C;AACzF;AACA;AACA,oBAAoB,0CAAwC;AAC5D,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oCAAoC,6CAA2C;AAC/E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO,EAAE;AACT;;AAEA;AACA,sCAAsC,6CAA2C;AACjF;AACA;AACA;AACA,E;;ACjKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACiD;AACxB;AACO;AACE;AAC3B;AACP;AACA;AACA;AACA,E;;AClB+H;AACN;;AAEzH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,IAAI,iCAAe;AACnB;;AAEA,EAAE,8BAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iDAA4C;AACxE;;AAEA;AACA,iBAAiB,mCAAmC;AACpD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA,4BAA4B,iDAA4C;AACxE;AACA;AACA,GAAG;;AAEH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,YAAY,QAAQ;AACpB;;AAEA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA,C;;AC3FA;AACA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","file":"f46badf6a1e485aca95f38418db0645a3911806b-0b32d44e81adc72e994a.js","sourcesContent":["import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blocks_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blocks_compressed'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly Blocks module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.Blocks = {};\n  return Blockly.Blocks;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.Blocks.colour = {};\n  Blockly.Constants = {};\n  Blockly.Constants.Colour = {};\n  Blockly.Constants.Colour.HUE = 20;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"colour_picker\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_colour\",\n      name: \"COLOUR\",\n      colour: \"#ff0000\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_PICKER_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_PICKER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"colour_random\",\n    message0: \"%{BKY_COLOUR_RANDOM_TITLE}\",\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RANDOM_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RANDOM_TOOLTIP}\"\n  }, {\n    type: \"colour_rgb\",\n    message0: \"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"RED\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"GREEN\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BLUE\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RGB_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RGB_TOOLTIP}\"\n  }, {\n    type: \"colour_blend\",\n    message0: \"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"COLOUR1\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"COLOUR2\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"RATIO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_BLEND_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_BLEND_TOOLTIP}\"\n  }]);\n  Blockly.Blocks.lists = {};\n  Blockly.Constants.Lists = {};\n  Blockly.Constants.Lists.HUE = 260;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"lists_create_empty\",\n    message0: \"%{BKY_LISTS_CREATE_EMPTY_TITLE}\",\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_CREATE_EMPTY_HELPURL}\"\n  }, {\n    type: \"lists_repeat\",\n    message0: \"%{BKY_LISTS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"ITEM\"\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REPEAT_HELPURL}\"\n  }, {\n    type: \"lists_reverse\",\n    message0: \"%{BKY_LISTS_REVERSE_MESSAGE0}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Array\",\n    inputsInline: !0,\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REVERSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REVERSE_HELPURL}\"\n  }, {\n    type: \"lists_isEmpty\",\n    message0: \"%{BKY_LISTS_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"lists_length\",\n    message0: \"%{BKY_LISTS_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_LENGTH_HELPURL}\"\n  }]);\n  Blockly.Blocks.lists_create_with = {\n    init: function init() {\n      this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.itemCount_ = 3;\n      this.updateShape_();\n      this.setOutput(!0, \"Array\");\n      this.setMutator(new Blockly.Mutator([\"lists_create_with_item\"]));\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"lists_create_with_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"lists_create_with_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n  Blockly.Blocks.lists_create_with_container = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);\n      this.appendStatementInput(\"STACK\");\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_create_with_item = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_indexOf = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_INDEX_OF_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_INDEX_OF_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.setOutput(!0, \"Number\");\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);\n      this.appendValueInput(\"FIND\").appendField(new Blockly.FieldDropdown(a), \"END\");\n      this.setInputsInline(!0);\n      var b = this;\n      this.setTooltip(function () {\n        return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n      });\n    }\n  };\n  Blockly.Blocks.lists_getIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_GET_INDEX_GET, \"GET\"], [Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE, \"GET_REMOVE\"], [Blockly.Msg.LISTS_GET_INDEX_REMOVE, \"REMOVE\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        c = \"REMOVE\" == c;\n        this.getSourceBlock().updateStatement_(c);\n      });\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(a, \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"GET FROM_START\":\n          case \"GET FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;\n            break;\n\n          case \"GET FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;\n            break;\n\n          case \"GET LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;\n            break;\n\n          case \"GET RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;\n            break;\n\n          case \"GET_REMOVE FROM_START\":\n          case \"GET_REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;\n            break;\n\n          case \"GET_REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;\n            break;\n\n          case \"GET_REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;\n            break;\n\n          case \"GET_REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;\n            break;\n\n          case \"REMOVE FROM_START\":\n          case \"REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;\n            break;\n\n          case \"REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;\n            break;\n\n          case \"REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;\n            break;\n\n          case \"REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + (\"FROM_START\" == d ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"statement\", !this.outputConnection);\n      var b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"statement\");\n      this.updateStatement_(b);\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateStatement_: function updateStatement_(a) {\n      a != !this.outputConnection && (this.unplug(!0, !0), a ? (this.setOutput(!1), this.setPreviousStatement(!0), this.setNextStatement(!0)) : (this.setPreviousStatement(!1), this.setNextStatement(!1), this.setOutput(!0)));\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_setIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_SET_INDEX_SET, \"SET\"], [Blockly.Msg.LISTS_SET_INDEX_INSERT, \"INSERT\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(new Blockly.FieldDropdown(a), \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      this.appendValueInput(\"TO\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"SET FROM_START\":\n          case \"SET FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;\n            break;\n\n          case \"SET FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;\n            break;\n\n          case \"SET LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;\n            break;\n\n          case \"SET RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;\n            break;\n\n          case \"INSERT FROM_START\":\n          case \"INSERT FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;\n            break;\n\n          case \"INSERT FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;\n            break;\n\n          case \"INSERT LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;\n            break;\n\n          case \"INSERT RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.moveInputBefore(\"AT\", \"TO\");\n      this.getInput(\"ORDINAL\") && this.moveInputBefore(\"ORDINAL\", \"TO\");\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n    }\n  };\n  Blockly.Blocks.lists_getSublist = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_sort = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.LISTS_SORT_TITLE,\n        args0: [{\n          type: \"field_dropdown\",\n          name: \"TYPE\",\n          options: [[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC, \"NUMERIC\"], [Blockly.Msg.LISTS_SORT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE, \"IGNORE_CASE\"]]\n        }, {\n          type: \"field_dropdown\",\n          name: \"DIRECTION\",\n          options: [[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING, \"1\"], [Blockly.Msg.LISTS_SORT_ORDER_DESCENDING, \"-1\"]]\n        }, {\n          type: \"input_value\",\n          name: \"LIST\",\n          check: \"Array\"\n        }],\n        output: \"Array\",\n        style: \"list_blocks\",\n        tooltip: Blockly.Msg.LISTS_SORT_TOOLTIP,\n        helpUrl: Blockly.Msg.LISTS_SORT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.lists_split = {\n    init: function init() {\n      var a = this,\n          b = new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT, \"SPLIT\"], [Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST, \"JOIN\"]], function (c) {\n        a.updateType_(c);\n      });\n      this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"INPUT\").setCheck(\"String\").appendField(b, \"MODE\");\n      this.appendValueInput(\"DELIM\").setCheck(\"String\").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.setTooltip(function () {\n        var c = a.getFieldValue(\"MODE\");\n        if (\"SPLIT\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;\n        if (\"JOIN\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;\n        throw Error(\"Unknown mode: \" + c);\n      });\n    },\n    updateType_: function updateType_(a) {\n      if (this.getFieldValue(\"MODE\") != a) {\n        var b = this.getInput(\"INPUT\").connection;\n        b.setShadowDom(null);\n        var c = b.targetBlock();\n        c && (b.disconnect(), c.isShadow() ? c.dispose() : this.bumpNeighbours());\n      }\n\n      \"SPLIT\" == a ? (this.outputConnection.setCheck(\"Array\"), this.getInput(\"INPUT\").setCheck(\"String\")) : (this.outputConnection.setCheck(\"String\"), this.getInput(\"INPUT\").setCheck(\"Array\"));\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"mode\", this.getFieldValue(\"MODE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"mode\"));\n    }\n  };\n  Blockly.Blocks.logic = {};\n  Blockly.Constants.Logic = {};\n  Blockly.Constants.Logic.HUE = 210;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"logic_boolean\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"BOOL\",\n      options: [[\"%{BKY_LOGIC_BOOLEAN_TRUE}\", \"TRUE\"], [\"%{BKY_LOGIC_BOOLEAN_FALSE}\", \"FALSE\"]]\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_BOOLEAN_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_BOOLEAN_HELPURL}\"\n  }, {\n    type: \"controls_if\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    mutator: \"controls_if_mutator\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"controls_ifelse\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    message2: \"%{BKY_CONTROLS_IF_MSG_ELSE} %1\",\n    args2: [{\n      type: \"input_statement\",\n      name: \"ELSE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKYCONTROLS_IF_TOOLTIP_2}\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"logic_compare\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"=\", \"EQ\"], [\"\\u2260\", \"NEQ\"], [\"\\u200F<\", \"LT\"], [\"\\u200F\\u2264\", \"LTE\"], [\"\\u200F>\", \"GT\"], [\"\\u200F\\u2265\", \"GTE\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_COMPARE_HELPURL}\",\n    extensions: [\"logic_compare\", \"logic_op_tooltip\"]\n  }, {\n    type: \"logic_operation\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Boolean\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_LOGIC_OPERATION_AND}\", \"AND\"], [\"%{BKY_LOGIC_OPERATION_OR}\", \"OR\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Boolean\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_OPERATION_HELPURL}\",\n    extensions: [\"logic_op_tooltip\"]\n  }, {\n    type: \"logic_negate\",\n    message0: \"%{BKY_LOGIC_NEGATE_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NEGATE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NEGATE_HELPURL}\"\n  }, {\n    type: \"logic_null\",\n    message0: \"%{BKY_LOGIC_NULL}\",\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NULL_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NULL_HELPURL}\"\n  }, {\n    type: \"logic_ternary\",\n    message0: \"%{BKY_LOGIC_TERNARY_CONDITION} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_LOGIC_TERNARY_IF_TRUE} %1\",\n    args1: [{\n      type: \"input_value\",\n      name: \"THEN\"\n    }],\n    message2: \"%{BKY_LOGIC_TERNARY_IF_FALSE} %1\",\n    args2: [{\n      type: \"input_value\",\n      name: \"ELSE\"\n    }],\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_TERNARY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_TERNARY_HELPURL}\",\n    extensions: [\"logic_ternary\"]\n  }]);\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_if_if\",\n    message0: \"%{BKY_CONTROLS_IF_IF_TITLE_IF}\",\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_IF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_elseif\",\n    message0: \"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}\",\n    previousStatement: null,\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_else\",\n    message0: \"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}\",\n    previousStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}\"\n  }]);\n  Blockly.Constants.Logic.TOOLTIPS_BY_OP = {\n    EQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}\",\n    NEQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}\",\n    LT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}\",\n    LTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}\",\n    GT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}\",\n    GTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}\",\n    AND: \"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}\",\n    OR: \"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}\"\n  };\n  Blockly.Extensions.register(\"logic_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Logic.TOOLTIPS_BY_OP));\n  Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN = {\n    elseifCount_: 0,\n    elseCount_: 0,\n    suppressPrefixSuffix: !0,\n    mutationToDom: function mutationToDom() {\n      if (!this.elseifCount_ && !this.elseCount_) return null;\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      this.elseifCount_ && a.setAttribute(\"elseif\", this.elseifCount_);\n      this.elseCount_ && a.setAttribute(\"else\", 1);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.elseifCount_ = parseInt(a.getAttribute(\"elseif\"), 10) || 0;\n      this.elseCount_ = parseInt(a.getAttribute(\"else\"), 10) || 0;\n      this.rebuildShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"controls_if_if\");\n      b.initSvg();\n\n      for (var c = b.nextConnection, d = 1; d <= this.elseifCount_; d++) {\n        var e = a.newBlock(\"controls_if_elseif\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      this.elseCount_ && (a = a.newBlock(\"controls_if_else\"), a.initSvg(), c.connect(a.previousConnection));\n      return b;\n    },\n    compose: function compose(a) {\n      a = a.nextConnection.targetBlock();\n      this.elseCount_ = this.elseifCount_ = 0;\n\n      for (var b = [null], c = [null], d = null; a && !a.isInsertionMarker();) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            this.elseifCount_++;\n            b.push(a.valueConnection_);\n            c.push(a.statementConnection_);\n            break;\n\n          case \"controls_if_else\":\n            this.elseCount_++;\n            d = a.statementConnection_;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(b, c, d);\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.nextConnection.targetBlock();\n\n      for (var b = 1; a;) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            var c = this.getInput(\"IF\" + b),\n                d = this.getInput(\"DO\" + b);\n            a.valueConnection_ = c && c.connection.targetConnection;\n            a.statementConnection_ = d && d.connection.targetConnection;\n            b++;\n            break;\n\n          case \"controls_if_else\":\n            d = this.getInput(\"ELSE\");\n            a.statementConnection_ = d && d.connection.targetConnection;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    rebuildShape_: function rebuildShape_() {\n      var a = [null],\n          b = [null],\n          c = null;\n      this.getInput(\"ELSE\") && (c = this.getInput(\"ELSE\").connection.targetConnection);\n\n      for (var d = 1; this.getInput(\"IF\" + d);) {\n        var e = this.getInput(\"IF\" + d),\n            f = this.getInput(\"DO\" + d);\n        a.push(e.connection.targetConnection);\n        b.push(f.connection.targetConnection);\n        d++;\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(a, b, c);\n    },\n    updateShape_: function updateShape_() {\n      this.getInput(\"ELSE\") && this.removeInput(\"ELSE\");\n\n      for (var a = 1; this.getInput(\"IF\" + a);) {\n        this.removeInput(\"IF\" + a), this.removeInput(\"DO\" + a), a++;\n      }\n\n      for (a = 1; a <= this.elseifCount_; a++) {\n        this.appendValueInput(\"IF\" + a).setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF), this.appendStatementInput(\"DO\" + a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);\n      }\n\n      this.elseCount_ && this.appendStatementInput(\"ELSE\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE);\n    },\n    reconnectChildBlocks_: function reconnectChildBlocks_(a, b, c) {\n      for (var d = 1; d <= this.elseifCount_; d++) {\n        Blockly.Mutator.reconnect(a[d], this, \"IF\" + d), Blockly.Mutator.reconnect(b[d], this, \"DO\" + d);\n      }\n\n      Blockly.Mutator.reconnect(c, this, \"ELSE\");\n    }\n  };\n  Blockly.Extensions.registerMutator(\"controls_if_mutator\", Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN, null, [\"controls_if_elseif\", \"controls_if_else\"]);\n\n  Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION = function () {\n    this.setTooltip(function () {\n      if (this.elseifCount_ || this.elseCount_) {\n        if (!this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;\n        if (this.elseifCount_ && !this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;\n        if (this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_4;\n      } else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;\n\n      return \"\";\n    }.bind(this));\n  };\n\n  Blockly.Extensions.register(\"controls_if_tooltip\", Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN = {\n    onchange: function onchange(a) {\n      this.prevBlocks_ || (this.prevBlocks_ = [null, null]);\n      var b = this.getInputTargetBlock(\"A\"),\n          c = this.getInputTargetBlock(\"B\");\n      b && c && !this.workspace.connectionChecker.doTypeChecks(b.outputConnection, c.outputConnection) && (Blockly.Events.setGroup(a.group), a = this.prevBlocks_[0], a !== b && (b.unplug(), !a || a.isDisposed() || a.isShadow() || this.getInput(\"A\").connection.connect(a.outputConnection)), b = this.prevBlocks_[1], b !== c && (c.unplug(), !b || b.isDisposed() || b.isShadow() || this.getInput(\"B\").connection.connect(b.outputConnection)), this.bumpNeighbours(), Blockly.Events.setGroup(!1));\n      this.prevBlocks_[0] = this.getInputTargetBlock(\"A\");\n      this.prevBlocks_[1] = this.getInputTargetBlock(\"B\");\n    }\n  };\n\n  Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN);\n  };\n\n  Blockly.Extensions.register(\"logic_compare\", Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN = {\n    prevParentConnection_: null,\n    onchange: function onchange(a) {\n      var b = this.getInputTargetBlock(\"THEN\"),\n          c = this.getInputTargetBlock(\"ELSE\"),\n          d = this.outputConnection.targetConnection;\n      if ((b || c) && d) for (var e = 0; 2 > e; e++) {\n        var f = 1 == e ? b : c;\n        f && !f.workspace.connectionChecker.doTypeChecks(f.outputConnection, d) && (Blockly.Events.setGroup(a.group), d === this.prevParentConnection_ ? (this.unplug(), d.getSourceBlock().bumpNeighbours()) : (f.unplug(), f.bumpNeighbours()), Blockly.Events.setGroup(!1));\n      }\n      this.prevParentConnection_ = d;\n    }\n  };\n  Blockly.Extensions.registerMixin(\"logic_ternary\", Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);\n  Blockly.Blocks.loops = {};\n  Blockly.Constants.Loops = {};\n  Blockly.Constants.Loops.HUE = 120;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_repeat_ext\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"TIMES\",\n      check: \"Number\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_repeat\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"field_number\",\n      name: \"TIMES\",\n      value: 10,\n      min: 0,\n      precision: 1\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_whileUntil\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"MODE\",\n      options: [[\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}\", \"WHILE\"], [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}\", \"UNTIL\"]]\n    }, {\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}\",\n    extensions: [\"controls_whileUntil_tooltip\"]\n  }, {\n    type: \"controls_for\",\n    message0: \"%{BKY_CONTROLS_FOR_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BY\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    inputsInline: !0,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOR_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_for_tooltip\"]\n  }, {\n    type: \"controls_forEach\",\n    message0: \"%{BKY_CONTROLS_FOREACH_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOREACH_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_forEach_tooltip\"]\n  }, {\n    type: \"controls_flow_statements\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"FLOW\",\n      options: [[\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}\", \"BREAK\"], [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}\", \"CONTINUE\"]]\n    }],\n    previousStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}\",\n    extensions: [\"controls_flow_tooltip\", \"controls_flow_in_loop_check\"]\n  }]);\n  Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS = {\n    WHILE: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}\",\n    UNTIL: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}\"\n  };\n  Blockly.Extensions.register(\"controls_whileUntil_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"MODE\", Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS));\n  Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS = {\n    BREAK: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}\",\n    CONTINUE: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}\"\n  };\n  Blockly.Extensions.register(\"controls_flow_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"FLOW\", Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));\n  Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getField(\"VAR\").getVariable(),\n            c = b.name;\n\n        if (!this.isCollapsed() && null != c) {\n          var d = {\n            enabled: !0\n          };\n          d.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", c);\n          b = Blockly.Variables.generateVariableFieldDom(b);\n          c = Blockly.utils.xml.createElement(\"block\");\n          c.setAttribute(\"type\", \"variables_get\");\n          c.appendChild(b);\n          d.callback = Blockly.ContextMenu.callbackFactory(this, c);\n          a.push(d);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"contextMenu_newGetVariableBlock\", Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);\n  Blockly.Extensions.register(\"controls_for_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOR_TOOLTIP}\", \"VAR\"));\n  Blockly.Extensions.register(\"controls_forEach_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOREACH_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n    LOOP_TYPES: [\"controls_repeat\", \"controls_repeat_ext\", \"controls_forEach\", \"controls_for\", \"controls_whileUntil\"],\n    suppressPrefixSuffix: !0,\n    getSurroundLoop: function getSurroundLoop(a) {\n      do {\n        if (-1 != Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(a.type)) return a;\n        a = a.getSurroundParent();\n      } while (a);\n\n      return null;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging() && a.type == Blockly.Events.BLOCK_MOVE) {\n        var b = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);\n        this.setWarningText(b ? null : Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING);\n\n        if (!this.isInFlyout) {\n          var c = Blockly.Events.getGroup();\n          Blockly.Events.setGroup(a.group);\n          this.setEnabled(b);\n          Blockly.Events.setGroup(c);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"controls_flow_in_loop_check\", Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);\n  Blockly.Blocks.math = {};\n  Blockly.Constants.Math = {};\n  Blockly.Constants.Math.HUE = 230;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"math_number\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_number\",\n      name: \"NUM\",\n      value: 0\n    }],\n    output: \"Number\",\n    helpUrl: \"%{BKY_MATH_NUMBER_HELPURL}\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_NUMBER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"math_arithmetic\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"], [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"], [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"], [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"], [\"%{BKY_MATH_POWER_SYMBOL}\", \"POWER\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_single\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_SINGLE_OP_ROOT}\", \"ROOT\"], [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", \"ABS\"], [\"-\", \"NEG\"], [\"ln\", \"LN\"], [\"log10\", \"LOG10\"], [\"e^\", \"EXP\"], [\"10^\", \"POW10\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_SINGLE_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_trig\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_TRIG_SIN}\", \"SIN\"], [\"%{BKY_MATH_TRIG_COS}\", \"COS\"], [\"%{BKY_MATH_TRIG_TAN}\", \"TAN\"], [\"%{BKY_MATH_TRIG_ASIN}\", \"ASIN\"], [\"%{BKY_MATH_TRIG_ACOS}\", \"ACOS\"], [\"%{BKY_MATH_TRIG_ATAN}\", \"ATAN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_TRIG_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_constant\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"CONSTANT\",\n      options: [[\"\\u03C0\", \"PI\"], [\"e\", \"E\"], [\"\\u03C6\", \"GOLDEN_RATIO\"], [\"sqrt(2)\", \"SQRT2\"], [\"sqrt(\\xBD)\", \"SQRT1_2\"], [\"\\u221E\", \"INFINITY\"]]\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTANT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTANT_HELPURL}\"\n  }, {\n    type: \"math_number_property\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"input_value\",\n      name: \"NUMBER_TO_CHECK\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"PROPERTY\",\n      options: [[\"%{BKY_MATH_IS_EVEN}\", \"EVEN\"], [\"%{BKY_MATH_IS_ODD}\", \"ODD\"], [\"%{BKY_MATH_IS_PRIME}\", \"PRIME\"], [\"%{BKY_MATH_IS_WHOLE}\", \"WHOLE\"], [\"%{BKY_MATH_IS_POSITIVE}\", \"POSITIVE\"], [\"%{BKY_MATH_IS_NEGATIVE}\", \"NEGATIVE\"], [\"%{BKY_MATH_IS_DIVISIBLE_BY}\", \"DIVISIBLE_BY\"]]\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_IS_TOOLTIP}\",\n    mutator: \"math_is_divisibleby_mutator\"\n  }, {\n    type: \"math_change\",\n    message0: \"%{BKY_MATH_CHANGE_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_MATH_CHANGE_TITLE_ITEM}\"\n    }, {\n      type: \"input_value\",\n      name: \"DELTA\",\n      check: \"Number\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_MATH_CHANGE_HELPURL}\",\n    extensions: [\"math_change_tooltip\"]\n  }, {\n    type: \"math_round\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ROUND_OPERATOR_ROUND}\", \"ROUND\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}\", \"ROUNDUP\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}\", \"ROUNDDOWN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ROUND_HELPURL}\",\n    tooltip: \"%{BKY_MATH_ROUND_TOOLTIP}\"\n  }, {\n    type: \"math_on_list\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ONLIST_OPERATOR_SUM}\", \"SUM\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MIN}\", \"MIN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MAX}\", \"MAX\"], [\"%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}\", \"AVERAGE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}\", \"MEDIAN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MODE}\", \"MODE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}\", \"STD_DEV\"], [\"%{BKY_MATH_ONLIST_OPERATOR_RANDOM}\", \"RANDOM\"]]\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ONLIST_HELPURL}\",\n    mutator: \"math_modes_of_list_mutator\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_modulo\",\n    message0: \"%{BKY_MATH_MODULO_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"DIVIDEND\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"DIVISOR\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_MODULO_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_MODULO_HELPURL}\"\n  }, {\n    type: \"math_constrain\",\n    message0: \"%{BKY_MATH_CONSTRAIN_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"LOW\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"HIGH\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTRAIN_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTRAIN_HELPURL}\"\n  }, {\n    type: \"math_random_int\",\n    message0: \"%{BKY_MATH_RANDOM_INT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_INT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_INT_HELPURL}\"\n  }, {\n    type: \"math_random_float\",\n    message0: \"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}\",\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_FLOAT_HELPURL}\"\n  }, {\n    type: \"math_atan2\",\n    message0: \"%{BKY_MATH_ATAN2_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"X\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"Y\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_ATAN2_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_ATAN2_HELPURL}\"\n  }]);\n  Blockly.Constants.Math.TOOLTIPS_BY_OP = {\n    ADD: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}\",\n    MINUS: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}\",\n    MULTIPLY: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}\",\n    DIVIDE: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}\",\n    POWER: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}\",\n    ROOT: \"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}\",\n    ABS: \"%{BKY_MATH_SINGLE_TOOLTIP_ABS}\",\n    NEG: \"%{BKY_MATH_SINGLE_TOOLTIP_NEG}\",\n    LN: \"%{BKY_MATH_SINGLE_TOOLTIP_LN}\",\n    LOG10: \"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}\",\n    EXP: \"%{BKY_MATH_SINGLE_TOOLTIP_EXP}\",\n    POW10: \"%{BKY_MATH_SINGLE_TOOLTIP_POW10}\",\n    SIN: \"%{BKY_MATH_TRIG_TOOLTIP_SIN}\",\n    COS: \"%{BKY_MATH_TRIG_TOOLTIP_COS}\",\n    TAN: \"%{BKY_MATH_TRIG_TOOLTIP_TAN}\",\n    ASIN: \"%{BKY_MATH_TRIG_TOOLTIP_ASIN}\",\n    ACOS: \"%{BKY_MATH_TRIG_TOOLTIP_ACOS}\",\n    ATAN: \"%{BKY_MATH_TRIG_TOOLTIP_ATAN}\",\n    SUM: \"%{BKY_MATH_ONLIST_TOOLTIP_SUM}\",\n    MIN: \"%{BKY_MATH_ONLIST_TOOLTIP_MIN}\",\n    MAX: \"%{BKY_MATH_ONLIST_TOOLTIP_MAX}\",\n    AVERAGE: \"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}\",\n    MEDIAN: \"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}\",\n    MODE: \"%{BKY_MATH_ONLIST_TOOLTIP_MODE}\",\n    STD_DEV: \"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}\",\n    RANDOM: \"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}\"\n  };\n  Blockly.Extensions.register(\"math_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Math.TOOLTIPS_BY_OP));\n  Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = \"DIVISIBLE_BY\" == this.getFieldValue(\"PROPERTY\");\n      a.setAttribute(\"divisor_input\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"true\" == a.getAttribute(\"divisor_input\");\n      this.updateShape_(a);\n    },\n    updateShape_: function updateShape_(a) {\n      var b = this.getInput(\"DIVISOR\");\n      a ? b || this.appendValueInput(\"DIVISOR\").setCheck(\"Number\") : b && this.removeInput(\"DIVISOR\");\n    }\n  };\n\n  Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION = function () {\n    this.getField(\"PROPERTY\").setValidator(function (a) {\n      a = \"DIVISIBLE_BY\" == a;\n      this.getSourceBlock().updateShape_(a);\n    });\n  };\n\n  Blockly.Extensions.registerMutator(\"math_is_divisibleby_mutator\", Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN, Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);\n  Blockly.Extensions.register(\"math_change_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_MATH_CHANGE_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN = {\n    updateType_: function updateType_(a) {\n      \"MODE\" == a ? this.outputConnection.setCheck(\"Array\") : this.outputConnection.setCheck(\"Number\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"op\", this.getFieldValue(\"OP\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"op\"));\n    }\n  };\n\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION = function () {\n    this.getField(\"OP\").setValidator(function (a) {\n      this.updateType_(a);\n    }.bind(this));\n  };\n\n  Blockly.Extensions.registerMutator(\"math_modes_of_list_mutator\", Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN, Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);\n  Blockly.Blocks.procedures = {};\n  Blockly.Blocks.procedures_defnoreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: function setStatements_(a) {\n      this.hasStatements_ !== a && (a ? (this.appendStatementInput(\"STACK\").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO), this.getInput(\"RETURN\") && this.moveInputBefore(\"STACK\", \"RETURN\")) : this.removeInput(\"STACK\", !0), this.hasStatements_ = a);\n    },\n    updateParams_: function updateParams_() {\n      var a = \"\";\n      this.arguments_.length && (a = Blockly.Msg.PROCEDURES_BEFORE_PARAMS + \" \" + this.arguments_.join(\", \"));\n      Blockly.Events.disable();\n\n      try {\n        this.setFieldValue(a, \"PARAMS\");\n      } finally {\n        Blockly.Events.enable();\n      }\n    },\n    mutationToDom: function mutationToDom(a) {\n      var b = Blockly.utils.xml.createElement(\"mutation\");\n      a && b.setAttribute(\"name\", this.getFieldValue(\"NAME\"));\n\n      for (var c = 0; c < this.argumentVarModels_.length; c++) {\n        var d = Blockly.utils.xml.createElement(\"arg\"),\n            e = this.argumentVarModels_[c];\n        d.setAttribute(\"name\", e.name);\n        d.setAttribute(\"varid\", e.getId());\n        a && this.paramIds_ && d.setAttribute(\"paramId\", this.paramIds_[c]);\n        b.appendChild(d);\n      }\n\n      this.hasStatements_ || b.setAttribute(\"statements\", \"false\");\n      return b;\n    },\n    domToMutation: function domToMutation(a) {\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = 0, c; c = a.childNodes[b]; b++) {\n        if (\"arg\" == c.nodeName.toLowerCase()) {\n          var d = c.getAttribute(\"name\");\n          c = c.getAttribute(\"varid\") || c.getAttribute(\"varId\");\n          this.arguments_.push(d);\n          c = Blockly.Variables.getOrCreateVariablePackage(this.workspace, c, d, \"\");\n          null != c ? this.argumentVarModels_.push(c) : console.log(\"Failed to create a variable with name \" + d + \", ignoring.\");\n        }\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      this.setStatements_(\"false\" !== a.getAttribute(\"statements\"));\n    },\n    decompose: function decompose(a) {\n      var b = Blockly.utils.xml.createElement(\"block\");\n      b.setAttribute(\"type\", \"procedures_mutatorcontainer\");\n      var c = Blockly.utils.xml.createElement(\"statement\");\n      c.setAttribute(\"name\", \"STACK\");\n      b.appendChild(c);\n\n      for (var d = 0; d < this.arguments_.length; d++) {\n        var e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", \"procedures_mutatorarg\");\n        var f = Blockly.utils.xml.createElement(\"field\");\n        f.setAttribute(\"name\", \"NAME\");\n        var g = Blockly.utils.xml.createTextNode(this.arguments_[d]);\n        f.appendChild(g);\n        e.appendChild(f);\n        f = Blockly.utils.xml.createElement(\"next\");\n        e.appendChild(f);\n        c.appendChild(e);\n        c = f;\n      }\n\n      a = Blockly.Xml.domToBlock(b, a);\n      \"procedures_defreturn\" == this.type ? a.setFieldValue(this.hasStatements_, \"STATEMENTS\") : a.removeInput(\"STATEMENT_INPUT\");\n      Blockly.Procedures.mutateCallers(this);\n      return a;\n    },\n    compose: function compose(a) {\n      this.arguments_ = [];\n      this.paramIds_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = a.getInputTargetBlock(\"STACK\"); b && !b.isInsertionMarker();) {\n        var c = b.getFieldValue(\"NAME\");\n        this.arguments_.push(c);\n        c = this.workspace.getVariable(c, \"\");\n        this.argumentVarModels_.push(c);\n        this.paramIds_.push(b.id);\n        b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      a = a.getFieldValue(\"STATEMENTS\");\n      if (null !== a && (a = \"TRUE\" == a, this.hasStatements_ != a)) if (a) this.setStatements_(!0), Blockly.Mutator.reconnect(this.statementConnection_, this, \"STACK\"), this.statementConnection_ = null;else {\n        a = this.getInput(\"STACK\").connection;\n        if (this.statementConnection_ = a.targetConnection) a = a.targetBlock(), a.unplug(), a.bumpNeighbours();\n        this.setStatements_(!1);\n      }\n    },\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !1];\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    renameVarById: function renameVarById(a, b) {\n      var c = this.workspace.getVariableById(a);\n\n      if (\"\" == c.type) {\n        c = c.name;\n        b = this.workspace.getVariableById(b);\n\n        for (var d = !1, e = 0; e < this.argumentVarModels_.length; e++) {\n          this.argumentVarModels_[e].getId() == a && (this.arguments_[e] = b.name, this.argumentVarModels_[e] = b, d = !0);\n        }\n\n        d && (this.displayRenamedVar_(c, b.name), Blockly.Procedures.mutateCallers(this));\n      }\n    },\n    updateVarName: function updateVarName(a) {\n      for (var b = a.name, c = !1, d = 0; d < this.argumentVarModels_.length; d++) {\n        if (this.argumentVarModels_[d].getId() == a.getId()) {\n          var e = this.arguments_[d];\n          this.arguments_[d] = b;\n          c = !0;\n        }\n      }\n\n      c && (this.displayRenamedVar_(e, b), Blockly.Procedures.mutateCallers(this));\n    },\n    displayRenamedVar_: function displayRenamedVar_(a, b) {\n      this.updateParams_();\n      if (this.mutator && this.mutator.isVisible()) for (var c = this.mutator.workspace_.getAllBlocks(!1), d = 0, e; e = c[d]; d++) {\n        \"procedures_mutatorarg\" == e.type && Blockly.Names.equals(a, e.getFieldValue(\"NAME\")) && e.setFieldValue(b, \"NAME\");\n      }\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = {\n          enabled: !0\n        },\n            c = this.getFieldValue(\"NAME\");\n        b.text = Blockly.Msg.PROCEDURES_CREATE_DO.replace(\"%1\", c);\n        var d = Blockly.utils.xml.createElement(\"mutation\");\n        d.setAttribute(\"name\", c);\n\n        for (c = 0; c < this.arguments_.length; c++) {\n          var e = Blockly.utils.xml.createElement(\"arg\");\n          e.setAttribute(\"name\", this.arguments_[c]);\n          d.appendChild(e);\n        }\n\n        c = Blockly.utils.xml.createElement(\"block\");\n        c.setAttribute(\"type\", this.callType_);\n        c.appendChild(d);\n        b.callback = Blockly.ContextMenu.callbackFactory(this, c);\n        a.push(b);\n        if (!this.isCollapsed()) for (c = 0; c < this.argumentVarModels_.length; c++) {\n          b = {\n            enabled: !0\n          }, d = this.argumentVarModels_[c], b.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", d.name), d = Blockly.Variables.generateVariableFieldDom(d), e = Blockly.utils.xml.createElement(\"block\"), e.setAttribute(\"type\", \"variables_get\"), e.appendChild(d), b.callback = Blockly.ContextMenu.callbackFactory(this, e), a.push(b);\n        }\n      }\n    },\n    callType_: \"procedures_callnoreturn\"\n  };\n  Blockly.Blocks.procedures_defreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.appendValueInput(\"RETURN\").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: Blockly.Blocks.procedures_defnoreturn.setStatements_,\n    updateParams_: Blockly.Blocks.procedures_defnoreturn.updateParams_,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    decompose: Blockly.Blocks.procedures_defnoreturn.decompose,\n    compose: Blockly.Blocks.procedures_defnoreturn.compose,\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !0];\n    },\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    updateVarName: Blockly.Blocks.procedures_defnoreturn.updateVarName,\n    displayRenamedVar_: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType_: \"procedures_callreturn\"\n  };\n  Blockly.Blocks.procedures_mutatorcontainer = {\n    init: function init() {\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);\n      this.appendStatementInput(\"STACK\");\n      this.appendDummyInput(\"STATEMENT_INPUT\").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox(\"TRUE\"), \"STATEMENTS\");\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.procedures_mutatorarg = {\n    init: function init() {\n      var a = new Blockly.FieldTextInput(Blockly.Procedures.DEFAULT_ARG, this.validator_);\n      a.oldShowEditorFn_ = a.showEditor_;\n\n      a.showEditor_ = function () {\n        this.createdVariables_ = [];\n        this.oldShowEditorFn_();\n      };\n\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(a, \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);\n      this.contextMenu = !1;\n      a.onFinishEditing_ = this.deleteIntermediateVars_;\n      a.createdVariables_ = [];\n      a.onFinishEditing_(\"x\");\n    },\n    validator_: function validator_(a) {\n      var b = this.getSourceBlock(),\n          c = Blockly.Mutator.findParentWs(b.workspace);\n      a = a.replace(/[\\s\\xa0]+/g, \" \").replace(/^ | $/g, \"\");\n      if (!a) return null;\n\n      for (var d = (b.workspace.targetWorkspace || b.workspace).getAllBlocks(!1), e = a.toLowerCase(), f = 0; f < d.length; f++) {\n        if (d[f].id != this.getSourceBlock().id) {\n          var g = d[f].getFieldValue(\"NAME\");\n          if (g && g.toLowerCase() == e) return null;\n        }\n      }\n\n      if (b.isInFlyout) return a;\n      (b = c.getVariable(a, \"\")) && b.name != a && c.renameVariableById(b.getId(), a);\n      b || (b = c.createVariable(a, \"\")) && this.createdVariables_ && this.createdVariables_.push(b);\n      return a;\n    },\n    deleteIntermediateVars_: function deleteIntermediateVars_(a) {\n      var b = Blockly.Mutator.findParentWs(this.getSourceBlock().workspace);\n      if (b) for (var c = 0; c < this.createdVariables_.length; c++) {\n        var d = this.createdVariables_[c];\n        d.name != a && b.deleteVariableById(d.getId());\n      }\n    }\n  };\n  Blockly.Blocks.procedures_callnoreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: function getProcedureCall() {\n      return this.getFieldValue(\"NAME\");\n    },\n    renameProcedure: function renameProcedure(a, b) {\n      Blockly.Names.equals(a, this.getProcedureCall()) && (this.setFieldValue(b, \"NAME\"), this.setTooltip((this.outputConnection ? Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP : Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace(\"%1\", b)));\n    },\n    setProcedureParameters_: function setProcedureParameters_(a, b) {\n      var c = Blockly.Procedures.getDefinition(this.getProcedureCall(), this.workspace),\n          d = c && c.mutator && c.mutator.isVisible();\n      d || (this.quarkConnections_ = {}, this.quarkIds_ = null);\n      if (b) if (a.join(\"\\n\") == this.arguments_.join(\"\\n\")) this.quarkIds_ = b;else {\n        if (b.length != a.length) throw RangeError(\"paramNames and paramIds must be the same length.\");\n        this.setCollapsed(!1);\n        this.quarkIds_ || (this.quarkConnections_ = {}, this.quarkIds_ = []);\n        c = this.rendered;\n        this.rendered = !1;\n\n        for (var e = 0; e < this.arguments_.length; e++) {\n          var f = this.getInput(\"ARG\" + e);\n          f && (f = f.connection.targetConnection, this.quarkConnections_[this.quarkIds_[e]] = f, d && f && -1 == b.indexOf(this.quarkIds_[e]) && (f.disconnect(), f.getSourceBlock().bumpNeighbours()));\n        }\n\n        this.arguments_ = [].concat(a);\n        this.argumentVarModels_ = [];\n\n        for (e = 0; e < this.arguments_.length; e++) {\n          a = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, this.arguments_[e], \"\"), this.argumentVarModels_.push(a);\n        }\n\n        this.updateShape_();\n        if (this.quarkIds_ = b) for (e = 0; e < this.arguments_.length; e++) {\n          b = this.quarkIds_[e], b in this.quarkConnections_ && (f = this.quarkConnections_[b], Blockly.Mutator.reconnect(f, this, \"ARG\" + e) || delete this.quarkConnections_[b]);\n        }\n        (this.rendered = c) && this.render();\n      }\n    },\n    updateShape_: function updateShape_() {\n      for (var a = 0; a < this.arguments_.length; a++) {\n        var b = this.getField(\"ARGNAME\" + a);\n\n        if (b) {\n          Blockly.Events.disable();\n\n          try {\n            b.setValue(this.arguments_[a]);\n          } finally {\n            Blockly.Events.enable();\n          }\n        } else b = new Blockly.FieldLabel(this.arguments_[a]), this.appendValueInput(\"ARG\" + a).setAlign(Blockly.ALIGN_RIGHT).appendField(b, \"ARGNAME\" + a).init();\n      }\n\n      for (; this.getInput(\"ARG\" + a);) {\n        this.removeInput(\"ARG\" + a), a++;\n      }\n\n      if (a = this.getInput(\"TOPROW\")) this.arguments_.length ? this.getField(\"WITH\") || (a.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS, \"WITH\"), a.init()) : this.getField(\"WITH\") && a.removeField(\"WITH\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"name\", this.getProcedureCall());\n\n      for (var b = 0; b < this.arguments_.length; b++) {\n        var c = Blockly.utils.xml.createElement(\"arg\");\n        c.setAttribute(\"name\", this.arguments_[b]);\n        a.appendChild(c);\n      }\n\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = a.getAttribute(\"name\");\n      this.renameProcedure(this.getProcedureCall(), b);\n      b = [];\n\n      for (var c = [], d = 0, e; e = a.childNodes[d]; d++) {\n        \"arg\" == e.nodeName.toLowerCase() && (b.push(e.getAttribute(\"name\")), c.push(e.getAttribute(\"paramId\")));\n      }\n\n      this.setProcedureParameters_(b, c);\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace && !this.workspace.isFlyout && a.recordUndo) if (a.type == Blockly.Events.BLOCK_CREATE && -1 != a.ids.indexOf(this.id)) {\n        var b = this.getProcedureCall();\n        b = Blockly.Procedures.getDefinition(b, this.workspace);\n        !b || b.type == this.defType_ && JSON.stringify(b.getVars()) == JSON.stringify(this.arguments_) || (b = null);\n\n        if (!b) {\n          Blockly.Events.setGroup(a.group);\n          a = Blockly.utils.xml.createElement(\"xml\");\n          b = Blockly.utils.xml.createElement(\"block\");\n          b.setAttribute(\"type\", this.defType_);\n          var c = this.getRelativeToSurfaceXY(),\n              d = c.y + 2 * Blockly.SNAP_RADIUS;\n          b.setAttribute(\"x\", c.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1));\n          b.setAttribute(\"y\", d);\n          c = this.mutationToDom();\n          b.appendChild(c);\n          c = Blockly.utils.xml.createElement(\"field\");\n          c.setAttribute(\"name\", \"NAME\");\n          d = this.getProcedureCall();\n          d || (d = Blockly.Procedures.findLegalName(\"\", this), this.renameProcedure(\"\", d));\n          c.appendChild(Blockly.utils.xml.createTextNode(d));\n          b.appendChild(c);\n          a.appendChild(b);\n          Blockly.Xml.domToWorkspace(a, this.workspace);\n          Blockly.Events.setGroup(!1);\n        }\n      } else a.type == Blockly.Events.BLOCK_DELETE ? (b = this.getProcedureCall(), b = Blockly.Procedures.getDefinition(b, this.workspace), b || (Blockly.Events.setGroup(a.group), this.dispose(!0), Blockly.Events.setGroup(!1))) : a.type == Blockly.Events.CHANGE && \"disabled\" == a.element && (b = this.getProcedureCall(), (b = Blockly.Procedures.getDefinition(b, this.workspace)) && b.id == a.blockId && ((b = Blockly.Events.getGroup()) && console.log(\"Saw an existing group while responding to a definition change\"), Blockly.Events.setGroup(a.group), a.newValue ? (this.previousEnabledState_ = this.isEnabled(), this.setEnabled(!1)) : this.setEnabled(this.previousEnabledState_), Blockly.Events.setGroup(b)));\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (this.workspace.isMovable()) {\n        var b = {\n          enabled: !0\n        };\n        b.text = Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;\n        var c = this.getProcedureCall(),\n            d = this.workspace;\n\n        b.callback = function () {\n          var e = Blockly.Procedures.getDefinition(c, d);\n          e && (d.centerOnBlock(e.id), e.select());\n        };\n\n        a.push(b);\n      }\n    },\n    defType_: \"procedures_defnoreturn\"\n  };\n  Blockly.Blocks.procedures_callreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setOutput(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters_: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,\n    updateShape_: Blockly.Blocks.procedures_callnoreturn.updateShape_,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVars: Blockly.Blocks.procedures_callnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType_: \"procedures_defreturn\"\n  };\n  Blockly.Blocks.procedures_ifreturn = {\n    init: function init() {\n      this.appendValueInput(\"CONDITION\").setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);\n      this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);\n      this.hasReturnValue_ = !0;\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"value\", Number(this.hasReturnValue_));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.hasReturnValue_ = 1 == a.getAttribute(\"value\");\n      this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN));\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging()) {\n        a = !1;\n        var b = this;\n\n        do {\n          if (-1 != this.FUNCTION_TYPES.indexOf(b.type)) {\n            a = !0;\n            break;\n          }\n\n          b = b.getSurroundParent();\n        } while (b);\n\n        a ? (\"procedures_defnoreturn\" == b.type && this.hasReturnValue_ ? (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !1) : \"procedures_defreturn\" != b.type || this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !0), this.setWarningText(null), this.isInFlyout || this.setEnabled(!0)) : (this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING), this.isInFlyout || this.getInheritedDisabled() || this.setEnabled(!1));\n      }\n    },\n    FUNCTION_TYPES: [\"procedures_defnoreturn\", \"procedures_defreturn\"]\n  };\n  Blockly.Blocks.texts = {};\n  Blockly.Constants.Text = {};\n  Blockly.Constants.Text.HUE = 160;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"text\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_input\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"text_quotes\", \"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_multiline\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_image\",\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=\",\n      width: 12,\n      height: 17,\n      alt: \"\\xB6\"\n    }, {\n      type: \"field_multilinetext\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_join\",\n    message0: \"\",\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_JOIN_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_JOIN_TOOLTIP}\",\n    mutator: \"text_join_mutator\"\n  }, {\n    type: \"text_create_join_container\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2\",\n    args0: [{\n      type: \"input_dummy\"\n    }, {\n      type: \"input_statement\",\n      name: \"STACK\"\n    }],\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_create_join_item\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_append\",\n    message0: \"%{BKY_TEXT_APPEND_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_TEXT_APPEND_VARIABLE}\"\n    }, {\n      type: \"input_value\",\n      name: \"TEXT\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    extensions: [\"text_append_tooltip\"]\n  }, {\n    type: \"text_length\",\n    message0: \"%{BKY_TEXT_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_LENGTH_HELPURL}\"\n  }, {\n    type: \"text_isEmpty\",\n    message0: \"%{BKY_TEXT_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"text_indexOf\",\n    message0: \"%{BKY_TEXT_INDEXOF_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"END\",\n      options: [[\"%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_INDEXOF_OPERATOR_LAST}\", \"LAST\"]]\n    }, {\n      type: \"input_value\",\n      name: \"FIND\",\n      check: \"String\"\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_INDEXOF_HELPURL}\",\n    inputsInline: !0,\n    extensions: [\"text_indexOf_tooltip\"]\n  }, {\n    type: \"text_charAt\",\n    message0: \"%{BKY_TEXT_CHARAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"WHERE\",\n      options: [[\"%{BKY_TEXT_CHARAT_FROM_START}\", \"FROM_START\"], [\"%{BKY_TEXT_CHARAT_FROM_END}\", \"FROM_END\"], [\"%{BKY_TEXT_CHARAT_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_CHARAT_LAST}\", \"LAST\"], [\"%{BKY_TEXT_CHARAT_RANDOM}\", \"RANDOM\"]]\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_CHARAT_HELPURL}\",\n    inputsInline: !0,\n    mutator: \"text_charAt_mutator\"\n  }]);\n  Blockly.Blocks.text_getSubstring = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"STRING\").setCheck(\"String\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"String\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      2 == a && Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n    }\n  };\n  Blockly.Blocks.text_changeCase = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE, \"UPPERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE, \"LOWERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE, \"TITLECASE\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"CASE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_trim = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH, \"BOTH\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT, \"LEFT\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT, \"RIGHT\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"MODE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_print = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_PRINT_TITLE,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\"\n        }],\n        previousStatement: null,\n        nextStatement: null,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_PRINT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_PRINT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_prompt_ext = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      var b = this;\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendValueInput(\"TEXT\").appendField(a, \"TYPE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: function updateType_(a) {\n      this.outputConnection.setCheck(\"NUMBER\" == a ? \"Number\" : \"String\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"type\", this.getFieldValue(\"TYPE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"type\"));\n    }\n  };\n  Blockly.Blocks.text_prompt = {\n    init: function init() {\n      this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]],\n          b = this;\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendDummyInput().appendField(a, \"TYPE\").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(\"\"), \"TEXT\").appendField(this.newQuote_(!1));\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: Blockly.Blocks.text_prompt_ext.updateType_,\n    mutationToDom: Blockly.Blocks.text_prompt_ext.mutationToDom,\n    domToMutation: Blockly.Blocks.text_prompt_ext.domToMutation\n  };\n  Blockly.Blocks.text_count = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_COUNT_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"SUB\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"Number\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_COUNT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_COUNT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_replace = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REPLACE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"FROM\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TO\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REPLACE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REPLACE_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_reverse = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REVERSE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REVERSE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REVERSE_HELPURL\n      });\n    }\n  };\n  Blockly.Constants.Text.QUOTE_IMAGE_MIXIN = {\n    QUOTE_IMAGE_LEFT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC\",\n    QUOTE_IMAGE_RIGHT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==\",\n    QUOTE_IMAGE_WIDTH: 12,\n    QUOTE_IMAGE_HEIGHT: 12,\n    quoteField_: function quoteField_(a) {\n      for (var b = 0, c; c = this.inputList[b]; b++) {\n        for (var d = 0, e; e = c.fieldRow[d]; d++) {\n          if (a == e.name) {\n            c.insertFieldAt(d, this.newQuote_(!0));\n            c.insertFieldAt(d + 2, this.newQuote_(!1));\n            return;\n          }\n        }\n      }\n\n      console.warn('field named \"' + a + '\" not found in ' + this.toDevString());\n    },\n    newQuote_: function newQuote_(a) {\n      a = this.RTL ? !a : a;\n      return new Blockly.FieldImage(a ? this.QUOTE_IMAGE_LEFT_DATAURI : this.QUOTE_IMAGE_RIGHT_DATAURI, this.QUOTE_IMAGE_WIDTH, this.QUOTE_IMAGE_HEIGHT, a ? \"\\u201C\" : \"\\u201D\");\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_QUOTES_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.quoteField_(\"TEXT\");\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"text_create_join_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"text_create_join_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.itemCount_ = 2;\n    this.updateShape_();\n    this.setMutator(new Blockly.Mutator([\"text_create_join_item\"]));\n  };\n\n  Blockly.Extensions.register(\"text_append_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_TEXT_APPEND_TOOLTIP}\", \"VAR\"));\n\n  Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION = function () {\n    var a = this;\n    this.setTooltip(function () {\n      return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n    });\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"at\", !!this.isAt_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\", !0);\n      this.removeInput(\"ORDINAL\", !0);\n      a && (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX));\n      Blockly.Msg.TEXT_CHARAT_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));\n      this.isAt_ = a;\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_EXTENSION = function () {\n    this.getField(\"WHERE\").setValidator(function (b) {\n      b = \"FROM_START\" == b || \"FROM_END\" == b;\n      b != this.isAt_ && this.getSourceBlock().updateAt_(b);\n    });\n    this.updateAt_(!0);\n    var a = this;\n    this.setTooltip(function () {\n      var b = a.getFieldValue(\"WHERE\"),\n          c = Blockly.Msg.TEXT_CHARAT_TOOLTIP;\n      (\"FROM_START\" == b || \"FROM_END\" == b) && (b = \"FROM_START\" == b ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP) && (c += \"  \" + b.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"#1\" : \"#0\"));\n      return c;\n    });\n  };\n\n  Blockly.Extensions.register(\"text_indexOf_tooltip\", Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);\n  Blockly.Extensions.register(\"text_quotes\", Blockly.Constants.Text.TEXT_QUOTES_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_join_mutator\", Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_JOIN_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_charAt_mutator\", Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_CHARAT_EXTENSION);\n  Blockly.Blocks.variables = {};\n  Blockly.Constants.Variables = {};\n  Blockly.Constants.Variables.HUE = 330;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }, {\n    type: \"variables_set\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }]);\n  Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        if (\"variables_get\" == this.type) var b = \"variables_set\",\n            c = Blockly.Msg.VARIABLES_GET_CREATE_SET;else b = \"variables_get\", c = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n        var d = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            e = this.getField(\"VAR\").getText();\n        d.text = c.replace(\"%1\", e);\n        c = Blockly.utils.xml.createElement(\"field\");\n        c.setAttribute(\"name\", \"VAR\");\n        c.appendChild(Blockly.utils.xml.createTextNode(e));\n        e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", b);\n        e.appendChild(c);\n        d.callback = Blockly.ContextMenu.callbackFactory(this, e);\n        a.push(d);\n      } else if (\"variables_get\" == this.type || \"variables_get_reporter\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, e = this.getField(\"VAR\").getText(), d = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", e),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(d);\n    }\n  };\n\n  Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableSetterGetter\", Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  Blockly.Constants.VariablesDynamic = {};\n  Blockly.Constants.VariablesDynamic.HUE = 310;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get_dynamic\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_dynamic_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }, {\n    type: \"variables_set_dynamic\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_dynamic_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }]);\n  Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getFieldValue(\"VAR\");\n        var c = this.workspace.getVariableById(b).type;\n\n        if (\"variables_get_dynamic\" == this.type) {\n          b = \"variables_set_dynamic\";\n          var d = Blockly.Msg.VARIABLES_GET_CREATE_SET;\n        } else b = \"variables_get_dynamic\", d = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n\n        var e = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            f = this.getField(\"VAR\").getText();\n        e.text = d.replace(\"%1\", f);\n        d = Blockly.utils.xml.createElement(\"field\");\n        d.setAttribute(\"name\", \"VAR\");\n        d.setAttribute(\"variabletype\", c);\n        d.appendChild(Blockly.utils.xml.createTextNode(f));\n        f = Blockly.utils.xml.createElement(\"block\");\n        f.setAttribute(\"type\", b);\n        f.appendChild(d);\n        e.callback = Blockly.ContextMenu.callbackFactory(this, f);\n        a.push(e);\n      } else if (\"variables_get_dynamic\" == this.type || \"variables_get_reporter_dynamic\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, f = this.getField(\"VAR\").getText(), e = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", f),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(e);\n    },\n    onchange: function onchange(a) {\n      a = this.getFieldValue(\"VAR\");\n      a = Blockly.Variables.getVariable(this.workspace, a);\n      \"variables_get_dynamic\" == this.type ? this.outputConnection.setCheck(a.type) : this.getInput(\"VALUE\").connection.setCheck(a.type);\n    }\n  };\n\n  Blockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableDynamicSetterGetter\", Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  return Blockly.Blocks;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core-browser', './msg/en', './blocks', './javascript'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core-browser'), require('./msg/en'), require('./blocks'), require('./javascript'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly, root.En, root.BlocklyBlocks, root.BlocklyJS);\n  }\n})(this, function (Blockly, En, BlocklyBlocks, BlocklyJS) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module for the browser. This includes Blockly core\n   * and built in blocks, the JavaScript code generator and the English block\n   * localization files.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Include the EN Locale by default.\n\n  Blockly.setLocale(En);\n  Blockly.Blocks = Blockly.Blocks || {};\n  Object.keys(BlocklyBlocks).forEach(function (k) {\n    Blockly.Blocks[k] = BlocklyBlocks[k];\n  });\n  Blockly.JavaScript = BlocklyJS;\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly core module for the browser. It includes blockly.js\n   *               and adds a helper method for setting the locale.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Add a helper method to set the Blockly locale.\n\n  Blockly.setLocale = function (locale) {\n    Blockly.Msg = Blockly.Msg || {};\n    Object.keys(locale).forEach(function (k) {\n      Blockly.Msg[k] = locale[k];\n    });\n  };\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./browser'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./node'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core', './javascript_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core'), require('./javascript_compressed.js'));\n  } else {\n    // Browser\n    root.BlocklyJavaScript = factory(root.Blockly, root.BlocklyJavaScript);\n  }\n})(this, function (Blockly, BlocklyJavaScript) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview JavaScript Generator module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.JavaScript = BlocklyJavaScript;\n  return BlocklyJavaScript;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.JavaScript = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.JavaScript = new Blockly.Generator(\"JavaScript\");\n  Blockly.JavaScript.addReservedWords(\"break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,\" + Object.getOwnPropertyNames(Blockly.utils.global).join(\",\"));\n  Blockly.JavaScript.ORDER_ATOMIC = 0;\n  Blockly.JavaScript.ORDER_NEW = 1.1;\n  Blockly.JavaScript.ORDER_MEMBER = 1.2;\n  Blockly.JavaScript.ORDER_FUNCTION_CALL = 2;\n  Blockly.JavaScript.ORDER_INCREMENT = 3;\n  Blockly.JavaScript.ORDER_DECREMENT = 3;\n  Blockly.JavaScript.ORDER_BITWISE_NOT = 4.1;\n  Blockly.JavaScript.ORDER_UNARY_PLUS = 4.2;\n  Blockly.JavaScript.ORDER_UNARY_NEGATION = 4.3;\n  Blockly.JavaScript.ORDER_LOGICAL_NOT = 4.4;\n  Blockly.JavaScript.ORDER_TYPEOF = 4.5;\n  Blockly.JavaScript.ORDER_VOID = 4.6;\n  Blockly.JavaScript.ORDER_DELETE = 4.7;\n  Blockly.JavaScript.ORDER_AWAIT = 4.8;\n  Blockly.JavaScript.ORDER_EXPONENTIATION = 5;\n  Blockly.JavaScript.ORDER_MULTIPLICATION = 5.1;\n  Blockly.JavaScript.ORDER_DIVISION = 5.2;\n  Blockly.JavaScript.ORDER_MODULUS = 5.3;\n  Blockly.JavaScript.ORDER_SUBTRACTION = 6.1;\n  Blockly.JavaScript.ORDER_ADDITION = 6.2;\n  Blockly.JavaScript.ORDER_BITWISE_SHIFT = 7;\n  Blockly.JavaScript.ORDER_RELATIONAL = 8;\n  Blockly.JavaScript.ORDER_IN = 8;\n  Blockly.JavaScript.ORDER_INSTANCEOF = 8;\n  Blockly.JavaScript.ORDER_EQUALITY = 9;\n  Blockly.JavaScript.ORDER_BITWISE_AND = 10;\n  Blockly.JavaScript.ORDER_BITWISE_XOR = 11;\n  Blockly.JavaScript.ORDER_BITWISE_OR = 12;\n  Blockly.JavaScript.ORDER_LOGICAL_AND = 13;\n  Blockly.JavaScript.ORDER_LOGICAL_OR = 14;\n  Blockly.JavaScript.ORDER_CONDITIONAL = 15;\n  Blockly.JavaScript.ORDER_ASSIGNMENT = 16;\n  Blockly.JavaScript.ORDER_YIELD = 17;\n  Blockly.JavaScript.ORDER_COMMA = 18;\n  Blockly.JavaScript.ORDER_NONE = 99;\n  Blockly.JavaScript.ORDER_OVERRIDES = [[Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_LOGICAL_NOT, Blockly.JavaScript.ORDER_LOGICAL_NOT], [Blockly.JavaScript.ORDER_MULTIPLICATION, Blockly.JavaScript.ORDER_MULTIPLICATION], [Blockly.JavaScript.ORDER_ADDITION, Blockly.JavaScript.ORDER_ADDITION], [Blockly.JavaScript.ORDER_LOGICAL_AND, Blockly.JavaScript.ORDER_LOGICAL_AND], [Blockly.JavaScript.ORDER_LOGICAL_OR, Blockly.JavaScript.ORDER_LOGICAL_OR]];\n  Blockly.JavaScript.isInitialized = !1;\n\n  Blockly.JavaScript.init = function (a) {\n    Blockly.JavaScript.definitions_ = Object.create(null);\n    Blockly.JavaScript.functionNames_ = Object.create(null);\n    Blockly.JavaScript.variableDB_ ? Blockly.JavaScript.variableDB_.reset() : Blockly.JavaScript.variableDB_ = new Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_);\n    Blockly.JavaScript.variableDB_.setVariableMap(a.getVariableMap());\n\n    for (var b = [], c = Blockly.Variables.allDeveloperVariables(a), d = 0; d < c.length; d++) {\n      b.push(Blockly.JavaScript.variableDB_.getName(c[d], Blockly.Names.DEVELOPER_VARIABLE_TYPE));\n    }\n\n    a = Blockly.Variables.allUsedVarModels(a);\n\n    for (d = 0; d < a.length; d++) {\n      b.push(Blockly.JavaScript.variableDB_.getName(a[d].getId(), Blockly.VARIABLE_CATEGORY_NAME));\n    }\n\n    b.length && (Blockly.JavaScript.definitions_.variables = \"var \" + b.join(\", \") + \";\");\n    this.isInitialized = !0;\n  };\n\n  Blockly.JavaScript.finish = function (a) {\n    var b = [],\n        c;\n\n    for (c in Blockly.JavaScript.definitions_) {\n      b.push(Blockly.JavaScript.definitions_[c]);\n    }\n\n    delete Blockly.JavaScript.definitions_;\n    delete Blockly.JavaScript.functionNames_;\n    Blockly.JavaScript.variableDB_.reset();\n    return b.join(\"\\n\\n\") + \"\\n\\n\\n\" + a;\n  };\n\n  Blockly.JavaScript.scrubNakedValue = function (a) {\n    return a + \";\\n\";\n  };\n\n  Blockly.JavaScript.quote_ = function (a) {\n    a = a.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\\\n\").replace(/'/g, \"\\\\'\");\n    return \"'\" + a + \"'\";\n  };\n\n  Blockly.JavaScript.multiline_quote_ = function (a) {\n    return a.split(/\\n/g).map(Blockly.JavaScript.quote_).join(\" + '\\\\n' +\\n\");\n  };\n\n  Blockly.JavaScript.scrub_ = function (a, b, c) {\n    var d = \"\";\n\n    if (!a.outputConnection || !a.outputConnection.targetConnection) {\n      var e = a.getCommentText();\n      e && (e = Blockly.utils.string.wrap(e, Blockly.JavaScript.COMMENT_WRAP - 3), d += Blockly.JavaScript.prefixLines(e + \"\\n\", \"// \"));\n\n      for (var f = 0; f < a.inputList.length; f++) {\n        a.inputList[f].type == Blockly.inputTypes.VALUE && (e = a.inputList[f].connection.targetBlock()) && (e = Blockly.JavaScript.allNestedComments(e)) && (d += Blockly.JavaScript.prefixLines(e, \"// \"));\n      }\n    }\n\n    a = a.nextConnection && a.nextConnection.targetBlock();\n    c = c ? \"\" : Blockly.JavaScript.blockToCode(a);\n    return d + b + c;\n  };\n\n  Blockly.JavaScript.getAdjusted = function (a, b, c, d, e) {\n    c = c || 0;\n    e = e || Blockly.JavaScript.ORDER_NONE;\n    a.workspace.options.oneBasedIndex && c--;\n    var f = a.workspace.options.oneBasedIndex ? \"1\" : \"0\";\n    a = 0 < c ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_ADDITION) || f : 0 > c ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_SUBTRACTION) || f : d ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_UNARY_NEGATION) || f : Blockly.JavaScript.valueToCode(a, b, e) || f;\n    if (Blockly.isNumber(a)) a = Number(a) + c, d && (a = -a);else {\n      if (0 < c) {\n        a = a + \" + \" + c;\n        var g = Blockly.JavaScript.ORDER_ADDITION;\n      } else 0 > c && (a = a + \" - \" + -c, g = Blockly.JavaScript.ORDER_SUBTRACTION);\n\n      d && (a = c ? \"-(\" + a + \")\" : \"-\" + a, g = Blockly.JavaScript.ORDER_UNARY_NEGATION);\n      g = Math.floor(g);\n      e = Math.floor(e);\n      g && e >= g && (a = \"(\" + a + \")\");\n    }\n    return a;\n  };\n\n  Blockly.JavaScript.colour = {};\n\n  Blockly.JavaScript.colour_picker = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"COLOUR\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.colour_random = function (a) {\n    return [Blockly.JavaScript.provideFunction_(\"colourRandom\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"() {\", \"  var num = Math.floor(Math.random() * Math.pow(2, 24));\", \"  return '#' + ('00000' + num.toString(16)).substr(-6);\", \"}\"]) + \"()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_rgb = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"RED\", Blockly.JavaScript.ORDER_NONE) || 0,\n        c = Blockly.JavaScript.valueToCode(a, \"GREEN\", Blockly.JavaScript.ORDER_NONE) || 0;\n    a = Blockly.JavaScript.valueToCode(a, \"BLUE\", Blockly.JavaScript.ORDER_NONE) || 0;\n    return [Blockly.JavaScript.provideFunction_(\"colourRgb\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(r, g, b) {\", \"  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\", \"  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\", \"  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\", \"  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\", \"  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\", \"  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_blend = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"COLOUR1\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\",\n        c = Blockly.JavaScript.valueToCode(a, \"COLOUR2\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\";\n    a = Blockly.JavaScript.valueToCode(a, \"RATIO\", Blockly.JavaScript.ORDER_NONE) || .5;\n    return [Blockly.JavaScript.provideFunction_(\"colourBlend\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(c1, c2, ratio) {\", \"  ratio = Math.max(Math.min(Number(ratio), 1), 0);\", \"  var r1 = parseInt(c1.substring(1, 3), 16);\", \"  var g1 = parseInt(c1.substring(3, 5), 16);\", \"  var b1 = parseInt(c1.substring(5, 7), 16);\", \"  var r2 = parseInt(c2.substring(1, 3), 16);\", \"  var g2 = parseInt(c2.substring(3, 5), 16);\", \"  var b2 = parseInt(c2.substring(5, 7), 16);\", \"  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\", \"  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\", \"  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\", \"  r = ('0' + (r || 0).toString(16)).slice(-2);\", \"  g = ('0' + (g || 0).toString(16)).slice(-2);\", \"  b = ('0' + (b || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists = {};\n\n  Blockly.JavaScript.lists_create_empty = function (a) {\n    return [\"[]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_create_with = function (a) {\n    for (var b = Array(a.itemCount_), c = 0; c < a.itemCount_; c++) {\n      b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [\"[\" + b.join(\", \") + \"]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_repeat = function (a) {\n    var b = Blockly.JavaScript.provideFunction_(\"listsRepeat\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(value, n) {\", \"  var array = [];\", \"  for (var i = 0; i < n; i++) {\", \"    array[i] = value;\", \"  }\", \"  return array;\", \"}\"]),\n        c = Blockly.JavaScript.valueToCode(a, \"ITEM\", Blockly.JavaScript.ORDER_NONE) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [b + \"(\" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.lists_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.lists_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_getIndex = function (a) {\n    var b = a.getFieldValue(\"MODE\") || \"GET\",\n        c = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        d = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == c ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n\n    switch (c) {\n      case \"FIRST\":\n        if (\"GET\" == b) return [d + \"[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".shift()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".shift();\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"GET\" == b) return [d + \".slice(-1)[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".pop()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".pop();\\n\";\n        break;\n\n      case \"FROM_START\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"GET\" == b) return [d + \"[\" + a + \"]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\\n\";\n        break;\n\n      case \"FROM_END\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0);\n        if (\"GET\" == b) return [d + \".slice(\" + a + \")[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\";\n        break;\n\n      case \"RANDOM\":\n        d = Blockly.JavaScript.provideFunction_(\"listsGetRandomItem\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list, remove) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  if (remove) {\", \"    return list.splice(x, 1)[0];\", \"  } else {\", \"    return list[x];\", \"  }\", \"}\"]) + \"(\" + d + \", \" + (\"GET\" != b) + \")\";\n        if (\"GET\" == b || \"GET_REMOVE\" == b) return [d, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \";\\n\";\n    }\n\n    throw Error(\"Unhandled combination (lists_getIndex).\");\n  };\n\n  Blockly.JavaScript.lists_setIndex = function (a) {\n    function b() {\n      if (c.match(/^\\w+$/)) return \"\";\n      var g = Blockly.JavaScript.variableDB_.getDistinctName(\"tmpList\", Blockly.VARIABLE_CATEGORY_NAME),\n          h = \"var \" + g + \" = \" + c + \";\\n\";\n      c = g;\n      return h;\n    }\n\n    var c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        d = a.getFieldValue(\"MODE\") || \"GET\",\n        e = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        f = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"null\";\n\n    switch (e) {\n      case \"FIRST\":\n        if (\"SET\" == d) return c + \"[0] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".unshift(\" + f + \");\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"SET\" == d) return a = b(), a + (c + \"[\" + c + \".length - 1] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return c + \".push(\" + f + \");\\n\";\n        break;\n\n      case \"FROM_START\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"SET\" == d) return c + \"[\" + e + \"] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".splice(\" + e + \", 0, \" + f + \");\\n\";\n        break;\n\n      case \"FROM_END\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n        a = b();\n        if (\"SET\" == d) return a + (c + \"[\" + c + \".length - \" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + c + \".length - \" + e + \", 0, \" + f + \");\\n\");\n        break;\n\n      case \"RANDOM\":\n        a = b();\n        e = Blockly.JavaScript.variableDB_.getDistinctName(\"tmpX\", Blockly.VARIABLE_CATEGORY_NAME);\n        a += \"var \" + e + \" = Math.floor(Math.random() * \" + c + \".length);\\n\";\n        if (\"SET\" == d) return a + (c + \"[\" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + e + \", 0, \" + f + \");\\n\");\n    }\n\n    throw Error(\"Unhandled combination (lists_setIndex).\");\n  };\n\n  Blockly.JavaScript.lists.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.lists_getSublist = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        c = a.getFieldValue(\"WHERE1\"),\n        d = a.getFieldValue(\"WHERE2\");\n    if (\"FIRST\" == c && \"LAST\" == d) b += \".slice(0)\";else if (b.match(/^\\w+$/) || \"FROM_END\" != c && \"FROM_START\" == d) {\n      switch (c) {\n        case \"FROM_START\":\n          var e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          e = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          e = b + \".length - \" + e;\n          break;\n\n        case \"FIRST\":\n          e = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      switch (d) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = b + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = b + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      b = b + \".slice(\" + e + \", \" + a + \")\";\n    } else {\n      e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.lists.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[c] + g[d], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at1\" : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", c, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", d, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + b + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + e : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", \" + a : \"\") + \")\";\n    }\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_sort = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\",\n        c = \"1\" === a.getFieldValue(\"DIRECTION\") ? 1 : -1;\n    a = a.getFieldValue(\"TYPE\");\n    var d = Blockly.JavaScript.provideFunction_(\"listsGetSortCompare\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(type, direction) {\", \"  var compareFuncs = {\", '    \"NUMERIC\": function(a, b) {', \"        return Number(a) - Number(b); },\", '    \"TEXT\": function(a, b) {', \"        return a.toString() > b.toString() ? 1 : -1; },\", '    \"IGNORE_CASE\": function(a, b) {', \"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\", \"  };\", \"  var compare = compareFuncs[type];\", \"  return function(a, b) { return compare(a, b) * direction; }\", \"}\"]);\n    return [b + \".slice().sort(\" + d + '(\"' + a + '\", ' + c + \"))\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_split = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"INPUT\", Blockly.JavaScript.ORDER_MEMBER),\n        c = Blockly.JavaScript.valueToCode(a, \"DELIM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = a.getFieldValue(\"MODE\");\n    if (\"SPLIT\" == a) b || (b = \"''\"), a = \"split\";else if (\"JOIN\" == a) b || (b = \"[]\"), a = \"join\";else throw Error(\"Unknown mode: \" + a);\n    return [b + \".\" + a + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\") + \".slice().reverse()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.logic = {};\n\n  Blockly.JavaScript.controls_if = function (a) {\n    var b = 0,\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n\n    do {\n      var d = Blockly.JavaScript.valueToCode(a, \"IF\" + b, Blockly.JavaScript.ORDER_NONE) || \"false\";\n      var e = Blockly.JavaScript.statementToCode(a, \"DO\" + b);\n      Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e);\n      c += (0 < b ? \" else \" : \"\") + \"if (\" + d + \") {\\n\" + e + \"}\";\n      ++b;\n    } while (a.getInput(\"IF\" + b));\n\n    if (a.getInput(\"ELSE\") || Blockly.JavaScript.STATEMENT_SUFFIX) e = Blockly.JavaScript.statementToCode(a, \"ELSE\"), Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e), c += \" else {\\n\" + e + \"}\";\n    return c + \"\\n\";\n  };\n\n  Blockly.JavaScript.controls_ifelse = Blockly.JavaScript.controls_if;\n\n  Blockly.JavaScript.logic_compare = function (a) {\n    var b = {\n      EQ: \"==\",\n      NEQ: \"!=\",\n      LT: \"<\",\n      LTE: \"<=\",\n      GT: \">\",\n      GTE: \">=\"\n    }[a.getFieldValue(\"OP\")],\n        c = \"==\" == b || \"!=\" == b ? Blockly.JavaScript.ORDER_EQUALITY : Blockly.JavaScript.ORDER_RELATIONAL,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c) || \"0\";\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_operation = function (a) {\n    var b = \"AND\" == a.getFieldValue(\"OP\") ? \"&&\" : \"||\",\n        c = \"&&\" == b ? Blockly.JavaScript.ORDER_LOGICAL_AND : Blockly.JavaScript.ORDER_LOGICAL_OR,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c);\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c);\n\n    if (d || a) {\n      var e = \"&&\" == b ? \"true\" : \"false\";\n      d || (d = e);\n      a || (a = e);\n    } else a = d = \"false\";\n\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_negate = function (a) {\n    var b = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"BOOL\", b) || \"true\"), b];\n  };\n\n  Blockly.JavaScript.logic_boolean = function (a) {\n    return [\"TRUE\" == a.getFieldValue(\"BOOL\") ? \"true\" : \"false\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_null = function (a) {\n    return [\"null\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_ternary = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"IF\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"false\",\n        c = Blockly.JavaScript.valueToCode(a, \"THEN\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"ELSE\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    return [b + \" ? \" + c + \" : \" + a, Blockly.JavaScript.ORDER_CONDITIONAL];\n  };\n\n  Blockly.JavaScript.loops = {};\n\n  Blockly.JavaScript.controls_repeat_ext = function (a) {\n    var b = a.getField(\"TIMES\") ? String(Number(a.getFieldValue(\"TIMES\"))) : Blockly.JavaScript.valueToCode(a, \"TIMES\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        c = Blockly.JavaScript.statementToCode(a, \"DO\");\n    c = Blockly.JavaScript.addLoopTrap(c, a);\n    a = \"\";\n    var d = Blockly.JavaScript.variableDB_.getDistinctName(\"count\", Blockly.VARIABLE_CATEGORY_NAME),\n        e = b;\n    b.match(/^\\w+$/) || Blockly.isNumber(b) || (e = Blockly.JavaScript.variableDB_.getDistinctName(\"repeat_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + b + \";\\n\");\n    return a + (\"for (var \" + d + \" = 0; \" + d + \" < \" + e + \"; \" + d + \"++) {\\n\" + c + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n\n  Blockly.JavaScript.controls_whileUntil = function (a) {\n    var b = \"UNTIL\" == a.getFieldValue(\"MODE\"),\n        c = Blockly.JavaScript.valueToCode(a, \"BOOL\", b ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE) || \"false\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    b && (c = \"!\" + c);\n    return \"while (\" + c + \") {\\n\" + d + \"}\\n\";\n  };\n\n  Blockly.JavaScript.controls_for = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        d = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        e = Blockly.JavaScript.valueToCode(a, \"BY\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"1\",\n        f = Blockly.JavaScript.statementToCode(a, \"DO\");\n    f = Blockly.JavaScript.addLoopTrap(f, a);\n\n    if (Blockly.isNumber(c) && Blockly.isNumber(d) && Blockly.isNumber(e)) {\n      var g = Number(c) <= Number(d);\n      a = \"for (\" + b + \" = \" + c + \"; \" + b + (g ? \" <= \" : \" >= \") + d + \"; \" + b;\n      b = Math.abs(Number(e));\n      a = (1 == b ? a + (g ? \"++\" : \"--\") : a + ((g ? \" += \" : \" -= \") + b)) + (\") {\\n\" + f + \"}\\n\");\n    } else a = \"\", g = c, c.match(/^\\w+$/) || Blockly.isNumber(c) || (g = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_start\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + g + \" = \" + c + \";\\n\"), c = d, d.match(/^\\w+$/) || Blockly.isNumber(d) || (c = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + c + \" = \" + d + \";\\n\"), d = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_inc\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + d + \" = \", a = Blockly.isNumber(e) ? a + (Math.abs(e) + \";\\n\") : a + (\"Math.abs(\" + e + \");\\n\"), a = a + (\"if (\" + g + \" > \" + c + \") {\\n\") + (Blockly.JavaScript.INDENT + d + \" = -\" + d + \";\\n\"), a += \"}\\n\", a += \"for (\" + b + \" = \" + g + \"; \" + d + \" >= 0 ? \" + b + \" <= \" + c + \" : \" + b + \" >= \" + c + \"; \" + b + \" += \" + d + \") {\\n\" + f + \"}\\n\";\n\n    return a;\n  };\n\n  Blockly.JavaScript.controls_forEach = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"[]\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    a = \"\";\n    var e = c;\n    c.match(/^\\w+$/) || (e = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_list\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + c + \";\\n\");\n    c = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_index\", Blockly.VARIABLE_CATEGORY_NAME);\n    d = Blockly.JavaScript.INDENT + b + \" = \" + e + \"[\" + c + \"];\\n\" + d;\n    return a + (\"for (var \" + c + \" in \" + e + \") {\\n\" + d + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_flow_statements = function (a) {\n    var b = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n      var c = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);\n      c && !c.suppressPrefixSuffix && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, c));\n    }\n\n    switch (a.getFieldValue(\"FLOW\")) {\n      case \"BREAK\":\n        return b + \"break;\\n\";\n\n      case \"CONTINUE\":\n        return b + \"continue;\\n\";\n    }\n\n    throw Error(\"Unknown flow statement.\");\n  };\n\n  Blockly.JavaScript.math = {};\n\n  Blockly.JavaScript.math_number = function (a) {\n    a = Number(a.getFieldValue(\"NUM\"));\n    return [a, 0 <= a ? Blockly.JavaScript.ORDER_ATOMIC : Blockly.JavaScript.ORDER_UNARY_NEGATION];\n  };\n\n  Blockly.JavaScript.math_arithmetic = function (a) {\n    var b = {\n      ADD: [\" + \", Blockly.JavaScript.ORDER_ADDITION],\n      MINUS: [\" - \", Blockly.JavaScript.ORDER_SUBTRACTION],\n      MULTIPLY: [\" * \", Blockly.JavaScript.ORDER_MULTIPLICATION],\n      DIVIDE: [\" / \", Blockly.JavaScript.ORDER_DIVISION],\n      POWER: [null, Blockly.JavaScript.ORDER_NONE]\n    }[a.getFieldValue(\"OP\")],\n        c = b[0];\n    b = b[1];\n    var d = Blockly.JavaScript.valueToCode(a, \"A\", b) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", b) || \"0\";\n    return c ? [d + c + a, b] : [\"Math.pow(\" + d + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_single = function (a) {\n    var b = a.getFieldValue(\"OP\");\n    if (\"NEG\" == b) return a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_UNARY_NEGATION) || \"0\", \"-\" == a[0] && (a = \" \" + a), [\"-\" + a, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    a = \"SIN\" == b || \"COS\" == b || \"TAN\" == b ? Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_DIVISION) || \"0\" : Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n\n    switch (b) {\n      case \"ABS\":\n        var c = \"Math.abs(\" + a + \")\";\n        break;\n\n      case \"ROOT\":\n        c = \"Math.sqrt(\" + a + \")\";\n        break;\n\n      case \"LN\":\n        c = \"Math.log(\" + a + \")\";\n        break;\n\n      case \"EXP\":\n        c = \"Math.exp(\" + a + \")\";\n        break;\n\n      case \"POW10\":\n        c = \"Math.pow(10,\" + a + \")\";\n        break;\n\n      case \"ROUND\":\n        c = \"Math.round(\" + a + \")\";\n        break;\n\n      case \"ROUNDUP\":\n        c = \"Math.ceil(\" + a + \")\";\n        break;\n\n      case \"ROUNDDOWN\":\n        c = \"Math.floor(\" + a + \")\";\n        break;\n\n      case \"SIN\":\n        c = \"Math.sin(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"COS\":\n        c = \"Math.cos(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"TAN\":\n        c = \"Math.tan(\" + a + \" / 180 * Math.PI)\";\n    }\n\n    if (c) return [c, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (b) {\n      case \"LOG10\":\n        c = \"Math.log(\" + a + \") / Math.log(10)\";\n        break;\n\n      case \"ASIN\":\n        c = \"Math.asin(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ACOS\":\n        c = \"Math.acos(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ATAN\":\n        c = \"Math.atan(\" + a + \") / Math.PI * 180\";\n        break;\n\n      default:\n        throw Error(\"Unknown math operator: \" + b);\n    }\n\n    return [c, Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.math_constant = function (a) {\n    return {\n      PI: [\"Math.PI\", Blockly.JavaScript.ORDER_MEMBER],\n      E: [\"Math.E\", Blockly.JavaScript.ORDER_MEMBER],\n      GOLDEN_RATIO: [\"(1 + Math.sqrt(5)) / 2\", Blockly.JavaScript.ORDER_DIVISION],\n      SQRT2: [\"Math.SQRT2\", Blockly.JavaScript.ORDER_MEMBER],\n      SQRT1_2: [\"Math.SQRT1_2\", Blockly.JavaScript.ORDER_MEMBER],\n      INFINITY: [\"Infinity\", Blockly.JavaScript.ORDER_ATOMIC]\n    }[a.getFieldValue(\"CONSTANT\")];\n  };\n\n  Blockly.JavaScript.math_number_property = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"NUMBER_TO_CHECK\", Blockly.JavaScript.ORDER_MODULUS) || \"0\",\n        c = a.getFieldValue(\"PROPERTY\");\n    if (\"PRIME\" == c) return [Blockly.JavaScript.provideFunction_(\"mathIsPrime\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(n) {\", \"  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\", \"  if (n == 2 || n == 3) {\", \"    return true;\", \"  }\", \"  // False if n is NaN, negative, is 1, or not whole.\", \"  // And false if n is divisible by 2 or 3.\", \"  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\", \"    return false;\", \"  }\", \"  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\", \"  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\", \"    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\", \"      return false;\", \"    }\", \"  }\", \"  return true;\", \"}\"]) + \"(\" + b + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (c) {\n      case \"EVEN\":\n        var d = b + \" % 2 == 0\";\n        break;\n\n      case \"ODD\":\n        d = b + \" % 2 == 1\";\n        break;\n\n      case \"WHOLE\":\n        d = b + \" % 1 == 0\";\n        break;\n\n      case \"POSITIVE\":\n        d = b + \" > 0\";\n        break;\n\n      case \"NEGATIVE\":\n        d = b + \" < 0\";\n        break;\n\n      case \"DIVISIBLE_BY\":\n        a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\", d = b + \" % \" + a + \" == 0\";\n    }\n\n    return [d, Blockly.JavaScript.ORDER_EQUALITY];\n  };\n\n  Blockly.JavaScript.math_change = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DELTA\", Blockly.JavaScript.ORDER_ADDITION) || \"0\";\n    a = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    return a + \" = (typeof \" + a + \" == 'number' ? \" + a + \" : 0) + \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.math_round = Blockly.JavaScript.math_single;\n  Blockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n\n  Blockly.JavaScript.math_on_list = function (a) {\n    var b = a.getFieldValue(\"OP\");\n\n    switch (b) {\n      case \"SUM\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n        a += \".reduce(function(x, y) {return x + y;})\";\n        break;\n\n      case \"MIN\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.min.apply(null, \" + a + \")\";\n        break;\n\n      case \"MAX\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.max.apply(null, \" + a + \")\";\n        break;\n\n      case \"AVERAGE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMean\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  return myList.reduce(function(x, y) {return x + y;}) / myList.length;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MEDIAN\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMedian\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  var localList = myList.filter(function (x) {return typeof x == 'number';});\", \"  if (!localList.length) return null;\", \"  localList.sort(function(a, b) {return b - a;});\", \"  if (localList.length % 2 == 0) {\", \"    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\", \"  } else {\", \"    return localList[(localList.length - 1) / 2];\", \"  }\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MODE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathModes\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(values) {\", \"  var modes = [];\", \"  var counts = [];\", \"  var maxCount = 0;\", \"  for (var i = 0; i < values.length; i++) {\", \"    var value = values[i];\", \"    var found = false;\", \"    var thisCount;\", \"    for (var j = 0; j < counts.length; j++) {\", \"      if (counts[j][0] === value) {\", \"        thisCount = ++counts[j][1];\", \"        found = true;\", \"        break;\", \"      }\", \"    }\", \"    if (!found) {\", \"      counts.push([value, 1]);\", \"      thisCount = 1;\", \"    }\", \"    maxCount = Math.max(thisCount, maxCount);\", \"  }\", \"  for (var j = 0; j < counts.length; j++) {\", \"    if (counts[j][1] == maxCount) {\", \"        modes.push(counts[j][0]);\", \"    }\", \"  }\", \"  return modes;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"STD_DEV\":\n        b = Blockly.JavaScript.provideFunction_(\"mathStandardDeviation\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(numbers) {\", \"  var n = numbers.length;\", \"  if (!n) return null;\", \"  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\", \"  var variance = 0;\", \"  for (var j = 0; j < n; j++) {\", \"    variance += Math.pow(numbers[j] - mean, 2);\", \"  }\", \"  variance = variance / n;\", \"  return Math.sqrt(variance);\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"RANDOM\":\n        b = Blockly.JavaScript.provideFunction_(\"mathRandomList\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  return list[x];\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      default:\n        throw Error(\"Unknown operator: \" + b);\n    }\n\n    return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_modulo = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DIVIDEND\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    return [b + \" % \" + a, Blockly.JavaScript.ORDER_MODULUS];\n  };\n\n  Blockly.JavaScript.math_constrain = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"0\",\n        c = Blockly.JavaScript.valueToCode(a, \"LOW\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"HIGH\", Blockly.JavaScript.ORDER_NONE) || \"Infinity\";\n    return [\"Math.min(Math.max(\" + b + \", \" + c + \"), \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_int = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [Blockly.JavaScript.provideFunction_(\"mathRandomInt\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(a, b) {\", \"  if (a > b) {\", \"    // Swap a and b to ensure a is smaller.\", \"    var c = a;\", \"    a = b;\", \"    b = c;\", \"  }\", \"  return Math.floor(Math.random() * (b - a + 1) + a);\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_float = function (a) {\n    return [\"Math.random()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_atan2 = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"X\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [\"Math.atan2(\" + (Blockly.JavaScript.valueToCode(a, \"Y\", Blockly.JavaScript.ORDER_NONE) || \"0\") + \", \" + b + \") / Math.PI * 180\", Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.procedures = {};\n\n  Blockly.JavaScript.procedures_defreturn = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME),\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n    c && (c = Blockly.JavaScript.prefixLines(c, Blockly.JavaScript.INDENT));\n    var d = \"\";\n    Blockly.JavaScript.INFINITE_LOOP_TRAP && (d = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.INFINITE_LOOP_TRAP, a), Blockly.JavaScript.INDENT));\n    var e = Blockly.JavaScript.statementToCode(a, \"STACK\"),\n        f = Blockly.JavaScript.valueToCode(a, \"RETURN\", Blockly.JavaScript.ORDER_NONE) || \"\",\n        g = \"\";\n    e && f && (g = c);\n    f && (f = Blockly.JavaScript.INDENT + \"return \" + f + \";\\n\");\n\n    for (var h = [], l = a.getVars(), k = 0; k < l.length; k++) {\n      h[k] = Blockly.JavaScript.variableDB_.getName(l[k], Blockly.VARIABLE_CATEGORY_NAME);\n    }\n\n    c = \"function \" + b + \"(\" + h.join(\", \") + \") {\\n\" + c + d + e + g + f + \"}\";\n    c = Blockly.JavaScript.scrub_(a, c);\n    Blockly.JavaScript.definitions_[\"%\" + b] = c;\n    return null;\n  };\n\n  Blockly.JavaScript.procedures_defnoreturn = Blockly.JavaScript.procedures_defreturn;\n\n  Blockly.JavaScript.procedures_callreturn = function (a) {\n    for (var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME), c = [], d = a.getVars(), e = 0; e < d.length; e++) {\n      c[e] = Blockly.JavaScript.valueToCode(a, \"ARG\" + e, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [b + \"(\" + c.join(\", \") + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.procedures_callnoreturn = function (a) {\n    return Blockly.JavaScript.procedures_callreturn(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.procedures_ifreturn = function (a) {\n    var b = \"if (\" + (Blockly.JavaScript.valueToCode(a, \"CONDITION\", Blockly.JavaScript.ORDER_NONE) || \"false\") + \") {\\n\";\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT));\n    a.hasReturnValue_ ? (a = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"null\", b += Blockly.JavaScript.INDENT + \"return \" + a + \";\\n\") : b += Blockly.JavaScript.INDENT + \"return;\\n\";\n    return b + \"}\\n\";\n  };\n\n  Blockly.JavaScript.texts = {};\n\n  Blockly.JavaScript.text = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.text_multiline = function (a) {\n    a = Blockly.JavaScript.multiline_quote_(a.getFieldValue(\"TEXT\"));\n    var b = -1 != a.indexOf(\"+\") ? Blockly.JavaScript.ORDER_ADDITION : Blockly.JavaScript.ORDER_ATOMIC;\n    return [a, b];\n  };\n\n  Blockly.JavaScript.text.forceString_ = function (a) {\n    return Blockly.JavaScript.text.forceString_.strRegExp.test(a) ? [a, Blockly.JavaScript.ORDER_ATOMIC] : [\"String(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text.forceString_.strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n\n  Blockly.JavaScript.text_join = function (a) {\n    switch (a.itemCount_) {\n      case 0:\n        return [\"''\", Blockly.JavaScript.ORDER_ATOMIC];\n\n      case 1:\n        return a = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\", Blockly.JavaScript.text.forceString_(a);\n\n      case 2:\n        var b = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.valueToCode(a, \"ADD1\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.text.forceString_(b)[0] + \" + \" + Blockly.JavaScript.text.forceString_(a)[0];\n        return [a, Blockly.JavaScript.ORDER_ADDITION];\n\n      default:\n        b = Array(a.itemCount_);\n\n        for (var c = 0; c < a.itemCount_; c++) {\n          b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"''\";\n        }\n\n        a = \"[\" + b.join(\",\") + \"].join('')\";\n        return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n  };\n\n  Blockly.JavaScript.text_append = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return b + \" += \" + Blockly.JavaScript.text.forceString_(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.text_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.text_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.text_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_charAt = function (a) {\n    var b = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        c = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == b ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    switch (b) {\n      case \"FIRST\":\n        return [c + \".charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"LAST\":\n        return [c + \".slice(-1)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_START\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\"), [c + \".charAt(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_END\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0), [c + \".slice(\" + a + \").charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"RANDOM\":\n        return [Blockly.JavaScript.provideFunction_(\"textRandomLetter\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(text) {\", \"  var x = Math.floor(Math.random() * text.length);\", \"  return text[x];\", \"}\"]) + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    throw Error(\"Unhandled option (text_charAt).\");\n  };\n\n  Blockly.JavaScript.text.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.text_getSubstring = function (a) {\n    var b = a.getFieldValue(\"WHERE1\"),\n        c = a.getFieldValue(\"WHERE2\"),\n        d = \"FROM_END\" != b && \"LAST\" != b && \"FROM_END\" != c && \"LAST\" != c,\n        e = Blockly.JavaScript.valueToCode(a, \"STRING\", d ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    if (\"FIRST\" == b && \"LAST\" == c) return [e, Blockly.JavaScript.ORDER_NONE];\n\n    if (e.match(/^'?\\w+'?$/) || d) {\n      switch (b) {\n        case \"FROM_START\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          d = e + \".length - \" + d;\n          break;\n\n        case \"FIRST\":\n          d = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      switch (c) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = e + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = e + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      b = e + \".slice(\" + d + \", \" + a + \")\";\n    } else {\n      d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.text.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[b] + g[c], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == b || \"FROM_START\" == b ? \", at1\" : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", b, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", c, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + e + (\"FROM_END\" == b || \"FROM_START\" == b ? \", \" + d : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + a : \"\") + \")\";\n    }\n\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_changeCase = function (a) {\n    var b = {\n      UPPERCASE: \".toUpperCase()\",\n      LOWERCASE: \".toLowerCase()\",\n      TITLECASE: null\n    }[a.getFieldValue(\"CASE\")];\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", b ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [b ? a + b : Blockly.JavaScript.provideFunction_(\"textToTitleCase\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(str) {\", \"  return str.replace(/\\\\S+/g,\", \"      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\", \"}\"]) + \"(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_trim = function (a) {\n    var b = {\n      LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n      RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n      BOTH: \".trim()\"\n    }[a.getFieldValue(\"MODE\")];\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_print = function (a) {\n    return \"window.alert(\" + (Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \");\\n\";\n  };\n\n  Blockly.JavaScript.text_prompt_ext = function (a) {\n    var b = \"window.prompt(\" + (a.getField(\"TEXT\") ? Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")) : Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \")\";\n    \"NUMBER\" == a.getFieldValue(\"TYPE\") && (b = \"Number(\" + b + \")\");\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_prompt = Blockly.JavaScript.text_prompt_ext;\n\n  Blockly.JavaScript.text_count = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"SUB\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textCount\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle) {\", \"  if (needle.length === 0) {\", \"    return haystack.length + 1;\", \"  } else {\", \"    return haystack.split(needle).length - 1;\", \"  }\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_replace = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\",\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textReplace\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle, replacement) {\", '  needle = needle.replace(/([-()\\\\[\\\\]{}+?*.$\\\\^|,:#<!\\\\\\\\])/g,\"\\\\\\\\$1\")', '                 .replace(/\\\\x08/g,\"\\\\\\\\x08\");', \"  return haystack.replace(new RegExp(needle, 'g'), replacement);\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".split('').reverse().join('')\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.variables = {};\n\n  Blockly.JavaScript.variables_get = function (a) {\n    return [Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.variables_set = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\";\n    return Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME) + \" = \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.variablesDynamic = {};\n  Blockly.JavaScript.variables_get_dynamic = Blockly.JavaScript.variables_get;\n  Blockly.JavaScript.variables_set_dynamic = Blockly.JavaScript.variables_set;\n  return Blockly.JavaScript;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['../core'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('../core'));\n  } else {\n    // Browser\n    root.Blockly.Msg = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  var Blockly = {};\n  Blockly.Msg = {}; // This file was automatically generated.  Do not modify.\n\n  'use strict';\n\n  Blockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\n  Blockly.Msg[\"CANNOT_DELETE_VARIABLE_PROCEDURE\"] = \"Can't delete the variable '%1' because it's part of the definition of the function '%2'\";\n  Blockly.Msg[\"CHANGE_VALUE_TITLE\"] = \"Change value:\";\n  Blockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\n  Blockly.Msg[\"COLLAPSED_WARNINGS_WARNING\"] = \"Collapsed blocks contain warnings.\";\n  Blockly.Msg[\"COLLAPSE_ALL\"] = \"Collapse Blocks\";\n  Blockly.Msg[\"COLLAPSE_BLOCK\"] = \"Collapse Block\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR1\"] = \"colour 1\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR2\"] = \"colour 2\";\n  Blockly.Msg[\"COLOUR_BLEND_HELPURL\"] = \"https://meyerweb.com/eric/tools/color-blend/#:::rgbp\";\n  Blockly.Msg[\"COLOUR_BLEND_RATIO\"] = \"ratio\";\n  Blockly.Msg[\"COLOUR_BLEND_TITLE\"] = \"blend\";\n  Blockly.Msg[\"COLOUR_BLEND_TOOLTIP\"] = \"Blends two colours together with a given ratio (0.0 - 1.0).\";\n  Blockly.Msg[\"COLOUR_PICKER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Color\";\n  Blockly.Msg[\"COLOUR_PICKER_TOOLTIP\"] = \"Choose a colour from the palette.\";\n  Blockly.Msg[\"COLOUR_RANDOM_HELPURL\"] = \"http://randomcolour.com\";\n  Blockly.Msg[\"COLOUR_RANDOM_TITLE\"] = \"random colour\";\n  Blockly.Msg[\"COLOUR_RANDOM_TOOLTIP\"] = \"Choose a colour at random.\";\n  Blockly.Msg[\"COLOUR_RGB_BLUE\"] = \"blue\";\n  Blockly.Msg[\"COLOUR_RGB_GREEN\"] = \"green\";\n  Blockly.Msg[\"COLOUR_RGB_HELPURL\"] = \"https://www.december.com/html/spec/colorpercompact.html\";\n  Blockly.Msg[\"COLOUR_RGB_RED\"] = \"red\";\n  Blockly.Msg[\"COLOUR_RGB_TITLE\"] = \"colour with\";\n  Blockly.Msg[\"COLOUR_RGB_TOOLTIP\"] = \"Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#loop-termination-blocks\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK\"] = \"break out of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE\"] = \"continue with next iteration of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK\"] = \"Break out of the containing loop.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE\"] = \"Skip the rest of this loop, and continue with the next iteration.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_WARNING\"] = \"Warning: This block may only be used within a loop.\";\n  Blockly.Msg[\"CONTROLS_FOREACH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#for-each\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TITLE\"] = \"for each item %1 in list %2\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TOOLTIP\"] = \"For each item in a list, set the variable '%1' to the item, and then do some statements.\";\n  Blockly.Msg[\"CONTROLS_FOR_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#count-with\";\n  Blockly.Msg[\"CONTROLS_FOR_TITLE\"] = \"count with %1 from %2 to %3 by %4\";\n  Blockly.Msg[\"CONTROLS_FOR_TOOLTIP\"] = \"Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TOOLTIP\"] = \"Add a condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TOOLTIP\"] = \"Add a final, catch-all condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_HELPURL\"] = \"https://github.com/google/blockly/wiki/IfElse\";\n  Blockly.Msg[\"CONTROLS_IF_IF_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this if block.\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"] = \"else\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"] = \"else if\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_IF\"] = \"if\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_1\"] = \"If a value is true, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_2\"] = \"If a value is true, then do the first block of statements. Otherwise, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_3\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_4\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.\";\n  Blockly.Msg[\"CONTROLS_REPEAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/For_loop\";\n  Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"] = \"do\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TITLE\"] = \"repeat %1 times\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TOOLTIP\"] = \"Do some statements several times.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#repeat\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_UNTIL\"] = \"repeat until\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_WHILE\"] = \"repeat while\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL\"] = \"While a value is false, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_WHILE\"] = \"While a value is true, then do some statements.\";\n  Blockly.Msg[\"DELETE_ALL_BLOCKS\"] = \"Delete all %1 blocks?\";\n  Blockly.Msg[\"DELETE_BLOCK\"] = \"Delete Block\";\n  Blockly.Msg[\"DELETE_VARIABLE\"] = \"Delete the '%1' variable\";\n  Blockly.Msg[\"DELETE_VARIABLE_CONFIRMATION\"] = \"Delete %1 uses of the '%2' variable?\";\n  Blockly.Msg[\"DELETE_X_BLOCKS\"] = \"Delete %1 Blocks\";\n  Blockly.Msg[\"DISABLE_BLOCK\"] = \"Disable Block\";\n  Blockly.Msg[\"DUPLICATE_BLOCK\"] = \"Duplicate\";\n  Blockly.Msg[\"DUPLICATE_COMMENT\"] = \"Duplicate Comment\";\n  Blockly.Msg[\"ENABLE_BLOCK\"] = \"Enable Block\";\n  Blockly.Msg[\"EXPAND_ALL\"] = \"Expand Blocks\";\n  Blockly.Msg[\"EXPAND_BLOCK\"] = \"Expand Block\";\n  Blockly.Msg[\"EXTERNAL_INPUTS\"] = \"External Inputs\";\n  Blockly.Msg[\"HELP\"] = \"Help\";\n  Blockly.Msg[\"INLINE_INPUTS\"] = \"Inline Inputs\";\n  Blockly.Msg[\"IOS_CANCEL\"] = \"Cancel\";\n  Blockly.Msg[\"IOS_ERROR\"] = \"Error\";\n  Blockly.Msg[\"IOS_OK\"] = \"OK\";\n  Blockly.Msg[\"IOS_PROCEDURES_ADD_INPUT\"] = \"+ Add Input\";\n  Blockly.Msg[\"IOS_PROCEDURES_ALLOW_STATEMENTS\"] = \"Allow statements\";\n  Blockly.Msg[\"IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR\"] = \"This function has duplicate inputs.\";\n  Blockly.Msg[\"IOS_PROCEDURES_INPUTS\"] = \"INPUTS\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_BUTTON\"] = \"Add\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_VARIABLE\"] = \"+ Add Variable\";\n  Blockly.Msg[\"IOS_VARIABLES_DELETE_BUTTON\"] = \"Delete\";\n  Blockly.Msg[\"IOS_VARIABLES_EMPTY_NAME_ERROR\"] = \"You can't use an empty variable name.\";\n  Blockly.Msg[\"IOS_VARIABLES_RENAME_BUTTON\"] = \"Rename\";\n  Blockly.Msg[\"IOS_VARIABLES_VARIABLE_NAME\"] = \"Variable name\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-empty-list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TITLE\"] = \"create empty list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TOOLTIP\"] = \"Returns a list, of length 0, containing no data records\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TITLE_ADD\"] = \"list\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this list block.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_INPUT_WITH\"] = \"create list with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TOOLTIP\"] = \"Add an item to the list.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_TOOLTIP\"] = \"Create a list with any number of items.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FIRST\"] = \"first\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_END\"] = \"# from end\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_START\"] = \"#\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET\"] = \"get\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET_REMOVE\"] = \"get and remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_LAST\"] = \"last\";\n  Blockly.Msg[\"LISTS_GET_INDEX_RANDOM\"] = \"random\";\n  Blockly.Msg[\"LISTS_GET_INDEX_REMOVE\"] = \"remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FIRST\"] = \"Returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FROM\"] = \"Returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_LAST\"] = \"Returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_RANDOM\"] = \"Returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST\"] = \"Removes and returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM\"] = \"Removes and returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST\"] = \"Removes and returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM\"] = \"Removes and returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST\"] = \"Removes the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM\"] = \"Removes the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST\"] = \"Removes the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM\"] = \"Removes a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_END\"] = \"to # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_START\"] = \"to #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_LAST\"] = \"to last\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-a-sublist\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FIRST\"] = \"get sub-list from first\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_END\"] = \"get sub-list from # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_START\"] = \"get sub-list from #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TOOLTIP\"] = \"Creates a copy of the specified portion of a list.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_END_TOOLTIP\"] = \"%1 is the last item.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_START_TOOLTIP\"] = \"%1 is the first item.\";\n  Blockly.Msg[\"LISTS_INDEX_OF_FIRST\"] = \"find first occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list\";\n  Blockly.Msg[\"LISTS_INDEX_OF_LAST\"] = \"find last occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.\";\n  Blockly.Msg[\"LISTS_INLIST\"] = \"in list\";\n  Blockly.Msg[\"LISTS_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#is-empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TOOLTIP\"] = \"Returns true if the list is empty.\";\n  Blockly.Msg[\"LISTS_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#length-of\";\n  Blockly.Msg[\"LISTS_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"LISTS_LENGTH_TOOLTIP\"] = \"Returns the length of a list.\";\n  Blockly.Msg[\"LISTS_REPEAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_REPEAT_TITLE\"] = \"create list with item %1 repeated %2 times\";\n  Blockly.Msg[\"LISTS_REPEAT_TOOLTIP\"] = \"Creates a list consisting of the given value repeated the specified number of times.\";\n  Blockly.Msg[\"LISTS_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#reversing-a-list\";\n  Blockly.Msg[\"LISTS_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"LISTS_REVERSE_TOOLTIP\"] = \"Reverse a copy of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#in-list--set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_TO\"] = \"as\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INSERT\"] = \"insert at\";\n  Blockly.Msg[\"LISTS_SET_INDEX_SET\"] = \"set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST\"] = \"Inserts the item at the start of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FROM\"] = \"Inserts the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_LAST\"] = \"Append the item to the end of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM\"] = \"Inserts the item randomly in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FIRST\"] = \"Sets the first item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FROM\"] = \"Sets the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_LAST\"] = \"Sets the last item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_RANDOM\"] = \"Sets a random item in a list.\";\n  Blockly.Msg[\"LISTS_SORT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#sorting-a-list\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_ASCENDING\"] = \"ascending\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_DESCENDING\"] = \"descending\";\n  Blockly.Msg[\"LISTS_SORT_TITLE\"] = \"sort %1 %2 %3\";\n  Blockly.Msg[\"LISTS_SORT_TOOLTIP\"] = \"Sort a copy of a list.\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_IGNORECASE\"] = \"alphabetic, ignore case\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_NUMERIC\"] = \"numeric\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_TEXT\"] = \"alphabetic\";\n  Blockly.Msg[\"LISTS_SPLIT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists\";\n  Blockly.Msg[\"LISTS_SPLIT_LIST_FROM_TEXT\"] = \"make list from text\";\n  Blockly.Msg[\"LISTS_SPLIT_TEXT_FROM_LIST\"] = \"make text from list\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_JOIN\"] = \"Join a list of texts into one text, separated by a delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_SPLIT\"] = \"Split text into a list of texts, breaking at each delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_WITH_DELIMITER\"] = \"with delimiter\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_FALSE\"] = \"false\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#values\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TOOLTIP\"] = \"Returns either true or false.\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TRUE\"] = \"true\";\n  Blockly.Msg[\"LOGIC_COMPARE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Inequality_(mathematics)\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_EQ\"] = \"Return true if both inputs equal each other.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GT\"] = \"Return true if the first input is greater than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GTE\"] = \"Return true if the first input is greater than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LT\"] = \"Return true if the first input is smaller than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LTE\"] = \"Return true if the first input is smaller than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_NEQ\"] = \"Return true if both inputs are not equal to each other.\";\n  Blockly.Msg[\"LOGIC_NEGATE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#not\";\n  Blockly.Msg[\"LOGIC_NEGATE_TITLE\"] = \"not %1\";\n  Blockly.Msg[\"LOGIC_NEGATE_TOOLTIP\"] = \"Returns true if the input is false. Returns false if the input is true.\";\n  Blockly.Msg[\"LOGIC_NULL\"] = \"null\";\n  Blockly.Msg[\"LOGIC_NULL_HELPURL\"] = \"https://en.wikipedia.org/wiki/Nullable_type\";\n  Blockly.Msg[\"LOGIC_NULL_TOOLTIP\"] = \"Returns null.\";\n  Blockly.Msg[\"LOGIC_OPERATION_AND\"] = \"and\";\n  Blockly.Msg[\"LOGIC_OPERATION_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#logical-operations\";\n  Blockly.Msg[\"LOGIC_OPERATION_OR\"] = \"or\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_AND\"] = \"Return true if both inputs are true.\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_OR\"] = \"Return true if at least one of the inputs is true.\";\n  Blockly.Msg[\"LOGIC_TERNARY_CONDITION\"] = \"test\";\n  Blockly.Msg[\"LOGIC_TERNARY_HELPURL\"] = \"https://en.wikipedia.org/wiki/%3F:\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_FALSE\"] = \"if false\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_TRUE\"] = \"if true\";\n  Blockly.Msg[\"LOGIC_TERNARY_TOOLTIP\"] = \"Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.\";\n  Blockly.Msg[\"MATH_ADDITION_SYMBOL\"] = \"+\";\n  Blockly.Msg[\"MATH_ARITHMETIC_HELPURL\"] = \"https://en.wikipedia.org/wiki/Arithmetic\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_ADD\"] = \"Return the sum of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_DIVIDE\"] = \"Return the quotient of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MINUS\"] = \"Return the difference of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MULTIPLY\"] = \"Return the product of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_POWER\"] = \"Return the first number raised to the power of the second number.\";\n  Blockly.Msg[\"MATH_ATAN2_HELPURL\"] = \"https://en.wikipedia.org/wiki/Atan2\";\n  Blockly.Msg[\"MATH_ATAN2_TITLE\"] = \"atan2 of X:%1 Y:%2\";\n  Blockly.Msg[\"MATH_ATAN2_TOOLTIP\"] = \"Return the arctangent of point (X, Y) in degrees from -180 to 180.\";\n  Blockly.Msg[\"MATH_CHANGE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter\";\n  Blockly.Msg[\"MATH_CHANGE_TITLE\"] = \"change %1 by %2\";\n  Blockly.Msg[\"MATH_CHANGE_TOOLTIP\"] = \"Add a number to variable '%1'.\";\n  Blockly.Msg[\"MATH_CONSTANT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Mathematical_constant\";\n  Blockly.Msg[\"MATH_CONSTANT_TOOLTIP\"] = \"Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).\";\n  Blockly.Msg[\"MATH_CONSTRAIN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Clamping_(graphics)\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TITLE\"] = \"constrain %1 low %2 high %3\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TOOLTIP\"] = \"Constrain a number to be between the specified limits (inclusive).\";\n  Blockly.Msg[\"MATH_DIVISION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_IS_DIVISIBLE_BY\"] = \"is divisible by\";\n  Blockly.Msg[\"MATH_IS_EVEN\"] = \"is even\";\n  Blockly.Msg[\"MATH_IS_NEGATIVE\"] = \"is negative\";\n  Blockly.Msg[\"MATH_IS_ODD\"] = \"is odd\";\n  Blockly.Msg[\"MATH_IS_POSITIVE\"] = \"is positive\";\n  Blockly.Msg[\"MATH_IS_PRIME\"] = \"is prime\";\n  Blockly.Msg[\"MATH_IS_TOOLTIP\"] = \"Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.\";\n  Blockly.Msg[\"MATH_IS_WHOLE\"] = \"is whole\";\n  Blockly.Msg[\"MATH_MODULO_HELPURL\"] = \"https://en.wikipedia.org/wiki/Modulo_operation\";\n  Blockly.Msg[\"MATH_MODULO_TITLE\"] = \"remainder of %1  %2\";\n  Blockly.Msg[\"MATH_MODULO_TOOLTIP\"] = \"Return the remainder from dividing the two numbers.\";\n  Blockly.Msg[\"MATH_MULTIPLICATION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_NUMBER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Number\";\n  Blockly.Msg[\"MATH_NUMBER_TOOLTIP\"] = \"A number.\";\n  Blockly.Msg[\"MATH_ONLIST_HELPURL\"] = \"\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_AVERAGE\"] = \"average of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MAX\"] = \"max of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MEDIAN\"] = \"median of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MIN\"] = \"min of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MODE\"] = \"modes of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_RANDOM\"] = \"random item of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_STD_DEV\"] = \"standard deviation of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_SUM\"] = \"sum of list\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_AVERAGE\"] = \"Return the average (arithmetic mean) of the numeric values in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MAX\"] = \"Return the largest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MEDIAN\"] = \"Return the median number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MIN\"] = \"Return the smallest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MODE\"] = \"Return a list of the most common item(s) in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_RANDOM\"] = \"Return a random element from the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_STD_DEV\"] = \"Return the standard deviation of the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_SUM\"] = \"Return the sum of all the numbers in the list.\";\n  Blockly.Msg[\"MATH_POWER_SYMBOL\"] = \"^\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TITLE_RANDOM\"] = \"random fraction\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TOOLTIP\"] = \"Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).\";\n  Blockly.Msg[\"MATH_RANDOM_INT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TITLE\"] = \"random integer from %1 to %2\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TOOLTIP\"] = \"Return a random integer between the two specified limits, inclusive.\";\n  Blockly.Msg[\"MATH_ROUND_HELPURL\"] = \"https://en.wikipedia.org/wiki/Rounding\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUND\"] = \"round\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDDOWN\"] = \"round down\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDUP\"] = \"round up\";\n  Blockly.Msg[\"MATH_ROUND_TOOLTIP\"] = \"Round a number up or down.\";\n  Blockly.Msg[\"MATH_SINGLE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Square_root\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ABSOLUTE\"] = \"absolute\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ROOT\"] = \"square root\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ABS\"] = \"Return the absolute value of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_EXP\"] = \"Return e to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LN\"] = \"Return the natural logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LOG10\"] = \"Return the base 10 logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_NEG\"] = \"Return the negation of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_POW10\"] = \"Return 10 to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ROOT\"] = \"Return the square root of a number.\";\n  Blockly.Msg[\"MATH_SUBTRACTION_SYMBOL\"] = \"-\";\n  Blockly.Msg[\"MATH_TRIG_ACOS\"] = \"acos\";\n  Blockly.Msg[\"MATH_TRIG_ASIN\"] = \"asin\";\n  Blockly.Msg[\"MATH_TRIG_ATAN\"] = \"atan\";\n  Blockly.Msg[\"MATH_TRIG_COS\"] = \"cos\";\n  Blockly.Msg[\"MATH_TRIG_HELPURL\"] = \"https://en.wikipedia.org/wiki/Trigonometric_functions\";\n  Blockly.Msg[\"MATH_TRIG_SIN\"] = \"sin\";\n  Blockly.Msg[\"MATH_TRIG_TAN\"] = \"tan\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ACOS\"] = \"Return the arccosine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ASIN\"] = \"Return the arcsine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ATAN\"] = \"Return the arctangent of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_COS\"] = \"Return the cosine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_SIN\"] = \"Return the sine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_TAN\"] = \"Return the tangent of a degree (not radian).\";\n  Blockly.Msg[\"NEW_COLOUR_VARIABLE\"] = \"Create colour variable...\";\n  Blockly.Msg[\"NEW_NUMBER_VARIABLE\"] = \"Create number variable...\";\n  Blockly.Msg[\"NEW_STRING_VARIABLE\"] = \"Create string variable...\";\n  Blockly.Msg[\"NEW_VARIABLE\"] = \"Create variable...\";\n  Blockly.Msg[\"NEW_VARIABLE_TITLE\"] = \"New variable name:\";\n  Blockly.Msg[\"NEW_VARIABLE_TYPE_TITLE\"] = \"New variable type:\";\n  Blockly.Msg[\"ORDINAL_NUMBER_SUFFIX\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_ALLOW_STATEMENTS\"] = \"allow statements\";\n  Blockly.Msg[\"PROCEDURES_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_TOOLTIP\"] = \"Run the user-defined function '%1'.\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_TOOLTIP\"] = \"Run the user-defined function '%1' and use its output.\";\n  Blockly.Msg[\"PROCEDURES_CALL_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CREATE_DO\"] = \"Create '%1'\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"] = \"Describe this function...\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"] = \"do something\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"] = \"to\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TOOLTIP\"] = \"Creates a function with no output.\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_RETURN\"] = \"return\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TOOLTIP\"] = \"Creates a function with an output.\";\n  Blockly.Msg[\"PROCEDURES_DEF_DUPLICATE_WARNING\"] = \"Warning: This function has duplicate parameters.\";\n  Blockly.Msg[\"PROCEDURES_HIGHLIGHT_DEF\"] = \"Highlight function definition\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_HELPURL\"] = \"http://c2.com/cgi/wiki?GuardClause\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_TOOLTIP\"] = \"If a value is true, then return a second value.\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_WARNING\"] = \"Warning: This block may be used only within a function definition.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TITLE\"] = \"input name:\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TOOLTIP\"] = \"Add an input to the function.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TITLE\"] = \"inputs\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TOOLTIP\"] = \"Add, remove, or reorder inputs to this function.\";\n  Blockly.Msg[\"REDO\"] = \"Redo\";\n  Blockly.Msg[\"REMOVE_COMMENT\"] = \"Remove Comment\";\n  Blockly.Msg[\"RENAME_VARIABLE\"] = \"Rename variable...\";\n  Blockly.Msg[\"RENAME_VARIABLE_TITLE\"] = \"Rename all '%1' variables to:\";\n  Blockly.Msg[\"TEXT_APPEND_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_APPEND_TITLE\"] = \"to %1 append text %2\";\n  Blockly.Msg[\"TEXT_APPEND_TOOLTIP\"] = \"Append some text to variable '%1'.\";\n  Blockly.Msg[\"TEXT_CHANGECASE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#adjusting-text-case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_LOWERCASE\"] = \"to lower case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_TITLECASE\"] = \"to Title Case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_UPPERCASE\"] = \"to UPPER CASE\";\n  Blockly.Msg[\"TEXT_CHANGECASE_TOOLTIP\"] = \"Return a copy of the text in a different case.\";\n  Blockly.Msg[\"TEXT_CHARAT_FIRST\"] = \"get first letter\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_END\"] = \"get letter # from end\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_START\"] = \"get letter #\";\n  Blockly.Msg[\"TEXT_CHARAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-text\";\n  Blockly.Msg[\"TEXT_CHARAT_LAST\"] = \"get last letter\";\n  Blockly.Msg[\"TEXT_CHARAT_RANDOM\"] = \"get random letter\";\n  Blockly.Msg[\"TEXT_CHARAT_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_CHARAT_TITLE\"] = \"in text %1 %2\";\n  Blockly.Msg[\"TEXT_CHARAT_TOOLTIP\"] = \"Returns the letter at the specified position.\";\n  Blockly.Msg[\"TEXT_COUNT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#counting-substrings\";\n  Blockly.Msg[\"TEXT_COUNT_MESSAGE0\"] = \"count %1 in %2\";\n  Blockly.Msg[\"TEXT_COUNT_TOOLTIP\"] = \"Count how many times some text occurs within some other text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TOOLTIP\"] = \"Add an item to the text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TITLE_JOIN\"] = \"join\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this text block.\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_END\"] = \"to letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_START\"] = \"to letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_LAST\"] = \"to last letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_INPUT_IN_TEXT\"] = \"in text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FIRST\"] = \"get substring from first letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_END\"] = \"get substring from letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_START\"] = \"get substring from letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TOOLTIP\"] = \"Returns a specified portion of the text.\";\n  Blockly.Msg[\"TEXT_INDEXOF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#finding-text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_FIRST\"] = \"find first occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_LAST\"] = \"find last occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_TITLE\"] = \"in text %1 %2 %3\";\n  Blockly.Msg[\"TEXT_INDEXOF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.\";\n  Blockly.Msg[\"TEXT_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#checking-for-empty-text\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TOOLTIP\"] = \"Returns true if the provided text is empty.\";\n  Blockly.Msg[\"TEXT_JOIN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-creation\";\n  Blockly.Msg[\"TEXT_JOIN_TITLE_CREATEWITH\"] = \"create text with\";\n  Blockly.Msg[\"TEXT_JOIN_TOOLTIP\"] = \"Create a piece of text by joining together any number of items.\";\n  Blockly.Msg[\"TEXT_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"TEXT_LENGTH_TOOLTIP\"] = \"Returns the number of letters (including spaces) in the provided text.\";\n  Blockly.Msg[\"TEXT_PRINT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#printing-text\";\n  Blockly.Msg[\"TEXT_PRINT_TITLE\"] = \"print %1\";\n  Blockly.Msg[\"TEXT_PRINT_TOOLTIP\"] = \"Print the specified text, number or other value.\";\n  Blockly.Msg[\"TEXT_PROMPT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#getting-input-from-the-user\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_NUMBER\"] = \"Prompt for user for a number.\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_TEXT\"] = \"Prompt for user for some text.\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_NUMBER\"] = \"prompt for number with message\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_TEXT\"] = \"prompt for text with message\";\n  Blockly.Msg[\"TEXT_REPLACE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#replacing-substrings\";\n  Blockly.Msg[\"TEXT_REPLACE_MESSAGE0\"] = \"replace %1 with %2 in %3\";\n  Blockly.Msg[\"TEXT_REPLACE_TOOLTIP\"] = \"Replace all occurances of some text within some other text.\";\n  Blockly.Msg[\"TEXT_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#reversing-text\";\n  Blockly.Msg[\"TEXT_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"TEXT_REVERSE_TOOLTIP\"] = \"Reverses the order of the characters in the text.\";\n  Blockly.Msg[\"TEXT_TEXT_HELPURL\"] = \"https://en.wikipedia.org/wiki/String_(computer_science)\";\n  Blockly.Msg[\"TEXT_TEXT_TOOLTIP\"] = \"A letter, word, or line of text.\";\n  Blockly.Msg[\"TEXT_TRIM_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#trimming-removing-spaces\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_BOTH\"] = \"trim spaces from both sides of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_LEFT\"] = \"trim spaces from left side of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_RIGHT\"] = \"trim spaces from right side of\";\n  Blockly.Msg[\"TEXT_TRIM_TOOLTIP\"] = \"Return a copy of the text with spaces removed from one or both ends.\";\n  Blockly.Msg[\"TODAY\"] = \"Today\";\n  Blockly.Msg[\"UNDO\"] = \"Undo\";\n  Blockly.Msg[\"UNNAMED_KEY\"] = \"unnamed\";\n  Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"] = \"item\";\n  Blockly.Msg[\"VARIABLES_GET_CREATE_SET\"] = \"Create 'set %1'\";\n  Blockly.Msg[\"VARIABLES_GET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#get\";\n  Blockly.Msg[\"VARIABLES_GET_TOOLTIP\"] = \"Returns the value of this variable.\";\n  Blockly.Msg[\"VARIABLES_SET\"] = \"set %1 to %2\";\n  Blockly.Msg[\"VARIABLES_SET_CREATE_GET\"] = \"Create 'get %1'\";\n  Blockly.Msg[\"VARIABLES_SET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#set\";\n  Blockly.Msg[\"VARIABLES_SET_TOOLTIP\"] = \"Sets this variable to be equal to the input.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS\"] = \"A variable named '%1' already exists.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE\"] = \"A variable named '%1' already exists for another type: '%2'.\";\n  Blockly.Msg[\"WORKSPACE_ARIA_LABEL\"] = \"Blockly Workspace\";\n  Blockly.Msg[\"WORKSPACE_COMMENT_DEFAULT_TEXT\"] = \"Say something...\";\n  Blockly.Msg[\"CONTROLS_FOREACH_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_FOR_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TITLE_ELSEIF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TITLE_ELSE\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"];\n  Blockly.Msg[\"CONTROLS_IF_IF_TITLE_IF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_IF\"];\n  Blockly.Msg[\"CONTROLS_IF_MSG_THEN\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TITLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_HELPURL\"] = Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_GET_SUBLIST_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_INDEX_OF_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"MATH_CHANGE_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_COMMENT\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_DO\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_PROCEDURE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TITLE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"];\n  Blockly.Msg[\"TEXT_APPEND_VARIABLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"MATH_HUE\"] = \"230\";\n  Blockly.Msg[\"LOOPS_HUE\"] = \"120\";\n  Blockly.Msg[\"LISTS_HUE\"] = \"260\";\n  Blockly.Msg[\"LOGIC_HUE\"] = \"210\";\n  Blockly.Msg[\"VARIABLES_HUE\"] = \"330\";\n  Blockly.Msg[\"TEXTS_HUE\"] = \"160\";\n  Blockly.Msg[\"PROCEDURES_HUE\"] = \"290\";\n  Blockly.Msg[\"COLOUR_HUE\"] = \"20\";\n  Blockly.Msg[\"VARIABLES_DYNAMIC_HUE\"] = \"310\";\n  return Blockly.Msg;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _useBlocklyWorkspace2 = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar propTypes = {\n  initialXml: _propTypes.default.string,\n  toolboxConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  workspaceConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  className: _propTypes.default.string,\n  onWorkspaceChange: _propTypes.default.func,\n  onImportXmlError: _propTypes.default.func,\n  onXmlChange: _propTypes.default.func,\n  onInject: _propTypes.default.func,\n  onDispose: _propTypes.default.func\n};\nvar defaultProps = {\n  initialXml: null,\n  toolboxConfiguration: null,\n  workspaceConfiguration: null,\n  className: null,\n  onWorkspaceChange: null,\n  onImportXmlError: null,\n  onXmlChange: null,\n  onInject: null,\n  onDispose: null\n};\n\nfunction BlocklyWorkspace(_ref) {\n  var initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      className = _ref.className,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onXmlChange = _ref.onXmlChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var editorDiv = _react.default.useRef(null);\n\n  var _useBlocklyWorkspace = (0, _useBlocklyWorkspace2.default)({\n    ref: editorDiv,\n    initialXml: initialXml,\n    toolboxConfiguration: toolboxConfiguration,\n    workspaceConfiguration: workspaceConfiguration,\n    onWorkspaceChange: onWorkspaceChange,\n    onImportXmlError: onImportXmlError,\n    onInject: onInject,\n    onDispose: onDispose\n  }),\n      xml = _useBlocklyWorkspace.xml;\n\n  var onXmlChangeRef = _react.default.useRef(onXmlChange);\n\n  _react.default.useEffect(function () {\n    onXmlChangeRef.current = onXmlChange;\n  }, [onXmlChange]);\n\n  _react.default.useEffect(function () {\n    if (onXmlChangeRef.current && xml) {\n      onXmlChangeRef.current(xml);\n    }\n  }, [xml]);\n\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: className,\n    ref: editorDiv\n  });\n}\n\nBlocklyWorkspace.propTypes = propTypes;\nBlocklyWorkspace.defaultProps = defaultProps;\nvar _default = BlocklyWorkspace;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = debounce;\n\nfunction debounce(func, wait) {\n  var timeout = null;\n  var later = null;\n\n  var debouncedFunction = function debouncedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    later = function later() {\n      timeout = null;\n      func.apply(void 0, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n\n  var cancel = function cancel() {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      later();\n    }\n  };\n\n  return [debouncedFunction, cancel];\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"useBlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _useBlocklyWorkspace.default;\n  }\n});\nObject.defineProperty(exports, \"BlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _BlocklyWorkspace.default;\n  }\n});\n\nvar _useBlocklyWorkspace = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nvar _BlocklyWorkspace = _interopRequireDefault(require(\"./BlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _blockly = _interopRequireDefault(require(\"blockly\"));\n\nvar _debounce3 = _interopRequireDefault(require(\"./debounce\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction importFromXml(xml, workspace, onImportXmlError) {\n  try {\n    _blockly.default.Xml.domToWorkspace(_blockly.default.Xml.textToDom(xml), workspace);\n\n    return true;\n  } catch (e) {\n    if (onImportXmlError) {\n      onImportXmlError(e);\n    }\n\n    return false;\n  }\n}\n\nvar useBlocklyWorkspace = function useBlocklyWorkspace(_ref) {\n  var ref = _ref.ref,\n      initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var _React$useState = _react.default.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      workspace = _React$useState2[0],\n      setWorkspace = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(initialXml),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      xml = _React$useState4[0],\n      setXml = _React$useState4[1];\n\n  var _React$useState5 = _react.default.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      didInitialImport = _React$useState6[0],\n      setDidInitialImport = _React$useState6[1];\n\n  var _React$useState7 = _react.default.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      didHandleNewWorkspace = _React$useState8[0],\n      setDidHandleNewWorkspace = _React$useState8[1]; // we explicitly don't want to recreate the workspace when the configuration changes\n  // so, we'll keep it in a ref and update as necessary in an effect hook\n\n\n  var workspaceConfigurationRef = _react.default.useRef(workspaceConfiguration);\n\n  _react.default.useEffect(function () {\n    workspaceConfigurationRef.current = workspaceConfiguration;\n  }, [workspaceConfiguration]);\n\n  var toolboxConfigurationRef = _react.default.useRef(toolboxConfiguration);\n\n  _react.default.useEffect(function () {\n    toolboxConfigurationRef.current = toolboxConfiguration;\n\n    if (toolboxConfiguration && workspace) {\n      workspace.updateToolbox(toolboxConfiguration);\n    }\n  }, [toolboxConfiguration, workspace]);\n\n  var onInjectRef = _react.default.useRef(onInject);\n\n  var onDisposeRef = _react.default.useRef(onDispose);\n\n  _react.default.useEffect(function () {\n    onInjectRef.current = onInject;\n  }, [onInject]);\n\n  _react.default.useEffect(function () {\n    onDisposeRef.current = onDispose;\n  }, [onDispose]);\n\n  var handleWorkspaceChanged = _react.default.useCallback(function (newWorkspace) {\n    if (onWorkspaceChange) {\n      onWorkspaceChange(newWorkspace);\n    }\n  }, [onWorkspaceChange]); // Workspace creation\n\n\n  _react.default.useEffect(function () {\n    var newWorkspace = _blockly.default.inject(ref.current, _objectSpread(_objectSpread({}, workspaceConfigurationRef.current), {}, {\n      toolbox: toolboxConfigurationRef.current\n    }));\n\n    setWorkspace(newWorkspace);\n    setDidInitialImport(false); // force a re-import if we recreate the workspace\n\n    setDidHandleNewWorkspace(false); // Singal that a workspace change event needs to be sent.\n\n    if (onInjectRef.current) {\n      onInjectRef.current(newWorkspace);\n    }\n\n    var onDisposeFunction = onDisposeRef.current; // Dispose of the workspace when our div ref goes away (Equivalent to didComponentUnmount)\n\n    return function () {\n      newWorkspace.dispose();\n\n      if (onDisposeFunction) {\n        onDisposeFunction(newWorkspace);\n      }\n    };\n  }, [ref]); // Send a workspace change event when the workspace is created\n\n\n  _react.default.useEffect(function () {\n    if (workspace && !didHandleNewWorkspace) {\n      handleWorkspaceChanged(workspace);\n    }\n  }, [handleWorkspaceChanged, didHandleNewWorkspace, workspace]); // Workspace change listener\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var listener = function listener() {\n      handleWorkspaceChanged(workspace);\n    };\n\n    workspace.addChangeListener(listener);\n    return function () {\n      workspace.removeChangeListener(listener);\n    };\n  }, [workspace, handleWorkspaceChanged]); // xmlDidChange callback\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var _debounce = (0, _debounce3.default)(function () {\n      var newXml = _blockly.default.Xml.domToText(_blockly.default.Xml.workspaceToDom(workspace));\n\n      if (newXml === xml) {\n        return;\n      }\n\n      setXml(newXml);\n    }, 200),\n        _debounce2 = _slicedToArray(_debounce, 2),\n        callback = _debounce2[0],\n        cancel = _debounce2[1];\n\n    workspace.addChangeListener(callback);\n    return function () {\n      workspace.removeChangeListener(callback);\n      cancel();\n    };\n  }, [workspace, xml]); // Initial Xml Changes\n\n\n  _react.default.useEffect(function () {\n    if (xml && workspace && !didInitialImport) {\n      var success = importFromXml(xml, workspace, onImportXmlError);\n\n      if (!success) {\n        setXml(null);\n      }\n\n      setDidInitialImport(true);\n    }\n  }, [xml, workspace, didInitialImport, onImportXmlError]);\n\n  return {\n    workspace: workspace,\n    xml: xml\n  };\n};\n\nvar _default = useBlocklyWorkspace;\nexports.default = _default;","import { serviceSpecificationFromName } from \"../jdom/spec\"\nimport {\n    IT4Checker,\n    SpecSymbolResolver,\n} from \"../../jacdac-spec/spectool/jdutils\"\nimport { assert } from \"../jdom/utils\"\n\nexport interface IT4Base {\n    type: \"ite\" | \"cmd\"\n    sourceId?: string\n}\n\nexport interface IT4IfThenElse extends IT4Base {\n    type: \"ite\"\n    expr: jsep.Expression\n    then?: IT4Base[]\n    else?: IT4Base[]\n}\n\nexport interface IT4Command extends IT4Base {\n    type: \"cmd\"\n    command: jsep.CallExpression\n}\n\nexport interface IT4Handler {\n    commands: IT4Base[]\n}\n\nexport interface IT4Role {\n    role: string\n    serviceShortId: string\n}\n\nexport interface IT4Program {\n    roles: IT4Role[]\n    handlers: IT4Handler[]\n    errors?: jdspec.Diagnostic[]\n}\n\nexport const getServiceFromRole = (info: IT4Program) => (role: string) => {\n    // lookup in roles first\n    const shortId = info.roles.find(pair => pair.role === role)\n    if (shortId) {\n        // must succeed\n        const def = serviceSpecificationFromName(shortId.serviceShortId)\n        assert(!!def, `service ${shortId.serviceShortId} not resolved`)\n        return def\n    } else {\n        const service = serviceSpecificationFromName(role)\n        return service\n    }\n}\n\nexport interface RoleRegister {\n    role: string\n    register: string\n}\n\nexport interface RoleEvent {\n    role: string\n    event: string\n}\n\nexport function toIdentifier(id: string) {\n    return {\n        type: \"Identifier\",\n        name: id,\n    } as jsep.Identifier\n}\n\nexport function toMemberExpression(\n    root: string,\n    field: string | jsep.Expression\n) {\n    return {\n        type: \"MemberExpression\",\n        object: toIdentifier(root),\n        property: typeof field === \"string\" ? toIdentifier(field) : field,\n        computed: false,\n    } as jsep.MemberExpression\n}\n\nfunction handlerVisitor(\n    handler: IT4Handler,\n    visitITE: (ite: IT4IfThenElse, time: number) => void,\n    visitCommand: (c: IT4Command) => void\n) {\n    handler.commands.forEach(visitBase)\n\n    function visitBase(base: IT4Base) {\n        switch (base.type) {\n            case \"cmd\": {\n                if (visitCommand) visitCommand(base as IT4Command)\n                break\n            }\n            case \"ite\": {\n                const ite = base as IT4IfThenElse\n                if (visitITE) visitITE(ite, 0)\n                ite?.else?.forEach(visitBase)\n                if (visitITE) visitITE(ite, 1)\n                ite?.then?.forEach(visitBase)\n                if (visitITE) visitITE(ite, 2)\n            }\n        }\n    }\n}\n\nexport function compileProgram(prog: IT4Program) {\n    let newProgram: IT4Program = { roles: prog.roles.slice(0), handlers: [] }\n    newProgram.handlers = prog.handlers.map(h => {\n        return { commands: removeIfThenElse(h) }\n    })\n    return newProgram\n}\n\nfunction removeIfThenElse(handler: IT4Handler): IT4Base[] {\n    const newSequence: IT4Command[] = []\n    const labels: { then: string; end: string }[] = []\n    let labelId = 1\n    handlerVisitor(\n        handler,\n        (ite, time) => {\n            switch (time) {\n                case 0: {\n                    // create the labels and branch instruction\n                    const then = `then_${labelId}`\n                    const end = `end_${labelId}`\n                    labels.push({ then, end })\n                    labelId++\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"branchOnCondition\"),\n                            arguments: [ite.expr, toIdentifier(then)],\n                        },\n                    })\n                    break\n                }\n                case 1: {\n                    // insert the jump and then label\n                    const { then, end } = labels[labels.length - 1]\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"jump\"),\n                            arguments: [toIdentifier(end)],\n                        },\n                    })\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"label\"),\n                            arguments: [toIdentifier(then)],\n                        },\n                    })\n                    break\n                }\n                case 2: {\n                    assert(labels.length > 0)\n                    const { end } = labels[labels.length - 1]\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"label\"),\n                            arguments: [toIdentifier(end)],\n                        },\n                    })\n                    labels.pop()\n                }\n            }\n        },\n        cmd => {\n            newSequence.push(cmd)\n        }\n    )\n    return newSequence\n}\n\nexport function checkProgram(prog: IT4Program): {\n    registers: RoleRegister[]\n    events: RoleEvent[]\n} {\n    const allErrors: jdspec.Diagnostic[] = []\n    const goodHandlers: IT4Handler[] = []\n    const errorFun = (e: string) => {\n        prog.errors.push({ file: \"\", line: undefined, message: e })\n    }\n    const symbolResolver = new SpecSymbolResolver(\n        undefined,\n        getServiceFromRole(prog),\n        errorFun\n    )\n    const checker = new IT4Checker(symbolResolver, _ => true, errorFun)\n    prog.handlers.forEach((h, index) => {\n        prog.errors = []\n        handlerVisitor(h, undefined, c =>\n            checker.checkCommand(c.command, IT4Functions)\n        )\n        if (prog.errors.length) {\n            prog.errors.forEach(e =>\n                allErrors.push({\n                    file: `handler ${index}`,\n                    line: undefined,\n                    message: e.message,\n                })\n            )\n        } else {\n            goodHandlers.push(h)\n        }\n    })\n    prog.handlers = goodHandlers\n    prog.errors = allErrors\n\n    return {\n        registers: symbolResolver.registers.map(s => {\n            const [root, fld] = s.split(\".\")\n            return { role: root, register: fld }\n        }),\n        events: symbolResolver.events.map(e => {\n            const [root, fld] = e.split(\".\")\n            return { role: root, event: fld }\n        }),\n    }\n}\n\nexport type JDIT4Functions =\n    | \"awaitEvent\"\n    | \"awaitRegister\"\n    | \"awaitChange\"\n    | \"awaitCondition\"\n    | \"wait\"\n    | \"writeRegister\"\n    | \"writeLocal\"\n    | \"halt\"\n    | \"label\"\n    | \"jump\"\n    | \"branchOnCondition\"\n    | \"role\"\n\nexport const IT4Functions: jdtest.TestFunctionDescription[] = [\n    {\n        id: \"label\",\n        args: [\"Identifier\"],\n        prompt: `label target {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"jump\",\n        args: [\"Identifier\"],\n        prompt: `jump to label {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"branchOnCondition\",\n        args: [\"boolean\", \"Identifier\"],\n        prompt: `if {1} then jump to label {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitRegister\",\n        args: [\"register\"],\n        prompt: `wait on register {1} to change value`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitChange\",\n        args: [\"register\", \"number\"],\n        prompt: `wait for register {1} to change by {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"wait\",\n        args: [\"number\"],\n        prompt: `wait for {1} milliseconds`,\n        context: \"command\",\n    },\n    {\n        id: \"role\",\n        args: [\"Identifier\", \"Identifier\"],\n        prompt: `role variable {1} of service type {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitEvent\",\n        args: [\"event\", [\"boolean\", true]],\n        prompt: `wait for event {1} and then check {2} (other events ignored)`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitCondition\",\n        args: [\"boolean\"],\n        prompt: `wait for condition {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"writeRegister\",\n        args: [\"register\", \"number\"],\n        prompt: `write value {2:val} to {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"writeLocal\",\n        args: [\"register\", \"number\"],\n        prompt: `write value {2:val} to {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"halt\",\n        args: [],\n        prompt: `terminates the current handler`,\n        context: \"command\",\n    },\n]\n","const VOLUME_GAIN = 0.4\n\nexport interface ToneContext {\n    close: () => void\n    playTone: (frequency: number, duration: number) => void\n    setVolume: (vol: number) => void\n}\n\nexport function createToneContext(defaultVolume?: number): ToneContext {\n    try {\n        console.log(`create tone context`)\n        const ctx = new (window.AudioContext ||\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (window as any).webkitAudioContext)()\n\n        // play silence sound within onlick to unlock it\n        const buffer = ctx.createBuffer(1, 1, 22050)\n        const source = ctx.createBufferSource()\n        source.buffer = buffer\n        source.connect(ctx.destination)\n        source.start()\n\n        // output node with volume\n        const volume = ctx.createGain()\n        volume.connect(ctx.destination)\n        volume.gain.value =\n            (defaultVolume !== undefined ? defaultVolume : 0.2) * VOLUME_GAIN\n\n        const setVolume = (v: number) => {\n            if (volume && !isNaN(v)) {\n                volume.gain.value = v * VOLUME_GAIN\n            }\n        }\n\n        const playTone = (frequency: number, duration: number) => {\n            try {\n                const tone = ctx.createOscillator()\n                tone.type = \"sawtooth\"\n                tone.connect(volume)\n                tone.frequency.value = frequency // update frequency\n                tone.start() // start and stop\n                tone.stop(ctx.currentTime + duration / 1000)\n            } catch (e) {\n                console.debug(e)\n            }\n        }\n\n        const close = () => {\n            try {\n                if (ctx.state === \"running\") ctx.close()\n            } catch (e) {\n                console.warn(e)\n            }\n        }\n\n        console.log(`tone context created`)\n\n        return {\n            setVolume,\n            playTone,\n            close,\n        }\n    } catch (e) {\n        return undefined\n    }\n}\n","import { useContext } from \"react\";\nimport { DeviceFilter, ServiceFilter } from \"../../../jacdac-ts/src/jdom/bus\";\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\nimport useChange from '../../jacdac/useChange';\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, b => b.services(options), [\n        JSON.stringify(options),\n    ])\n    return services\n}","import { Box, BoxProps, Paper, PaperProps, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function PaperBox(props: { padding?: number; elevation?: number; bgcolor?: string } & BoxProps) {\n    const { children, padding, elevation, bgcolor, ...others } = props;\n    const theme = useTheme();\n\n    return <Box {...others} bgcolor={bgcolor} mb={theme.spacing(0.25)}>\n        <Paper square elevation={elevation}>\n            {padding !== 0 && <Box p={theme.spacing(padding || 0.25)}>\n                {children}\n            </Box>}\n            {padding === 0 && children}\n        </Paper>\n    </Box>\n}","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Modern theme.\n */\nimport Blockly from 'blockly/core';\nexport default Blockly.Theme.defineTheme('modern', {\n  'base': Blockly.Themes.Classic,\n  'blockStyles': {\n    'colour_blocks': {\n      'colourPrimary': '#a5745b',\n      'colourSecondary': '#dbc7bd',\n      'colourTertiary': '#845d49'\n    },\n    'list_blocks': {\n      'colourPrimary': '#745ba5',\n      'colourSecondary': '#c7bddb',\n      'colourTertiary': '#5d4984'\n    },\n    'logic_blocks': {\n      'colourPrimary': '#5b80a5',\n      'colourSecondary': '#bdccdb',\n      'colourTertiary': '#496684'\n    },\n    'loop_blocks': {\n      'colourPrimary': '#5ba55b',\n      'colourSecondary': '#bddbbd',\n      'colourTertiary': '#498449'\n    },\n    'math_blocks': {\n      'colourPrimary': '#5b67a5',\n      'colourSecondary': '#bdc2db',\n      'colourTertiary': '#495284'\n    },\n    'procedure_blocks': {\n      'colourPrimary': '#995ba5',\n      'colourSecondary': '#d6bddb',\n      'colourTertiary': '#7a4984'\n    },\n    'text_blocks': {\n      'colourPrimary': '#5ba58c',\n      'colourSecondary': '#bddbd1',\n      'colourTertiary': '#498470'\n    },\n    'variable_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'variable_dynamic_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'hat_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a',\n      'hat': 'cap'\n    }\n  },\n  'categoryStyles': {\n    'colour_category': {\n      'colour': '#a5745b'\n    },\n    'list_category': {\n      'colour': '#745ba5'\n    },\n    'logic_category': {\n      'colour': '#5b80a5'\n    },\n    'loop_category': {\n      'colour': '#5ba55b'\n    },\n    'math_category': {\n      'colour': '#5b67a5'\n    },\n    'procedure_category': {\n      'colour': '#995ba5'\n    },\n    'text_category': {\n      'colour': '#5ba58c'\n    },\n    'variable_category': {\n      'colour': '#a55b99'\n    },\n    'variable_dynamic_category': {\n      'colour': '#a55b99'\n    }\n  },\n  'componentStyles': {},\n  'fontStyle': {},\n  'startHats': null\n});","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dark theme.\n */\nimport Blockly from 'blockly/core';\n/**\n * Dark theme.\n */\n\nexport default Blockly.Theme.defineTheme('theme_dark', {\n  'base': Blockly.Themes.Classic,\n  'componentStyles': {\n    'workspaceBackgroundColour': '#1e1e1e',\n    'toolboxBackgroundColour': 'blackBackground',\n    'toolboxForegroundColour': '#fff',\n    'flyoutBackgroundColour': '#252526',\n    'flyoutForegroundColour': '#ccc',\n    'flyoutOpacity': 1,\n    'scrollbarColour': '#797979',\n    'insertionMarkerColour': '#fff',\n    'insertionMarkerOpacity': 0.3,\n    'scrollbarOpacity': 0.4,\n    'cursorColour': '#d0d0d0',\n    'blackBackground': '#333'\n  }\n});","import {\n    createMuiTheme,\n    responsiveFontSizes,\n    ThemeOptions,\n    ThemeProvider,\n} from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport DarkModeContext from \"./DarkModeContext\"\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default function AppTheme(props: any) {\n    const { darkMode } = useContext(DarkModeContext)\n    const isDark = darkMode === \"dark\"\n    const themeDef: ThemeOptions = {\n        palette: {\n            primary: {\n                main: isDark ? \"#56d364\" : \"#2e7d32\",\n            },\n            secondary: {\n                main: \"#ffc400\",\n            },\n            contrastThreshold: isDark ? 5.1 : 3.1,\n            type: darkMode,\n        },\n    }\n    const rawTheme = createMuiTheme(themeDef)\n    const theme = responsiveFontSizes(rawTheme)\n    return <ThemeProvider theme={theme} {...props} />\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { createContext, ReactNode, useState } from \"react\"\n\nexport interface ValueContextProps<T = any> {\n    value: T\n    onValueChange: (value: T) => void\n}\n\nexport const ValueContext = createContext<ValueContextProps>({\n    value: undefined,\n    onValueChange: undefined,\n})\nValueContext.displayName = \"Value\"\n\nexport default ValueContext\n\nexport function ValueProvider(props: {\n    value: any\n    onValueChange?: (newValue: any) => any\n    children: ReactNode\n}) {\n    const {\n        children,\n        value: initialValue,\n        onValueChange: onFieldValueChange,\n    } = props\n    const [value, setValue] = useState<any>(initialValue)\n    const onValueChange = (newValue: any) => {\n        setValue(newValue)\n        onFieldValueChange?.(newValue)\n    }\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <ValueContext.Provider value={{ value, onValueChange }}>\n            {children}\n        </ValueContext.Provider>\n    )\n}\n","import Blockly, { FieldVariable } from \"blockly\"\nimport React, { createContext, ReactNode, useEffect, useState } from \"react\"\nimport { CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDEventSource } from \"../../../jacdac-ts/src/jdom/eventsource\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { RoleManager } from \"../../../jacdac-ts/src/vm/rolemanager\"\nimport { IT4ProgramRunner } from \"../../../jacdac-ts/src/vm/vmrunner\"\nimport useChange from \"../../jacdac/useChange\"\nimport ReactField from \"./fields/ReactField\"\n\nexport class WorkspaceServices extends JDEventSource {\n    private _runner: IT4ProgramRunner\n    private _roleManager: RoleManager\n\n    constructor() {\n        super()\n    }\n\n    get runner() {\n        return this._runner\n    }\n\n    set runner(value: IT4ProgramRunner) {\n        if (this._runner !== value) {\n            this._runner = value\n            this.emit(CHANGE)\n        }\n    }\n\n    get roleManager() {\n        return this._roleManager\n    }\n\n    set roleManager(value: RoleManager) {\n        if (this._roleManager !== value) {\n            this._roleManager = value\n            this.emit(CHANGE)\n        }\n    }\n}\n\nexport interface WorkspaceContextProps {\n    workspace?: Blockly.Workspace\n    services: WorkspaceServices\n    flyout?: boolean\n    role?: string\n    roleServiceShortId?: string\n    roleService?: JDService\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextProps>({\n    workspace: undefined,\n    flyout: false,\n    services: undefined,\n    role: undefined,\n    roleServiceShortId: undefined,\n    roleService: undefined,\n})\nWorkspaceContext.displayName = \"Workspace\"\n\nexport default WorkspaceContext\n\nexport interface BlocklyWorkspaceWithServices extends Blockly.Workspace {\n    jacdacServices: WorkspaceServices\n}\n\nexport function WorkspaceProvider(props: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    field: ReactField<any>\n    children: ReactNode\n}) {\n    const { field, children } = props\n    const [sourceBlock, setSourceBlock] = useState<Blockly.Block>(\n        field?.getSourceBlock()\n    )\n    const workspace = sourceBlock?.workspace\n    const services = (workspace as BlocklyWorkspaceWithServices)?.jacdacServices\n    const roleManager = services?.roleManager\n    const runner = services?.runner\n\n    const resolveRole = () => {\n        const newSourceBlock = field.getSourceBlock()\n        const roleInput = newSourceBlock?.inputList[0]\n        const roleField = roleInput?.fieldRow.find(\n            f => f.name === \"role\" && f instanceof FieldVariable\n        ) as FieldVariable\n        if (roleField) {\n            const xml = document.createElement(\"xml\")\n            roleField?.toXml(xml)\n            const newRole = roleField?.getVariable()?.name\n            return newRole\n        }\n        return undefined\n    }\n    const resolveRoleService = () => {\n        const newRoleService = role && roleManager?.getService(role)\n        return newRoleService\n    }\n\n    const [role, setRole] = useState<string>(resolveRole())\n    const [roleService, setRoleService] = useState<JDService>(\n        resolveRoleService()\n    )\n    const roleServiceShortId = useChange(\n        roleManager,\n        _ => _?.roles.find(r => r.role === role)?.serviceShortId\n    )\n    const [flyout, setFlyout] = useState(!!sourceBlock?.isInFlyout)\n\n    // resolve role\n    useEffect(() => {\n        return field?.events.subscribe(CHANGE, () => {\n            const newSourceBlock = field.getSourceBlock()\n            console.log(`field change`, { newSourceBlock })\n            setSourceBlock(newSourceBlock)\n            setRole(resolveRole())\n            setFlyout(!!newSourceBlock?.isInFlyout)\n        })\n    }, [field, workspace, runner])\n\n    // resolve current role service\n    useEffect(() => {\n        setRoleService(resolveRoleService())\n        return roleManager?.subscribe(CHANGE, () =>\n            setRoleService(resolveRoleService())\n        )\n    }, [role, runner])\n\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <WorkspaceContext.Provider\n            value={{ services, role, roleServiceShortId, roleService, flyout }}\n        >\n            {children}\n        </WorkspaceContext.Provider>\n    )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Blockly from \"blockly\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport { ReactNode } from \"react\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport { Box } from \"@material-ui/core\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { ValueProvider } from \"./ValueContext\"\nimport { JDEventSource } from \"../../../../jacdac-ts/src/jdom/eventsource\"\nimport { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport { WorkspaceProvider } from \"../WorkspaceContext\"\n\ndeclare module \"blockly\" {\n    interface Block {\n        getColourTertiary(): string\n    }\n}\n\nexport type ReactFieldJSON = any\n\nexport const SOURCE_BLOCK_CHANGE = \"sourceBlockChange\"\nexport const VALUE_CHANGE = \"valueChange\"\nexport const MOUNT = \"mount\"\nexport const UNMOUNT = \"unmount\"\n\nexport default class ReactField<T> extends Blockly.Field {\n    SERIALIZABLE = true\n    public readonly events = new JDEventSource()\n    protected div_: Element\n    protected view: SVGElement\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(\n        value: string,\n        validator?: any,\n        options?: any,\n        size?: { width: number; height: number }\n    ) {\n        super(value, validator, options)\n        if (size) this.size_ = new Blockly.utils.Size(size.width, size.height)\n    }\n\n    get defaultValue(): T {\n        return {} as T\n    }\n\n    get value(): T {\n        try {\n            const v = JSON.parse(this.getValue())\n            return (v || this.defaultValue) as T\n        } catch (e) {\n            console.warn(e)\n            return this.defaultValue\n        }\n    }\n\n    set value(v: T) {\n        this.setValue(JSON.stringify(v))\n    }\n\n    // override to support custom view\n    protected initCustomView(): SVGElement {\n        return null\n    }\n\n    // override to update view\n    protected updateView() {}\n\n    getText_() {\n        return JSON.stringify(this.value)\n    }\n\n    fromXml(fieldElement: Element) {\n        try {\n            const v = JSON.parse(fieldElement.textContent)\n            this.value = v\n        } catch (e) {\n            console.warn(e)\n            this.value = undefined\n        }\n    }\n\n    emitChange() {\n        this.events.emit(CHANGE)\n    }\n\n    setSourceBlock(block: Blockly.Block) {\n        const changed = block !== this.sourceBlock_\n        super.setSourceBlock(block)\n        if (changed) {\n            this.events.emit(SOURCE_BLOCK_CHANGE, block)\n            this.emitChange()\n        }\n    }\n\n    initView() {\n        this.view = this.initCustomView()\n        if (this.view) this.updateView()\n        else super.initView()\n    }\n\n    updateSize_() {\n        if (!this.view) super.updateSize_()\n    }\n\n    doValueUpdate_(newValue: string) {\n        const change = this.value_ !== newValue\n        if (this.view) {\n            this.value_ = newValue\n            this.updateView()\n        } else super.doValueUpdate_(newValue)\n        if (change) {\n            this.events.emit(VALUE_CHANGE, this.value)\n            this.emitChange()\n        }\n    }\n\n    showEditor_() {\n        this.div_ = Blockly.DropDownDiv.getContentDiv()\n        ReactDOM.render(this.render(), this.div_)\n        const border = this.sourceBlock_.getColourTertiary()\n        Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(), border)\n\n        // the div_ size has not been computed yet, so let the browse handle this\n        setTimeout(() => {\n            Blockly.DropDownDiv.showPositionedByField(\n                this,\n                this.dropdownDispose_.bind(this)\n            )\n            this.events.emit(MOUNT)\n        }, 200)\n    }\n\n    hide() {\n        Blockly.DropDownDiv.hideIfOwner(this, true)\n    }\n\n    dropdownDispose_() {\n        // this blows on hot reloads\n        try {\n            this.events.emit(UNMOUNT)\n            ReactDOM.unmountComponentAtNode(this.div_)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    render() {\n        const onValueChange = (newValue: any) => (this.value = newValue)\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode={\"dark\"}>\n                    <IdProvider>\n                        <JacdacProvider>\n                            <AppTheme>\n                                <ValueProvider\n                                    value={this.value}\n                                    onValueChange={onValueChange}\n                                >\n                                    <Box\n                                        m={0.5}\n                                        borderRadius={\"0.25rem\"}\n                                        bgcolor=\"background.paper\"\n                                    >\n                                        {this.renderField()}\n                                    </Box>\n                                </ValueProvider>\n                            </AppTheme>\n                        </JacdacProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    renderField(): ReactNode {\n        return <span>not implemented</span>\n    }\n\n    dispose() {\n        this.view = undefined\n        super.dispose()\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toShadowDefinition(fieldType: any): BlockDefinition {\n    assert(!!fieldType.KEY)\n    const type = fieldType.KEY + \"_shadow\"\n    return {\n        kind: \"block\",\n        type,\n        message0: `%1`,\n        args0: [\n            {\n                type: fieldType.KEY,\n                name: \"value\",\n            },\n        ],\n        style: \"math_blocks\",\n        output: \"Number\",\n        template: \"shadow\",\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { createToneContext, ToneContext } from \"../../hooks/toneContext\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, {\n    ReactFieldJSON,\n    toShadowDefinition,\n    UNMOUNT,\n} from \"./ReactField\"\nconst PianoWidget = lazy(() => import(\"../../widgets/PianoWidget\"))\n\nexport default class NoteField extends ReactField<number> {\n    static KEY = \"jacdac_field_note\"\n    static SHADOW = toShadowDefinition(NoteField)\n    toneContext: ToneContext\n\n    static fromJson(options: ReactFieldJSON) {\n        return new NoteField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options)\n        this.events.on(UNMOUNT, () => {\n            this.toneContext?.close()\n            this.toneContext = undefined\n        })\n    }\n\n    get defaultValue() {\n        return 440\n    }\n\n    getText_() {\n        return (this.value | 0) + \"\"\n    }\n\n    renderField(): ReactNode {\n        const handlePlayTone = async (newFrequency: number) => {\n            this.value = newFrequency\n            if (!this.toneContext) this.toneContext = createToneContext()\n            this.toneContext?.playTone(newFrequency, 400)\n        }\n        return (\n            <Suspense>\n                <PianoWidget playTone={handlePlayTone} />\n            </Suspense>\n        )\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { HidKeyboardModifiers } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport ReactField, { ReactFieldJSON } from \"./ReactField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { renderKeyboardKey } from \"../../../../jacdac-ts/src/servers/hidkeyboardserver\"\nconst KeyboardKeyInput = lazy(() => import(\"../../ui/KeyboardKeyInput\"))\n\nexport interface KeyboardFieldValue {\n    selector: number\n    modifiers: HidKeyboardModifiers\n}\n\nexport default class KeyboardKeyField extends ReactField<KeyboardFieldValue> {\n    static KEY = \"jacdac_field_keyboard_key\"\n\n    static fromJson(options: ReactFieldJSON) {\n        return new KeyboardKeyField(options?.value, undefined, options)\n    }\n\n    get defaultValue() {\n        return { selector: 4, modifiers: 0 }\n    }\n\n    getText_() {\n        const { selector, modifiers } = this.value\n        return renderKeyboardKey(selector, modifiers, true)\n    }\n\n    renderField(): ReactNode {\n        const { selector, modifiers } = this.value\n        const handleChange = (\n            newSelector: number,\n            newModifiers: HidKeyboardModifiers\n        ) => {\n            this.value = { selector: newSelector, modifiers: newModifiers }\n        }\n        return (\n            <Suspense>\n                <KeyboardKeyInput\n                    initialSelector={selector}\n                    initialModifiers={modifiers}\n                    onChange={handleChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction mkTitle(txt: string): SVGTitleElement {\n    const t = <SVGTitleElement>elt(\"title\")\n    t.textContent = txt\n    return t\n}\nexport function title(el: SVGElement, txt: string): SVGTitleElement {\n    const t = mkTitle(txt)\n    el.appendChild(t)\n    return t\n}\n\nexport function hydrate(el: SVGElement, props: any) {\n    for (const k in props) {\n        if (k == \"title\") {\n            title(el, props[k])\n        } else el.setAttributeNS(null, k, props[k])\n    }\n}\n\nexport function elt(name: string, props?: any): SVGElement {\n    const el = document.createElementNS(\"http://www.w3.org/2000/svg\", name)\n    if (props) hydrate(el, props)\n    return el\n}\n\nexport function child(parent: Element, name: string, props?: any): SVGElement {\n    const el = elt(name, props)\n    parent.appendChild(el)\n    return el\n}\n","import ReactField from \"./ReactField\"\nimport Blockly from \"blockly\"\nimport { child } from \"../../widgets/svg\"\n\nexport default class ReactImageField<T> extends ReactField<T> {\n    constructor(value: string, width = 32, height = 32) {\n        super(value, undefined, undefined, { width, height })\n    }\n\n    setSize(width: number, height: number) {\n        this.size_ = new Blockly.utils.Size(width, height)\n        const img = this.view as SVGImageElement\n        if (img) {\n            img.setAttribute(\"width\", width + \"\")\n            img.setAttribute(\"height\", height + \"\")\n        }\n    }\n\n    protected updateView() {\n        const imgUri = this.renderValue()\n        const img = this.view as SVGImageElement\n        if (imgUri) {\n            img?.setAttributeNS(\n                \"http://www.w3.org/1999/xlink\",\n                \"xlink:href\",\n                imgUri\n            )\n            img?.setAttribute(\"alt\", this.getText())\n        }\n    }\n\n    /**\n     * Renders the value to a data uri string\n     */\n    protected renderValue(): string {\n        return undefined\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        return child(this.fieldGroup_, \"image\", {\n            height,\n            width,\n            alt: this.getText(),\n        }) as SVGImageElement\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { fromHex, toHex } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, VALUE_CHANGE } from \"./ReactField\"\nimport ReactImageField from \"./ReactImageField\"\nconst LEDMatrixWidget = lazy(() => import(\"../../widgets/LEDMatrixWidget\"))\n\nexport interface LEDMatrixFieldValue {\n    // hex data\n    leds: string\n    rows: number\n    columns: number\n}\n\nexport default class LEDMatrixField extends ReactImageField<LEDMatrixFieldValue> {\n    static KEY = \"jacdac_field_led_matrix\"\n\n    constructor(value: string) {\n        super(value)\n\n        this.events.on(VALUE_CHANGE, () => {\n            const { rows, columns } = this.value\n            this.setSize(32, (32 / columns) * rows)    \n        })\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDMatrixField(options?.value)\n    }\n\n    get defaultValue() {\n        return {\n            leds: toHex(new Uint8Array(4)),\n            rows: 5,\n            columns: 5,\n        }\n    }\n\n    getText_() {\n        const { leds, rows, columns } = this.value\n        return `${leds} (${rows}x${columns})`\n    }\n\n    renderValue(): string {\n        const { leds, rows, columns } = this.value\n        // render current state to LEDmatrix field\n        const columnspadded = columns + (8 - (columns % 8))\n        const ledsBytes = fromHex(leds)\n        const cvs = document.createElement(\"canvas\")\n        const b = 3\n        const pw = 8\n        const ph = 8\n        const w = rows * pw + (rows - 1) * b\n        const h = columns * ph + (columns - 1) * b\n        cvs.width = w + 2 * b\n        cvs.height = h + 2 * b\n        const ctx = cvs.getContext(\"2d\")\n        ctx.fillStyle = \"#444\"\n        ctx.fillRect(b, b, w, h)\n        ctx.fillStyle = \"blue\"\n        for (let x = 0; x < columns; ++x) {\n            for (let y = 0; y < rows; ++y) {\n                const bitindex = y * columnspadded + x\n                const byte = ledsBytes[bitindex >> 3]\n                const bit = bitindex % 8\n                const on = 1 === ((byte >> bit) & 1)\n                ctx.fillStyle = on ? \"#ffc400\" : \"#000\"\n                ctx.fillRect(x * (pw + b) + b, y * (ph + b) + b, pw, ph)\n            }\n        }\n        const dataUri = cvs.toDataURL(\"image/png\")\n        return dataUri\n    }\n\n    renderField(): ReactNode {\n        const { leds, rows, columns } = this.value\n        const ledsBytes = fromHex(leds)\n        const onChange = (newLeds: Uint8Array) =>\n            (this.value = {\n                leds: toHex(newLeds),\n                rows,\n                columns,\n            })\n        return (\n            <Suspense>\n                <LEDMatrixWidget\n                    color=\"secondary\"\n                    brightness={1}\n                    leds={ledsBytes}\n                    rows={rows}\n                    columns={columns}\n                    onChange={onChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","import { Grid, Slider } from \"@material-ui/core\"\nimport React, { ReactNode, useContext } from \"react\"\nimport ReactField from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nfunction FieldWithSlider(props: { children: ReactNode }) {\n    const { children } = props\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    const handleChange = async (ev: unknown, nv: number | number[]) => {\n        const newValue = nv as number\n        onValueChange(newValue)\n    }\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                {children}\n            </Grid>\n            <Grid item xs={12}>\n                <Slider\n                    color=\"secondary\"\n                    valueLabelDisplay=\"auto\"\n                    valueLabelFormat={`${Math.round(value)}`}\n                    min={-90}\n                    max={90}\n                    step={5}\n                    value={value}\n                    onChange={handleChange}\n                    aria-label=\"angle\"\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class SliderField extends ReactField<number> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(value: string, options?: any) {\n        super(value, undefined, options)\n    }\n\n    get defaultValue() {\n        return 0\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderField(): ReactNode {\n        return <FieldWithSlider>{this.renderWidget()}</FieldWithSlider>\n    }\n\n    renderWidget(): ReactNode {\n        return null\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport SliderField from \"./SliderField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst ServoWidget = lazy(() => import(\"../../widgets/ServoWidget\"))\n\nfunction ServiceFieldWidget() {\n    const { value } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <ServoWidget\n                angle={value}\n                offset={0}\n                color=\"secondary\"\n                enabled={true}\n            />\n        </Suspense>\n    )\n}\n\nexport default class ServoAngleField extends SliderField {\n    static KEY = \"jacdac_field_servo_angle\"\n    static SHADOW = toShadowDefinition(ServoAngleField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ServoAngleField(options?.value, options)\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderWidget(): ReactNode {\n        return <ServiceFieldWidget />\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport { rgbToHtmlColor } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { child } from \"../../widgets/svg\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst LEDWidget = lazy(() => import(\"../../widgets/LEDWidget\"))\n\nfunction LEDColorFieldWidget() {\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <LEDWidget\n                value={value}\n                onChange={onValueChange}\n                ledCount={3}\n                color=\"secondary\"\n            />\n        </Suspense>\n    )\n}\n\nexport default class LEDColorField extends ReactField<number> {\n    static KEY = \"jacdac_field_led_color\"\n    static SHADOW = toShadowDefinition(LEDColorField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDColorField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 28, height: 28 })\n    }\n\n    protected initCustomView() {\n        const { width } = this.size_\n        const r = width >> 1\n        return child(this.fieldGroup_, \"circle\", {\n            r: width >> 1,\n            cx: r,\n            cy: r,\n            strokeWidth: 2,\n            stroke: \"#777\",\n        }) as SVGCircleElement\n    }\n\n    updateView() {\n        const c = rgbToHtmlColor(this.value)\n        const circle = this.view as SVGCircleElement\n        if (c) {\n            circle?.setAttribute(\"fill\", c)\n        }\n    }\n\n    getText_() {\n        return rgbToHtmlColor(this.value)\n    }\n\n    renderField(): ReactNode {\n        return <LEDColorFieldWidget />\n    }\n}\n","import React, { ReactNode } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport ReactField from \"./ReactField\"\nimport { child } from \"../../widgets/svg\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport Blockly from \"blockly\"\nimport { WorkspaceProvider } from \"../WorkspaceContext\"\n\nexport default class ReactInlineField extends ReactField<unknown> {\n    protected container: HTMLDivElement\n    protected resizeObserver: ResizeObserver\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 1, height: 1 })\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        const fo = child(this.fieldGroup_, \"foreignObject\", {\n            x: 0,\n            y: 0,\n            width,\n            height,\n        }) as SVGForeignObjectElement\n\n        this.container = document.createElement(\"div\")\n        this.container.style.display = \"inline-block\"\n        this.container.style.minWidth = \"14rem\"\n        fo.appendChild(this.container)\n\n        this.resizeObserver = new ResizeObserver(\n            (entries: ResizeObserverEntry[]) => {\n                const entry = entries[0]\n                const { contentRect } = entry\n                this.size_.width = contentRect.width\n                this.size_.height = contentRect.height\n                fo.setAttribute(\"width\", this.size_.width + \"\")\n                fo.setAttribute(\"height\", this.size_.height + \"\")\n                this.forceRerender()\n            }\n        )\n        this.resizeObserver.observe(this.container)\n\n        ReactDOM.render(this.renderBlock(), this.container)\n        return fo\n    }\n\n    dispose() {\n        if (this.container) {\n            ReactDOM.unmountComponentAtNode(this.container)\n            this.container = undefined\n        }\n        if (this.resizeObserver) {\n            this.resizeObserver.disconnect()\n            this.resizeObserver = undefined\n        }\n        super.dispose()\n    }\n\n    renderField(): ReactNode {\n        return <div>not used</div>\n    }\n\n    renderInlineField(): ReactNode {\n        return null\n    }\n\n    renderBlock(): ReactNode {\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode=\"dark\">\n                    <IdProvider>\n                        <JacdacProvider>\n                            <AppTheme>{this.renderInlineField()}</AppTheme>\n                        </JacdacProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    getText_() {\n        return \"...\"\n    }\n\n    // don't bind any mouse event\n    bindEvents_() {\n        Blockly.Tooltip.bindMouseEvents(this.getClickTarget_())\n    }\n}\n","import React, { useContext } from \"react\"\nimport { Button } from \"@material-ui/core\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport { startServiceProviderFromServiceClass } from \"../../../../jacdac-ts/src/servers/servers\"\nimport JacdacContext, { JacdacContextProps } from \"../../../jacdac/Context\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport { serviceSpecificationFromName } from \"../../../../jacdac-ts/src/jdom/spec\"\nimport { Alert } from \"@material-ui/lab\"\n\nexport default function NoServiceAlert() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { roleService, roleServiceShortId, flyout } =\n        useContext(WorkspaceContext)\n    const spec = serviceSpecificationFromName(roleServiceShortId)\n    const handleStartSimulator = () =>\n        startServiceProviderFromServiceClass(bus, spec.classIdentifier)\n\n    // nothing to do here\n    if (roleService || flyout) return null\n\n    // unresolved, unknown service\n    if (!roleService && !roleServiceShortId) return null\n\n    // unknown spec\n    if (!spec) return <Alert severity=\"warning\">Unknown service</Alert>\n\n    return (\n        <Button\n            variant=\"outlined\"\n            color=\"default\"\n            startIcon={<AddIcon />}\n            onClick={handleStartSimulator}\n        >\n            start {spec.name}\n        </Button>\n    )\n}\n","import React, { PointerEvent, useContext } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport { Grid } from \"@material-ui/core\"\nimport DashboardServiceWidget from \"../../dashboard/DashboardServiceWidget\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport NoServiceAlert from \"./NoServiceAlert\"\n\nfunction TwinWidget() {\n    const { roleService, flyout } = useContext(WorkspaceContext)\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        event.stopPropagation()\n    }\n    if (flyout) return null\n\n    return (\n        <Grid\n            container\n            alignItems=\"center\"\n            alignContent=\"center\"\n            justify=\"center\"\n            spacing={1}\n        >\n            <Grid item>\n                <NoServiceAlert />\n                {roleService && (\n                    <div\n                        style={{ cursor: \"inherit\" }}\n                        onPointerDown={onPointerStopPropagation}\n                        onPointerUp={onPointerStopPropagation}\n                        onPointerMove={onPointerStopPropagation}\n                    >\n                        <DashboardServiceWidget\n                            service={roleService}\n                            visible={true}\n                            variant=\"icon\"\n                        />\n                    </div>\n                )}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class TwinField extends ReactInlineField {\n    static KEY = \"jacdac_field_twin\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new TwinField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <TwinWidget />\n    }\n}\n","import React, { lazy, useContext, PointerEvent } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport Suspense from \"../../ui/Suspense\"\nconst JDomServiceTreeView = lazy(\n    () => import(\"../../tools/JDomServiceTreeView\")\n)\n\nfunction JDomTreeWidget() {\n    const { roleService, flyout } = useContext(WorkspaceContext)\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        event.stopPropagation()\n    }\n\n    if (!roleService || flyout) return null\n\n    return (\n        <div\n            style={{ minWidth: \"12rem\", cursor: \"inherit\" }}\n            onPointerDown={onPointerStopPropagation}\n            onPointerUp={onPointerStopPropagation}\n            onPointerMove={onPointerStopPropagation}\n        >\n            {roleService && (\n                <Suspense>\n                    <JDomServiceTreeView\n                        service={roleService}\n                        defaultExpanded={[roleService.id]}\n                    />\n                </Suspense>\n            )}\n        </div>\n    )\n}\n\nexport default class JDomTreeField extends ReactInlineField {\n    static KEY = \"jacdac_jdom_service_tree\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new JDomTreeField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <JDomTreeWidget />\n    }\n}\n","import Blockly from \"blockly\"\nimport NoteField from \"./NoteField\"\nimport KeyboardKeyField from \"./KeyboardKeyField\"\nimport LEDMatrixField from \"./LEDMatrixField\"\nimport ServoAngleField from \"./ServoAngleField\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport LEDColorField from \"./LEDColorField\"\nimport TwinField from \"./TwinField\"\nimport JDomTreeField from \"./JDomTreeField\"\n\nlet reactFieldShadows: BlockDefinition[]\nexport function registerFields() {\n    if (reactFieldShadows) return\n\n    reactFieldShadows = []\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const registerType = (fieldType: any) => {\n        const key = fieldType.KEY\n        assert(!!key)\n        Blockly.fieldRegistry.unregister(key) // hot reload issues\n        Blockly.fieldRegistry.register(key, fieldType)\n        if (fieldType.SHADOW) reactFieldShadows.push(fieldType.SHADOW)\n    }\n    const fieldTypes = [\n        KeyboardKeyField,\n        NoteField,\n        LEDMatrixField,\n        ServoAngleField,\n        LEDColorField,\n        TwinField,\n        JDomTreeField,\n    ]\n    fieldTypes.forEach(registerType)\n}\n\nexport function fieldShadows() {\n    registerFields()\n    return reactFieldShadows.slice(0)\n}\n","import { SMap } from \"../../../jacdac-ts/src/jdom/utils\"\n\nexport const NEW_PROJET_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>'\n\nexport interface InputDefinition {\n    type: string\n    name?: string\n    variable?: string\n    variableTypes?: string[]\n    defaultType?: string\n    check?: string | string[]\n}\n\nexport interface OptionsInputDefinition extends InputDefinition {\n    options?: [string, string][]\n}\n\nexport interface NumberInputDefinition extends InputDefinition {\n    min?: number\n    max?: number\n    precision?: number\n}\n\nexport interface ColorInputDefnition extends InputDefinition {\n    color?: string\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface BlockReference {\n    kind: \"block\"\n    type: string\n    values?: SMap<BlockReference>\n    blockxml?: string\n\n    value?: number\n    min?: number\n    max?: number\n}\n\nexport type EventTemplate = \"event\"\n\nexport type EventFieldTemplate = \"event_field\"\n\nexport type RegisterTemplate =\n    | \"register_change_event\"\n    | \"register_set\"\n    | \"register_get\"\n\nexport type CommandTemplate = \"command\"\n\nexport type CustomTemplate = \"custom\"\n\nexport type BlockTemplate =\n    | EventTemplate\n    | EventFieldTemplate\n    | RegisterTemplate\n    | CommandTemplate\n    | CustomTemplate\n    | \"shadow\"\n    | \"twin\"\n    | \"watch\"\n\nexport interface BlockDefinition extends BlockReference {\n    message0?: string\n    args0?: InputDefinition[]\n    colour?: number | string\n    inputsInline?: boolean\n    previousStatement?: string | string[]\n    nextStatement?: string | string[]\n    tooltip?: string\n    helpUrl?: string\n    style?: string\n    output?: string\n    extensions?: string[]\n    template?: BlockTemplate\n}\n\nexport interface ButtonDefinition {\n    kind: \"button\"\n    text: string\n    callbackKey: string\n    service: jdspec.ServiceSpec\n}\n\nexport interface ServiceBlockDefinition extends BlockDefinition {\n    template: BlockTemplate\n    service: jdspec.ServiceSpec\n}\n\nexport interface ServiceBlockDefinitionFactory {\n    jacdacDefinition: ServiceBlockDefinition\n    init: () => void\n}\n\nexport interface EventBlockDefinition extends ServiceBlockDefinition {\n    template: EventTemplate\n    events: jdspec.PacketInfo[]\n}\n\nexport interface EventFieldDefinition extends ServiceBlockDefinition {\n    template: EventFieldTemplate\n    event: jdspec.PacketInfo\n}\n\nexport interface RegisterBlockDefinition extends ServiceBlockDefinition {\n    template: RegisterTemplate\n    register: jdspec.PacketInfo\n    field?: jdspec.PacketMember\n}\n\nexport interface CommandBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: CommandTemplate\n    command: jdspec.PacketInfo\n}\n\nexport interface CustomBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: CustomTemplate\n    expression?: string\n}\n\nexport const WHILE_CONDITION_BLOCK = \"jacdac_while_event\"\nexport const WHILE_CONDITION_BLOCK_CONDITION = \"condition\"\nexport const WAIT_BLOCK = \"jacdac_wait\"\nexport const SET_STATUS_LIGHT_BLOCK = \"jacdac_set_status_light\"\nexport const TWIN_BLOCK = \"jacdac_twin\"\nexport const INSPECT_BLOCK = \"jacdac_inspect\"\nexport const WATCH_BLOCK = \"jacdac_watch\"\n\nexport interface CategoryDefinition {\n    kind: \"category\"\n    name: string\n    custom?: string\n    colour?: string\n    categorystyle?: string\n    contents?: (BlockDefinition | ButtonDefinition)[]\n    button?: ButtonDefinition\n}\n\nexport interface SeparatorDefinition {\n    kind: \"sep\"\n}\n\nexport type ToolboxNode = SeparatorDefinition | CategoryDefinition | ButtonDefinition\n\nexport interface ToolboxConfiguration {\n    kind: \"categoryToolbox\"\n    contents: ToolboxNode[]\n}\n","import Blockly from \"blockly\"\nimport { useContext, useEffect, useMemo } from \"react\"\nimport {\n    JoystickReg,\n    ServoReg,\n    SRV_BOOTLOADER,\n    SRV_BUZZER,\n    SRV_CONTROL,\n    SRV_HID_KEYBOARD,\n    SRV_JOYSTICK,\n    SRV_LED,\n    SRV_LED_MATRIX,\n    SRV_LOGGER,\n    SRV_PROTO_TEST,\n    SRV_ROLE_MANAGER,\n    SRV_SERVO,\n    SRV_SETTINGS,\n    SRV_SEVEN_SEGMENT_DISPLAY,\n    SystemEvent,\n    SystemReg,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport {\n    humanify,\n    isNumericType,\n} from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport {\n    isCommand,\n    isEvent,\n    isRegister,\n    isSensor,\n    serviceSpecifications,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport {\n    arrayConcatMany,\n    splitFilter,\n    toMap,\n    uniqueMap,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport useServices from \"../hooks/useServices\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { Theme, useTheme } from \"@material-ui/core\"\nimport { withPrefix } from \"gatsby-link\"\nimport { fieldShadows, registerFields } from \"./fields/fields\"\nimport KeyboardKeyField from \"./fields/KeyboardKeyField\"\nimport LEDMatrixField from \"./fields/LEDMatrixField\"\nimport {\n    BlockDefinition,\n    BlockReference,\n    ButtonDefinition,\n    CategoryDefinition,\n    ColorInputDefnition,\n    CommandBlockDefinition,\n    CustomBlockDefinition,\n    EventBlockDefinition,\n    EventFieldDefinition,\n    InputDefinition,\n    INSPECT_BLOCK,\n    NEW_PROJET_XML,\n    NumberInputDefinition,\n    OptionsInputDefinition,\n    RegisterBlockDefinition,\n    SeparatorDefinition,\n    ServiceBlockDefinition,\n    ServiceBlockDefinitionFactory,\n    SET_STATUS_LIGHT_BLOCK,\n    ToolboxConfiguration,\n    TWIN_BLOCK,\n    WAIT_BLOCK,\n    WATCH_BLOCK,\n    WHILE_CONDITION_BLOCK,\n    WHILE_CONDITION_BLOCK_CONDITION,\n} from \"./toolbox\"\nimport NoteField from \"./fields/NoteField\"\nimport ServoAngleField from \"./fields/ServoAngleField\"\nimport LEDColorField from \"./fields/LEDColorField\"\nimport TwinField from \"./fields/TwinField\"\nimport JDomTreeField from \"./fields/JDomTreeField\"\n\ntype CachedBlockDefinitions = {\n    blocks: BlockDefinition[]\n    serviceBlocks: ServiceBlockDefinition[]\n    services: jdspec.ServiceSpec[]\n}\n\nfunction isBooleanField(field: jdspec.PacketMember) {\n    return field.type === \"bool\"\n}\nfunction isStringField(field: jdspec.PacketMember) {\n    return field.type === \"string\"\n}\nfunction toBlocklyType(field: jdspec.PacketMember) {\n    return isBooleanField(field)\n        ? \"Boolean\"\n        : isStringField(field)\n        ? \"String\"\n        : isNumericType(field)\n        ? \"Number\"\n        : undefined\n}\nfunction enumInfo(srv: jdspec.ServiceSpec, field: jdspec.PacketMember) {\n    const e = srv.enums?.[field.type]\n    return e\n}\n\nconst ignoredServices = [\n    SRV_CONTROL,\n    SRV_LOGGER,\n    SRV_ROLE_MANAGER,\n    SRV_PROTO_TEST,\n    SRV_SETTINGS,\n    SRV_BOOTLOADER,\n]\nconst ignoredEvents = [SystemEvent.StatusCodeChanged]\nconst includedRegisters = [\n    SystemReg.Reading,\n    SystemReg.Value,\n    SystemReg.Intensity,\n]\n\nconst customMessages = [\n    {\n        service: SRV_JOYSTICK,\n        register: JoystickReg.Direction,\n        field: \"buttons\",\n        get: \"is %1 %2 pressed\",\n    },\n]\n\nfunction createBlockTheme(theme: Theme) {\n    const sensorColor = theme.palette.success.main\n    const otherColor = theme.palette.info.main\n    const commandColor = theme.palette.warning.main\n    const debuggerColor = theme.palette.grey[600]\n    const serviceColor = (srv: jdspec.ServiceSpec) =>\n        isSensor(srv) ? sensorColor : otherColor\n    return {\n        serviceColor,\n        sensorColor,\n        commandColor,\n        debuggerColor,\n        otherColor,\n    }\n}\n\nfunction loadBlocks(\n    serviceColor: (srv: jdspec.ServiceSpec) => string,\n    commandColor: string,\n    debuggerColor: string\n): CachedBlockDefinitions {\n    const customShadows = [\n        {\n            serviceClass: SRV_SERVO,\n            kind: \"rw\",\n            identifier: ServoReg.Angle,\n            field: \"_\",\n            shadow: <BlockDefinition>{\n                kind: \"block\",\n                type: ServoAngleField.SHADOW.type,\n            },\n        },\n    ]\n    const lookupCustomShadow = (\n        service: jdspec.ServiceSpec,\n        info: jdspec.PacketInfo,\n        field: jdspec.PacketMember\n    ) =>\n        customShadows.find(\n            cs =>\n                cs.serviceClass === service.classIdentifier &&\n                cs.kind == info.kind &&\n                cs.identifier === info.identifier &&\n                cs.field == field.name\n        )?.shadow\n\n    const serviceHelp = (service: jdspec.ServiceSpec) =>\n        withPrefix(`/services/${service.shortId}`)\n    const fieldsSupported = (pkt: jdspec.PacketInfo) =>\n        pkt.fields.every(toBlocklyType)\n    const fieldName = (reg: jdspec.PacketInfo, field: jdspec.PacketMember) =>\n        field.name === \"_\" ? reg.name : field.name\n    const fieldToShadow = (\n        service: jdspec.ServiceSpec,\n        info: jdspec.PacketInfo,\n        field: jdspec.PacketMember\n    ): BlockReference =>\n        lookupCustomShadow(service, info, field) ||\n        (isBooleanField(field)\n            ? { kind: \"block\", type: \"jacdac_on_off\" }\n            : isStringField(field)\n            ? { kind: \"block\", type: \"text\" }\n            : field.unit === \"\"\n            ? {\n                  kind: \"block\",\n                  type: \"jacdac_angle\",\n              }\n            : field.unit === \"/\"\n            ? { kind: \"block\", type: \"jacdac_ratio\" }\n            : /^%/.test(field.unit)\n            ? { kind: \"block\", type: \"jacdac_percent\" }\n            : field.type === \"u8\"\n            ? { kind: \"block\", type: \"jacdac_byte\" }\n            : {\n                  kind: \"block\",\n                  type: \"math_number\",\n                  value: field.defaultValue || 0,\n                  min: field.typicalMin || field.absoluteMin,\n                  max: field.typicalMax || field.absoluteMax,\n              })\n    const variableName = (srv: jdspec.ServiceSpec) =>\n        `${humanify(srv.camelName).toLowerCase()} 1`\n    const fieldVariable = (service: jdspec.ServiceSpec): InputDefinition => ({\n        type: \"field_variable\",\n        name: \"role\",\n        variable: variableName(service),\n        variableTypes: [service.shortId],\n        defaultType: service.shortId,\n    })\n    const fieldsToFieldInputs = (info: jdspec.PacketInfo) =>\n        info.fields.map(field => ({\n            type: \"input_value\",\n            name: fieldName(info, field),\n            check: toBlocklyType(field),\n        }))\n    const fieldsToValues = (\n        service: jdspec.ServiceSpec,\n        info: jdspec.PacketInfo\n    ) =>\n        toMap<jdspec.PacketMember, BlockReference | BlockDefinition>(\n            info.fields,\n            field => fieldName(info, field),\n            field => fieldToShadow(service, info, field)\n        )\n    const fieldsToMessage = (info: jdspec.PacketInfo) =>\n        info.fields\n            .map((field, i) => `${humanify(field.name)} %${2 + i}`)\n            .join(\" \")\n    const isEnabledRegister = (info: jdspec.PacketInfo) =>\n        info.fields.length === 1 &&\n        info.fields[0].type === \"bool\" &&\n        info.name === \"enabled\"\n    const customMessage = (\n        srv: jdspec.ServiceSpec,\n        reg: jdspec.PacketInfo,\n        field: jdspec.PacketMember\n    ) =>\n        customMessages.find(\n            m =>\n                m.service === srv.classIdentifier &&\n                m.register === reg.identifier &&\n                m.field === field.name\n        )\n\n    const allServices = serviceSpecifications()\n        .filter(\n            service =>\n                !/^_/.test(service.shortId) && service.status !== \"deprecated\"\n        )\n        .filter(service => ignoredServices.indexOf(service.classIdentifier) < 0)\n    const resolveService = (cls: number): jdspec.ServiceSpec[] =>\n        allServices.filter(srv => srv.classIdentifier === cls)\n    const registers = arrayConcatMany(\n        allServices.map(service =>\n            service.packets\n                .filter(\n                    pkt =>\n                        isRegister(pkt) &&\n                        includedRegisters.indexOf(pkt.identifier) > -1\n                )\n                .map(register => ({\n                    service,\n                    register,\n                }))\n        )\n    )\n    const events = allServices\n        .map(service => ({\n            service,\n            events: service.packets.filter(\n                pkt => isEvent(pkt) && ignoredEvents.indexOf(pkt.identifier) < 0\n            ),\n        }))\n        .filter(kv => !!kv.events.length)\n    const commands = arrayConcatMany(\n        allServices.map(service =>\n            service.packets\n                .filter(pkt => isCommand(pkt) && fieldsSupported(pkt))\n                .map(pkt => ({\n                    service,\n                    command: pkt,\n                }))\n        )\n    )\n\n    const customBlockDefinitions: CustomBlockDefinition[] = [\n        ...resolveService(SRV_HID_KEYBOARD).map(\n            service =>\n                <CustomBlockDefinition>{\n                    kind: \"block\",\n                    type: `key`,\n                    message0: `send %1 key %2`,\n                    args0: [\n                        fieldVariable(service),\n                        {\n                            type: KeyboardKeyField.KEY,\n                            name: \"combo\",\n                        },\n                    ],\n                    colour: serviceColor(service),\n                    inputsInline: true,\n                    previousStatement: null,\n                    nextStatement: null,\n                    tooltip: `Send a keyboard key combo`,\n                    helpUrl: serviceHelp(service),\n                    service,\n                    expression: `role.key(combo.selectors, combo.modifiers)`,\n                    //expression: `play_tone(frequency, duration) => role.send_pulse(frequency / 10000, duration)`,\n                    template: \"custom\",\n                }\n        ),\n        ...resolveService(SRV_LED).map(\n            service =>\n                <CustomBlockDefinition>{\n                    kind: \"block\",\n                    type: `fade`,\n                    message0: `fade %1 to %2 at speed %3`,\n                    args0: [\n                        fieldVariable(service),\n                        {\n                            type: \"input_value\",\n                            name: \"color\",\n                            check: \"Number\",\n                        },\n                        {\n                            type: \"input_value\",\n                            name: \"speed\",\n                            check: \"Number\",\n                        },\n                    ],\n                    values: {\n                        color: {\n                            kind: \"block\",\n                            type: LEDColorField.SHADOW.type,\n                        },\n                        speed: {\n                            kind: \"block\",\n                            type: \"jacdac_ratio\",\n                            shadow: true,\n                        },\n                    },\n                    colour: serviceColor(service),\n                    inputsInline: true,\n                    previousStatement: null,\n                    nextStatement: null,\n                    tooltip: `Fade LED color`,\n                    helpUrl: serviceHelp(service),\n                    service,\n                    expression: `role.animate((color >> 16) & 0xff, (color >> 8) & 0xff, (color >> 0) & 0xff, speed * 0xff)`,\n                    template: \"custom\",\n                }\n        ),\n        ...resolveService(SRV_BUZZER).map(\n            service =>\n                <CustomBlockDefinition>{\n                    kind: \"block\",\n                    type: `play_note`,\n                    message0: `play %1 note %2 for %3 s at volume %4`,\n                    args0: [\n                        fieldVariable(service),\n                        {\n                            type: \"input_value\",\n                            name: \"frequency\",\n                            check: \"Number\",\n                        },\n                        {\n                            type: \"input_value\",\n                            name: \"duration\",\n                            check: \"Number\",\n                        },\n                        {\n                            type: \"input_value\",\n                            name: \"volume\",\n                            check: \"Number\",\n                        },\n                    ],\n                    values: {\n                        frequency: {\n                            kind: \"block\",\n                            type: NoteField.SHADOW.type,\n                            shadow: true,\n                        },\n                        duration: {\n                            kind: \"block\",\n                            type: \"jacdac_time_picker\",\n                            shadow: true,\n                        },\n                        volume: {\n                            kind: \"block\",\n                            type: \"jacdac_ratio\",\n                            value: 0.5,\n                            shadow: true,\n                        },\n                    },\n                    colour: serviceColor(service),\n                    inputsInline: true,\n                    previousStatement: null,\n                    nextStatement: null,\n                    tooltip: `Send a keyboard key combo`,\n                    helpUrl: serviceHelp(service),\n                    service,\n                    expression: `role.play_tone(frequency / 10000, duration) TODO`,\n                    template: \"custom\",\n                }\n        ),\n        ...resolveService(SRV_SEVEN_SEGMENT_DISPLAY).map(\n            service =>\n                <CustomBlockDefinition>{\n                    kind: \"block\",\n                    type: `set_digits`,\n                    message0: `set %1 digits to %2`,\n                    args0: [\n                        fieldVariable(service),\n                        {\n                            type: \"input_value\",\n                            name: \"digits\",\n                            check: \"Number\",\n                        },\n                    ],\n                    values: {\n                        digits: {\n                            kind: \"block\",\n                            type: \"math_number\",\n                        },\n                    },\n                    colour: serviceColor(service),\n                    inputsInline: true,\n                    previousStatement: null,\n                    nextStatement: null,\n                    tooltip: `Display a number of the screen`,\n                    helpUrl: serviceHelp(service),\n                    service,\n                    // encode digits\n                    template: \"custom\",\n                }\n        ),\n        ...resolveService(SRV_LED_MATRIX).map(\n            service =>\n                <CustomBlockDefinition>{\n                    kind: \"block\",\n                    type: `_show_leds`,\n                    message0: `show %1 leds %2`,\n                    args0: [\n                        fieldVariable(service),\n                        {\n                            type: LEDMatrixField.KEY,\n                            name: \"leds\",\n                        },\n                    ],\n                    colour: serviceColor(service),\n                    inputsInline: true,\n                    previousStatement: null,\n                    nextStatement: null,\n                    tooltip: `Display LEDs on the LED matrix`,\n                    helpUrl: serviceHelp(service),\n                    service,\n                    // encode digits\n                    template: \"custom\",\n                }\n        ),\n    ].map(def => {\n        def.type = `jacdac_custom_${def.service.shortId}_${def.type}`\n        return def\n    })\n\n    const eventBlocks = events.map<EventBlockDefinition>(\n        ({ service, events }) => ({\n            kind: \"block\",\n            type: `jacdac_events_${service.shortId}`,\n            message0: `on %1 %2`,\n            args0: [\n                fieldVariable(service),\n                <InputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"event\",\n                    options: events.map(event => [\n                        humanify(event.name),\n                        event.name,\n                    ]),\n                },\n            ],\n            colour: serviceColor(service),\n            inputsInline: true,\n            nextStatement: null,\n            tooltip: `Events for the ${service.name} service`,\n            helpUrl: serviceHelp(service),\n            service,\n            events,\n            template: \"event\",\n        })\n    )\n\n    // generate accessor blocks for event data with numbers\n    const eventFieldBlocks = arrayConcatMany(\n        events.map(({ service, events }) =>\n            events\n                .filter(event => event.fields.filter(isNumericType).length > 0)\n                .map(event => ({ service, event }))\n                .map(\n                    ({ service, event }) =>\n                        <EventFieldDefinition>{\n                            kind: \"block\",\n                            type: `jacdac_event_field_${service.shortId}_${event.name}`,\n                            message0: `${event.name} %1`,\n                            args0: [\n                                <InputDefinition>{\n                                    type: \"field_dropdown\",\n                                    name: \"field\",\n                                    options: event.fields.map(field => [\n                                        humanify(field.name),\n                                        field.name,\n                                    ]),\n                                },\n                            ],\n                            colour: serviceColor(service),\n                            inputsInline: true,\n                            tooltip: `Data fields of the ${event.name} event`,\n                            helpUrl: serviceHelp(service),\n                            service,\n                            event,\n                            output: \"Number\",\n                            template: \"event_field\",\n                        }\n                )\n        )\n    )\n\n    const registerChangeByEventBlocks = registers\n        .filter(\n            ({ service }) =>\n                !service.packets.some(\n                    pkt =>\n                        isEvent(pkt) &&\n                        ignoredEvents.indexOf(pkt.identifier) < 0\n                )\n        )\n        .filter(\n            ({ register }) =>\n                register.fields.length === 1 &&\n                isNumericType(register.fields[0]) &&\n                register.identifier !== SystemReg.Intensity\n        )\n        .map<RegisterBlockDefinition>(({ service, register }) => ({\n            kind: \"block\",\n            type: `jacdac_change_by_events_${service.shortId}_${register.name}`,\n            message0: `when %1 ${humanify(register.name)} change by %2`,\n            args0: [\n                fieldVariable(service),\n                ...fieldsToFieldInputs(register),\n            ].filter(v => !!v),\n            values: fieldsToValues(service, register),\n            inputsInline: true,\n            nextStatement: null,\n            colour: serviceColor(service),\n            tooltip: `Event raised when ${register.name} changes`,\n            helpUrl: serviceHelp(service),\n            service,\n            register,\n\n            template: \"register_change_event\",\n        }))\n\n    const [registerSimples, registerComposites] = splitFilter(\n        registers,\n        reg => reg.register.fields.length == 1\n    )\n    const [registerSimpleTypes, registerSimpleOthers] = splitFilter(\n        registerSimples,\n        ({ register }) => !!toBlocklyType(register.fields[0])\n    )\n    const registerSimplesGetBlocks =\n        registerSimpleTypes.map<RegisterBlockDefinition>(\n            ({ service, register }) => ({\n                kind: \"block\",\n                type: `jacdac_get_simple_${service.shortId}_${register.name}`,\n                message0:\n                    customMessage(service, register, register.fields[0])?.get ||\n                    `%1 ${humanify(register.name)}`,\n                args0: [fieldVariable(service)],\n                inputsInline: true,\n                output: toBlocklyType(register.fields[0]),\n                colour: serviceColor(service),\n                tooltip: register.description,\n                helpUrl: serviceHelp(service),\n                service,\n                register,\n                field: register.fields[0],\n\n                template: \"register_get\",\n            })\n        )\n    const registerSimpleEnumTypes = registerSimpleOthers\n        .filter(\n            ({ service, register }) => !!enumInfo(service, register.fields[0])\n        )\n        .map(({ service, register }) => ({\n            service,\n            register,\n            field: register.fields[0],\n            einfo: enumInfo(service, register.fields[0]),\n        }))\n    const registerCompositeEnumTypes = arrayConcatMany(\n        registerComposites.map(({ service, register }) =>\n            register.fields\n                .map(field => ({\n                    service,\n                    register,\n                    field,\n                    einfo: enumInfo(service, field),\n                }))\n                .filter(({ einfo }) => !!einfo)\n        )\n    )\n    const registerEnumGetBlocks = [\n        ...registerSimpleEnumTypes,\n        ...registerCompositeEnumTypes,\n    ].map<RegisterBlockDefinition>(({ service, register, field, einfo }) => ({\n        kind: \"block\",\n        type: `jacdac_get_enum_${service.shortId}_${register.name}_${field.name}`,\n        message0:\n            customMessage(service, register, field)?.get ||\n            `%1 ${humanify(register.name)}${\n                field.name === \"_\" ? \"\" : ` ${field.name}`\n            } %2`,\n        args0: [\n            fieldVariable(service),\n            <OptionsInputDefinition>{\n                type: \"field_dropdown\",\n                name: field.name,\n                options: Object.keys(einfo.members).map(member => [\n                    humanify(member),\n                    member,\n                ]),\n            },\n        ],\n        inputsInline: true,\n        output: \"Boolean\",\n        colour: serviceColor(service),\n        tooltip: register.description,\n        helpUrl: serviceHelp(service),\n        service,\n        register,\n        field,\n\n        template: \"register_get\",\n    }))\n\n    const registerNumericsGetBlocks = registerComposites\n        .filter(re => re.register.fields.some(isNumericType))\n        .map<RegisterBlockDefinition>(({ service, register }) => ({\n            kind: \"block\",\n            type: `jacdac_get_numerics_${service.shortId}_${register.name}`,\n            message0: `%1 ${humanify(register.name)}${\n                register.fields.length > 1 ? ` %2` : \"\"\n            }`,\n            args0: [\n                fieldVariable(service),\n                register.fields.length > 1\n                    ? <OptionsInputDefinition>{\n                          type: \"field_dropdown\",\n                          name: \"field\",\n                          options: register.fields\n                              .filter(f => isNumericType(f))\n                              .map(field => [\n                                  humanify(field.name),\n                                  fieldName(register, field),\n                              ]),\n                      }\n                    : undefined,\n            ].filter(v => !!v),\n            inputsInline: true,\n            output: \"Number\",\n            colour: serviceColor(service),\n            tooltip: register.description,\n            helpUrl: serviceHelp(service),\n            service,\n            register,\n\n            template: \"register_get\",\n        }))\n\n    const registerSetBlocks = registers\n        .filter(({ register }) => register.kind === \"rw\")\n        .filter(({ register }) => fieldsSupported(register))\n        .map<RegisterBlockDefinition>(({ service, register }) => ({\n            kind: \"block\",\n            type: `jacdac_set_${service.shortId}_${register.name}`,\n            message0: isEnabledRegister(register)\n                ? `set %1 %2`\n                : `set %1 ${register.name} to ${\n                      register.fields.length === 1\n                          ? \"%2\"\n                          : fieldsToMessage(register)\n                  }`,\n            args0: [fieldVariable(service), ...fieldsToFieldInputs(register)],\n            values: fieldsToValues(service, register),\n            inputsInline: true,\n            colour: serviceColor(service),\n            tooltip: register.description,\n            helpUrl: serviceHelp(service),\n            service,\n            register,\n            previousStatement: null,\n            nextStatement: null,\n\n            template: \"register_set\",\n        }))\n\n    const commandBlocks = commands.map<CommandBlockDefinition>(\n        ({ service, command }) => ({\n            kind: \"block\",\n            type: `jacdac_command_${service.shortId}_${command.name}`,\n            message0: !command.fields.length\n                ? `${humanify(command.name)} %1`\n                : `${humanify(command.name)} %1 with ${fieldsToMessage(\n                      command\n                  )}`,\n            args0: [fieldVariable(service), ...fieldsToFieldInputs(command)],\n            values: fieldsToValues(service, command),\n            inputsInline: true,\n            colour: serviceColor(service),\n            tooltip: command.description,\n            helpUrl: serviceHelp(service),\n            service,\n            command,\n            previousStatement: null,\n            nextStatement: null,\n\n            template: \"command\",\n        })\n    )\n\n    const serviceBlocks: ServiceBlockDefinition[] = [\n        ...eventBlocks,\n        ...eventFieldBlocks,\n        ...registerChangeByEventBlocks,\n        ...registerSimplesGetBlocks,\n        ...registerEnumGetBlocks,\n        ...registerNumericsGetBlocks,\n        ...registerSetBlocks,\n        ...customBlockDefinitions,\n        ...commandBlocks,\n    ]\n\n    const shadowBlocks: BlockDefinition[] = [\n        ...fieldShadows(),\n        {\n            kind: \"block\",\n            type: `jacdac_on_off`,\n            message0: `%1`,\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"value\",\n                    options: [\n                        [\"enabled\", \"on\"],\n                        [\"disabled\", \"off\"],\n                    ],\n                },\n            ],\n            style: \"logic_blocks\",\n            output: \"Boolean\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_time_picker`,\n            message0: `%1`,\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"value\",\n                    options: [\n                        [\"0.1\", \"0.1\"],\n                        [\"1\", \"1\"],\n                        [\"5\", \"5\"],\n                        [\"30\", \"30\"],\n                        [\"60\", \"60\"],\n                    ],\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_angle`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_angle\",\n                    name: \"value\",\n                    min: 0,\n                    max: 360,\n                    precision: 10,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_percent`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 100,\n                    precision: 1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_byte`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 255,\n                    precision: 1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_ratio`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 1,\n                    precision: 0.1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_color`,\n            message0: `%1`,\n            args0: [\n                <ColorInputDefnition>{\n                    type: \"field_colour\",\n                    name: \"col\",\n                    colour: \"#ff0000\",\n                    colourOptions: [\n                        \"#ff0000\",\n                        \"#ff8000\",\n                        \"#ffff00\",\n                        \"#ff9da5\",\n                        \"#00ff00\",\n                        \"#b09eff\",\n                        \"#00ffff\",\n                        \"#007fff\",\n                        \"#65471f\",\n                        \"#0000ff\",\n                        \"#7f00ff\",\n                        \"#ff0080\",\n                        \"#ff00ff\",\n                        \"#ffffff\",\n                        \"#999999\",\n                        \"#000000\",\n                    ],\n                    columns: 4,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Color\",\n        },\n    ]\n\n    const runtimeBlocks: BlockDefinition[] = [\n        {\n            kind: \"block\",\n            type: WHILE_CONDITION_BLOCK,\n            message0: \"while %1\",\n            args0: [\n                {\n                    type: \"input_value\",\n                    name: WHILE_CONDITION_BLOCK_CONDITION,\n                    check: \"Boolean\",\n                },\n            ],\n            colour: commandColor,\n            inputsInline: true,\n            nextStatement: \"Statement\",\n            tooltip: \"\",\n            helpUrl: \"\",\n        },\n        {\n            kind: \"block\",\n            type: WAIT_BLOCK,\n            message0: \"wait %1 s\",\n            args0: [\n                {\n                    type: \"input_value\",\n                    name: \"time\",\n                    check: \"Number\",\n                },\n            ],\n            inputsInline: true,\n            previousStatement: \"Statement\",\n            nextStatement: \"Statement\",\n            colour: commandColor,\n            tooltip: \"Wait the desired time\",\n            helpUrl: \"\",\n        },\n        {\n            kind: \"block\",\n            type: SET_STATUS_LIGHT_BLOCK,\n            message0: \"set %1 status to %2\",\n            args0: [\n                {\n                    type: \"field_variable\",\n                    name: \"role\",\n                    variable: \"all\",\n                    variableTypes: [\n                        \"client\",\n                        ...allServices.map(service => service.shortId),\n                    ],\n                    defaultType: \"client\",\n                },\n                {\n                    type: \"input_value\",\n                    name: \"color\",\n                    check: \"Number\",\n                },\n            ],\n            values: {\n                color: {\n                    kind: \"block\",\n                    type: LEDColorField.SHADOW.type,\n                },\n            },\n            inputsInline: true,\n            previousStatement: \"Statement\",\n            nextStatement: \"Statement\",\n            colour: commandColor,\n            tooltip: \"Sets the color on the status light\",\n            helpUrl: \"\",\n        },\n        {\n            kind: \"block\",\n            type: TWIN_BLOCK,\n            message0: `twin of %1 %2 %3`,\n            args0: [\n                {\n                    type: \"field_variable\",\n                    name: \"role\",\n                    variable: \"none\",\n                    variableTypes: [\n                        \"client\",\n                        ...allServices.map(service => service.shortId),\n                    ],\n                    defaultType: \"client\",\n                },\n                {\n                    type: \"input_dummy\",\n                },\n                <InputDefinition>{\n                    type: TwinField.KEY,\n                    name: \"twin\",\n                },\n            ],\n            colour: debuggerColor,\n            inputsInline: false,\n            tooltip: `Twin of the service`,\n            helpUrl: \"\",\n            template: \"twin\",\n        },\n        {\n            kind: \"block\",\n            type: INSPECT_BLOCK,\n            message0: `inspect %1 %2 %3`,\n            args0: [\n                {\n                    type: \"field_variable\",\n                    name: \"role\",\n                    variable: \"none\",\n                    variableTypes: [\n                        \"client\",\n                        ...allServices.map(service => service.shortId),\n                    ],\n                    defaultType: \"client\",\n                },\n                {\n                    type: \"input_dummy\",\n                },\n                <InputDefinition>{\n                    type: JDomTreeField.KEY,\n                    name: \"twin\",\n                },\n            ],\n            colour: debuggerColor,\n            inputsInline: false,\n            tooltip: `Inspect a service`,\n            helpUrl: \"\",\n            template: \"twin\",\n        },\n        {\n            kind: \"block\",\n            type: WATCH_BLOCK,\n            message0: `watch %1`,\n            args0: [\n                <InputDefinition>{\n                    type: \"input_value\",\n                    name: \"value\",\n                    check: [\"Number\", \"Boolean\", \"String\"],\n                },\n            ],\n            colour: debuggerColor,\n            inputsInline: false,\n            tooltip: `Watch a value in the editor`,\n            helpUrl: \"\",\n            template: \"watch\",\n            nextStatement: null,\n            previousStatement: null,\n        },\n    ]\n\n    const mathBlocks: BlockDefinition[] = [\n        {\n            kind: \"block\",\n            type: \"jacdac_math_arithmetic\",\n            message0: \"%1 %2 %3\",\n            args0: [\n                {\n                    type: \"input_value\",\n                    name: \"A\",\n                    check: \"Number\",\n                },\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"OP\",\n                    options: [\n                        [\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"],\n                        [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"],\n                        [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"],\n                        [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"],\n                    ],\n                },\n                {\n                    type: \"input_value\",\n                    name: \"B\",\n                    check: \"Number\",\n                },\n            ],\n            inputsInline: true,\n            output: \"Number\",\n            style: \"math_blocks\",\n            helpUrl: \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n            extensions: [\"math_op_tooltip\"],\n        },\n        {\n            kind: \"block\",\n            type: \"jacdac_math_single\",\n            message0: \"%1 %2\",\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"OP\",\n                    options: [\n                        [\"-\", \"NEG\"],\n                        [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", \"ABS\"],\n                    ],\n                },\n                {\n                    type: \"input_value\",\n                    name: \"NUM\",\n                    check: \"Number\",\n                },\n            ],\n            output: \"Number\",\n            style: \"math_blocks\",\n            helpUrl: \"%{BKY_MATH_SINGLE_HELPURL}\",\n            extensions: [\"math_op_tooltip\"],\n        },\n    ]\n\n    const blocks: BlockDefinition[] = [\n        ...serviceBlocks,\n        ...runtimeBlocks,\n        ...shadowBlocks,\n        ...mathBlocks,\n    ]\n\n    // register field editors\n    registerFields()\n    // re-register blocks with blocklys\n    blocks.map(\n        block =>\n            (Blockly.Blocks[block.type] = <ServiceBlockDefinitionFactory>{\n                jacdacDefinition: block,\n                init: function () {\n                    this.jsonInit(block)\n                },\n            })\n    )\n\n    // final mapping\n    const jdBlocks = serviceBlocks.filter(block => !!block.service)\n    const services = uniqueMap(\n        jdBlocks,\n        block => block.service.shortId,\n        block => block.service\n    )\n\n    console.debug(\"vmblocks\", { blocks, serviceBlocks, services })\n    return {\n        blocks,\n        serviceBlocks,\n        services,\n    }\n}\n\nexport const BUILTIN_TYPES = [\"\", \"Boolean\", \"Number\", \"String\"]\nexport function scanServices(workspace: Blockly.Workspace) {\n    const variables = Blockly.Variables.allUsedVarModels(workspace).filter(\n        v => BUILTIN_TYPES.indexOf(v.type) < 0\n    ) // remove buildins\n    const services = variables.map(v => v.type)\n    return services\n}\n\nfunction patchCategoryJSONtoXML(cat: CategoryDefinition): CategoryDefinition {\n    if (cat.button) {\n        if (!cat.contents) cat.contents = []\n        cat.contents.unshift(cat.button)\n    }\n    cat.contents\n        ?.filter(node => node.kind === \"block\")\n        .map(node => <BlockReference>node)\n        .filter(block => {\n            const exists = Blockly.Blocks[block.type]\n            if (!exists && Flags.diagnostics)\n                console.warn(\n                    `block type '${block.type}' not found, consider refreshing page...`\n                )\n            return !!block.values && exists\n        }) // avoid broken blocks\n        .forEach(block => {\n            // yup, this suck but we have to go through it\n            block.blockxml = `<block type=\"${block.type}\">${Object.keys(\n                block.values\n            )\n                .map(name => {\n                    const { type } = block.values[name]\n                    return `<value name=\"${name}\"><shadow type=\"${type}\" /></value>`\n                })\n                .join(\"\\n\")}</block>`\n            delete block.type\n        })\n    return cat\n}\n\nexport default function useToolbox(props: {\n    blockServices?: string[]\n    serviceClass?: number\n}): {\n    serviceBlocks: BlockDefinition[]\n    toolboxConfiguration: ToolboxConfiguration\n    newProjectXml: string\n} {\n    const { blockServices, serviceClass } = props\n\n    const theme = useTheme()\n    const { serviceColor, commandColor, debuggerColor } =\n        createBlockTheme(theme)\n    const { serviceBlocks, services } = useMemo(\n        () => loadBlocks(serviceColor, commandColor, debuggerColor),\n        [theme]\n    )\n    const liveServices = useServices({ specification: true })\n\n    const toolboxServices: jdspec.ServiceSpec[] = uniqueMap(\n        Flags.diagnostics\n            ? services\n            : [\n                  ...blockServices\n                      .map(srvid =>\n                          services.find(service => service.shortId === srvid)\n                      )\n                      .filter(srv => !!srv),\n                  ...liveServices.map(srv => srv.specification),\n              ].filter(\n                  srv => !serviceClass || srv.classIdentifier === serviceClass\n              ),\n        srv => srv.shortId,\n        srv => srv\n    )\n        .filter(srv => srv && ignoredServices.indexOf(srv.classIdentifier) < 0)\n        .sort((l, r) => l.name.localeCompare(r.name))\n\n    const servicesCategories: CategoryDefinition[] = toolboxServices\n        .map(service => ({\n            service,\n            serviceBlocks: serviceBlocks.filter(\n                block => block.service === service\n            ),\n        }))\n        .map<CategoryDefinition>(({ service, serviceBlocks }) => ({\n            kind: \"category\",\n            name: service.name,\n            colour: serviceColor(service),\n            contents: serviceBlocks.map(block => ({\n                kind: \"block\",\n                type: block.type,\n                values: block.values,\n            })),\n            button: {\n                kind: \"button\",\n                text: `Add ${service.name} role`,\n                callbackKey: `jacdac_add_role_callback_${service.shortId}`,\n                service,\n            },\n        }))\n        .filter(cat => !!cat.contents?.length)\n\n    const commandsCategory: CategoryDefinition = {\n        kind: \"category\",\n        name: \"Commands\",\n        colour: commandColor,\n        contents: [\n            <BlockDefinition>{\n                kind: \"block\",\n                type: WHILE_CONDITION_BLOCK,\n            },\n            <BlockDefinition>{\n                kind: \"block\",\n                type: WAIT_BLOCK,\n                values: {\n                    time: { kind: \"block\", type: \"jacdac_time_picker\" },\n                },\n            },\n            <BlockDefinition>{\n                kind: \"block\",\n                type: SET_STATUS_LIGHT_BLOCK,\n                values: {\n                    color: {\n                        kind: \"block\",\n                        type: LEDColorField.SHADOW.type,\n                    },\n                },\n            },\n        ].filter(b => !!b),\n    }\n\n    const modulesCategory: CategoryDefinition = {\n        kind: \"category\",\n        name: \"Debugger\",\n        colour: debuggerColor,\n        contents: [\n            <BlockDefinition>{\n                kind: \"block\",\n                type: WATCH_BLOCK,\n            },\n            <BlockDefinition>{\n                kind: \"block\",\n                type: TWIN_BLOCK,\n            },\n            <BlockDefinition>{\n                kind: \"block\",\n                type: INSPECT_BLOCK,\n            },\n        ].filter(b => !!b),\n    }\n\n    const logicCategory: CategoryDefinition = {\n        kind: \"category\",\n        name: \"Logic\",\n        colour: \"%{BKY_LOGIC_HUE}\",\n        contents: [\n            {\n                kind: \"block\",\n                type: \"dynamic_if\",\n            },\n            {\n                kind: \"block\",\n                type: \"logic_compare\",\n                values: {\n                    A: { kind: \"block\", type: \"math_number\" },\n                    B: { kind: \"block\", type: \"math_number\" },\n                },\n            },\n            {\n                kind: \"block\",\n                type: \"logic_operation\",\n                values: {\n                    A: { kind: \"block\", type: \"logic_boolean\" },\n                    B: { kind: \"block\", type: \"logic_boolean\" },\n                },\n            },\n            {\n                kind: \"block\",\n                type: \"logic_negate\",\n                values: {\n                    BOOL: { kind: \"block\", type: \"logic_boolean\" },\n                },\n            },\n            {\n                kind: \"block\",\n                type: \"logic_boolean\",\n            },\n        ],\n    }\n\n    const mathCategory: CategoryDefinition = {\n        kind: \"category\",\n        name: \"Math\",\n        colour: \"%{BKY_MATH_HUE}\",\n        contents: [\n            {\n                kind: \"block\",\n                type: \"jacdac_math_arithmetic\",\n                values: {\n                    A: { kind: \"block\", type: \"math_number\" },\n                    B: { kind: \"block\", type: \"math_number\" },\n                },\n            },\n            {\n                kind: \"block\",\n                type: \"jacdac_math_single\",\n                values: {\n                    NUM: {\n                        kind: \"block\",\n                        type: \"math_number\",\n                    },\n                },\n            },\n            { kind: \"block\", type: \"math_number\" },\n        ],\n    }\n\n    const variablesCategory: CategoryDefinition = {\n        kind: \"category\",\n        name: \"Variables\",\n        colour: \"%{BKY_VARIABLES_HUE}\",\n        custom: \"VARIABLE\",\n    }\n\n    const toolboxConfiguration: ToolboxConfiguration = {\n        kind: \"categoryToolbox\",\n        contents: [\n            modulesCategory,\n            servicesCategories?.length &&\n                <SeparatorDefinition>{\n                    kind: \"sep\",\n                },\n            ...servicesCategories,\n            <SeparatorDefinition>{\n                kind: \"sep\",\n            },\n            commandsCategory,\n            logicCategory,\n            mathCategory,\n            variablesCategory,\n            <SeparatorDefinition>{\n                kind: \"sep\",\n            },\n        ]\n            .filter(cat => !!cat)\n            .map(node =>\n                node.kind === \"category\"\n                    ? patchCategoryJSONtoXML(node as CategoryDefinition)\n                    : node\n            ),\n    }\n\n    return {\n        serviceBlocks,\n        toolboxConfiguration,\n        newProjectXml: NEW_PROJET_XML,\n    }\n}\n\nexport function useToolboxButtons(\n    workspace: Blockly.WorkspaceSvg,\n    toolboxConfiguration: ToolboxConfiguration\n) {\n    // track workspace changes and update callbacks\n    useEffect(() => {\n        if (!workspace) return\n\n        // collect buttons\n        const buttons: ButtonDefinition[] = toolboxConfiguration?.contents\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            .map(cat => (cat as CategoryDefinition).button)\n            .filter(btn => !!btn)\n        buttons?.forEach(button =>\n            workspace.registerButtonCallback(button.callbackKey, () =>\n                Blockly.Variables.createVariableButtonHandler(\n                    workspace,\n                    null,\n                    button.service.shortId\n                )\n            )\n        )\n    }, [workspace, JSON.stringify(toolboxConfiguration)])\n}\n","import {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    TextField,\n} from \"@material-ui/core\"\nimport Blockly from \"blockly\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { ChangeEvent, useEffect, useRef, useState } from \"react\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function BlocklyModalDialogs() {\n    const [dialogType, setDialogType] =\n        useState<\"alert\" | \"confirm\" | \"prompt\">()\n    const [message, setMessage] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const callback = useRef<any>()\n    const showDialog = !!dialogType\n\n    useEffect(() => {\n        // store older\n        const previous = {\n            alert: Blockly.alert,\n            confirm: Blockly.confirm,\n            prompt: Blockly.prompt,\n        }\n\n        // replace\n        Blockly.alert = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"alert\")\n        }\n        Blockly.confirm = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"confirm\")\n        }\n        Blockly.prompt = (message, defaultValue, cb) => {\n            setMessage(message)\n            setValue(defaultValue)\n            callback.current = cb\n            setDialogType(\"prompt\")\n        }\n\n        // cleanup\n        return () => {\n            console.log(\"cleanup\")\n            Blockly.alert = previous.alert\n            Blockly.confirm = previous.confirm\n            Blockly.prompt = previous.prompt\n        }\n    }, [])\n\n    const handleCloseConfirm = () => setDialogType(undefined)\n    const handleCancel = () => {\n        callback.current?.(undefined)\n        setDialogType(undefined)\n    }\n    const handleOk = () => {\n        switch (dialogType) {\n            case \"alert\":\n                callback.current?.()\n                break\n            case \"confirm\":\n                callback.current(true)\n                break\n            case \"prompt\":\n                callback.current(value)\n                break\n        }\n        setDialogType(undefined)\n    }\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <Dialog open={showDialog} onClose={handleCloseConfirm}>\n            <DialogContent>\n                <DialogContentText>{message}</DialogContentText>\n                {dialogType === \"prompt\" && (\n                    <TextField id={valueId} value={value} label=\"Value\" fullWidth={true} onChange={handleValueChange} />\n                )}\n            </DialogContent>\n            <DialogActions>\n                {dialogType !== \"alert\" && (\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                )}\n                <Button variant=\"contained\" color=\"primary\" onClick={handleOk}>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n","import Blockly from \"blockly\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { SMap, toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport ReactField from \"./fields/ReactField\"\nimport { ServiceBlockDefinitionFactory } from \"./toolbox\"\n\nexport interface VariableJSON {\n    // Boolean, Number, String, or service short id\n    type: string\n    id: string\n    name: string\n}\n\nexport type FieldJSON = {\n    id?: string\n    value?: number | string | boolean\n    // Boolean, Number, String, or service short id\n    variabletype?: string\n    // and extra fields, subclass\n}\n\nexport interface InputJSON {\n    type: number\n    name: string\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fields: SMap<FieldJSON>\n    child?: BlockJSON\n}\n\nexport interface BlockJSON {\n    type: string\n    id: string\n    children?: BlockJSON[]\n    value?: string | number | boolean\n    inputs?: InputJSON[]\n    next?: BlockJSON\n}\n\nexport interface WorkspaceJSON {\n    variables: VariableJSON[]\n    blocks: BlockJSON[]\n}\n\nexport function domToJSON(workspace: Blockly.Workspace): WorkspaceJSON {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const clean = (o: any) =>\n        Object.keys(o)\n            .filter(k => o[k] === undefined || o[k] === null)\n            .forEach(k => delete o[k])\n    const builtins: SMap<(block: Blockly.Block) => string | number | boolean> =\n        {\n            logic_null: () => null,\n            text: block => block.getFieldValue(\"TEXT\"),\n            math_number: block => Number(block.getFieldValue(\"NUM\") || \"0\"),\n            logic_boolean: block => block.getFieldValue(\"BOOL\") === \"TRUE\",\n            jacdac_on_off: block => block.getFieldValue(\"value\") === \"on\",\n            jacdac_time_picker: block =>\n                Number(block.getFieldValue(\"value\") || \"0\"),\n            jacdac_angle: block => Number(block.getFieldValue(\"value\") || \"0\"),\n            jacdac_percent: block =>\n                Number(block.getFieldValue(\"value\") || \"0\"),\n            jacdac_ratio: block => Number(block.getFieldValue(\"value\") || \"0\"),\n        }\n\n    const variableToJSON = (variable: Blockly.VariableModel): VariableJSON => ({\n        name: variable.name,\n        type: variable.type,\n        id: variable.getId(),\n    })\n    const fieldsToJSON = (fields: Blockly.Field[]) =>\n        !fields.length\n            ? undefined\n            : toMap(\n                  fields,\n                  field => (field.name as string)?.toLowerCase(),\n                  fieldToJSON\n              )\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const xmlToJSON = (xml: Element): any => {\n        const j = {}\n        if (Flags.diagnostics) j[\"xml\"] = xml.outerHTML\n        // dump attributes\n        for (const name of xml.getAttributeNames()) {\n            const v = xml.getAttribute(name)\n            j[name.toLowerCase()] = v\n        }\n        for (const child of xml.childNodes) {\n            if (child.nodeType === Node.TEXT_NODE) j[\"value\"] = xml.textContent\n            else if (child.nodeType === Node.ELEMENT_NODE) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const children: any[] = j[\"children\"] || (j[\"children\"] = [])\n                children.push(xmlToJSON(child as Element))\n            }\n        }\n        return j\n    }\n    const fieldToJSON = (field: Blockly.Field) => {\n        if (field.isSerializable()) {\n            // custom field can just return the value\n            if (field instanceof ReactField) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const value = (field as ReactField<any>).value\n                return { value }\n            } else {\n                const container = Blockly.utils.xml.createElement(\"field\")\n                const fieldXml = field.toXml(container)\n                return xmlToJSON(fieldXml)\n            }\n        }\n        return undefined\n    }\n    const flattenNext = (block: BlockJSON) => {\n        // flatten the linked list of next into an array\n        const children: BlockJSON[] = []\n        let current = block.next\n        while (current) {\n            children.push(current)\n            current = current.next\n        }\n        if (children.length) {\n            block.children = children\n            block.next = undefined\n        }\n    }\n    const blockToJSON = (block: Blockly.Block): BlockJSON => {\n        const blockToJSONHidden = (block: Blockly.Block): BlockJSON => {\n            // skip disabled blocks\n            if (!block?.isEnabled()) return undefined\n            // skip over insertion markers.\n            if (block.isInsertionMarker()) {\n                const child = block.getChildren(false)[0]\n                if (child) return blockToJSON(child)\n                else return undefined\n            }\n            // skip twins\n            const definition = (\n                Blockly.Blocks[block.type] as ServiceBlockDefinitionFactory\n            )?.jacdacDefinition\n            if (definition?.template === \"twin\") return undefined\n\n            // dump object\n            const value = builtins[block.type]?.(block)\n            const element: BlockJSON = {\n                type: block.type,\n                id: block.id,\n                value,\n                inputs:\n                    value === undefined\n                        ? block.inputList.map(input => {\n                              const container: InputJSON = {\n                                  type: input.type,\n                                  name: input.name,\n                                  fields: fieldsToJSON(input.fieldRow),\n                                  child: blockToJSON(\n                                      input.connection?.targetBlock()\n                                  ),\n                              }\n                              return container\n                          })\n                        : undefined,\n                next: blockToJSONHidden(block.getNextBlock()),\n            }\n            clean(element)\n            return element\n        }\n        const top = blockToJSONHidden(block)\n        if (top) {\n            flattenNext(top)\n            clean(top)\n        }\n        return top\n    }\n\n    try {\n        const variables = Blockly.Variables.allUsedVarModels(workspace).sort(\n            (l, r) => l.name.localeCompare(r.name)\n        ) // stable sort name\n        const blocks = workspace.getTopBlocks(true)\n        const json: WorkspaceJSON = {\n            variables: variables.map(variableToJSON),\n            blocks: blocks.map(blockToJSON).filter(b => !!b),\n        }\n        return json\n    } catch (e) {\n        console.error(e)\n        return undefined\n    }\n}\n\nexport interface WorkspaceVisitor {\n    visitBlock?: (block: BlockJSON) => void\n    visitInput?: (input: InputJSON) => void\n    visitField?: (name: string, field: FieldJSON) => void\n}\n\nexport function visitBlock(block: BlockJSON, visitor: WorkspaceVisitor) {\n    if (!block) return\n    visitor.visitBlock?.(block)\n    const { inputs, children } = block\n    inputs?.forEach(input => visitInput(input, visitor))\n    children?.forEach(child => visitBlock(child, visitor))\n}\n\nexport function visitInput(input: InputJSON, visitor: WorkspaceVisitor) {\n    if (!input) return\n    visitor.visitInput?.(input)\n    const { fields, child } = input\n    if (fields) Object.keys(fields).map(k => visitField(k, fields[k], visitor))\n    visitBlock(child, visitor)\n}\n\nexport function visitField(\n    name: string,\n    field: FieldJSON,\n    visitor: WorkspaceVisitor\n) {\n    if (!field) return\n    visitor.visitField?.(name, field)\n}\n\nexport function visitWorkspace(\n    workspace: WorkspaceJSON,\n    visitor: WorkspaceVisitor\n) {\n    workspace.blocks.forEach(block => visitBlock(block, visitor))\n}\n","import { BlockJSON, WorkspaceJSON } from \"./jsongenerator\"\nimport {\n    IT4Base,\n    IT4Handler,\n    IT4Program,\n    IT4Role,\n    toMemberExpression,\n    toIdentifier,\n    IT4IfThenElse,\n} from \"../../../jacdac-ts/src/vm/ir\"\nimport { BUILTIN_TYPES } from \"./useToolbox\"\nimport { assert } from \"../../../jacdac-ts/src/jdom/utils\"\nimport {\n    BlockDefinition,\n    CommandBlockDefinition,\n    EventFieldDefinition,\n    RegisterBlockDefinition,\n    WAIT_BLOCK,\n    WHILE_CONDITION_BLOCK,\n} from \"./toolbox\"\n\nconst ops = {\n    AND: \"&&\",\n    OR: \"||\",\n    EQ: \"===\",\n    NEQ: \"!==\",\n    LT: \"<\",\n    GT: \">\",\n    LTE: \"<=\",\n    GTE: \">=\",\n    NEG: \"-\",\n    ADD: \"+\",\n    MULTIPLY: \"*\",\n    DIVIDE: \"/\",\n    MINUS: \"-\",\n}\n\ntype RoleEvent = {\n    role: string\n    event: string\n}\n\nexport default function workspaceJSONToIT4Program(\n    serviceBlocks: BlockDefinition[],\n    workspace: WorkspaceJSON\n): IT4Program {\n    console.debug(`compile it4`, { workspace })\n\n    const roles: IT4Role[] = workspace.variables\n        .filter(v => BUILTIN_TYPES.indexOf(v.type) < 0)\n        .map(v => ({ role: v.name, serviceShortId: v.type }))\n\n    const blockToExpression: (ev: RoleEvent, block: BlockJSON) => jsep.Expression = (\n        ev: RoleEvent,\n        block: BlockJSON\n    ) => {\n        if (!block) return toIdentifier(\"%%NOCODE%%\")\n        const { type, value, inputs } = block\n\n        console.debug(`block`, type, value, inputs)\n\n        if (value !== undefined)\n            // literal\n            return <jsep.Literal>{\n                type: \"Literal\",\n                value: value,\n                raw: value + \"\",\n            }\n\n        switch (type) {\n            case \"jacdac_math_single\": {\n                const argument = blockToExpression(ev, inputs[0].child)\n                const op = inputs[0].fields[\"op\"].value as string\n                return <jsep.UnaryExpression>{\n                    type: \"UnaryExpression\",\n                    operator: ops[op] || op,\n                    argument,\n                    prefix: false, // TODO:?\n                }\n            }\n            case \"jacdac_math_arithmetic\": {\n                const left = blockToExpression(ev, inputs[0].child)\n                const right = blockToExpression(ev, inputs[1].child)\n                const op = inputs[1].fields[\"op\"].value as string\n                return <jsep.BinaryExpression>{\n                    type: \"BinaryExpression\",\n                    operator: ops[op] || op,\n                    left,\n                    right,\n                }\n            }\n            case \"logic_operation\": {\n                const left = blockToExpression(ev, inputs[0].child)\n                const right = blockToExpression(ev, inputs[1].child)\n                const op = inputs[1].fields[\"op\"].value as string\n                return <jsep.LogicalExpression>{\n                    type: \"LogicalExpression\",\n                    operator: ops[op] || op,\n                    left,\n                    right,\n                }\n            }\n            case \"logic_negate\": {\n                const argument = blockToExpression(ev, inputs[0].child)\n                return <jsep.UnaryExpression>{\n                    type: \"UnaryExpression\",\n                    operator: \"!\",\n                    argument,\n                    prefix: false, // TODO:?\n                }\n            }\n            case \"logic_compare\": {\n                const left = blockToExpression(ev, inputs[0].child)\n                const right = blockToExpression(ev, inputs[1].child)\n                const op = inputs[1].fields[\"op\"].value as string\n                return <jsep.BinaryExpression>{\n                    type: \"BinaryExpression\",\n                    operator: ops[op] || op,\n                    left,\n                    right,\n                }\n            }\n            default: {\n                const def = serviceBlocks.find(def => def.type === type)\n                if (def) {\n                    const { template } = def\n                    switch (template) {\n                        case \"register_get\": {\n                            const { register } = def as RegisterBlockDefinition\n                            const { value: role } = inputs[0].fields[\"role\"]\n                            const field = inputs[0].fields[\"field\"]\n                            return toMemberExpression(\n                                role as string,\n                                field\n                                    ? toMemberExpression(\n                                          register.name,\n                                          field.value as string\n                                      )\n                                    : register.name\n                            )\n                        }\n                        case \"event_field\": {\n                            const { event } = def as EventFieldDefinition\n                            if (ev.event !== event.identifierName) {\n                                // TODO: we need to raise an error to the user in Blockly\n                                // TODO: the field that they referenced in the block \n                                // TODO: doesn't belong to the event that fired\n                            }\n                            const field = inputs[0].fields[\"field\"]\n                            return toMemberExpression(\n                                ev.role,\n                                toMemberExpression(\n                                    ev.event,\n                                    field.value as string\n                                )\n                            )\n                        }\n                    }\n                    break\n                }\n            }\n        }\n        return toIdentifier(\"%%NOCODE%%\")\n    }\n\n    const blockToCommand = (event: RoleEvent, block: BlockJSON): IT4Base => {\n        let command: jsep.CallExpression\n        const { type, inputs } = block\n        switch (type) {\n            case WAIT_BLOCK: {\n                const time = blockToExpression(event, inputs[0].child)\n                command = {\n                    type: \"CallExpression\",\n                    arguments: [time],\n                    callee: toIdentifier(\"wait\"),\n                }\n                break\n            }\n            case \"dynamic_if\": {\n                const ret: IT4IfThenElse = {\n                    sourceId: block.id,\n                    type: \"ite\",\n                    expr: blockToExpression(event, inputs[0]?.child),\n                    then: [],\n                    else: [],\n                }\n                const t = inputs[1]?.child\n                const e = inputs[2]?.child\n                if (t)\n                    addCommands(event, ret.then, [\n                        t,\n                        ...(t.children ? t.children : []),\n                    ])\n                if (e)\n                    addCommands(event, ret.else, [\n                        e,\n                        ...(e.children ? e.children : []),\n                    ])\n                return ret\n            }\n            // more builts\n            default: {\n                const def = serviceBlocks.find(def => def.type === type)\n                if (def) {\n                    const { template } = def\n                    switch (template) {\n                        case \"register_set\": {\n                            const { register } = def as RegisterBlockDefinition\n                            const val = blockToExpression(event, inputs[0].child)\n                            const { value: role } = inputs[0].fields.role\n                            command = {\n                                type: \"CallExpression\",\n                                arguments: [\n                                    toMemberExpression(\n                                        role as string,\n                                        register.name\n                                    ),\n                                    val,\n                                ],\n                                callee: toIdentifier(\"writeRegister\"),\n                            }\n                            break\n                        }\n                        case \"command\": {\n                            const { command: serviceCommand } =\n                                def as CommandBlockDefinition\n                            const { value: role } = inputs[0].fields.role\n                            command = {\n                                type: \"CallExpression\",\n                                arguments: inputs.map(a =>\n                                    blockToExpression(event, a.child)\n                                ),\n                                callee: toMemberExpression(\n                                    role as string,\n                                    serviceCommand.name\n                                ),\n                            }\n                            break\n                        }\n                    }\n                }\n            }\n        }\n        // for linking back\n        return {\n            sourceId: block.id,\n            type: \"cmd\",\n            command,\n        } as IT4Base\n    }\n\n    const addCommands = (\n        event: RoleEvent,\n        acc: IT4Base[],\n        blocks: BlockJSON[]\n    ) => {\n        blocks?.forEach(child => {\n            if (child) acc.push(blockToCommand(event, child))\n        })\n    }\n\n    const handlers: IT4Handler[] = workspace.blocks.map(top => {\n        const { type, inputs } = top\n        const commands: IT4Base[] = []\n        let command: jsep.CallExpression = undefined\n        let topEvent: RoleEvent = undefined\n        if (type === WHILE_CONDITION_BLOCK) {\n            // this is while (...)\n            const { child: condition } = inputs[0]\n            command = {\n                type: \"CallExpression\",\n                arguments: [blockToExpression(undefined, condition)],\n                callee: toIdentifier(\"awaitCondition\"),\n            }\n        } else {\n            const def = serviceBlocks.find(def => def.type === type)\n            assert(!!def)\n            const { template } = def\n            const { value: role } = inputs[0].fields[\"role\"]\n            switch (template) {\n                case \"twin\":\n                    break // ignore\n                case \"event\": {\n                    const { value: eventName } = inputs[0].fields[\"event\"]\n                    command = {\n                        type: \"CallExpression\",\n                        arguments: [\n                            toMemberExpression(\n                                role.toString(),\n                                eventName.toString()\n                            ),\n                        ],\n                        callee: toIdentifier(\"awaitEvent\"),\n                    }\n                    topEvent = {\n                        role: role.toString(),\n                        event: eventName.toString(),\n                    }\n                    break\n                }\n                case \"register_change_event\": {\n                    const { register } = def as RegisterBlockDefinition\n                    const argument = blockToExpression(undefined, inputs[0].child)\n                    command = {\n                        type: \"CallExpression\",\n                        arguments: [\n                            toMemberExpression(role.toString(), register.name),\n                            argument,\n                        ],\n                        callee: toIdentifier(\"awaitChange\"),\n                    }\n                    break\n                }\n            }\n        }\n\n        commands.push({\n            sourceId: top.id,\n            type: \"cmd\",\n            command,\n        } as IT4Base)\n\n        addCommands(topEvent, commands, top.children)\n\n        return {\n            commands,\n        }\n    })\n\n    return {\n        roles,\n        handlers,\n    }\n}\n","import Blockly from \"blockly\"\nimport { useEffect } from \"react\"\nimport ReactField from \"./fields/ReactField\"\nimport {\n    BlockTemplate,\n    ServiceBlockDefinition,\n    ServiceBlockDefinitionFactory,\n} from \"./toolbox\"\n\nexport default function useBlocklyEvents(workspace: Blockly.WorkspaceSvg) {\n    const handleChange = (\n        event: Blockly.Events.Abstract & { type: string }\n    ) => {\n        const { type } = event\n        switch (type) {\n            case Blockly.Events.BLOCK_CHANGE: {\n                const change = event as Blockly.Events.Change\n                const block = workspace.getBlockById(change.blockId)\n                const def = (\n                    Blockly.Blocks[block.type] as ServiceBlockDefinitionFactory\n                )?.jacdacDefinition as ServiceBlockDefinition\n                const template = def?.template as BlockTemplate\n                if (template === \"twin\") {\n                    // notify twin that the value changed\n                    const twinInput = block.inputList[1]\n                    console.log(\"twins\", { block, twinInput })\n                    const twinField = twinInput\n                        .fieldRow[0] as ReactField<unknown>\n                    twinField.emitChange()\n                }\n                break\n            }\n        }\n    }\n\n    // register hook\n    useEffect(() => {\n        workspace?.addChangeListener(handleChange)\n        return () => workspace?.removeChangeListener(handleChange)\n    }, [workspace])\n}\n","import _classCallCheck from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Number slider input field.\n * @author kozbial@google.com (Monica Kozbial)\n */\nimport * as Blockly from 'blockly/core';\n/**\n * Slider field.\n */\n\nexport var FieldSlider = /*#__PURE__*/function (_Blockly$FieldNumber) {\n  _inherits(FieldSlider, _Blockly$FieldNumber);\n\n  var _super = _createSuper(FieldSlider);\n\n  /**\n   * Class for an number slider field.\n   * @param {string|number=} opt_value The initial value of the field. Should\n   *    cast to a number. Defaults to 0.\n   * @param {?(string|number)=} opt_min Minimum value.\n   * @param {?(string|number)=} opt_max Maximum value.\n   * @param {?(string|number)=} opt_precision Precision for value.\n   * @param {?Function=} opt_validator A function that is called to validate\n   *    changes to the field's value. Takes in a number & returns a validated\n   *    number, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/number#creation}\n   *    for a list of properties this parameter supports.\n   * @extends {Blockly.FieldNumber}\n   * @constructor\n   */\n  function FieldSlider(opt_value, opt_min, opt_max, opt_precision, opt_validator, opt_config) {\n    var _this;\n\n    _classCallCheck(this, FieldSlider);\n\n    _this = _super.call(this, opt_value, opt_min, opt_max, opt_precision, opt_validator, opt_config);\n    /**\n     * Array holding info needed to unbind events.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     * @type {!Array.<Array<?>>}\n     * @private\n     */\n\n    _this.boundEvents_ = [];\n    /**\n     * The HTML range input element.\n     * @type {?HTMLInputElement}\n     * @private\n     */\n\n    _this.sliderInput_ = null;\n    return _this;\n  }\n  /**\n   * Constructs a FieldSlider from a JSON arg object.\n   * @param {!Object} options A JSON object with options (value, min, max, and\n   *                          precision).\n   * @return {!FieldSlider} The new field instance.\n   * @package\n   * @nocollapse\n   */\n\n\n  _createClass(FieldSlider, [{\n    key: \"showEditor_\",\n    value:\n    /**\n     * Show the inline free-text editor on top of the text along with the slider\n     *    editor.\n     * @param {Event=} opt_e Optional mouse event that triggered the field to\n     *     open, or undefined if triggered programmatically.\n     * @param {boolean=} _opt_quietInput Quiet input.\n     * @protected\n     * @override\n     */\n    function showEditor_(opt_e, _opt_quietInput) {\n      // Mobile browsers have issues with in-line textareas (focus & keyboards).\n      var noFocus = Blockly.utils.userAgent.MOBILE || Blockly.utils.userAgent.ANDROID || Blockly.utils.userAgent.IPAD;\n\n      _get(_getPrototypeOf(FieldSlider.prototype), \"showEditor_\", this).call(this, opt_e, noFocus); // Build the DOM.\n\n\n      var editor = this.dropdownCreate_();\n      Blockly.DropDownDiv.getContentDiv().appendChild(editor);\n      Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary, this.sourceBlock_.style.colourTertiary);\n      Blockly.DropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n    }\n    /**\n     * Updates the slider when the field rerenders.\n     * @protected\n     * @override\n     */\n\n  }, {\n    key: \"render_\",\n    value: function render_() {\n      _get(_getPrototypeOf(FieldSlider.prototype), \"render_\", this).call(this);\n\n      this.updateSlider_();\n    }\n    /**\n     * Creates the slider editor and add event listeners.\n     * @return {!Element} The newly created slider.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownCreate_\",\n    value: function dropdownCreate_() {\n      var wrapper = document.createElement('div');\n      wrapper.className = 'fieldSliderContainer';\n      var sliderInput = document.createElement('input');\n      sliderInput.setAttribute('type', 'range');\n      sliderInput.setAttribute('min', this.min_);\n      sliderInput.setAttribute('max', this.max_);\n      sliderInput.setAttribute('step', this.precision_);\n      sliderInput.setAttribute('value', this.getValue());\n      sliderInput.className = 'fieldSlider';\n      wrapper.appendChild(sliderInput);\n      this.sliderInput_ = sliderInput;\n      this.boundEvents_.push(Blockly.bindEventWithChecks_(sliderInput, 'input', this, this.onSliderChange_));\n      return wrapper;\n    }\n    /**\n     * Disposes of events belonging to the slider editor.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownDispose_\",\n    value: function dropdownDispose_() {\n      var _iterator = _createForOfIteratorHelper(this.boundEvents_),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var event = _step.value;\n          Blockly.unbindEvent_(event);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.sliderInput_ = null;\n    }\n    /**\n     * Sets the text to match the slider's position.\n     * @private\n     */\n\n  }, {\n    key: \"onSliderChange_\",\n    value: function onSliderChange_() {\n      this.setEditorValue_(this.sliderInput_.value);\n    }\n    /**\n     * Updates the slider when the field rerenders.\n     * @private\n     */\n\n  }, {\n    key: \"updateSlider_\",\n    value: function updateSlider_() {\n      if (!this.sliderInput_) {\n        return;\n      }\n\n      this.sliderInput_.setAttribute('value', this.getValue());\n    }\n  }], [{\n    key: \"fromJson\",\n    value: function fromJson(options) {\n      return new FieldSlider(options['value'], undefined, undefined, undefined, undefined, options);\n    }\n  }]);\n\n  return FieldSlider;\n}(Blockly.FieldNumber);\nBlockly.fieldRegistry.register('field_slider', FieldSlider);\n/**\n * CSS for slider field.\n */\n\nBlockly.Css.register([\n/* eslint-disable indent */\n\".fieldSliderContainer {\\n      align-items: center;\\n      display: flex;\\n      height: 32px;\\n      justify-content: center;\\n      width: 150px;\\n    }\\n    .fieldSlider {\\n      -webkit-appearance: none;\\n      background: transparent; /* override white in chrome */\\n      margin: 4px;\\n      padding: 0;\\n      width: 100%;\\n    }\\n    .fieldSlider:focus {\\n      outline: none;\\n    }\\n    /* Webkit */\\n    .fieldSlider::-webkit-slider-runnable-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-webkit-slider-thumb {\\n      -webkit-appearance: none;\\n      background: #fff;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      margin-top: -7px;\\n      width: 24px;\\n    }\\n    /* Firefox */\\n    .fieldSlider::-moz-range-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-moz-range-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\\n    .fieldSlider::-moz-focus-outer {\\n      /* override the focus border style */\\n      border: 0;\\n    }\\n    /* IE */\\n    .fieldSlider::-ms-track {\\n      /* IE wont let the thumb overflow the track, so fake it */\\n      background: transparent;\\n      border-color: transparent;\\n      border-width: 15px 0;\\n      /* remove default tick marks */\\n      color: transparent;\\n      height: 10px;\\n      width: 100%;\\n      margin: -4px 0;\\n    }\\n    .fieldSlider::-ms-fill-lower  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-fill-upper  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\"\n/* eslint-enable indent */\n]);","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nexport * from './field_slider';","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Overrides methods on Blockly.InsertionMarkerManager to\n * allow blocks to hook in dynamic functionality when they have pending\n * connections.\n * @author anjali@code.org (Anjali Pal)\n */\nimport * as Blockly from 'blockly/core';\n\nBlockly.InsertionMarkerManager.prototype.update = function (dxy, deleteArea) {\n  var candidate = this.getCandidate_(dxy);\n  this.wouldDeleteBlock_ = this.shouldDelete_(candidate, deleteArea);\n  var shouldUpdate = this.wouldDeleteBlock_ || this.shouldUpdatePreviews_(candidate, dxy);\n\n  if (shouldUpdate) {\n    // Begin monkey patch\n    if (candidate.closest && candidate.closest.sourceBlock_.onPendingConnection) {\n      candidate.closest.sourceBlock_.onPendingConnection(candidate.closest);\n\n      if (!this.pendingBlocks) {\n        this.pendingBlocks = new Set();\n      }\n\n      this.pendingBlocks.add(candidate.closest.sourceBlock_);\n    } // End monkey patch\n    // Don't fire events for insertion marker creation or movement.\n\n\n    Blockly.Events.disable();\n    this.maybeHidePreview_(candidate);\n    this.maybeShowPreview_(candidate);\n    Blockly.Events.enable();\n  }\n};\n\nvar oldDispose = Blockly.InsertionMarkerManager.prototype.dispose;\n\nBlockly.InsertionMarkerManager.prototype.dispose = function () {\n  if (this.pendingBlocks) {\n    this.pendingBlocks.forEach(function (block) {\n      if (block.finalizeConnections) {\n        block.finalizeConnections();\n      }\n    });\n  }\n\n  oldDispose.call(this);\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the if block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_if'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 1,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 1,\n\n  /**\n   * Block for if/elseif/else statements. Must have one if input.\n   * Can have any number of elseif inputs and optionally one else input.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['CONTROLS_IF_HELPURL']);\n    this.setStyle('logic_blocks');\n    this.appendValueInput('IF0').setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n    this.appendStatementInput('DO0').appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.setNextStatement(true);\n    this.setPreviousStatement(true);\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent if/elseif/else inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.filter(function (input) {\n      return input.name.includes('IF');\n    }).map(function (input) {\n      return input.name.replace('IF', '');\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    var hasElse = !!this.getInput('ELSE');\n    container.setAttribute('else', hasElse);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var inputs = xmlElement.getAttribute('inputs');\n\n    if (inputs) {\n      var inputNumbers = inputs.split(',');\n\n      if (this.getInput('IF0')) {\n        this.removeInput('IF0');\n      }\n\n      if (this.getInput('DO0')) {\n        this.removeInput('DO0');\n      }\n\n      var first = inputNumbers[0];\n      this.appendValueInput('IF' + first).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      this.appendStatementInput('DO' + first).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n\n      for (var i = 1; i < inputNumbers.length; i++) {\n        this.appendValueInput('IF' + inputNumbers[i]).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n        this.appendStatementInput('DO' + inputNumbers[i]).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n      }\n    }\n\n    var hasElse = xmlElement.getAttribute('else');\n\n    if (hasElse == 'true') {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Finds the index of a connection. Used to determine where in the block to\n   * insert new inputs.\n   * @param {!Blockly.Connection} connection A connection on this block.\n   * @return {?number} The index of the connection in the this.inputList.\n   */\n  findInputIndexForConnection: function findInputIndexForConnection(connection) {\n    for (var i = 0; i < this.inputList.length; i++) {\n      var input = this.inputList[i];\n\n      if (input.connection == connection) {\n        return i;\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Inserts a boolean value input and statement input at the specified index.\n   * @param {number} index Index of the input before which to add new inputs.\n   */\n  insertElseIf: function insertElseIf(index) {\n    var caseNumber = this.inputCounter;\n    this.appendValueInput('IF' + caseNumber).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n    this.appendStatementInput('DO' + caseNumber).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.moveInputBefore('IF' + caseNumber, this.inputList[index].name);\n    this.moveInputBefore('DO' + caseNumber, this.inputList[index + 1].name);\n    this.inputCounter++;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    if (connection.type === Blockly.NEXT_STATEMENT && !this.getInput('ELSE')) {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var inputIndex = this.findInputIndexForConnection(connection);\n\n    if (inputIndex === null) {\n      return;\n    }\n\n    var input = this.inputList[inputIndex];\n\n    if (connection.targetConnection && input.name.includes('IF')) {\n      var nextIfInput = this.inputList[inputIndex + 2];\n\n      if (!nextIfInput || nextIfInput.name == 'ELSE') {\n        this.insertElseIf(inputIndex + 2);\n      } else {\n        var nextIfConnection = nextIfInput && nextIfInput.connection.targetConnection;\n\n        if (nextIfConnection && !nextIfConnection.sourceBlock_.isInsertionMarker()) {\n          this.insertElseIf(inputIndex + 2);\n        }\n      }\n    }\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this = this;\n\n    var toRemove = []; // Remove Else If inputs if neither the if nor the do has a connected block.\n\n    for (var i = 2; i < this.inputList.length - 1; i += 2) {\n      var ifConnection = this.inputList[i];\n      var doConnection = this.inputList[i + 1];\n\n      if (!ifConnection.connection.targetConnection && !doConnection.connection.targetConnection) {\n        toRemove.push(ifConnection.name);\n        toRemove.push(doConnection.name);\n      }\n    }\n\n    toRemove.forEach(function (input) {\n      return _this.removeInput(input);\n    }); // Remove Else input if it doesn't have a connected block.\n\n    var elseInput = this.getInput('ELSE');\n\n    if (elseInput && !elseInput.connection.targetConnection) {\n      this.removeInput(elseInput.name);\n    } // Remove the If input if it is empty and there is at least one Else If\n\n\n    if (this.inputList.length > 2) {\n      var ifInput = this.inputList[0];\n      var doInput = this.inputList[1];\n      var nextInput = this.inputList[2];\n\n      if (nextInput.name.includes('IF') && !ifInput.connection.targetConnection && !doInput.connection.targetConnection) {\n        this.removeInput(ifInput.name);\n        this.removeInput(doInput.name);\n        nextInput.removeField('elseif');\n        nextInput.appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the text_join block with dyanmic\n *    inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_text_join'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['TEXT_JOIN_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'String');\n    this.setTooltip(Blockly.Msg['TEXT_JOIN_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(function (input) {\n      return input.name;\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var _this = this;\n\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(function (name) {\n        return _this.appendValueInput(name);\n      });\n      this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   *     has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this2 = this;\n\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(function (input) {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(function (inputName) {\n        return _this2.removeInput(inputName);\n      }); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the list_create block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_list_create'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'Array');\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(function (input) {\n      return input.name;\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var _this = this;\n\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(function (name) {\n        return _this.appendValueInput(name);\n      });\n      this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this2 = this;\n\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(function (input) {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(function (inputName) {\n        return _this2.removeInput(inputName);\n      }); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Adds blocks that replace the built-in mutator UI with dynamic\n *     connections that appear when a block is dragged over inputs on the block.\n */\nimport './insertion_marker_manager_monkey_patch';\nimport './dynamic_if.js';\nimport './dynamic_text_join.js';\nimport './dynamic_list_create.js';\nexport var overrideOldBlockDefinitions = function overrideOldBlockDefinitions() {\n  Blockly.Blocks['list_create'] = Blockly.Blocks['dynamic_list_create'];\n  Blockly.Blocks['text_join'] = Blockly.Blocks['dynamic_text_join'];\n  Blockly.Blocks['controls_if'] = Blockly.Blocks['dynamic_if'];\n};","import _classCallCheck from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Plugin for changing the context menu to match the\n * `disableOrphans` event handler.\n */\nimport * as Blockly from 'blockly/core';\n/**\n * This plugin changes the logic of the enable/disable context menu item. It is\n * enabled for all blocks except top-level blocks that have output or\n * previous connections. In other words, the option is disabled for orphan\n * blocks. Using this plugin allows users to disable valid non-orphan blocks,\n * but not re-enable blocks that have been automatically disabled by\n * `disableOrphans`.\n */\n\nexport var DisableTopBlocks = /*#__PURE__*/function () {\n  function DisableTopBlocks() {\n    _classCallCheck(this, DisableTopBlocks);\n  }\n\n  _createClass(DisableTopBlocks, [{\n    key: \"init\",\n    value:\n    /**\n     * Modifies the context menu 'disable' option as described above.\n     */\n    function init() {\n      var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n      this.oldPreconditionFn = disableMenuItem.preconditionFn;\n\n      disableMenuItem.preconditionFn = function (\n      /** @type {!Blockly.ContextMenuRegistry.Scope} */\n      scope) {\n        var block = scope.block;\n\n        if (!block.isInFlyout && block.workspace.options.disable && block.isEditable()) {\n          if (block.getInheritedDisabled() || isOrphan(block)) {\n            return 'disabled';\n          }\n\n          return 'enabled';\n        }\n\n        return 'hidden';\n      };\n    }\n    /**\n     * Turn off the effects of this plugin and restore the initial behavior.\n     * This is never required to be called. It is optional in case you need to\n     * disable the plugin.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n      disableMenuItem.preconditionFn = this.oldPreconditionFn;\n    }\n  }]);\n\n  return DisableTopBlocks;\n}();\n/**\n * A block is an orphan if its parent is an orphan, or if it doesn't have a\n * parent but it does have a previous or output connection (so it expects to be\n * attached to something). This means all children of orphan blocks are also\n * orphans and cannot be manually re-enabled.\n * @param {!Blockly.BlockSvg} block Block to check.\n * @return {boolean} Whether the block is an orphan.\n */\n\nfunction isOrphan(block) {\n  // If the parent is an orphan block, this block should also be considered\n  // an orphan so it cannot be manually re-enabled.\n  var parent =\n  /** @type {Blockly.BlockSvg} */\n  block.getParent();\n\n  if (parent && isOrphan(parent)) {\n    return true;\n  }\n\n  return !parent && !!(block.outputConnection || block.previousConnection);\n}","import Blockly from \"blockly\"\nimport \"@blockly/field-slider\"\nimport \"@blockly/block-dynamic-connection\"\nimport { useEffect } from \"react\"\nimport { DisableTopBlocks } from \"@blockly/disable-top-blocks\"\n\nexport default function useBlocklyPlugins(workspace: Blockly.WorkspaceSvg) {\n    //plugins\n    useEffect(() => {\n        if (!workspace) return\n        // Add the disableOrphans event handler. This is not done automatically by\n        // the plugin and should be handled by your application.\n        workspace.addChangeListener(Blockly.Events.disableOrphans)\n\n        // The plugin must be initialized before it has any effect.\n        const disableTopBlocksPlugin = new DisableTopBlocks()\n        disableTopBlocksPlugin.init()\n        return () =>\n            workspace.removeChangeListener(Blockly.Events.disableOrphans)\n    }, [workspace])\n}\n","import React, { useContext, useEffect, useRef, useState } from \"react\"\nimport { useBlocklyWorkspace } from \"react-blockly\"\nimport Blockly from \"blockly\"\nimport Theme from \"@blockly/theme-modern\"\nimport DarkTheme from \"@blockly/theme-dark\"\nimport useToolbox, { scanServices, useToolboxButtons } from \"./useToolbox\"\nimport BlocklyModalDialogs from \"./BlocklyModalDialogs\"\nimport { domToJSON, WorkspaceJSON } from \"./jsongenerator\"\nimport DarkModeContext from \"../ui/DarkModeContext\"\nimport { IT4Program } from \"../../../jacdac-ts/src/vm/ir\"\nimport workspaceJSONToIT4Program from \"./it4generator\"\nimport AppContext from \"../AppContext\"\nimport { createStyles, makeStyles } from \"@material-ui/core\"\nimport clsx from \"clsx\"\nimport { IT4ProgramRunner } from \"../../../jacdac-ts/src/vm/vmrunner\"\nimport useBlocklyEvents from \"./useBlocklyEvents\"\nimport useBlocklyPlugins from \"./useBlocklyPlugins\"\nimport {\n    BlocklyWorkspaceWithServices,\n    WorkspaceServices,\n} from \"./WorkspaceContext\"\nimport { RoleManager } from \"../../../jacdac-ts/src/vm/rolemanager\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        editor: {\n            height: \"calc(100vh - 7rem)\",\n            \"& .blocklyTreeLabel\": {\n                fontFamily: theme.typography.fontFamily,\n            },\n            \"& .blocklyText\": {\n                fontWeight: `normal !important`,\n                fontFamily: `${theme.typography.fontFamily} !important`,\n            },\n        },\n    })\n)\n\nexport default function VMBlockEditor(props: {\n    className?: string\n    initialXml?: string\n    onXmlChange?: (xml: string) => void\n    onJSONChange?: (json: WorkspaceJSON) => void\n    onIT4ProgramChange?: (program: IT4Program) => void\n    runner?: IT4ProgramRunner\n    roleManager?: RoleManager\n    serviceClass?: number\n}) {\n    const {\n        className,\n        onXmlChange,\n        onJSONChange,\n        onIT4ProgramChange,\n        initialXml,\n        serviceClass,\n        runner,\n        roleManager,\n    } = props\n    const classes = useStyles()\n    const { darkMode } = useContext(DarkModeContext)\n    const { setError } = useContext(AppContext)\n    const [services, setServices] = useState<string[]>([])\n    const { toolboxConfiguration, newProjectXml, serviceBlocks } = useToolbox({\n        blockServices: services,\n        serviceClass,\n    })\n    const theme = darkMode === \"dark\" ? DarkTheme : Theme\n    const gridColor = darkMode === \"dark\" ? \"#555\" : \"#ccc\"\n\n    // ReactBlockly\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const blocklyRef = useRef(null)\n    const { workspace, xml } = useBlocklyWorkspace({\n        ref: blocklyRef,\n        toolboxConfiguration,\n        workspaceConfiguration: {\n            collapse: false,\n            disable: false,\n            comments: false,\n            css: true,\n            trashcan: false,\n            sounds: false,\n            grid: {\n                spacing: 25,\n                length: 1,\n                colour: gridColor,\n                snap: true,\n            },\n            renderer: \"zelos\",\n            theme,\n            oneBasedIndex: false,\n            move: {\n                scrollbars: {\n                    vertical: false,\n                    horizontal: true,\n                },\n            },\n            zoom: {\n                controls: true,\n                wheel: true,\n                startScale: 1.0,\n                maxScale: 3,\n                minScale: 0.1,\n                scaleSpeed: 1.2,\n                pinch: true,\n            },\n        },\n        initialXml: initialXml || newProjectXml,\n        onImportXmlError: () => setError(\"Error loading blocks...\"),\n    }) as { workspace: Blockly.WorkspaceSvg; xml: string }\n\n    // surface state to react\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const ws = workspace as any as BlocklyWorkspaceWithServices\n        if (ws) ws.jacdacServices = new WorkspaceServices()\n    }, [workspace])\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const ws = workspace as any as BlocklyWorkspaceWithServices\n        const services = ws?.jacdacServices\n        if (services) {\n            services.runner = runner\n        }\n    }, [workspace, runner])\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const ws = workspace as any as BlocklyWorkspaceWithServices\n        const services = ws?.jacdacServices\n        if (services) {\n            services.roleManager = roleManager\n        }\n    }, [workspace, roleManager])\n\n    // plugins\n    useBlocklyPlugins(workspace)\n    useBlocklyEvents(workspace)\n    useToolboxButtons(workspace, toolboxConfiguration)\n\n    // blockly did a change\n    useEffect(() => {\n        if (!workspace || workspace.isDragging()) return\n\n        onXmlChange?.(xml)\n\n        // save json\n        if (onJSONChange || onIT4ProgramChange) {\n            // emit json\n            const json = domToJSON(workspace)\n            onJSONChange?.(json)\n            if (onIT4ProgramChange) {\n                try {\n                    const program = workspaceJSONToIT4Program(\n                        serviceBlocks,\n                        json\n                    )\n                    onIT4ProgramChange(program)\n                } catch (e) {\n                    console.error(e)\n                    onIT4ProgramChange(undefined)\n                }\n            }\n        }\n\n        // update toolbox with declared roles\n        const newServices = scanServices(workspace)\n        if (JSON.stringify(services) !== JSON.stringify(newServices))\n            setServices(newServices)\n    }, [workspace, xml])\n\n    return (\n        <>\n            <div className={clsx(classes.editor, className)} ref={blocklyRef} />\n            <BlocklyModalDialogs />\n        </>\n    )\n}\n"],"sourceRoot":""}