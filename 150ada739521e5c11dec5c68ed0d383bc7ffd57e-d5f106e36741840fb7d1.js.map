{"version":3,"sources":["webpack://jacdac-docs/./src/components/hooks/useRegisterServer.ts","webpack://jacdac-docs/./src/components/hooks/useReadingAuxilliaryValue.ts","webpack://jacdac-docs/./src/components/RegisterInput.tsx","webpack://jacdac-docs/./src/components/RegisterTrend.tsx","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js","webpack://jacdac-docs/./src/components/widgets/GaugeWidget.tsx","webpack://jacdac-docs/./src/components/widgets/ValueWithUnitWidget.tsx","webpack://jacdac-docs/./src/components/hooks/useUnitIcon.tsx","webpack://jacdac-docs/./src/components/fields/MemberInput.tsx","webpack://jacdac-docs/./src/components/fields/MembersInput.tsx","webpack://jacdac-docs/./src/components/hooks/useAnimationFrame.ts","webpack://jacdac-docs/./src/components/hooks/useFireKey.ts","webpack://jacdac-docs/./src/components/hooks/useServiceServer.ts","webpack://jacdac-docs/./src/components/hooks/useSvgButtonProps.ts","webpack://jacdac-docs/./src/components/hooks/useThrottledValue.ts","webpack://jacdac-docs/./src/components/icons/HumidityIcon.tsx","webpack://jacdac-docs/./src/components/icons/TemperatureIcon.tsx","webpack://jacdac-docs/./src/components/ui/LoadingProgress.tsx","webpack://jacdac-docs/./src/components/widgets/ButtonWidget.tsx","webpack://jacdac-docs/./src/components/widgets/PowerButton.tsx","webpack://jacdac-docs/./src/components/widgets/SvgWidget.tsx","webpack://jacdac-docs/./src/components/widgets/svgutils.ts","webpack://jacdac-docs/./src/components/widgets/useWidgetSize.ts","webpack://jacdac-docs/./src/components/widgets/useWidgetTheme.ts"],"names":["useRegisterServer","register","server","useServiceServer","service","code","useReadingAuxilliaryValue","identifier","options","SystemReg","visible","reading","auxilliaryRegister","undefined","useState","unpackedValue","value","setValue","useEffect","subscribe","REPORT_UPDATE","RegisterInput","props","showRegisterName","showDeviceName","showServiceName","hideMissingValues","showTrend","showDataType","variant","off","toggleOff","specification","device","fields","useContext","AppContext","setAppError","setError","working","setWorking","args","setArgs","hasSet","kind","hasData","useChange","_","data","color","regProps","isReading","isValue","min","max","readingError","resolution","vs","handleRefresh","refresh","sendArgs","values","setValues","sendSetPackedAsync","packFormat","length","serviceName","name","toLocaleLowerCase","replace","registerName","map","f","DEFAULT_HORIZON","DEFAULT_HEIGHT","RegisterTrend","mini","horizon","height","interval","JacdacContext","bus","palette","useChartPalette","dataSet","useRef","FieldDataSet","current","addRow","REPORT_RECEIVE","id","setInterval","clearInterval","GaugeWidget","size","step","valueLabel","onChange","tabIndex","useWidgetTheme","background","active","textProps","sliderPathRef","w","h","m","roff","riff","sw","cx","cy","r","sa","ea","_step","displayValue","useThrottledValue","computeArc","v","mid","fraction","describeArc","va","db","dvalue","dactual","lineCap","tvalue","clickeable","handlePointerDown","ev","preventDefault","buttons","svg","ownerSVGElement","pos","svgPointerPoint","closest","closestPoint","pointerStyle","cursor","pathProps","onPointerDown","onPointerMove","style","handleSliderChange","newValue","ValueWithUnitWidget","secondaryLabel","icon","label","labelVariant","precision","Math","ceil","log10","hasValue","isNaN","valueText","roundWithPrecision","toLocaleString","valueTextLength","isSet","reduce","l","valueVariant","valueStyle","minWidth","unit","resolveUnit","runit","MemberInput","serviceSpecification","serviceMemberSpecification","error","showLoading","typicalMin","typicalMax","absoluteMin","absoluteMax","type","enumInfo","enums","disabled","errorText","setErrorText","textValue","setTextValue","valueString","memberValueToString","isWidget","widgetSize","useWidgetSize","unitIcon","useUnitIcon","minValue","pick","test","maxValue","errorValue","floor","prettyUnit","helperText","prettyMemberUnit","filter","join","inputId","useId","inputType","isSimpleType","isIntegerType","handleChecked","checked","handleChange","target","tryParseMemberValue","handleEnumChange","event","isFlags","flagsToValue","percentValueFormat","valueLabelFormat","percentValueLabelFormat","round","offFormat","isValueOrIntensity","valueToFlags","Object","keys","members","n","signed","storage","hasTypicalRange","marks","readOnly","MembersInput","specifications","index","c","slice","field","fieldi","useAnimationFrame","callback","deps","requestRef","previousTimeRef","animate","time","deltaTime","requestAnimationFrame","cancelAnimationFrame","ENTER_KEY","SPACE_KEY","keyCodeFromEvent","e","which","keyCode","useFireKey","handler","charCode","createTwin","provider","useServiceProvider","twin","useMemo","console","debug","changeId","serviceIndex","useSvgButtonProps","onDown","onUp","fireDownOnEnter","fireUpOnEnter","preventify","className","role","onPointerUp","onPointerLeave","onKeyDown","onKeyUp","maxRate","actual","setActual","animated","dt","maxError","sign","abs","LoadingProgress","ButtonWidget","controlBackground","buttonProps","mo","ri","rn","PowerButton","onClick","strokeWidth","borderStroke","a","d","btnlabel","iconStroke","userSelect","pointerEvents","SvgWidget","width","children","title","viewBox","aspectRatio","vertical","position","point","createSVGPoint","x","clientX","y","clientY","res","matrixTransform","getScreenCTM","inverse","pathNode","pathLength","getTotalLength","distance2","p","dx","dy","bestLength","bestDistance","Infinity","scanLength","scan","getPointAtLength","scanDistance","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","PI","cos","sin","startAngle","endAngle","large","start","end","largeArcFlag","widgetCount","theme","useTheme","DarkModeContext","darkMode","primary","main","secondary","info","backgroundColor","default","grey","textPrimary","text","fill","alignmentBaseline","dominantBaseline","textAnchor","letterSpacing"],"mappings":"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","file":"150ada739521e5c11dec5c68ed0d383bc7ffd57e-d5f106e36741840fb7d1.js","sourcesContent":["import { JDRegister } from \"../../../jacdac-ts/src/jdom/register\";\nimport useServiceServer from \"./useServiceServer\";\n\nexport default function useRegisterServer(register: JDRegister) {\n    const server = useServiceServer(register?.service);\n    return server?.register(register?.code);\n}","import { useEffect, useState } from \"react\"\nimport { REPORT_UPDATE, SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\n\nexport default function useReadingAuxilliaryValue(\n    register: JDRegister,\n    identifier: number = SystemReg.ReadingError |\n        SystemReg.ReadingResolution |\n        SystemReg.MaxReading |\n        SystemReg.MinReading |\n        SystemReg.MinValue |\n        SystemReg.MaxValue |\n        SystemReg.StreamingInterval |\n        SystemReg.StreamingPreferredInterval,\n    options?: { visible?: boolean }\n): number[] {\n    const { service, code } = register || {}\n    const { visible } = options || { visible: true }\n    const reading = code === SystemReg.Reading || code === SystemReg.Value\n    const auxilliaryRegister =\n        reading && identifier ? service.register(identifier) : undefined\n    const [value, setValue] = useState<number[]>(\n        auxilliaryRegister?.unpackedValue\n    )\n\n    useEffect(\n        () =>\n            visible &&\n            auxilliaryRegister?.subscribe(REPORT_UPDATE, () => {\n                setValue(auxilliaryRegister?.unpackedValue)\n            }),\n        [register, auxilliaryRegister, visible]\n    )\n\n    return value\n}\n","import { Box, Typography } from \"@material-ui/core\"\nimport DeviceName from \"./devices/DeviceName\"\nimport Alert from \"./ui/Alert\"\nimport React, { useContext, useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport { REPORT_UPDATE, SystemReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport AppContext from \"./AppContext\"\nimport MembersInput from \"./fields/MembersInput\"\nimport RegisterTrend from \"./RegisterTrend\"\nimport IconButtonWithProgress from \"./ui/IconButtonWithProgress\"\nimport useRegisterServer from \"./hooks/useRegisterServer\"\nimport useReadingAuxilliaryValue from \"./hooks/useReadingAuxilliaryValue\"\nimport useChange from \"../jacdac/useChange\"\n\nexport type RegisterInputVariant = \"widget\" | \"\"\n\nexport default function RegisterInput(props: {\n    register: JDRegister\n    showDeviceName?: boolean\n    showServiceName?: boolean\n    showRegisterName?: boolean\n    hideMissingValues?: boolean\n    showTrend?: boolean\n    showDataType?: boolean\n    variant?: RegisterInputVariant\n    off?: boolean\n    toggleOff?: () => void\n    visible?: boolean\n}) {\n    const {\n        register,\n        showRegisterName,\n        showDeviceName,\n        showServiceName,\n        hideMissingValues,\n        showTrend,\n        showDataType,\n        variant,\n        off,\n        toggleOff,\n        visible,\n    } = props\n    const { service, specification } = register\n    const { device } = service\n    const { fields, code } = register\n    const { setError: setAppError } = useContext(AppContext)\n    const [working, setWorking] = useState(false)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const [args, setArgs] = useState<any[]>(register.unpackedValue || [])\n    const server = useRegisterServer(register)\n    const hasSet =\n        specification.kind === \"rw\" ||\n        (server && specification.kind !== \"const\")\n    const hasData = useChange(register, _ => !!_.data)\n    const color = hasSet ? \"secondary\" : \"primary\"\n    const regProps = visible !== undefined ? { visible } : undefined\n    const isReading = code === SystemReg.Reading\n    const isValue = !isReading && code === SystemReg.Value\n    const min = useReadingAuxilliaryValue(\n        register,\n        isReading\n            ? SystemReg.MinReading\n            : isValue\n            ? SystemReg.MinValue\n            : undefined,\n        regProps\n    )\n    const max = useReadingAuxilliaryValue(\n        register,\n        isReading\n            ? SystemReg.MaxReading\n            : isValue\n            ? SystemReg.MaxValue\n            : undefined,\n        regProps\n    )\n    const readingError = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingError,\n        regProps\n    )\n    const resolution = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingResolution,\n        regProps\n    )\n\n    useEffect(\n        () =>\n            visible &&\n            register.subscribe(REPORT_UPDATE, () => {\n                const vs = register.unpackedValue\n                if (vs !== undefined) setArgs(vs)\n            }),\n        [register, visible]\n    )\n    const handleRefresh = () => {\n        register.refresh(true)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const sendArgs = async (values: any[]) => {\n        if (working) return\n        try {\n            setWorking(true)\n            if (server) {\n                server.setValues(values)\n                await register.refresh()\n            } else\n                await register.sendSetPackedAsync(\n                    specification.packFormat,\n                    values,\n                    true\n                )\n        } catch (e) {\n            setAppError(e)\n        } finally {\n            setWorking(false)\n        }\n    }\n\n    if (!specification)\n        return (\n            <Alert severity=\"error\">{`Unknown member ${register.service}:${register.code}`}</Alert>\n        )\n\n    if (!fields.length) return null // nothing to see here\n\n    if (hideMissingValues && !hasData) return null\n\n    const serviceName = register.service.name\n        .toLocaleLowerCase()\n        .replace(/_/g, \" \")\n    const registerName = specification.name.replace(/_/g, \" \")\n    return (\n        <>\n            {showDeviceName && (\n                <Typography component=\"span\" key=\"devicenamename\">\n                    <DeviceName device={device} />/\n                </Typography>\n            )}\n            {showServiceName && specification && (\n                <Typography\n                    variant=\"caption\"\n                    key=\"servicename\"\n                    aria-label={serviceName}\n                >\n                    {serviceName}\n                </Typography>\n            )}\n            {showRegisterName && specification && serviceName !== registerName && (\n                <Typography\n                    variant=\"caption\"\n                    key=\"registername\"\n                    aria-label={registerName}\n                >\n                    {\" \" + registerName}\n                </Typography>\n            )}\n            {!hasData && (\n                <Box>\n                    <IconButtonWithProgress\n                        title=\"refresh\"\n                        indeterminate={true}\n                        onClick={handleRefresh}\n                    />\n                </Box>\n            )}\n            {showTrend && hasData && (\n                <RegisterTrend register={register} mini={false} horizon={24} />\n            )}\n            {hasData && (\n                <MembersInput\n                    color={color}\n                    serviceSpecification={service.specification}\n                    serviceMemberSpecification={specification}\n                    specifications={fields.map(f => f.specification)}\n                    values={args}\n                    setValues={hasSet && sendArgs}\n                    showDataType={showDataType}\n                    variant={variant}\n                    min={min}\n                    max={max}\n                    resolution={resolution}\n                    error={readingError}\n                    off={off}\n                    toggleOff={toggleOff}\n                />\n            )}\n        </>\n    )\n}\n","import React, { useContext, useEffect, useRef } from \"react\"\nimport { REPORT_RECEIVE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport Trend from \"./Trend\"\nimport useChartPalette from \"./useChartPalette\"\nimport useChange from \"../jacdac/useChange\"\n\nconst DEFAULT_HORIZON = 50\nconst DEFAULT_HEIGHT = 12\n\nexport default function RegisterTrend(props: {\n    register: JDRegister\n    showName?: boolean\n    horizon?: number\n    height?: number\n    mini?: boolean\n    interval?: number\n}) {\n    const { register, mini, horizon, height, interval } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const palette = useChartPalette()\n    const dataSet = useRef(\n        FieldDataSet.create(bus, [register], \"output\", palette, 100)\n    )\n\n    useChange(dataSet.current)\n\n    const addRow = () => dataSet.current.addRow()\n    // register on change if no intervals\n    useEffect(\n        () =>\n            interval ? undefined : register?.subscribe(REPORT_RECEIVE, addRow),\n        [interval, register]\n    )\n    // keep logging\n    useEffect(() => {\n        const id = interval && setInterval(addRow, interval)\n        return () => id && clearInterval(id)\n    }, [interval])\n\n    return (\n        <Trend\n            dataSet={dataSet.current}\n            horizon={horizon || DEFAULT_HORIZON}\n            gradient={true}\n            height={height || DEFAULT_HEIGHT}\n            mini={mini}\n        />\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport { useFormControl } from '../FormControl';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      cursor: 'pointer',\n      // For correct alignment with the text.\n      verticalAlign: 'middle',\n      WebkitTapHighlightColor: 'transparent',\n      marginLeft: -11,\n      marginRight: 16,\n      // used for row presentation of radio/checkbox\n      '&$disabled': {\n        cursor: 'default'\n      }\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"start\"`. */\n    labelPlacementStart: {\n      flexDirection: 'row-reverse',\n      marginLeft: 16,\n      // used for row presentation of radio/checkbox\n      marginRight: -11\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"top\"`. */\n    labelPlacementTop: {\n      flexDirection: 'column-reverse',\n      marginLeft: 16\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"bottom\"`. */\n    labelPlacementBottom: {\n      flexDirection: 'column',\n      marginLeft: 16\n    },\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the label's Typography component. */\n    label: {\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    }\n  };\n};\n/**\n * Drop in replacement of the `Radio`, `Switch` and `Checkbox` component.\n * Use this component if you want to display an extra label.\n */\n\nvar FormControlLabel = /*#__PURE__*/React.forwardRef(function FormControlLabel(props, ref) {\n  var checked = props.checked,\n      classes = props.classes,\n      className = props.className,\n      control = props.control,\n      disabledProp = props.disabled,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$labelPlacement = props.labelPlacement,\n      labelPlacement = _props$labelPlacement === void 0 ? 'end' : _props$labelPlacement,\n      name = props.name,\n      onChange = props.onChange,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"checked\", \"classes\", \"className\", \"control\", \"disabled\", \"inputRef\", \"label\", \"labelPlacement\", \"name\", \"onChange\", \"value\"]);\n\n  var muiFormControl = useFormControl();\n  var disabled = disabledProp;\n\n  if (typeof disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n\n  if (typeof disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  var controlProps = {\n    disabled: disabled\n  };\n  ['checked', 'name', 'onChange', 'value', 'inputRef'].forEach(function (key) {\n    if (typeof control.props[key] === 'undefined' && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"label\", _extends({\n    className: clsx(classes.root, className, labelPlacement !== 'end' && classes[\"labelPlacement\".concat(capitalize(labelPlacement))], disabled && classes.disabled),\n    ref: ref\n  }, other), /*#__PURE__*/React.cloneElement(control, controlProps), /*#__PURE__*/React.createElement(Typography, {\n    component: \"span\",\n    className: clsx(classes.label, disabled && classes.disabled)\n  }, label));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormControlLabel'\n})(FormControlLabel);","import React, { SVGAttributes, useRef } from \"react\";\nimport useWidgetTheme from \"./useWidgetTheme\";\nimport SvgWidget from \"./SvgWidget\";\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport { closestPoint, describeArc, svgPointerPoint } from \"./svgutils\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\nimport PowerButton from \"./PowerButton\";\nimport { Grid, Slider } from \"@material-ui/core\";\n\nexport default function GaugeWidget(props: {\n    value: number,\n    min: number,\n    max: number,\n    step?: number,\n    label?: string,\n    color?: \"primary\" | \"secondary\",\n    size?: string,\n    variant?: \"fountain\",\n    tabIndex?: number,\n    valueLabel?: (v: number) => string,\n    onChange?: (ev: unknown, newValue: number) => void\n    off?: boolean,\n    toggleOff?: () => void\n}) {\n    const { value, color, size, min, max, step, variant, valueLabel,\n        off, toggleOff, onChange, tabIndex } = props;\n    const { background, active, textProps } = useWidgetTheme(color);\n\n    const sliderPathRef = useRef<SVGPathElement>();\n    const w = 120;\n    const h = 120;\n    const m = 8;\n    const roff = 30;\n    const riff = 10;\n    const sw = m << 1;\n    const cx = w >> 1;\n    const cy = h >> 1;\n    const r = (w >> 1) - m;\n    const sa = -135;\n    const ea = 135;\n    const _step = step || (max - min) / 10\n    const displayValue = useThrottledValue(value, (max - min) * 2);\n\n    const computeArc = (v: number) => {\n        if (variant === \"fountain\") {\n            const mid = (ea + sa) / 2;\n            const fraction = v / (max - min) * (ea - sa);\n            if (fraction < 0)\n                return describeArc(cx, cy, r, mid + fraction, mid);\n            else\n                return describeArc(cx, cy, r, mid, mid + fraction);\n        } else {\n            const fraction = (v - min) / (max - min);\n            const va = sa + fraction * (ea - sa);\n            return describeArc(cx, cy, r, sa, va);\n        }\n    }\n\n    const db = describeArc(cx, cy, r, sa, ea);\n    const dvalue = computeArc(value);\n    const dactual = computeArc(displayValue);\n    const lineCap = \"round\"\n    const tvalue = valueLabel(value);\n    const clickeable = !!onChange;\n\n    const handlePointerDown = (ev: React.PointerEvent<SVGPathElement>) => {\n        ev.preventDefault();\n        if (!ev.buttons) return;\n        const svg = sliderPathRef.current.ownerSVGElement\n        const pos = svgPointerPoint(svg, ev);\n        const closest = closestPoint(sliderPathRef.current, _step, pos);\n        onChange(ev, min + (1 - closest) * (max - min))\n    }\n    const pointerStyle: CSSProperties = clickeable && {\n        cursor: \"pointer\"\n    }\n    const pathProps: SVGAttributes<SVGPathElement> = {\n        onPointerDown: clickeable ? handlePointerDown : undefined,\n        onPointerMove: clickeable ? handlePointerDown : undefined,\n        style: clickeable ? pointerStyle : undefined\n    }\n    const handleSliderChange = (ev: unknown, newValue: number | number[]) => {\n        onChange(ev, newValue as number);\n    }\n\n    return <Grid container direction=\"column\">\n        <Grid item>\n            <SvgWidget tabIndex={tabIndex} width={w} height={h} size={size}>\n                <path ref={sliderPathRef} strokeWidth={sw} stroke={background} d={db} strokeLinecap={lineCap} fill=\"transparent\"\n                    {...pathProps}\n                />\n                {!off && <path strokeWidth={sw} stroke={active} strokeLinecap={lineCap} d={dvalue} opacity={0.2} fill=\"transparent\"\n                    {...pathProps}\n                />}\n                {!off && <path strokeWidth={sw} stroke={active} strokeLinecap={lineCap} d={dactual} fill=\"transparent\"\n                    {...pathProps}\n                />}\n                {off !== undefined\n                    ? <PowerButton off={off} label={tvalue} cx={cx} cy={cy} r={roff} ri={riff} color={color} onClick={toggleOff} />\n                    : <text {...textProps} x={cx} y={cy} aria-label={tvalue}>{tvalue}</text>}\n            </SvgWidget>\n        </Grid>\n        {clickeable && <Grid item>\n            <Slider\n                disabled={off}\n                color={color}\n                min={min} max={max} step={_step} valueLabelDisplay=\"off\"\n                value={value} onChange={handleSliderChange} />\n        </Grid>}\n    </Grid>\n\n}","import React from \"react\";\nimport { Grid, Slider, Typography } from \"@material-ui/core\";\nimport { isSet, roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\n\nexport default function ValueWithUnitWidget(props: {\n    value: number,\n    min?: number,\n    max?: number,\n    step?: number,\n    icon?: JSX.Element,\n    label: string,\n    secondaryLabel?: string,\n    tabIndex?: number,\n    color?: \"primary\" | \"secondary\",\n    size?: string,\n    onChange?: (event: unknown, newValue: number | number[]) => void\n}) {\n    const { value, min, max, step, secondaryLabel, icon, label, tabIndex, onChange } = props;\n    const labelVariant = \"subtitle1\";\n    const precision = step === undefined ? 1 : step < 1 ? Math.ceil(-Math.log10(step)) : 0;\n    const hasValue = !isNaN(value);\n    const valueText = hasValue ? roundWithPrecision(value, precision).toLocaleString() : \"--\"\n    const valueTextLength = isSet(min) && isSet(max) ? [min, max, min + (min + max) / 3]\n        .map(v => roundWithPrecision(v, precision).toLocaleString().replace(/[,.]/, '').length)\n        .reduce((l, r) => Math.max(l, r), 0)\n        + precision : valueText.length;\n\n    //console.log({ min, max, step, precision })\n    const valueVariant = valueTextLength < 4 ? \"h1\"\n        : valueTextLength < 7 ? \"h2\"\n            : valueTextLength < 9 ? \"h3\"\n                : valueTextLength < 12 ? \"h4\"\n                    : \"h6\";\n    const valueStyle: CSSProperties = {\n        minWidth: `${Math.max(2, valueTextLength - 1)}em`\n    }\n\n    return <Grid container direction=\"column\" tabIndex={tabIndex} aria-label={`${valueText} ${label}`}>\n        <Grid item xs={12}>\n            <Grid container direction=\"row\" alignContent=\"flex-end\">\n                <Grid item>\n                    <Typography role=\"timer\" align=\"right\" variant={valueVariant}\n                        style={valueStyle}>{icon}{valueText}</Typography>\n                </Grid>\n                <Grid item>\n                    <Grid container direction=\"column\" alignContent=\"space-between\">\n                        <Grid item>\n                            <Typography variant={labelVariant}>{label}</Typography>\n                        </Grid>\n                        {secondaryLabel && <Grid item>\n                            <Typography variant={\"caption\"}>{secondaryLabel}</Typography>\n                        </Grid>}\n                    </Grid>\n                </Grid>\n            </Grid>\n        </Grid>\n        {onChange && value !== undefined && <Grid item xs={12}>\n            <Slider valueLabelDisplay=\"off\" color=\"secondary\"\n                min={min} max={max} step={step} value={value} onChange={onChange} />\n        </Grid>}\n    </Grid>;\n}","import React from \"react\"\nimport HumidityIcon from \"../icons/HumidityIcon\"\nimport TemperatureIcon from \"../icons/TemperatureIcon\"\nimport { resolveUnit } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { SvgIconProps } from \"@material-ui/core\"\n\nexport default (unit: string, props?: SvgIconProps) => {\n    const { unit: runit } = resolveUnit(unit) || {}\n    switch (runit) {\n        case \"%RH\":\n            return <HumidityIcon {...props} />\n        case \"C\":\n        case \"K\":\n            return <TemperatureIcon {...props} />\n        default:\n            return null\n    }\n}\n","import React, { useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { FormControlLabel, Slider } from \"@material-ui/core\"\nimport { MenuItem, Select, Switch, TextField } from \"@material-ui/core\"\nimport {\n    flagsToValue,\n    prettyMemberUnit,\n    prettyUnit,\n    valueToFlags,\n} from \"../../../jacdac-ts/src/jdom/pretty\"\nimport {\n    isIntegerType,\n    isValueOrIntensity,\n    memberValueToString,\n    tryParseMemberValue,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport {\n    isSet,\n    pick,\n    roundWithPrecision,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport { RegisterInputVariant } from \"../RegisterInput\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport GaugeWidget from \"../widgets/GaugeWidget\"\nimport useWidgetSize from \"../widgets/useWidgetSize\"\nimport ValueWithUnitWidget from \"../widgets/ValueWithUnitWidget\"\nimport useUnitIcon from \"../hooks/useUnitIcon\"\nimport { PackedSimpleValue } from \"../../../jacdac-ts/src/jdom/pack\"\nimport { useId } from \"react-use-id-hook\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\n\nexport default function MemberInput(props: {\n    specification: jdspec.PacketMember\n    serviceSpecification: jdspec.ServiceSpec\n    serviceMemberSpecification: jdspec.PacketInfo\n    value: PackedSimpleValue\n    setValue?: (v: PackedSimpleValue) => void\n    showDataType?: boolean\n    color?: \"primary\" | \"secondary\"\n    variant?: RegisterInputVariant\n    min?: number\n    max?: number\n    resolution?: number\n    error?: number\n    showLoading?: boolean\n    off?: boolean\n    toggleOff?: () => void\n}) {\n    const {\n        specification,\n        serviceSpecification,\n        serviceMemberSpecification,\n        value,\n        setValue,\n        showDataType,\n        color,\n        variant,\n        min,\n        max,\n        resolution,\n        error,\n        showLoading,\n        off,\n        toggleOff,\n    } = props\n    const {\n        typicalMin,\n        typicalMax,\n        absoluteMin,\n        absoluteMax,\n        type,\n    } = specification\n    const enumInfo = serviceSpecification.enums?.[specification.type]\n    const disabled = !setValue\n    const [errorText, setErrorText] = useState(\"\")\n    const [textValue, setTextValue] = useState(\"\")\n    const valueString = memberValueToString(value, specification)\n    const name =\n        specification.name === \"_\"\n            ? serviceMemberSpecification.name\n            : specification.name\n    const label = name\n    const isWidget = variant === \"widget\"\n    const widgetSize = useWidgetSize()\n    const unitIcon = useUnitIcon(specification.unit, { \"aria-label\": label })\n\n    const minValue = pick(\n        min,\n        typicalMin,\n        absoluteMin,\n        /^u/.test(type) ? 0 : undefined\n    )\n    const maxValue = pick(max, typicalMax, absoluteMax)\n    const errorValue = error\n        ? \"\" +\n          roundWithPrecision(\n              error,\n              1 - Math.floor(Math.log10(error))\n          ).toLocaleString()\n        : undefined\n    const unit = prettyUnit(specification.unit)\n    const helperText =\n        errorText ||\n        [prettyMemberUnit(specification, showDataType), errorValue]\n            .filter(v => v !== undefined)\n            .join(\", \")\n    const inputId = useId()\n\n    const inputType =\n        specification.type === \"string\" || specification.type === \"string0\"\n            ? \"string\"\n            : specification.isSimpleType || isIntegerType(specification.type)\n            ? \"number\"\n            : \"\"\n\n    // update coming from device\n    useEffect(() => {\n        setTextValue(valueString)\n    }, [valueString])\n\n    const handleChecked = (ev, checked: boolean) => {\n        setValue(checked)\n    }\n    const handleChange = ev => {\n        const newValue = ev.target.value\n        setTextValue(newValue)\n        const r = tryParseMemberValue(newValue, specification)\n        if (r.value !== undefined) setValue(r.value)\n        setErrorText(r.error)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleEnumChange = (event: React.ChangeEvent<{ value: any }>) => {\n        const v = enumInfo.isFlags\n            ? flagsToValue(event.target.value as number[])\n            : (event.target.value as number)\n        setValue(v)\n    }\n    const handleSliderChange = (\n        event: unknown,\n        newValue: number | number[]\n    ) => {\n        const v = newValue as number\n        setValue(v)\n    }\n    const percentValueFormat = (value: number) => {\n        // avoid super long floats\n        return ((value * 100) >> 0) + \"%\"\n    }\n\n    const valueLabelFormat = (value: number) => {\n        // avoid super long floats\n        return roundWithPrecision(value, 1) + (unit || \"\")\n    }\n    const percentValueLabelFormat = (v: number) => {\n        return `${Math.round(v * 100)}%`\n    }\n    const offFormat = () => \"off\"\n\n    // value hasn't been loaded yet\n    if (serviceMemberSpecification.kind !== \"command\" && value === undefined) {\n        if (showLoading) return <LoadingProgress />\n        else return null\n    }\n\n    //\n    if (specification.type === \"pipe\") {\n        return (\n            <>\n                pipe <code>{specification.name}</code>\n            </>\n        )\n    } else if (specification.type === \"bool\") {\n        if (isWidget && !isValueOrIntensity(serviceMemberSpecification)) {\n            return (\n                <ButtonWidget\n                    label={!isWidget && label}\n                    checked={!!value}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n        }\n\n        return (\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={!!value}\n                        onChange={disabled ? undefined : handleChecked}\n                        color={color}\n                    />\n                }\n                label={label}\n            />\n        )\n    } else if (enumInfo !== undefined) {\n        return (\n            <Select\n                aria-label={label}\n                disabled={disabled}\n                multiple={enumInfo.isFlags}\n                value={\n                    enumInfo.isFlags\n                        ? valueToFlags(enumInfo, value as number)\n                        : value\n                }\n                onChange={handleEnumChange}\n            >\n                {Object.keys(enumInfo.members).map(n => (\n                    <MenuItem key={n} value={enumInfo.members[n]}>\n                        {n}\n                    </MenuItem>\n                ))}\n            </Select>\n        )\n    } else if (specification.unit === \"/\") {\n        const signed = specification.storage < 0\n        const min = signed ? -1 : 0\n        const max = 1\n        const step = resolution !== undefined ? resolution : 0.01\n        if (isWidget)\n            return (\n                <GaugeWidget\n                    tabIndex={0}\n                    label={label}\n                    value={value as number}\n                    color={color}\n                    variant={signed ? \"fountain\" : undefined}\n                    min={min}\n                    max={max}\n                    step={step}\n                    valueLabel={percentValueLabelFormat}\n                    onChange={disabled ? undefined : handleSliderChange}\n                    off={off}\n                    toggleOff={toggleOff}\n                />\n            )\n\n        return (\n            <Slider\n                aria-label={label}\n                color={color}\n                value={value as number}\n                valueLabelFormat={percentValueFormat}\n                onChange={disabled ? undefined : handleSliderChange}\n                min={min}\n                max={max}\n                step={step}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (isSet(minValue) && isSet(maxValue)) {\n        const hasTypicalRange = isSet(typicalMin) && isSet(typicalMax)\n        let step =\n            resolution !== undefined\n                ? resolution\n                : hasTypicalRange\n                ? (specification.typicalMax - specification.typicalMin) / 100\n                : (maxValue - minValue) / 100\n        if (step === 0 || isNaN(step))\n            // edge case\n            step = undefined\n        const marks =\n            hasTypicalRange &&\n            (typicalMin !== minValue || typicalMax !== maxValue)\n                ? [\n                      {\n                          value: typicalMin,\n                      },\n                      {\n                          value: typicalMax,\n                      },\n                  ]\n                : undefined\n        if (isWidget)\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    label={specification.unit}\n                    value={value as number}\n                    min={minValue}\n                    max={maxValue}\n                    icon={unitIcon}\n                    step={step}\n                    secondaryLabel={errorValue}\n                    color={color}\n                    onChange={disabled ? undefined : handleSliderChange}\n                />\n            )\n\n        return (\n            <Slider\n                value={value as number}\n                color={color}\n                valueLabelFormat={off ? offFormat : valueLabelFormat}\n                onChange={disabled ? undefined : handleSliderChange}\n                min={minValue}\n                max={maxValue}\n                step={step}\n                marks={marks}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (specification.type === \"bytes\") {\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{\n                    [\"aria-label\"]: label,\n                    [\"aria-readonly\"]: disabled,\n                    readOnly: disabled,\n                }}\n                helperText={helperText}\n                onChange={disabled ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={\"text\"}\n            />\n        )\n    } else {\n        // numbers or string or uintarrays\n        if (isWidget)\n            // we need min/max to support a slider\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    value={roundWithPrecision(value as number, 1)}\n                    label={specification.unit}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{\n                    \"aria-label\": label,\n                    \"aria-readonly\": disabled,\n                    readOnly: disabled,\n                }}\n                helperText={helperText}\n                onChange={disabled ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={inputType}\n            />\n        )\n    }\n}\n","import { Grid } from \"@material-ui/core\"\nimport React from \"react\"\nimport { PackedSimpleValue } from \"../../../jacdac-ts/src/jdom/pack\"\nimport { RegisterInputVariant } from \"../RegisterInput\"\nimport MemberInput from \"./MemberInput\"\n\nexport default function MembersInput(props: {\n    serviceSpecification: jdspec.ServiceSpec\n    serviceMemberSpecification?: jdspec.PacketInfo\n    specifications: jdspec.PacketMember[]\n    values?: PackedSimpleValue[]\n    setValues?: (values: PackedSimpleValue[]) => void\n    showDataType?: boolean\n    color?: \"primary\" | \"secondary\"\n    variant?: RegisterInputVariant\n    min?: number[]\n    max?: number[]\n    resolution?: number[]\n    error?: number[]\n    off?: boolean\n    toggleOff?: () => void\n}) {\n    const {\n        serviceSpecification,\n        serviceMemberSpecification,\n        specifications,\n        values,\n        setValues,\n        showDataType,\n        color,\n        variant,\n        min,\n        max,\n        resolution,\n        error,\n        off,\n        toggleOff,\n    } = props\n    const setValue = (index: number) => (value: PackedSimpleValue) => {\n        const c = values.slice(0)\n        c[index] = value\n        setValues(c)\n    }\n\n    return (\n        <Grid container spacing={1}>\n            {specifications.map((field, fieldi) => {\n                const value = values?.[fieldi]\n                return (\n                    <Grid item key={fieldi} xs={12}>\n                        <MemberInput\n                            serviceSpecification={serviceSpecification}\n                            serviceMemberSpecification={\n                                serviceMemberSpecification\n                            }\n                            specification={field}\n                            showDataType={showDataType}\n                            value={value}\n                            color={color}\n                            setValue={values && setValues && setValue(fieldi)}\n                            variant={variant}\n                            min={min?.[fieldi]}\n                            max={max?.[fieldi]}\n                            resolution={resolution?.[fieldi]}\n                            error={error?.[fieldi]}\n                            off={off}\n                            toggleOff={toggleOff}\n                        />\n                    </Grid>\n                )\n            })}\n        </Grid>\n    )\n}\n","import { DependencyList, useEffect, useRef } from \"react\";\n\nexport default function useAnimationFrame(callback: (time: number) => boolean, deps?: DependencyList) {\n    const requestRef = useRef<number>();\n    const previousTimeRef = useRef<number>();\n\n    const animate = (time: number) => {\n        let active = true;\n        if (previousTimeRef.current != undefined) {\n            const deltaTime = time - previousTimeRef.current;\n            active = callback(deltaTime)\n        }\n        previousTimeRef.current = time;\n        if (active)\n            requestRef.current = requestAnimationFrame(animate);\n        else // we're done\n            requestRef.current = undefined;\n    }\n\n    useEffect(() => {\n        previousTimeRef.current = undefined;\n        requestRef.current = requestAnimationFrame(animate);\n        return () => requestRef.current !== undefined\n            && cancelAnimationFrame(requestRef.current);\n    }, deps || []);\n}","import React, { KeyboardEvent, PointerEvent } from \"react\"\n\nconst ENTER_KEY = 13;\nconst SPACE_KEY = 32;\n\nexport function keyCodeFromEvent(e: any) {\n    return (typeof e.which == \"number\") ? e.which : e.keyCode;\n}\n\nexport default function useFireKey<TElement extends Element>(handler: (ev?: PointerEvent<TElement>) => void): (e: KeyboardEvent<TElement>) => void {\n    if (!handler)\n        return undefined;\n    return (e: KeyboardEvent<Element>) => {\n        const charCode = keyCodeFromEvent(e);\n        if (charCode === ENTER_KEY || charCode === SPACE_KEY) {\n            e.preventDefault();\n            handler();\n        }\n    }\n}\n","import { useMemo } from \"react\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport JDServiceServer from \"../../../jacdac-ts/src/jdom/serviceserver\"\nimport useServiceProvider from \"./useServiceProvider\"\n\nexport default function useServiceServer<T extends JDServiceServer>(\n    service: JDService,\n    createTwin?: () => T\n) {\n    const provider = useServiceProvider(service.device)\n    const twin = useMemo<T>(() => {\n        if (provider) return undefined\n        let twin = service.twin as T\n        if (!twin && createTwin) {\n            twin = createTwin()\n            console.debug(`create twin`, { twin })\n            if (twin) service.twin = twin\n        }\n        return twin\n    }, [service, provider, service?.changeId])\n    return (provider?.service(service?.serviceIndex) as T) || twin\n}\n","import { SVGProps } from \"react\";\nimport useFireKey from \"./useFireKey\";\n\nexport default function useSvgButtonProps<T extends SVGElement>(\n    label: string,\n    onDown?: (event: React.PointerEvent<T>) => void,\n    onUp?: (event: React.PointerEvent<T>) => void\n): SVGProps<T> {\n\n    const disabled = !onDown && !onUp;\n    const fireDownOnEnter = useFireKey(onDown);\n    const fireUpOnEnter = useFireKey(onUp);\n\n    const preventify = (handler: (event: React.PointerEvent<T>) => void) => {\n        if (handler)\n            return (event: React.PointerEvent<T>) => {\n                event.preventDefault();\n                handler(event);\n            }\n        else\n            return undefined;\n    }\n\n    return {\n        className: disabled ? undefined : \"clickeable\",\n        role: disabled ? undefined : \"button\",\n        tabIndex: disabled ? undefined : 0,\n        [\"aria-label\"]: label,\n        onPointerDown: preventify(onDown),\n        onPointerUp: preventify(onUp),\n        onPointerLeave: preventify(onUp),\n        onKeyDown: fireDownOnEnter,\n        onKeyUp: fireUpOnEnter\n    }\n}","import { useState } from \"react\";\nimport useAnimationFrame from \"./useAnimationFrame\";\n\nexport default function useThrottledValue(value: number, maxRate: number) {\n    const [actual, setActual] = useState<number>(value);\n\n    let animated = actual;\n    useAnimationFrame(time => {\n        // no valid rate\n        if (isNaN(maxRate) || isNaN(animated)) {\n            setActual(value);\n            return false;\n        }\n\n        // increment towards value\n        const dt = time / 1000; // s\n        const error = value - animated;\n        const maxError = maxRate * dt; // deg\n        let active = true;\n        animated += Math.sign(error) * Math.min(Math.abs(error), maxError)\n        if (Math.abs(value - animated) / maxRate < 0.01) {\n            animated = value;\n            active = false;\n        }\n        setActual(animated);\n        return active;\n    }, [value, maxRate]);\n\n    return actual;\n}","import { SvgIcon, SvgIconProps } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default (props: SvgIconProps) =>\n    <SvgIcon {...props}>\n        <path d=\"M8.8-.03A49.327 49.327 0 00.956 11.112a8.824 8.824 0 1015.693 0A49.327 49.327 0 008.801-.029zm0 3.132a47.244 47.244 0 015.995 8.962 6.74 6.74 0 11-11.986 0A47.243 47.243 0 018.8 3.102z\" />\n    </SvgIcon>\n","import { SvgIcon, SvgIconProps } from \"@material-ui/core\"\nimport React from \"react\"\n\nexport default (props: SvgIconProps) => (\n    <SvgIcon {...props}>\n        <path d=\"M11.365 14.761a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 12.062a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 9.363a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 6.663a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM11.365 3.964a.635.635 0 000-1.27h-1.35a.635.635 0 000 1.27zM4.04 3.26v14.207a1.979 1.978 0 101.284-.004V3.26a.642.642 0 00-1.285 0z\" />\n        <path d=\"M4.699 0a3.302 3.301 0 00-3.323 3.3v12.726a4.668 4.666 0 106.605.022V3.3A3.302 3.301 0 004.7 0zm-.047 1.303a2.01 2.008 0 012.041 2.009v13.37a3.354 3.352 0 11-4.017-.027V3.312a2.01 2.008 0 011.976-2.01z\" />\n    </SvgIcon>\n)\n","import { CircularProgress } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function LoadingProgress(props: { size?: string }) {\n    const { size } = props;\n    return <CircularProgress\n        disableShrink\n        variant=\"indeterminate\"\n        size={size || \"1em\"}\n    />\n}","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\nexport default function ButtonWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(label, onDown, onUp)\n    const w = 64\n    const mo = checked ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const ri = r - mo\n    const rn = 8\n    return (\n        <SvgWidget width={w} size={size}>\n            <rect\n                x={0}\n                y={0}\n                rx={2}\n                ry={2}\n                width={w}\n                height={w}\n                fill={background}\n            />\n            <circle cx={rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n            <circle cx={w - rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n            <circle\n                cx={w - rn}\n                cy={w - rn}\n                r={rn >> 1}\n                fill={controlBackground}\n            />\n            <circle cx={rn} cy={w - rn} r={rn >> 1} fill={controlBackground} />\n            <circle\n                cx={cx}\n                cy={cy}\n                r={ri}\n                aria-live=\"polite\"\n                fill={checked ? active : controlBackground}\n                {...buttonProps}\n            />\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\";\nimport { describeArc } from \"./svgutils\";\nimport useWidgetTheme from \"./useWidgetTheme\";\n\nexport default function PowerButton(props: {\n    cx: number,\n    cy: number,\n    r: number,\n    ri: number,\n    strokeWidth?: number,\n    label?: string,\n    color?: \"primary\" | \"secondary\",\n    off?: boolean,\n    borderStroke?: string,\n    onClick?: () => void\n}) {\n    const { cx, cy, r, ri, onClick, off, color, label, strokeWidth, borderStroke } = props;\n    const { background, active, controlBackground, textProps } = useWidgetTheme(color);\n    const a = 135;\n    const d = describeArc(cx, cy, ri, -a, a, true);\n    const btnlabel = off ? \"turn on\" : \"turn off\";\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(btnlabel, onClick)\n    const sw = strokeWidth || 3;\n    const disabled = !onClick;\n\n    const iconStroke = disabled || !off ? background : active;\n\n    return <g>\n        <title>{btnlabel}</title>\n        <circle cx={cx} cy={cy} r={r} fill={controlBackground}\n            strokeWidth={sw} stroke={borderStroke || background}\n            {...buttonProps} />\n        {(off || !label) && <g transform={`rotate(180, ${cx}, ${cy})`}>\n            <path d={d} strokeLinecap=\"round\" fill=\"none\"\n                strokeWidth={sw} stroke={iconStroke}\n                style={({ userSelect: \"none\", pointerEvents: \"none\" })} />\n            <line strokeLinecap=\"round\" x1={cx} y1={cy + ri / 4} x2={cx} y2={cy + ri}\n                stroke={iconStroke} strokeWidth={sw}\n                style={({ userSelect: \"none\", pointerEvents: \"none\" })} />\n        </g>}\n        {!off && label && <text aria-label={label} x={cx} y={cy} {...textProps}>{label}</text>}\n    </g>\n}","import React, { ReactNode } from \"react\";\n\nexport default function SvgWidget(props: {\n    width: number,\n    height?: number,\n    size?: string,\n    role?: string,\n    title?: string,\n    viewBox?: string,\n    tabIndex?: number,\n    background?: string,\n    children: ReactNode\n}) {\n    const { width, height, size = \"100%\", background, children, role, title, viewBox, tabIndex } = props;\n    const h = height || width;\n    const aspectRatio = width / height;\n    const vertical = aspectRatio < 1;\n\n    return <div style={({\n        position: \"relative\",\n        height: vertical ? size : undefined,\n        width: vertical ? undefined : size,\n    })}>\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            tabIndex={tabIndex}\n            viewBox={viewBox || `0 0 ${width} ${h}`}\n            aria-label={title}\n            style={({ \n                height: vertical ? \"100%\" : undefined,\n                width: vertical ?  undefined : \"100%\",\n            })}\n            role={role || \"group\"}>\n            {background && <rect x={0} y={0} width={width} height={height} fill={background} rx={1} ry={1} />}\n            {children}\n        </svg>\n    </div>\n}","import React from \"react\"\n\nexport function svgPointerPoint(\n    svg: SVGSVGElement,\n    event: React.PointerEvent\n): DOMPoint {\n    const point = svg.createSVGPoint()\n    point.x = event.clientX\n    point.y = event.clientY\n    const res = point.matrixTransform(svg.getScreenCTM().inverse())\n    return res\n}\n\nexport function closestPoint(\n    pathNode: SVGPathElement,\n    step: number,\n    point: DOMPoint\n): number {\n    const pathLength = pathNode.getTotalLength()\n\n    const distance2 = (p: DOMPoint) => {\n        const dx = p.x - point.x\n        const dy = p.y - point.y\n        return dx * dx + dy * dy\n    }\n\n    let bestLength = 0\n    let bestDistance = Infinity\n    for (let scanLength = 0; scanLength <= pathLength; scanLength += step) {\n        const scan = pathNode.getPointAtLength(scanLength)\n        const scanDistance = distance2(scan)\n        if (scanDistance < bestDistance) {\n            bestLength = scanLength\n            bestDistance = scanDistance\n        }\n    }\n    return bestLength / pathLength\n}\n\nexport function polarToCartesian(\n    centerX: number,\n    centerY: number,\n    radius: number,\n    angleInDegrees: number\n) {\n    const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\n\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    }\n}\n\nexport function describeArc(\n    x: number,\n    y: number,\n    radius: number,\n    startAngle: number,\n    endAngle: number,\n    large?: boolean\n) {\n    const start = polarToCartesian(x, y, radius, endAngle)\n    const end = polarToCartesian(x, y, radius, startAngle)\n\n    const largeArcFlag =\n        large !== true && endAngle - startAngle <= 180 ? \"0\" : \"1\"\n\n    const d = [\n        \"M\",\n        start.x,\n        start.y,\n        \"A\",\n        radius,\n        radius,\n        0,\n        largeArcFlag,\n        0,\n        end.x,\n        end.y,\n    ].join(\" \")\n\n    return d\n}\n","export default function useWidgetSize(\n    variant?: \"icon\" | \"\",\n    widgetCount?: number\n) {\n    const icon = variant === \"icon\"\n\n    const mini = icon\n    let widgetSize: string\n    switch (widgetCount || 1) {\n        case 1:\n        case 2:\n            widgetSize = mini ? \"12em\" : \"16em\"\n            break\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n            widgetSize = mini ? \"10em\" : \"14em\"\n            break\n        default:\n            widgetSize = mini ? \"4em\" : \"5em\"\n            break\n    }\n    return widgetSize\n}\n","import { createStyles, makeStyles, useTheme } from \"@material-ui/core\";\nimport { SVGProps, useContext } from \"react\";\nimport DarkModeContext from \"../ui/DarkModeContext\"\n\nexport default function useWidgetTheme(color?: \"primary\" | \"secondary\") {\n    const theme = useTheme();\n    const { palette } = theme;\n    const { background } = palette;\n    const { darkMode } = useContext(DarkModeContext);\n\n    const active: string = color === \"primary\" ? palette.primary.main\n        : color === \"secondary\" ? palette.secondary.main\n            : palette.info.main;\n    const backgroundColor = darkMode === \"dark\" ? background.default : palette.grey[800];\n    const controlBackground = darkMode === \"dark\" ? palette.grey[800] : palette.grey[400]\n    const textPrimary = palette.text.primary\n    const textProps: SVGProps<SVGTextElement> = {\n        fill: textPrimary,\n        alignmentBaseline: \"central\",\n        dominantBaseline: \"middle\",\n        textAnchor: \"middle\",\n        pointerEvents: \"none\",\n        letterSpacing: 0,\n        style: {\n            userSelect: \"none\",\n            pointerEvents: \"none\"\n        }\n    }\n\n    return {\n        background: backgroundColor,\n        controlBackground,\n        active,\n        textPrimary,\n        textProps\n    }\n}"],"sourceRoot":""}