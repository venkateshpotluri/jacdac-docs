{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/GetApp.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Launch.js","webpack://jacdac-docs/./node_modules/blockly/blockly.js","webpack://jacdac-docs/./node_modules/blockly/blocks.js","webpack://jacdac-docs/./node_modules/blockly/blocks_compressed.js","webpack://jacdac-docs/./node_modules/blockly/browser.js","webpack://jacdac-docs/./node_modules/blockly/core-browser.js","webpack://jacdac-docs/./node_modules/blockly/index.js","webpack://jacdac-docs/./node_modules/blockly/javascript.js","webpack://jacdac-docs/./node_modules/blockly/javascript_compressed.js","webpack://jacdac-docs/./node_modules/blockly/msg/en.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/BlocklyWorkspace.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/debounce.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/index.js","webpack://jacdac-docs/./node_modules/react-blockly/dist/useBlocklyWorkspace.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/get.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://jacdac-docs/./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://jacdac-docs/./jacdac-ts/src/vm/ir.ts","webpack://jacdac-docs/./jacdac-ts/src/vm/compile.ts","webpack://jacdac-docs/./jacdac-ts/src/vm/events.ts","webpack://jacdac-docs/./src/components/hooks/useWindowEvent.ts","webpack://jacdac-docs/./src/components/makecode/useMakeCodeRenderer.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeSimulator.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeSnippet.tsx","webpack://jacdac-docs/./src/components/CodeBlock.tsx","webpack://jacdac-docs/./jacdac-ts/src/servers/rolemanager.ts","webpack://jacdac-docs/./src/components/hooks/useRoleManager.ts","webpack://jacdac-docs/./src/components/blockly/jsongenerator.ts","webpack://jacdac-docs/./src/components/blockly/useBlocklyEvents.ts","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/field_slider.js","webpack://jacdac-docs/./node_modules/@blockly/field-slider/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/insertion_marker_manager_monkey_patch.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_if.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_text_join.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/dynamic_list_create.js","webpack://jacdac-docs/./node_modules/@blockly/block-dynamic-connection/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/disable-top-blocks/src/index.js","webpack://jacdac-docs/./src/components/blockly/useBlocklyPlugins.ts","webpack://jacdac-docs/./src/components/blockly/useToolbox.ts","webpack://jacdac-docs/./src/components/blockly/BlockContext.tsx","webpack://jacdac-docs/./src/components/blockly/BlockDiagnostics.tsx","webpack://jacdac-docs/./node_modules/@blockly/theme-modern/src/index.js","webpack://jacdac-docs/./node_modules/@blockly/theme-dark/src/index.js","webpack://jacdac-docs/./src/components/blockly/BlocklyModalDialogs.tsx","webpack://jacdac-docs/./src/components/blockly/BlockEditor.tsx","webpack://jacdac-docs/./src/components/blockly/WorkspaceContext.tsx","webpack://jacdac-docs/./src/components/blockly/dsl/fieldsdsl.ts","webpack://jacdac-docs/./src/components/blockly/dsl/shadowdsl.ts","webpack://jacdac-docs/./src/components/blockly/dsl/variablesdsl.ts","webpack://jacdac-docs/./src/components/blockly/fields/JDomTreeField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/KeyboardKeyField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LEDColorField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactImageField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LEDMatrixField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/LogViewField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/NoServiceAlert.tsx","webpack://jacdac-docs/./src/components/blockly/fields/NoteField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/PointerBoundary.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ReactInlineField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/SliderField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ServoAngleField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/TwinField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/ValueContext.tsx","webpack://jacdac-docs/./src/components/TrendChart.tsx","webpack://jacdac-docs/./src/components/blockly/fields/WatchValueField.tsx","webpack://jacdac-docs/./src/components/blockly/fields/fields.ts","webpack://jacdac-docs/./src/components/blockly/toolbox.ts","webpack://jacdac-docs/./src/components/hooks/toneContext.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/AppTheme.tsx","webpack://jacdac-docs/./src/components/ui/PaperBox.tsx","webpack://jacdac-docs/./src/components/vm/VMgenerator.ts","webpack://jacdac-docs/./src/components/widgets/svg.ts"],"names":["VMFunctions","id","args","prompt","context","toIdentifier","type","name","toMemberExpression","root","field","object","property","computed","handlerVisitor","handler","visitITE","visitCommand","commands","forEach","visitBase","base","ite","else","then","compileProgram","prog","newProgram","roles","slice","handlers","startBlock","map","h","removeIfThenElse","errors","checkCall","cmd","callee","command","cid","undefined","length","shift","push","arguments","newSequence","labels","labelId","time","end","expr","assert","pop","getServiceFromRole","info","role","shortId","find","pair","def","serviceSpecificationFromName","serviceShortId","service","checkProgram","allErrors","goodHandlers","errorFun","e","sourceId","message","symbolResolver","SpecSymbolResolver","checker","VMChecker","_","errorCount","c","checkCommand","registers","s","split","fld","register","events","event","VM_EVENT","VMCode","useWindowEvent","listener","passive","deps","useEffect","window","addEventListener","removeEventListener","concat","parseMakeCodeSnippet","source","ghost","code","meta","dependencies","test","front","parts","replace","m","value","snippet","mkcds","makeCodeServices","filter","src","indexOf","client","qName","default","repo","dep","unique","useMakeCodeRenderer","useContext","MakeCodeSnippetContext","target","rendererUrl","lang","iframeId","pendingRequests","useMemo","sendRequest","req","iframe","document","getElementById","dataset","ready","contentWindow","postMessage","render","console","log","f","createElement","style","position","left","bottom","width","height","body","appendChild","Math","random","options","snippetMode","Promise","resolve","reject","handleMessage","ev","msg","data","Object","keys","k","r","useStyles","makeStyles","createStyles","root2","paddingTop","top","border","MakeCodeSimulator","props","simUrl","JacdacContext","bus","frameRef","useRef","classes","url","encodeURIComponent","join","origin","URL","subscribe","PACKET_SEND","PACKET_PROCESS","pkt","packetSent","channel","broadcast","toBuffer","sender","current","MakeCodeSnippet","renderedSource","JSON","parse","rendered","tabs","editor","setEditor","useState","tab","setTab","handleTabChange","newValue","withPrefix","TraceSnippet","lazy","CodeSandboxButton","HighlightedCode","children","codeSandbox","className","downloadName","downloadText","DarkModeContext","darkMode","language","theme","DARK_THEME","LIGHT_THEME","valueUri","defaultProps","tokens","getLineProps","getTokenProps","float","line","index","lineProps","key","token","CodeBlock","RoleManager","_roles","on","DEVICE_ANNOUNCE","addServices","bind","DEVICE_DISCONNECT","removeServices","devices","ignoreSelf","announced","dev","ROLE_UNBOUND","ROLE_BOUND","setRoles","newRoles","changed","supportedNewRoles","i","splice","emit","newRole","existingRole","CHANGE","bindServices","unboundRoles","binding","boundRoles","services","serviceName","srv","b","selfDevice","device","getService","addRoleService","ret","JDEventSource","useRoleManager","roleManager","domToJSON","workspace","dsls","clean","o","builtins","logic_null","text","block","getFieldValue","math_number","Number","logic_boolean","variableToJSON","variable","getId","fieldsToJSON","fields","toMap","toLowerCase","fieldToJSON","xmlToJSON","xml","j","Flags","outerHTML","getAttributeNames","v","getAttribute","childNodes","child","nodeType","Node","TEXT_NODE","textContent","ELEMENT_NODE","isSerializable","ReactField","container","Blockly","fieldXml","toXml","flattenNext","next","blockToJSON","blockToJSONHidden","isEnabled","isInsertionMarker","getChildren","definition","resolveServiceBlockDefinition","dsl","d","blockToValue","element","inputs","inputList","input","fieldRow","connection","targetBlock","getNextBlock","variables","sort","l","localeCompare","blocks","getTopBlocks","json","error","useBlocklyEvents","handleChange","change","getBlockById","blockId","twinInput","twinField","emitChange","addChangeListener","removeChangeListener","useBlocklyPlugins","ContextMenuRegistry","disableTopBlocksPlugin","DisableTopBlocks","init","highlighted","addSelect","removeSelect","loadBlocks","arrayConcatMany","createBlocks","registerFields","jacdacDefinition","jsonInit","patchCategoryJSONtoXML","cat","button","contents","unshift","node","kind","exists","warn","values","blockxml","shadow","useToolbox","liveServices","useServices","specification","useTheme","dslsCategories","createCategory","order","toolboxConfiguration","useToolboxButtons","buttons","btn","registerButtonCallback","callbackKey","stringify","BlockContext","createContext","workspaceXml","workspaceJSON","setWarnings","setWorkspace","setWorkspaceXml","displayName","BlockProvider","storageKey","useLocalStorage","NEW_PROJET_XML","storedXml","setStoredXml","_setWorkspaceXml","setWorkspaceJSON","warnings","ws","jacdacServices","wws","WorkspaceServices","isDragging","newWorkspaceJSON","getAllBlocks","setWarningText","BlockDiagnostics","BlocklyModalDialogs","dialogType","setDialogType","setMessage","setValue","valueId","useId","callback","showDialog","previous","alert","confirm","cb","defaultValue","handleCloseConfirm","handleCancel","handleOk","handleValueChange","fontFamily","typography","fontWeight","BlockEditor","AppContext","setError","DarkTheme","Theme","gridColor","blocklyRef","useBlocklyWorkspace","ref","workspaceConfiguration","collapse","disable","comments","css","trashcan","sounds","grid","spacing","colour","snap","renderer","oneBasedIndex","move","scrollbars","vertical","horizontal","media","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","pinch","initialXml","onImportXmlError","observer","ResizeObserver","resize","observe","disconnect","clsx","_runner","_roleManager","WorkspaceContext","flyout","roleServiceShortId","roleService","runner","WorkspaceProvider","getSourceBlock","sourceBlock","setSourceBlock","useChange","resolveRole","newSourceBlock","roleInput","roleField","FieldVariable","getVariable","resolveRoleService","newRoleService","setRole","setRoleService","isInFlyout","setFlyout","fieldsDsl","fieldShadows","jacdac_on_off","jacdac_yes_no","jacdac_time_picker","jacdac_angle","jacdac_percent","jacdac_ratio","shadowDsl","message0","args0","output","min","max","precision","colourOptions","columns","variablesDsl","types","custom","compileExpressionToVM","var","toString","compileCommandToVM","blockToExpression","makeVMBase","JDomServiceTreeView","JDomTreeWidget","onPointerStopPropagation","stopPropagation","minWidth","cursor","JDomTreeField","fromJson","renderInlineField","ReactInlineField","KEY","EDITABLE","KeyboardKeyInput","KeyboardKeyField","getText_","selector","modifiers","renderKeyboardKey","renderField","newSelector","newModifiers","LEDWidget","LEDColorFieldWidget","ValueContext","onValueChange","LEDColorField","initCustomView","size_","fieldGroup_","cx","cy","strokeWidth","stroke","updateView","rgbToHtmlColor","circle","view","setAttribute","SHADOW","toShadowDefinition","ReactImageField","setSize","img","imgUri","renderValue","setAttributeNS","getText","alt","LEDMatrixWidget","LEDMatrixField","VALUE_CHANGE","rows","leds","columnspadded","ledsBytes","fromHex","cvs","pw","ph","w","ctx","getContext","fillStyle","fillRect","x","y","bitindex","byte","bit","dataUri","toDataURL","onChange","newLeds","toHex","Uint8Array","LogViewWidget","logs","setLogs","logData","padding","marginBottom","background","color","palette","primary","maxHeight","overflowY","count","LogViewField","NoServiceAlert","spec","handleStartSimulator","startServiceProviderFromServiceClass","classIdentifier","PianoWidget","NoteField","UNMOUNT","toneContext","close","handlePlayTone","newFrequency","createToneContext","playTone","PointerBoundary","SOURCE_BLOCK_CHANGE","MOUNT","validator","size","SERIALIZABLE","fieldElement","fromXml","sourceBlock_","initView","updateSize_","doValueUpdate_","value_","showEditor_","div_","ReactDOM","getColourTertiary","getColour","setTimeout","dropdownDispose_","hide","dispose","getValue","fieldType","template","createContainer","display","fo","resizeObserver","entries","entry","contentRect","forceRerender","renderBlock","bindEvents_","getClickTarget_","FieldWithSlider","nv","round","SliderField","renderWidget","ServoWidget","ServiceFieldWidget","ServoAngleField","TwinWidget","TwinField","ValueProvider","initialValue","onFieldValueChange","mini","useTrendChartData","maxLength","trendData","setTrendData","addTrendValue","isNaN","timestamp","TrendChart","useGradient","unit","dot","vpw","vph","secondary","main","shape","symmetric","mint","maxt","minv","apply","maxv","opposite","sign","abs","rv","margin","axisWidth","axisColor","pointRadius","toffset","t","lastRow","path","row","ri","maxWidth","WatchValueWidget","lookupWatch","watchSourceId","valueNumber","step","ceil","log10","roundWithPrecision","paper","WatchValueField","reactFieldShadows","registerType","fieldTypes","JSON_TYPE","STRING_TYPE","BOOLEAN_TYPE","NUMBER_TYPE","PRIMITIVE_TYPES","BUILTIN_TYPES","CODE_STATEMENT_TYPE","VOLUME_GAIN","defaultVolume","AudioContext","webkitAudioContext","buffer","createBuffer","createBufferSource","connect","destination","start","volume","createGain","gain","setVolume","frequency","duration","tone","createOscillator","stop","currentTime","debug","state","AppTheme","isDark","themeDef","contrastThreshold","rawTheme","createMuiTheme","responsiveFontSizes","PaperBox","elevation","bgcolor","others","processErrors","workspaceJSONToVMProgram","resolveDsl","dslName","EmptyExpression","Error","blockIn","blockToExpressionInner","raw","res","blockToCommand","thenHandler","elseHandler","addCommands","exprErrors","ifThenElse","dslRes","nop","topEvent","topErrors","topMeta","compileEventToVM","expression","mkTitle","txt","elt","title","el","hydrate","createElementNS","parent"],"mappings":";;;;;;;;;;;AAA0D;AAC3B;AACe;AACP;AAChC;AACP;AACA;AACA;AACA;AACA;AACA,qCAAqC,6CAAgB;AACrD,sBAAsB,gDAAmB,CAAC,yDAAU,EAAE,oFAAQ;AAC9D;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,yDAAe,oEAAU;AACzB;AACA,CAAC,oBAAoB,E;;;;;;;;;ACrBR;;AAEb,6BAA6B,mBAAO,CAAC,IAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,IAA+C;;AAErF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,SAAe,Y;;;;;;;;;ACnBF;;AAEb,6BAA6B,mBAAO,CAAC,IAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,IAA+C;;AAErF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,SAAe,Y;;;;;;;;;ACnBF;;AAEb,6BAA6B,mBAAO,CAAC,IAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,IAA+C;;AAErF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,SAAe,Y;;;;;;;ACnBf;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAsB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC7C,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC,E;;;;;;;AC7BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAqB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC5C,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AC9BD,yHAAyB;;AAEzB;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAyB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChD,GAAG,MAAM,EAMN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,0BAA0B;AAC1C;AACA,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA,gBAAgB,0BAA0B;AAC1C;AACA,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,qBAAqB,GAAG,mBAAmB,MAAM,qBAAqB,MAAM,oBAAoB;AACjH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,uBAAuB;AACvC;AACA,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,iBAAiB,uBAAuB,GAAG,yBAAyB,MAAM,yBAAyB,MAAM,uBAAuB;AAChI;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,yBAAyB;AACzC;AACA,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iBAAiB,6BAA6B;AAC9C;AACA;AACA,gBAAgB,+BAA+B;AAC/C,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,yDAAyD,qBAAqB;AAC9E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,kBAAkB,6BAA6B;AAC/C;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;;AAEA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB,gBAAgB,wBAAwB;AACnF,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,wBAAwB,eAAe,uBAAuB;AAClF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,eAAe;AAChC;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,KAAK;AACL,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C,GAAG;AACH;AACA,iBAAiB,gCAAgC;AACjD;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C,GAAG;AACH;AACA,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,WAAW,6BAA6B;AACxC,YAAY,8BAA8B;AAC1C,YAAY,gCAAgC;AAC5C,WAAW,+BAA+B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,gDAAgD,6BAA6B;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,yBAAyB;AAC9C;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA,KAAK;AACL;AACA,qBAAqB,wBAAwB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,uCAAuC,iBAAiB,uCAAuC;AACnH,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,gCAAgC;AAChD;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,GAAG;AACH;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAA4C,iBAAiB,+CAA+C;AAChI,KAAK;AACL;AACA;AACA,gBAAgB,qCAAqC;AACrD;AACA,GAAG;AACH;AACA,cAAc,sCAAsC;AACpD,cAAc,sCAAsC;AACpD;AACA;AACA;AACA,cAAc,2CAA2C;AACzD,iBAAiB,8CAA8C;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,yBAAyB;AAC/H,0GAA0G,6BAA6B;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,wBAAwB;AACxC;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,yBAAyB,eAAe,4BAA4B,iBAAiB,+BAA+B,oBAAoB,yBAAyB,kBAAkB,sBAAsB;AAC7N,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB,gBAAgB,4BAA4B;AACxF,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB,eAAe,kBAAkB,eAAe,kBAAkB,eAAe,mBAAmB,gBAAgB,mBAAmB,gBAAgB,mBAAmB;AAChN,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,iBAAiB,gBAAgB,gBAAgB,eAAe,kBAAkB,iBAAiB,kBAAkB,iBAAiB,qBAAqB,oBAAoB,qBAAqB,oBAAoB,yBAAyB;AACrQ,KAAK;AACL;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,8BAA8B,iBAAiB,gCAAgC,mBAAmB,kCAAkC;AACxJ,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B,eAAe,6BAA6B,eAAe,6BAA6B,eAAe,iCAAiC,mBAAmB,gCAAgC,kBAAkB,8BAA8B,gBAAgB,iCAAiC,mBAAmB,gCAAgC;AAChY,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C,gBAAgB,2BAA2B;AAC3C,GAAG;AACH;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,4BAA4B;AAC5C,gBAAgB,4BAA4B;AAC5C,GAAG;AACH;AACA,iBAAiB,mCAAmC;AACpD;AACA;AACA,gBAAgB,8BAA8B;AAC9C,gBAAgB,8BAA8B;AAC9C,GAAG;AACH;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA,YAAY,gCAAgC;AAC5C,cAAc,kCAAkC;AAChD,iBAAiB,qCAAqC;AACtD,eAAe,mCAAmC;AAClD,cAAc,kCAAkC;AAChD,aAAa,6BAA6B;AAC1C,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,WAAW,2BAA2B;AACtC,cAAc,8BAA8B;AAC5C,YAAY,4BAA4B;AACxC,cAAc,8BAA8B;AAC5C,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,YAAY,0BAA0B;AACtC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,aAAa,2BAA2B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,YAAY,4BAA4B;AACxC,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C,aAAa,6BAA6B;AAC1C,gBAAgB,gCAAgC;AAChD,eAAe,+BAA+B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qGAAqG,wBAAwB;AAC7H;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,qBAAqB,oCAAoC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,kDAAkD,6BAA6B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2MAA2M;AAC3M;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,oCAAoC;AACnE;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,yCAAyC,oCAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,oHAAoH,UAAU;AAC9H;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oCAAoC;AAChF;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,6GAA6G,cAAc;AAC3H;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,uCAAuC;AACvC,gFAAgF;AAChF;AACA;AACA,sDAAsD;AACtD;AACA;;AAEA,uBAAuB,4BAA4B;AACnD;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;;AAEA;AACA,2CAA2C,4BAA4B;AACvE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB,4BAA4B;AACjD;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;;AAEA,YAAY,0BAA0B;AACtC;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,gCAAgC,qBAAqB;AACrD;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;AACtC;AACA,GAAG;AACH;AACA,iBAAiB,gCAAgC;AACjD;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB,6BAA6B;AAC7C;AACA,GAAG;AACH;AACA,iBAAiB,qCAAqC;AACtD;AACA;AACA;AACA,gBAAgB,kCAAkC;AAClD;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC,gBAAgB,wBAAwB;AACxC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC,gBAAgB,yBAAyB;AACzC,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,gCAAgC,iBAAiB,+BAA+B;AACpG,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA;AACA,GAAG;AACH;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB,2BAA2B,sBAAsB,yBAAyB,oBAAoB,sBAAsB,iBAAiB,qBAAqB,gBAAgB,uBAAuB;AACrN,KAAK;AACL;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,8CAA8C;AAC9C,+CAA+C;AAC/C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,yDAAyD,qBAAqB;AAC9E;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,kBAAkB,6BAA6B;AAC/C;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;;AAEA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qGAAqG,wBAAwB;;AAE7H;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,gBAAgB,0BAA0B;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AChgFD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAgB,EAAE,0BAAU,EAAE,0BAAU,EAAE,0BAAc,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC/E,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC,E;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,CAAC,E;;;;;;;ACrCD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAW,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAClC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC,E;;;;;;;AC7BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAQ,EAAE,0BAA4B,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC7D,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC,E;;;;;;;AC9BD,yHAAyB;;AAEzB;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAyB,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChD,GAAG,MAAM,EAMN;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,2EAA2E,cAAc;AACzF;AACA;;AAEA;;AAEA,eAAe,cAAc;AAC7B;AACA;;AAEA,uFAAuF;AACvF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,wBAAwB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,oIAAoI,4DAA4D,2DAA2D,KAAK;AAChQ;;AAEA;AACA;AACA;AACA;AACA,wIAAwI,uDAAuD,uDAAuD,uDAAuD,8DAA8D,8DAA8D,8DAA8D,6BAA6B,KAAK;AACzgB;;AAEA;AACA;AACA;AACA;AACA,gJAAgJ,sDAAsD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,gDAAgD,wDAAwD,wDAAwD,wDAAwD,kDAAkD,kDAAkD,kDAAkD,6BAA6B,KAAK;AACt0B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C,kBAAkB;AAC9D;AACA;;AAEA;AACA;;AAEA;AACA,2IAA2I,qBAAqB,qBAAqB,OAAO,OAAO,yBAAyB,OAAO,mBAAmB,KAAK;AAC3P;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA,sJAAsJ,sDAAsD,mBAAmB,oCAAoC,OAAO,OAAO,uBAAuB,OAAO,KAAK;AACpT;AACA,wCAAwC;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD,2DAA2D;AAC3D;;AAEA;AACA,qFAAqF;AACrF,wDAAwD;AACxD;;AAEA;AACA;AACA,4DAA4D;AAC5D,wEAAwE;AACxE;;AAEA;AACA;AACA;AACA,oFAAoF;AACpF,gGAAgG;AAChG;;AAEA;AACA;AACA;AACA,2EAA2E;AAC3E,iEAAiE;AACjE,6EAA6E;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0JAA0J,0BAA0B,mCAAmC,yCAAyC,EAAE,iCAAiC,wDAAwD,EAAE,wCAAwC,oFAAoF,EAAE,SAAS,uCAAuC,6BAA6B,kCAAkC,EAAE,KAAK;AACjlB;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,kDAAkD;AACrG;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,KAAK;;AAEL,oTAAoT,YAAY;AAChU;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kLAAkL;AAClL,wCAAwC,uBAAuB,eAAe,YAAY;AAC1F;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,uCAAuC;AAC7E;AACA,oFAAoF,YAAY;AAChG,KAAK,mMAAmM,yLAAyL,8KAA8K,iCAAiC,4CAA4C,uDAAuD,aAAa,sCAAsC,kEAAkE,0BAA0B,YAAY;;AAE90B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0JAA0J;AAC1J;AACA,iEAAiE;AACjE,mDAAmD,YAAY;AAC/D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;AACA,6BAA6B;AAC7B;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,sJAAsJ,gGAAgG,oBAAoB,OAAO,iLAAiL,qBAAqB,OAAO,oFAAoF,uBAAuB,UAAU,mDAAmD,uBAAuB,SAAS,OAAO,kBAAkB,KAAK;;AAEpsB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8EAA8E;AAC9E;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,cAAc;AACpD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sIAAsI,2CAA2C,cAAc,kBAAkB,KAAK;AACtN;AACA;AACA;;AAEA;AACA,wIAAwI,kDAAkD,6BAA6B,EAAE,yCAAyC,qCAAqC,cAAc,EAAE,sCAAsC,2FAA2F,OAAO,OAAO,qDAAqD,OAAO,KAAK;AACvgB;AACA;AACA;;AAEA;AACA,uIAAuI,qBAAqB,sBAAsB,uBAAuB,qBAAqB,mBAAmB,OAAO,8BAA8B,0BAA0B,sBAAsB,uBAAuB,mBAAmB,OAAO,uCAAuC,uCAAuC,yBAAyB,kBAAkB,WAAW,SAAS,qBAAqB,kCAAkC,wBAAwB,SAAS,iDAAiD,OAAO,qBAAqB,mBAAmB,OAAO,uCAAuC,qCAAqC,SAAS,OAAO,mBAAmB,KAAK;AACvzB;AACA;AACA;;AAEA;AACA,oJAAoJ,6BAA6B,0BAA0B,gDAAgD,cAAc,MAAM,uBAAuB,qBAAqB,OAAO,OAAO,mDAAmD,OAAO,8BAA8B,iCAAiC,KAAK;AACvc;AACA;AACA;;AAEA;AACA,0IAA0I,sDAAsD,qBAAqB,KAAK;AAC1N;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yIAAyI,kBAAkB,iEAAiE,cAAc,cAAc,OAAO,yDAAyD,KAAK;AAC7T;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;;AAE5D,4CAA4C,cAAc;AAC1D;AACA;;AAEA,mDAAmD,4BAA4B;AAC/E;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kJAAkJ,cAAc;AAChK;AACA;;AAEA;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA,sHAAsH;AACtH;AACA,qKAAqK,gDAAgD;AACrN,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uBAAuB,kBAAkB;AACzC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;AACvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gJAAgJ,sDAAsD,qBAAqB,KAAK;AAChO;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4QAA4Q,kDAAkD,oDAAoD,wCAAwC,KAAK;AAC/Z;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sJAAsJ,0DAA0D,8DAA8D,EAAE,KAAK;AACrR;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,qHAAqH;AACrH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iJAAiJ,gCAAgC,mCAAmC,OAAO,OAAO,iDAAiD,OAAO,KAAK;AAC/R;;AAEA;AACA;AACA;AACA;AACA,gKAAgK,4CAA4C,kFAAkF,oEAAoE,KAAK;AACvW;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;AC5/BD;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,CAAC,0BAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAChC,GAAG,MAAM,EAMN;AACH,CAAC;AACD;AACA,mBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+HAA+H;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;AClcY;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D,mDAAmD,mBAAO,CAAC,KAAuB;;AAElF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,eAAe,Y;;;;;;;;AC1FF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf;AACA;AACA;;AAEA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;ACjCa;;AAEb,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,sCAAsD;AACtD;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,6BAAmD;AACnD;AACA;AACA;AACA;AACA,CAAC,CAAC;;AAEF,kDAAkD,mBAAO,CAAC,KAAuB;;AAEjF,+CAA+C,mBAAO,CAAC,IAAoB;;AAE3E;AACA;AACA;AACA;AACA,C;;;;;;;;AC1Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,eAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,sCAAsC,mBAAO,CAAC,KAAS;;AAEvD,wCAAwC,mBAAO,CAAC,KAAY;;AAE5D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD;;;AAGA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG,uBAAuB;;;AAG1B;AACA,0FAA0F,wCAAwC;AAClI;AACA,KAAK;;AAEL;AACA,+BAA+B;;AAE/B,oCAAoC;;AAEpC;AACA;AACA;;AAEA,iDAAiD;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,SAAS;;;AAGZ;AACA;AACA;AACA;AACA,GAAG,8DAA8D;;;AAGjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,uCAAuC;;;AAG1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,oBAAoB;;;AAGvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,Y;;;;;;;;;;;AC7RA;AACf;AAC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ACA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;;AAEtB,mBAAmB,+BAA+B;AAClD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK,EAAE;;AAEP;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B,mCAAiC;AAC/D;AACA;AACA;AACA,E;;AC5MA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,qCAAmC;AACnC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,kCAAgC;AACpD;AACA,8CAA8C,2CAAyC;AACvF;AACA;AACA,oBAAoB,kCAAgC;AACpD,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oCAAoC,2CAAyC;AAC7E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO,EAAE;AACT;;AAEA;AACA,sCAAsC,2CAAyC;AAC/E;AACA;AACA;AACA,E;;ACjKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACwC;AACxC,uCAAqC;AACrC;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,0CAAwC;AAC5D;AACA,8CAA8C,6CAA2C;AACzF;AACA;AACA,oBAAoB,0CAAwC;AAC5D,GAAG;;AAEH;AACA;AACA,cAAc,SAAS;AACvB,YAAY;AACZ;AACA;AACA,oBAAoB,oCAA+B;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oCAAoC,6CAA2C;AAC/E;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA,GAAG;;AAEH;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO,EAAE;AACT;;AAEA;AACA,sCAAsC,6CAA2C;AACjF;AACA;AACA;AACA,E;;ACjKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACiD;AACxB;AACO;AACE;AAC3B;AACP;AACA;AACA;AACA,E;;AClBgK;AACN;;AAE1J;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA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","file":"d1d42e1a73d0552e322a576fa15d275bb42de1e2-f19fbbf06315d7227d50.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"\n}), 'Launch');\n\nexports.default = _default;","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blocks_compressed'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blocks_compressed'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly Blocks module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.Blocks = {};\n  return Blockly.Blocks;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.Blocks.colour = {};\n  Blockly.Constants = {};\n  Blockly.Constants.Colour = {};\n  Blockly.Constants.Colour.HUE = 20;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"colour_picker\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_colour\",\n      name: \"COLOUR\",\n      colour: \"#ff0000\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_PICKER_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_PICKER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"colour_random\",\n    message0: \"%{BKY_COLOUR_RANDOM_TITLE}\",\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RANDOM_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RANDOM_TOOLTIP}\"\n  }, {\n    type: \"colour_rgb\",\n    message0: \"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"RED\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"GREEN\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BLUE\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_RGB_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_RGB_TOOLTIP}\"\n  }, {\n    type: \"colour_blend\",\n    message0: \"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"COLOUR1\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"COLOUR2\",\n      check: \"Colour\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"RATIO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    output: \"Colour\",\n    helpUrl: \"%{BKY_COLOUR_BLEND_HELPURL}\",\n    style: \"colour_blocks\",\n    tooltip: \"%{BKY_COLOUR_BLEND_TOOLTIP}\"\n  }]);\n  Blockly.Blocks.lists = {};\n  Blockly.Constants.Lists = {};\n  Blockly.Constants.Lists.HUE = 260;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"lists_create_empty\",\n    message0: \"%{BKY_LISTS_CREATE_EMPTY_TITLE}\",\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_CREATE_EMPTY_HELPURL}\"\n  }, {\n    type: \"lists_repeat\",\n    message0: \"%{BKY_LISTS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"ITEM\"\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Array\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REPEAT_HELPURL}\"\n  }, {\n    type: \"lists_reverse\",\n    message0: \"%{BKY_LISTS_REVERSE_MESSAGE0}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Array\",\n    inputsInline: !0,\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_REVERSE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_REVERSE_HELPURL}\"\n  }, {\n    type: \"lists_isEmpty\",\n    message0: \"%{BKY_LISTS_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"lists_length\",\n    message0: \"%{BKY_LISTS_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"list_blocks\",\n    tooltip: \"%{BKY_LISTS_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_LISTS_LENGTH_HELPURL}\"\n  }]);\n  Blockly.Blocks.lists_create_with = {\n    init: function init() {\n      this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.itemCount_ = 3;\n      this.updateShape_();\n      this.setOutput(!0, \"Array\");\n      this.setMutator(new Blockly.Mutator([\"lists_create_with_item\"]));\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"lists_create_with_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"lists_create_with_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n  Blockly.Blocks.lists_create_with_container = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);\n      this.appendStatementInput(\"STACK\");\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_create_with_item = {\n    init: function init() {\n      this.setStyle(\"list_blocks\");\n      this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.lists_indexOf = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_INDEX_OF_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_INDEX_OF_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.setOutput(!0, \"Number\");\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);\n      this.appendValueInput(\"FIND\").appendField(new Blockly.FieldDropdown(a), \"END\");\n      this.setInputsInline(!0);\n      var b = this;\n      this.setTooltip(function () {\n        return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n      });\n    }\n  };\n  Blockly.Blocks.lists_getIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_GET_INDEX_GET, \"GET\"], [Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE, \"GET_REMOVE\"], [Blockly.Msg.LISTS_GET_INDEX_REMOVE, \"REMOVE\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        c = \"REMOVE\" == c;\n        this.getSourceBlock().updateStatement_(c);\n      });\n      this.appendValueInput(\"VALUE\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(a, \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"GET FROM_START\":\n          case \"GET FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;\n            break;\n\n          case \"GET FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;\n            break;\n\n          case \"GET LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;\n            break;\n\n          case \"GET RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;\n            break;\n\n          case \"GET_REMOVE FROM_START\":\n          case \"GET_REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;\n            break;\n\n          case \"GET_REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;\n            break;\n\n          case \"GET_REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;\n            break;\n\n          case \"GET_REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;\n            break;\n\n          case \"REMOVE FROM_START\":\n          case \"REMOVE FROM_END\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;\n            break;\n\n          case \"REMOVE FIRST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;\n            break;\n\n          case \"REMOVE LAST\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;\n            break;\n\n          case \"REMOVE RANDOM\":\n            e = Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + (\"FROM_START\" == d ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"statement\", !this.outputConnection);\n      var b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"statement\");\n      this.updateStatement_(b);\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateStatement_: function updateStatement_(a) {\n      a != !this.outputConnection && (this.unplug(!0, !0), a ? (this.setOutput(!1), this.setPreviousStatement(!0), this.setNextStatement(!0)) : (this.setPreviousStatement(!1), this.setNextStatement(!1), this.setOutput(!0)));\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n      Blockly.Msg.LISTS_GET_INDEX_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_setIndex = {\n    init: function init() {\n      var a = [[Blockly.Msg.LISTS_SET_INDEX_SET, \"SET\"], [Blockly.Msg.LISTS_SET_INDEX_INSERT, \"INSERT\"]];\n      this.WHERE_OPTIONS = [[Blockly.Msg.LISTS_GET_INDEX_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_INDEX_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_INDEX_FIRST, \"FIRST\"], [Blockly.Msg.LISTS_GET_INDEX_LAST, \"LAST\"], [Blockly.Msg.LISTS_GET_INDEX_RANDOM, \"RANDOM\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);\n      this.appendDummyInput().appendField(new Blockly.FieldDropdown(a), \"MODE\").appendField(\"\", \"SPACE\");\n      this.appendDummyInput(\"AT\");\n      this.appendValueInput(\"TO\").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);\n      this.updateAt_(!0);\n      var b = this;\n      this.setTooltip(function () {\n        var c = b.getFieldValue(\"MODE\"),\n            d = b.getFieldValue(\"WHERE\"),\n            e = \"\";\n\n        switch (c + \" \" + d) {\n          case \"SET FROM_START\":\n          case \"SET FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;\n            break;\n\n          case \"SET FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;\n            break;\n\n          case \"SET LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;\n            break;\n\n          case \"SET RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;\n            break;\n\n          case \"INSERT FROM_START\":\n          case \"INSERT FROM_END\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;\n            break;\n\n          case \"INSERT FIRST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;\n            break;\n\n          case \"INSERT LAST\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;\n            break;\n\n          case \"INSERT RANDOM\":\n            e = Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM;\n        }\n\n        if (\"FROM_START\" == d || \"FROM_END\" == d) e += \"  \" + Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace(\"%1\", b.workspace.options.oneBasedIndex ? \"#1\" : \"#0\");\n        return e;\n      });\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\");\n      this.removeInput(\"ORDINAL\", !0);\n      a ? (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\");\n      var b = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function (c) {\n        var d = \"FROM_START\" == c || \"FROM_END\" == c;\n\n        if (d != a) {\n          var e = this.getSourceBlock();\n          e.updateAt_(d);\n          e.setFieldValue(c, \"WHERE\");\n          return null;\n        }\n      });\n      this.moveInputBefore(\"AT\", \"TO\");\n      this.getInput(\"ORDINAL\") && this.moveInputBefore(\"ORDINAL\", \"TO\");\n      this.getInput(\"AT\").appendField(b, \"WHERE\");\n    }\n  };\n  Blockly.Blocks.lists_getSublist = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START, \"FROM_START\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END, \"FROM_END\"], [Blockly.Msg.LISTS_GET_SUBLIST_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"LIST\").setCheck(\"Array\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n      Blockly.Msg.LISTS_GET_SUBLIST_TAIL && this.moveInputBefore(\"TAIL\", null);\n    }\n  };\n  Blockly.Blocks.lists_sort = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.LISTS_SORT_TITLE,\n        args0: [{\n          type: \"field_dropdown\",\n          name: \"TYPE\",\n          options: [[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC, \"NUMERIC\"], [Blockly.Msg.LISTS_SORT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE, \"IGNORE_CASE\"]]\n        }, {\n          type: \"field_dropdown\",\n          name: \"DIRECTION\",\n          options: [[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING, \"1\"], [Blockly.Msg.LISTS_SORT_ORDER_DESCENDING, \"-1\"]]\n        }, {\n          type: \"input_value\",\n          name: \"LIST\",\n          check: \"Array\"\n        }],\n        output: \"Array\",\n        style: \"list_blocks\",\n        tooltip: Blockly.Msg.LISTS_SORT_TOOLTIP,\n        helpUrl: Blockly.Msg.LISTS_SORT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.lists_split = {\n    init: function init() {\n      var a = this,\n          b = new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT, \"SPLIT\"], [Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST, \"JOIN\"]], function (c) {\n        a.updateType_(c);\n      });\n      this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);\n      this.setStyle(\"list_blocks\");\n      this.appendValueInput(\"INPUT\").setCheck(\"String\").appendField(b, \"MODE\");\n      this.appendValueInput(\"DELIM\").setCheck(\"String\").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"Array\");\n      this.setTooltip(function () {\n        var c = a.getFieldValue(\"MODE\");\n        if (\"SPLIT\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;\n        if (\"JOIN\" == c) return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;\n        throw Error(\"Unknown mode: \" + c);\n      });\n    },\n    updateType_: function updateType_(a) {\n      if (this.getFieldValue(\"MODE\") != a) {\n        var b = this.getInput(\"INPUT\").connection;\n        b.setShadowDom(null);\n        var c = b.targetBlock();\n        c && (b.disconnect(), c.isShadow() ? c.dispose() : this.bumpNeighbours());\n      }\n\n      \"SPLIT\" == a ? (this.outputConnection.setCheck(\"Array\"), this.getInput(\"INPUT\").setCheck(\"String\")) : (this.outputConnection.setCheck(\"String\"), this.getInput(\"INPUT\").setCheck(\"Array\"));\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"mode\", this.getFieldValue(\"MODE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"mode\"));\n    }\n  };\n  Blockly.Blocks.logic = {};\n  Blockly.Constants.Logic = {};\n  Blockly.Constants.Logic.HUE = 210;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"logic_boolean\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"BOOL\",\n      options: [[\"%{BKY_LOGIC_BOOLEAN_TRUE}\", \"TRUE\"], [\"%{BKY_LOGIC_BOOLEAN_FALSE}\", \"FALSE\"]]\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_BOOLEAN_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_BOOLEAN_HELPURL}\"\n  }, {\n    type: \"controls_if\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    mutator: \"controls_if_mutator\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"controls_ifelse\",\n    message0: \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF0\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO0\"\n    }],\n    message2: \"%{BKY_CONTROLS_IF_MSG_ELSE} %1\",\n    args2: [{\n      type: \"input_statement\",\n      name: \"ELSE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKYCONTROLS_IF_TOOLTIP_2}\",\n    helpUrl: \"%{BKY_CONTROLS_IF_HELPURL}\",\n    extensions: [\"controls_if_tooltip\"]\n  }, {\n    type: \"logic_compare\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"=\", \"EQ\"], [\"\\u2260\", \"NEQ\"], [\"\\u200F<\", \"LT\"], [\"\\u200F\\u2264\", \"LTE\"], [\"\\u200F>\", \"GT\"], [\"\\u200F\\u2265\", \"GTE\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_COMPARE_HELPURL}\",\n    extensions: [\"logic_compare\", \"logic_op_tooltip\"]\n  }, {\n    type: \"logic_operation\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Boolean\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_LOGIC_OPERATION_AND}\", \"AND\"], [\"%{BKY_LOGIC_OPERATION_OR}\", \"OR\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Boolean\"\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    helpUrl: \"%{BKY_LOGIC_OPERATION_HELPURL}\",\n    extensions: [\"logic_op_tooltip\"]\n  }, {\n    type: \"logic_negate\",\n    message0: \"%{BKY_LOGIC_NEGATE_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    output: \"Boolean\",\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NEGATE_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NEGATE_HELPURL}\"\n  }, {\n    type: \"logic_null\",\n    message0: \"%{BKY_LOGIC_NULL}\",\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_NULL_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_NULL_HELPURL}\"\n  }, {\n    type: \"logic_ternary\",\n    message0: \"%{BKY_LOGIC_TERNARY_CONDITION} %1\",\n    args0: [{\n      type: \"input_value\",\n      name: \"IF\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_LOGIC_TERNARY_IF_TRUE} %1\",\n    args1: [{\n      type: \"input_value\",\n      name: \"THEN\"\n    }],\n    message2: \"%{BKY_LOGIC_TERNARY_IF_FALSE} %1\",\n    args2: [{\n      type: \"input_value\",\n      name: \"ELSE\"\n    }],\n    output: null,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_LOGIC_TERNARY_TOOLTIP}\",\n    helpUrl: \"%{BKY_LOGIC_TERNARY_HELPURL}\",\n    extensions: [\"logic_ternary\"]\n  }]);\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_if_if\",\n    message0: \"%{BKY_CONTROLS_IF_IF_TITLE_IF}\",\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_IF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_elseif\",\n    message0: \"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}\",\n    previousStatement: null,\n    nextStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}\"\n  }, {\n    type: \"controls_if_else\",\n    message0: \"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}\",\n    previousStatement: null,\n    enableContextMenu: !1,\n    style: \"logic_blocks\",\n    tooltip: \"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}\"\n  }]);\n  Blockly.Constants.Logic.TOOLTIPS_BY_OP = {\n    EQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}\",\n    NEQ: \"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}\",\n    LT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}\",\n    LTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}\",\n    GT: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}\",\n    GTE: \"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}\",\n    AND: \"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}\",\n    OR: \"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}\"\n  };\n  Blockly.Extensions.register(\"logic_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Logic.TOOLTIPS_BY_OP));\n  Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN = {\n    elseifCount_: 0,\n    elseCount_: 0,\n    suppressPrefixSuffix: !0,\n    mutationToDom: function mutationToDom() {\n      if (!this.elseifCount_ && !this.elseCount_) return null;\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      this.elseifCount_ && a.setAttribute(\"elseif\", this.elseifCount_);\n      this.elseCount_ && a.setAttribute(\"else\", 1);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.elseifCount_ = parseInt(a.getAttribute(\"elseif\"), 10) || 0;\n      this.elseCount_ = parseInt(a.getAttribute(\"else\"), 10) || 0;\n      this.rebuildShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"controls_if_if\");\n      b.initSvg();\n\n      for (var c = b.nextConnection, d = 1; d <= this.elseifCount_; d++) {\n        var e = a.newBlock(\"controls_if_elseif\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      this.elseCount_ && (a = a.newBlock(\"controls_if_else\"), a.initSvg(), c.connect(a.previousConnection));\n      return b;\n    },\n    compose: function compose(a) {\n      a = a.nextConnection.targetBlock();\n      this.elseCount_ = this.elseifCount_ = 0;\n\n      for (var b = [null], c = [null], d = null; a && !a.isInsertionMarker();) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            this.elseifCount_++;\n            b.push(a.valueConnection_);\n            c.push(a.statementConnection_);\n            break;\n\n          case \"controls_if_else\":\n            this.elseCount_++;\n            d = a.statementConnection_;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(b, c, d);\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.nextConnection.targetBlock();\n\n      for (var b = 1; a;) {\n        switch (a.type) {\n          case \"controls_if_elseif\":\n            var c = this.getInput(\"IF\" + b),\n                d = this.getInput(\"DO\" + b);\n            a.valueConnection_ = c && c.connection.targetConnection;\n            a.statementConnection_ = d && d.connection.targetConnection;\n            b++;\n            break;\n\n          case \"controls_if_else\":\n            d = this.getInput(\"ELSE\");\n            a.statementConnection_ = d && d.connection.targetConnection;\n            break;\n\n          default:\n            throw TypeError(\"Unknown block type: \" + a.type);\n        }\n\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    rebuildShape_: function rebuildShape_() {\n      var a = [null],\n          b = [null],\n          c = null;\n      this.getInput(\"ELSE\") && (c = this.getInput(\"ELSE\").connection.targetConnection);\n\n      for (var d = 1; this.getInput(\"IF\" + d);) {\n        var e = this.getInput(\"IF\" + d),\n            f = this.getInput(\"DO\" + d);\n        a.push(e.connection.targetConnection);\n        b.push(f.connection.targetConnection);\n        d++;\n      }\n\n      this.updateShape_();\n      this.reconnectChildBlocks_(a, b, c);\n    },\n    updateShape_: function updateShape_() {\n      this.getInput(\"ELSE\") && this.removeInput(\"ELSE\");\n\n      for (var a = 1; this.getInput(\"IF\" + a);) {\n        this.removeInput(\"IF\" + a), this.removeInput(\"DO\" + a), a++;\n      }\n\n      for (a = 1; a <= this.elseifCount_; a++) {\n        this.appendValueInput(\"IF\" + a).setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF), this.appendStatementInput(\"DO\" + a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);\n      }\n\n      this.elseCount_ && this.appendStatementInput(\"ELSE\").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE);\n    },\n    reconnectChildBlocks_: function reconnectChildBlocks_(a, b, c) {\n      for (var d = 1; d <= this.elseifCount_; d++) {\n        Blockly.Mutator.reconnect(a[d], this, \"IF\" + d), Blockly.Mutator.reconnect(b[d], this, \"DO\" + d);\n      }\n\n      Blockly.Mutator.reconnect(c, this, \"ELSE\");\n    }\n  };\n  Blockly.Extensions.registerMutator(\"controls_if_mutator\", Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN, null, [\"controls_if_elseif\", \"controls_if_else\"]);\n\n  Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION = function () {\n    this.setTooltip(function () {\n      if (this.elseifCount_ || this.elseCount_) {\n        if (!this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;\n        if (this.elseifCount_ && !this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;\n        if (this.elseifCount_ && this.elseCount_) return Blockly.Msg.CONTROLS_IF_TOOLTIP_4;\n      } else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;\n\n      return \"\";\n    }.bind(this));\n  };\n\n  Blockly.Extensions.register(\"controls_if_tooltip\", Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN = {\n    onchange: function onchange(a) {\n      this.prevBlocks_ || (this.prevBlocks_ = [null, null]);\n      var b = this.getInputTargetBlock(\"A\"),\n          c = this.getInputTargetBlock(\"B\");\n      b && c && !this.workspace.connectionChecker.doTypeChecks(b.outputConnection, c.outputConnection) && (Blockly.Events.setGroup(a.group), a = this.prevBlocks_[0], a !== b && (b.unplug(), !a || a.isDisposed() || a.isShadow() || this.getInput(\"A\").connection.connect(a.outputConnection)), b = this.prevBlocks_[1], b !== c && (c.unplug(), !b || b.isDisposed() || b.isShadow() || this.getInput(\"B\").connection.connect(b.outputConnection)), this.bumpNeighbours(), Blockly.Events.setGroup(!1));\n      this.prevBlocks_[0] = this.getInputTargetBlock(\"A\");\n      this.prevBlocks_[1] = this.getInputTargetBlock(\"B\");\n    }\n  };\n\n  Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN);\n  };\n\n  Blockly.Extensions.register(\"logic_compare\", Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION);\n  Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN = {\n    prevParentConnection_: null,\n    onchange: function onchange(a) {\n      var b = this.getInputTargetBlock(\"THEN\"),\n          c = this.getInputTargetBlock(\"ELSE\"),\n          d = this.outputConnection.targetConnection;\n      if ((b || c) && d) for (var e = 0; 2 > e; e++) {\n        var f = 1 == e ? b : c;\n        f && !f.workspace.connectionChecker.doTypeChecks(f.outputConnection, d) && (Blockly.Events.setGroup(a.group), d === this.prevParentConnection_ ? (this.unplug(), d.getSourceBlock().bumpNeighbours()) : (f.unplug(), f.bumpNeighbours()), Blockly.Events.setGroup(!1));\n      }\n      this.prevParentConnection_ = d;\n    }\n  };\n  Blockly.Extensions.registerMixin(\"logic_ternary\", Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);\n  Blockly.Blocks.loops = {};\n  Blockly.Constants.Loops = {};\n  Blockly.Constants.Loops.HUE = 120;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"controls_repeat_ext\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"TIMES\",\n      check: \"Number\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_repeat\",\n    message0: \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    args0: [{\n      type: \"field_number\",\n      name: \"TIMES\",\n      value: 10,\n      min: 0,\n      precision: 1\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    tooltip: \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  }, {\n    type: \"controls_whileUntil\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"MODE\",\n      options: [[\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}\", \"WHILE\"], [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}\", \"UNTIL\"]]\n    }, {\n      type: \"input_value\",\n      name: \"BOOL\",\n      check: \"Boolean\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}\",\n    extensions: [\"controls_whileUntil_tooltip\"]\n  }, {\n    type: \"controls_for\",\n    message0: \"%{BKY_CONTROLS_FOR_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }, {\n      type: \"input_value\",\n      name: \"BY\",\n      check: \"Number\",\n      align: \"RIGHT\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    inputsInline: !0,\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOR_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_for_tooltip\"]\n  }, {\n    type: \"controls_forEach\",\n    message0: \"%{BKY_CONTROLS_FOREACH_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: null\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    message1: \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    args1: [{\n      type: \"input_statement\",\n      name: \"DO\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FOREACH_HELPURL}\",\n    extensions: [\"contextMenu_newGetVariableBlock\", \"controls_forEach_tooltip\"]\n  }, {\n    type: \"controls_flow_statements\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"FLOW\",\n      options: [[\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}\", \"BREAK\"], [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}\", \"CONTINUE\"]]\n    }],\n    previousStatement: null,\n    style: \"loop_blocks\",\n    helpUrl: \"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}\",\n    extensions: [\"controls_flow_tooltip\", \"controls_flow_in_loop_check\"]\n  }]);\n  Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS = {\n    WHILE: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}\",\n    UNTIL: \"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}\"\n  };\n  Blockly.Extensions.register(\"controls_whileUntil_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"MODE\", Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS));\n  Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS = {\n    BREAK: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}\",\n    CONTINUE: \"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}\"\n  };\n  Blockly.Extensions.register(\"controls_flow_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"FLOW\", Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));\n  Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getField(\"VAR\").getVariable(),\n            c = b.name;\n\n        if (!this.isCollapsed() && null != c) {\n          var d = {\n            enabled: !0\n          };\n          d.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", c);\n          b = Blockly.Variables.generateVariableFieldDom(b);\n          c = Blockly.utils.xml.createElement(\"block\");\n          c.setAttribute(\"type\", \"variables_get\");\n          c.appendChild(b);\n          d.callback = Blockly.ContextMenu.callbackFactory(this, c);\n          a.push(d);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"contextMenu_newGetVariableBlock\", Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);\n  Blockly.Extensions.register(\"controls_for_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOR_TOOLTIP}\", \"VAR\"));\n  Blockly.Extensions.register(\"controls_forEach_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_CONTROLS_FOREACH_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n    LOOP_TYPES: [\"controls_repeat\", \"controls_repeat_ext\", \"controls_forEach\", \"controls_for\", \"controls_whileUntil\"],\n    suppressPrefixSuffix: !0,\n    getSurroundLoop: function getSurroundLoop(a) {\n      do {\n        if (-1 != Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(a.type)) return a;\n        a = a.getSurroundParent();\n      } while (a);\n\n      return null;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging() && a.type == Blockly.Events.BLOCK_MOVE) {\n        var b = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);\n        this.setWarningText(b ? null : Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING);\n\n        if (!this.isInFlyout) {\n          var c = Blockly.Events.getGroup();\n          Blockly.Events.setGroup(a.group);\n          this.setEnabled(b);\n          Blockly.Events.setGroup(c);\n        }\n      }\n    }\n  };\n  Blockly.Extensions.registerMixin(\"controls_flow_in_loop_check\", Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);\n  Blockly.Blocks.math = {};\n  Blockly.Constants.Math = {};\n  Blockly.Constants.Math.HUE = 230;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"math_number\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_number\",\n      name: \"NUM\",\n      value: 0\n    }],\n    output: \"Number\",\n    helpUrl: \"%{BKY_MATH_NUMBER_HELPURL}\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_NUMBER_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"math_arithmetic\",\n    message0: \"%1 %2 %3\",\n    args0: [{\n      type: \"input_value\",\n      name: \"A\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"], [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"], [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"], [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"], [\"%{BKY_MATH_POWER_SYMBOL}\", \"POWER\"]]\n    }, {\n      type: \"input_value\",\n      name: \"B\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_single\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_SINGLE_OP_ROOT}\", \"ROOT\"], [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", \"ABS\"], [\"-\", \"NEG\"], [\"ln\", \"LN\"], [\"log10\", \"LOG10\"], [\"e^\", \"EXP\"], [\"10^\", \"POW10\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_SINGLE_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_trig\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_TRIG_SIN}\", \"SIN\"], [\"%{BKY_MATH_TRIG_COS}\", \"COS\"], [\"%{BKY_MATH_TRIG_TAN}\", \"TAN\"], [\"%{BKY_MATH_TRIG_ASIN}\", \"ASIN\"], [\"%{BKY_MATH_TRIG_ACOS}\", \"ACOS\"], [\"%{BKY_MATH_TRIG_ATAN}\", \"ATAN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_TRIG_HELPURL}\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_constant\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"CONSTANT\",\n      options: [[\"\\u03C0\", \"PI\"], [\"e\", \"E\"], [\"\\u03C6\", \"GOLDEN_RATIO\"], [\"sqrt(2)\", \"SQRT2\"], [\"sqrt(\\xBD)\", \"SQRT1_2\"], [\"\\u221E\", \"INFINITY\"]]\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTANT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTANT_HELPURL}\"\n  }, {\n    type: \"math_number_property\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"input_value\",\n      name: \"NUMBER_TO_CHECK\",\n      check: \"Number\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"PROPERTY\",\n      options: [[\"%{BKY_MATH_IS_EVEN}\", \"EVEN\"], [\"%{BKY_MATH_IS_ODD}\", \"ODD\"], [\"%{BKY_MATH_IS_PRIME}\", \"PRIME\"], [\"%{BKY_MATH_IS_WHOLE}\", \"WHOLE\"], [\"%{BKY_MATH_IS_POSITIVE}\", \"POSITIVE\"], [\"%{BKY_MATH_IS_NEGATIVE}\", \"NEGATIVE\"], [\"%{BKY_MATH_IS_DIVISIBLE_BY}\", \"DIVISIBLE_BY\"]]\n    }],\n    inputsInline: !0,\n    output: \"Boolean\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_IS_TOOLTIP}\",\n    mutator: \"math_is_divisibleby_mutator\"\n  }, {\n    type: \"math_change\",\n    message0: \"%{BKY_MATH_CHANGE_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_MATH_CHANGE_TITLE_ITEM}\"\n    }, {\n      type: \"input_value\",\n      name: \"DELTA\",\n      check: \"Number\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_MATH_CHANGE_HELPURL}\",\n    extensions: [\"math_change_tooltip\"]\n  }, {\n    type: \"math_round\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ROUND_OPERATOR_ROUND}\", \"ROUND\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}\", \"ROUNDUP\"], [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}\", \"ROUNDDOWN\"]]\n    }, {\n      type: \"input_value\",\n      name: \"NUM\",\n      check: \"Number\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ROUND_HELPURL}\",\n    tooltip: \"%{BKY_MATH_ROUND_TOOLTIP}\"\n  }, {\n    type: \"math_on_list\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_dropdown\",\n      name: \"OP\",\n      options: [[\"%{BKY_MATH_ONLIST_OPERATOR_SUM}\", \"SUM\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MIN}\", \"MIN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MAX}\", \"MAX\"], [\"%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}\", \"AVERAGE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}\", \"MEDIAN\"], [\"%{BKY_MATH_ONLIST_OPERATOR_MODE}\", \"MODE\"], [\"%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}\", \"STD_DEV\"], [\"%{BKY_MATH_ONLIST_OPERATOR_RANDOM}\", \"RANDOM\"]]\n    }, {\n      type: \"input_value\",\n      name: \"LIST\",\n      check: \"Array\"\n    }],\n    output: \"Number\",\n    style: \"math_blocks\",\n    helpUrl: \"%{BKY_MATH_ONLIST_HELPURL}\",\n    mutator: \"math_modes_of_list_mutator\",\n    extensions: [\"math_op_tooltip\"]\n  }, {\n    type: \"math_modulo\",\n    message0: \"%{BKY_MATH_MODULO_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"DIVIDEND\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"DIVISOR\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_MODULO_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_MODULO_HELPURL}\"\n  }, {\n    type: \"math_constrain\",\n    message0: \"%{BKY_MATH_CONSTRAIN_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"LOW\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"HIGH\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_CONSTRAIN_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_CONSTRAIN_HELPURL}\"\n  }, {\n    type: \"math_random_int\",\n    message0: \"%{BKY_MATH_RANDOM_INT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"FROM\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"TO\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_INT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_INT_HELPURL}\"\n  }, {\n    type: \"math_random_float\",\n    message0: \"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}\",\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_RANDOM_FLOAT_HELPURL}\"\n  }, {\n    type: \"math_atan2\",\n    message0: \"%{BKY_MATH_ATAN2_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"X\",\n      check: \"Number\"\n    }, {\n      type: \"input_value\",\n      name: \"Y\",\n      check: \"Number\"\n    }],\n    inputsInline: !0,\n    output: \"Number\",\n    style: \"math_blocks\",\n    tooltip: \"%{BKY_MATH_ATAN2_TOOLTIP}\",\n    helpUrl: \"%{BKY_MATH_ATAN2_HELPURL}\"\n  }]);\n  Blockly.Constants.Math.TOOLTIPS_BY_OP = {\n    ADD: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}\",\n    MINUS: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}\",\n    MULTIPLY: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}\",\n    DIVIDE: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}\",\n    POWER: \"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}\",\n    ROOT: \"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}\",\n    ABS: \"%{BKY_MATH_SINGLE_TOOLTIP_ABS}\",\n    NEG: \"%{BKY_MATH_SINGLE_TOOLTIP_NEG}\",\n    LN: \"%{BKY_MATH_SINGLE_TOOLTIP_LN}\",\n    LOG10: \"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}\",\n    EXP: \"%{BKY_MATH_SINGLE_TOOLTIP_EXP}\",\n    POW10: \"%{BKY_MATH_SINGLE_TOOLTIP_POW10}\",\n    SIN: \"%{BKY_MATH_TRIG_TOOLTIP_SIN}\",\n    COS: \"%{BKY_MATH_TRIG_TOOLTIP_COS}\",\n    TAN: \"%{BKY_MATH_TRIG_TOOLTIP_TAN}\",\n    ASIN: \"%{BKY_MATH_TRIG_TOOLTIP_ASIN}\",\n    ACOS: \"%{BKY_MATH_TRIG_TOOLTIP_ACOS}\",\n    ATAN: \"%{BKY_MATH_TRIG_TOOLTIP_ATAN}\",\n    SUM: \"%{BKY_MATH_ONLIST_TOOLTIP_SUM}\",\n    MIN: \"%{BKY_MATH_ONLIST_TOOLTIP_MIN}\",\n    MAX: \"%{BKY_MATH_ONLIST_TOOLTIP_MAX}\",\n    AVERAGE: \"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}\",\n    MEDIAN: \"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}\",\n    MODE: \"%{BKY_MATH_ONLIST_TOOLTIP_MODE}\",\n    STD_DEV: \"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}\",\n    RANDOM: \"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}\"\n  };\n  Blockly.Extensions.register(\"math_op_tooltip\", Blockly.Extensions.buildTooltipForDropdown(\"OP\", Blockly.Constants.Math.TOOLTIPS_BY_OP));\n  Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = \"DIVISIBLE_BY\" == this.getFieldValue(\"PROPERTY\");\n      a.setAttribute(\"divisor_input\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"true\" == a.getAttribute(\"divisor_input\");\n      this.updateShape_(a);\n    },\n    updateShape_: function updateShape_(a) {\n      var b = this.getInput(\"DIVISOR\");\n      a ? b || this.appendValueInput(\"DIVISOR\").setCheck(\"Number\") : b && this.removeInput(\"DIVISOR\");\n    }\n  };\n\n  Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION = function () {\n    this.getField(\"PROPERTY\").setValidator(function (a) {\n      a = \"DIVISIBLE_BY\" == a;\n      this.getSourceBlock().updateShape_(a);\n    });\n  };\n\n  Blockly.Extensions.registerMutator(\"math_is_divisibleby_mutator\", Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN, Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);\n  Blockly.Extensions.register(\"math_change_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_MATH_CHANGE_TOOLTIP}\", \"VAR\"));\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN = {\n    updateType_: function updateType_(a) {\n      \"MODE\" == a ? this.outputConnection.setCheck(\"Array\") : this.outputConnection.setCheck(\"Number\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"op\", this.getFieldValue(\"OP\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"op\"));\n    }\n  };\n\n  Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION = function () {\n    this.getField(\"OP\").setValidator(function (a) {\n      this.updateType_(a);\n    }.bind(this));\n  };\n\n  Blockly.Extensions.registerMutator(\"math_modes_of_list_mutator\", Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN, Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);\n  Blockly.Blocks.procedures = {};\n  Blockly.Blocks.procedures_defnoreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: function setStatements_(a) {\n      this.hasStatements_ !== a && (a ? (this.appendStatementInput(\"STACK\").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO), this.getInput(\"RETURN\") && this.moveInputBefore(\"STACK\", \"RETURN\")) : this.removeInput(\"STACK\", !0), this.hasStatements_ = a);\n    },\n    updateParams_: function updateParams_() {\n      var a = \"\";\n      this.arguments_.length && (a = Blockly.Msg.PROCEDURES_BEFORE_PARAMS + \" \" + this.arguments_.join(\", \"));\n      Blockly.Events.disable();\n\n      try {\n        this.setFieldValue(a, \"PARAMS\");\n      } finally {\n        Blockly.Events.enable();\n      }\n    },\n    mutationToDom: function mutationToDom(a) {\n      var b = Blockly.utils.xml.createElement(\"mutation\");\n      a && b.setAttribute(\"name\", this.getFieldValue(\"NAME\"));\n\n      for (var c = 0; c < this.argumentVarModels_.length; c++) {\n        var d = Blockly.utils.xml.createElement(\"arg\"),\n            e = this.argumentVarModels_[c];\n        d.setAttribute(\"name\", e.name);\n        d.setAttribute(\"varid\", e.getId());\n        a && this.paramIds_ && d.setAttribute(\"paramId\", this.paramIds_[c]);\n        b.appendChild(d);\n      }\n\n      this.hasStatements_ || b.setAttribute(\"statements\", \"false\");\n      return b;\n    },\n    domToMutation: function domToMutation(a) {\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = 0, c; c = a.childNodes[b]; b++) {\n        if (\"arg\" == c.nodeName.toLowerCase()) {\n          var d = c.getAttribute(\"name\");\n          c = c.getAttribute(\"varid\") || c.getAttribute(\"varId\");\n          this.arguments_.push(d);\n          c = Blockly.Variables.getOrCreateVariablePackage(this.workspace, c, d, \"\");\n          null != c ? this.argumentVarModels_.push(c) : console.log(\"Failed to create a variable with name \" + d + \", ignoring.\");\n        }\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      this.setStatements_(\"false\" !== a.getAttribute(\"statements\"));\n    },\n    decompose: function decompose(a) {\n      var b = Blockly.utils.xml.createElement(\"block\");\n      b.setAttribute(\"type\", \"procedures_mutatorcontainer\");\n      var c = Blockly.utils.xml.createElement(\"statement\");\n      c.setAttribute(\"name\", \"STACK\");\n      b.appendChild(c);\n\n      for (var d = 0; d < this.arguments_.length; d++) {\n        var e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", \"procedures_mutatorarg\");\n        var f = Blockly.utils.xml.createElement(\"field\");\n        f.setAttribute(\"name\", \"NAME\");\n        var g = Blockly.utils.xml.createTextNode(this.arguments_[d]);\n        f.appendChild(g);\n        e.appendChild(f);\n        f = Blockly.utils.xml.createElement(\"next\");\n        e.appendChild(f);\n        c.appendChild(e);\n        c = f;\n      }\n\n      a = Blockly.Xml.domToBlock(b, a);\n      \"procedures_defreturn\" == this.type ? a.setFieldValue(this.hasStatements_, \"STATEMENTS\") : a.removeInput(\"STATEMENT_INPUT\");\n      Blockly.Procedures.mutateCallers(this);\n      return a;\n    },\n    compose: function compose(a) {\n      this.arguments_ = [];\n      this.paramIds_ = [];\n      this.argumentVarModels_ = [];\n\n      for (var b = a.getInputTargetBlock(\"STACK\"); b && !b.isInsertionMarker();) {\n        var c = b.getFieldValue(\"NAME\");\n        this.arguments_.push(c);\n        c = this.workspace.getVariable(c, \"\");\n        this.argumentVarModels_.push(c);\n        this.paramIds_.push(b.id);\n        b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      this.updateParams_();\n      Blockly.Procedures.mutateCallers(this);\n      a = a.getFieldValue(\"STATEMENTS\");\n      if (null !== a && (a = \"TRUE\" == a, this.hasStatements_ != a)) if (a) this.setStatements_(!0), Blockly.Mutator.reconnect(this.statementConnection_, this, \"STACK\"), this.statementConnection_ = null;else {\n        a = this.getInput(\"STACK\").connection;\n        if (this.statementConnection_ = a.targetConnection) a = a.targetBlock(), a.unplug(), a.bumpNeighbours();\n        this.setStatements_(!1);\n      }\n    },\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !1];\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    renameVarById: function renameVarById(a, b) {\n      var c = this.workspace.getVariableById(a);\n\n      if (\"\" == c.type) {\n        c = c.name;\n        b = this.workspace.getVariableById(b);\n\n        for (var d = !1, e = 0; e < this.argumentVarModels_.length; e++) {\n          this.argumentVarModels_[e].getId() == a && (this.arguments_[e] = b.name, this.argumentVarModels_[e] = b, d = !0);\n        }\n\n        d && (this.displayRenamedVar_(c, b.name), Blockly.Procedures.mutateCallers(this));\n      }\n    },\n    updateVarName: function updateVarName(a) {\n      for (var b = a.name, c = !1, d = 0; d < this.argumentVarModels_.length; d++) {\n        if (this.argumentVarModels_[d].getId() == a.getId()) {\n          var e = this.arguments_[d];\n          this.arguments_[d] = b;\n          c = !0;\n        }\n      }\n\n      c && (this.displayRenamedVar_(e, b), Blockly.Procedures.mutateCallers(this));\n    },\n    displayRenamedVar_: function displayRenamedVar_(a, b) {\n      this.updateParams_();\n      if (this.mutator && this.mutator.isVisible()) for (var c = this.mutator.workspace_.getAllBlocks(!1), d = 0, e; e = c[d]; d++) {\n        \"procedures_mutatorarg\" == e.type && Blockly.Names.equals(a, e.getFieldValue(\"NAME\")) && e.setFieldValue(b, \"NAME\");\n      }\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = {\n          enabled: !0\n        },\n            c = this.getFieldValue(\"NAME\");\n        b.text = Blockly.Msg.PROCEDURES_CREATE_DO.replace(\"%1\", c);\n        var d = Blockly.utils.xml.createElement(\"mutation\");\n        d.setAttribute(\"name\", c);\n\n        for (c = 0; c < this.arguments_.length; c++) {\n          var e = Blockly.utils.xml.createElement(\"arg\");\n          e.setAttribute(\"name\", this.arguments_[c]);\n          d.appendChild(e);\n        }\n\n        c = Blockly.utils.xml.createElement(\"block\");\n        c.setAttribute(\"type\", this.callType_);\n        c.appendChild(d);\n        b.callback = Blockly.ContextMenu.callbackFactory(this, c);\n        a.push(b);\n        if (!this.isCollapsed()) for (c = 0; c < this.argumentVarModels_.length; c++) {\n          b = {\n            enabled: !0\n          }, d = this.argumentVarModels_[c], b.text = Blockly.Msg.VARIABLES_SET_CREATE_GET.replace(\"%1\", d.name), d = Blockly.Variables.generateVariableFieldDom(d), e = Blockly.utils.xml.createElement(\"block\"), e.setAttribute(\"type\", \"variables_get\"), e.appendChild(d), b.callback = Blockly.ContextMenu.callbackFactory(this, e), a.push(b);\n        }\n      }\n    },\n    callType_: \"procedures_callnoreturn\"\n  };\n  Blockly.Blocks.procedures_defreturn = {\n    init: function init() {\n      var a = Blockly.Procedures.findLegalName(\"\", this);\n      a = new Blockly.FieldTextInput(a, Blockly.Procedures.rename);\n      a.setSpellcheck(!1);\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a, \"NAME\").appendField(\"\", \"PARAMS\");\n      this.appendValueInput(\"RETURN\").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setMutator(new Blockly.Mutator([\"procedures_mutatorarg\"]));\n      (this.workspace.options.comments || this.workspace.options.parentWorkspace && this.workspace.options.parentWorkspace.options.comments) && Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT && this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.setStatements_(!0);\n      this.statementConnection_ = null;\n    },\n    setStatements_: Blockly.Blocks.procedures_defnoreturn.setStatements_,\n    updateParams_: Blockly.Blocks.procedures_defnoreturn.updateParams_,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    decompose: Blockly.Blocks.procedures_defnoreturn.decompose,\n    compose: Blockly.Blocks.procedures_defnoreturn.compose,\n    getProcedureDef: function getProcedureDef() {\n      return [this.getFieldValue(\"NAME\"), this.arguments_, !0];\n    },\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    updateVarName: Blockly.Blocks.procedures_defnoreturn.updateVarName,\n    displayRenamedVar_: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType_: \"procedures_callreturn\"\n  };\n  Blockly.Blocks.procedures_mutatorcontainer = {\n    init: function init() {\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);\n      this.appendStatementInput(\"STACK\");\n      this.appendDummyInput(\"STATEMENT_INPUT\").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox(\"TRUE\"), \"STATEMENTS\");\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);\n      this.contextMenu = !1;\n    }\n  };\n  Blockly.Blocks.procedures_mutatorarg = {\n    init: function init() {\n      var a = new Blockly.FieldTextInput(Blockly.Procedures.DEFAULT_ARG, this.validator_);\n      a.oldShowEditorFn_ = a.showEditor_;\n\n      a.showEditor_ = function () {\n        this.createdVariables_ = [];\n        this.oldShowEditorFn_();\n      };\n\n      this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(a, \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);\n      this.contextMenu = !1;\n      a.onFinishEditing_ = this.deleteIntermediateVars_;\n      a.createdVariables_ = [];\n      a.onFinishEditing_(\"x\");\n    },\n    validator_: function validator_(a) {\n      var b = this.getSourceBlock(),\n          c = Blockly.Mutator.findParentWs(b.workspace);\n      a = a.replace(/[\\s\\xa0]+/g, \" \").replace(/^ | $/g, \"\");\n      if (!a) return null;\n\n      for (var d = (b.workspace.targetWorkspace || b.workspace).getAllBlocks(!1), e = a.toLowerCase(), f = 0; f < d.length; f++) {\n        if (d[f].id != this.getSourceBlock().id) {\n          var g = d[f].getFieldValue(\"NAME\");\n          if (g && g.toLowerCase() == e) return null;\n        }\n      }\n\n      if (b.isInFlyout) return a;\n      (b = c.getVariable(a, \"\")) && b.name != a && c.renameVariableById(b.getId(), a);\n      b || (b = c.createVariable(a, \"\")) && this.createdVariables_ && this.createdVariables_.push(b);\n      return a;\n    },\n    deleteIntermediateVars_: function deleteIntermediateVars_(a) {\n      var b = Blockly.Mutator.findParentWs(this.getSourceBlock().workspace);\n      if (b) for (var c = 0; c < this.createdVariables_.length; c++) {\n        var d = this.createdVariables_[c];\n        d.name != a && b.deleteVariableById(d.getId());\n      }\n    }\n  };\n  Blockly.Blocks.procedures_callnoreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: function getProcedureCall() {\n      return this.getFieldValue(\"NAME\");\n    },\n    renameProcedure: function renameProcedure(a, b) {\n      Blockly.Names.equals(a, this.getProcedureCall()) && (this.setFieldValue(b, \"NAME\"), this.setTooltip((this.outputConnection ? Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP : Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace(\"%1\", b)));\n    },\n    setProcedureParameters_: function setProcedureParameters_(a, b) {\n      var c = Blockly.Procedures.getDefinition(this.getProcedureCall(), this.workspace),\n          d = c && c.mutator && c.mutator.isVisible();\n      d || (this.quarkConnections_ = {}, this.quarkIds_ = null);\n      if (b) if (a.join(\"\\n\") == this.arguments_.join(\"\\n\")) this.quarkIds_ = b;else {\n        if (b.length != a.length) throw RangeError(\"paramNames and paramIds must be the same length.\");\n        this.setCollapsed(!1);\n        this.quarkIds_ || (this.quarkConnections_ = {}, this.quarkIds_ = []);\n        c = this.rendered;\n        this.rendered = !1;\n\n        for (var e = 0; e < this.arguments_.length; e++) {\n          var f = this.getInput(\"ARG\" + e);\n          f && (f = f.connection.targetConnection, this.quarkConnections_[this.quarkIds_[e]] = f, d && f && -1 == b.indexOf(this.quarkIds_[e]) && (f.disconnect(), f.getSourceBlock().bumpNeighbours()));\n        }\n\n        this.arguments_ = [].concat(a);\n        this.argumentVarModels_ = [];\n\n        for (e = 0; e < this.arguments_.length; e++) {\n          a = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, this.arguments_[e], \"\"), this.argumentVarModels_.push(a);\n        }\n\n        this.updateShape_();\n        if (this.quarkIds_ = b) for (e = 0; e < this.arguments_.length; e++) {\n          b = this.quarkIds_[e], b in this.quarkConnections_ && (f = this.quarkConnections_[b], Blockly.Mutator.reconnect(f, this, \"ARG\" + e) || delete this.quarkConnections_[b]);\n        }\n        (this.rendered = c) && this.render();\n      }\n    },\n    updateShape_: function updateShape_() {\n      for (var a = 0; a < this.arguments_.length; a++) {\n        var b = this.getField(\"ARGNAME\" + a);\n\n        if (b) {\n          Blockly.Events.disable();\n\n          try {\n            b.setValue(this.arguments_[a]);\n          } finally {\n            Blockly.Events.enable();\n          }\n        } else b = new Blockly.FieldLabel(this.arguments_[a]), this.appendValueInput(\"ARG\" + a).setAlign(Blockly.ALIGN_RIGHT).appendField(b, \"ARGNAME\" + a).init();\n      }\n\n      for (; this.getInput(\"ARG\" + a);) {\n        this.removeInput(\"ARG\" + a), a++;\n      }\n\n      if (a = this.getInput(\"TOPROW\")) this.arguments_.length ? this.getField(\"WITH\") || (a.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS, \"WITH\"), a.init()) : this.getField(\"WITH\") && a.removeField(\"WITH\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"name\", this.getProcedureCall());\n\n      for (var b = 0; b < this.arguments_.length; b++) {\n        var c = Blockly.utils.xml.createElement(\"arg\");\n        c.setAttribute(\"name\", this.arguments_[b]);\n        a.appendChild(c);\n      }\n\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = a.getAttribute(\"name\");\n      this.renameProcedure(this.getProcedureCall(), b);\n      b = [];\n\n      for (var c = [], d = 0, e; e = a.childNodes[d]; d++) {\n        \"arg\" == e.nodeName.toLowerCase() && (b.push(e.getAttribute(\"name\")), c.push(e.getAttribute(\"paramId\")));\n      }\n\n      this.setProcedureParameters_(b, c);\n    },\n    getVars: function getVars() {\n      return this.arguments_;\n    },\n    getVarModels: function getVarModels() {\n      return this.argumentVarModels_;\n    },\n    onchange: function onchange(a) {\n      if (this.workspace && !this.workspace.isFlyout && a.recordUndo) if (a.type == Blockly.Events.BLOCK_CREATE && -1 != a.ids.indexOf(this.id)) {\n        var b = this.getProcedureCall();\n        b = Blockly.Procedures.getDefinition(b, this.workspace);\n        !b || b.type == this.defType_ && JSON.stringify(b.getVars()) == JSON.stringify(this.arguments_) || (b = null);\n\n        if (!b) {\n          Blockly.Events.setGroup(a.group);\n          a = Blockly.utils.xml.createElement(\"xml\");\n          b = Blockly.utils.xml.createElement(\"block\");\n          b.setAttribute(\"type\", this.defType_);\n          var c = this.getRelativeToSurfaceXY(),\n              d = c.y + 2 * Blockly.SNAP_RADIUS;\n          b.setAttribute(\"x\", c.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1));\n          b.setAttribute(\"y\", d);\n          c = this.mutationToDom();\n          b.appendChild(c);\n          c = Blockly.utils.xml.createElement(\"field\");\n          c.setAttribute(\"name\", \"NAME\");\n          d = this.getProcedureCall();\n          d || (d = Blockly.Procedures.findLegalName(\"\", this), this.renameProcedure(\"\", d));\n          c.appendChild(Blockly.utils.xml.createTextNode(d));\n          b.appendChild(c);\n          a.appendChild(b);\n          Blockly.Xml.domToWorkspace(a, this.workspace);\n          Blockly.Events.setGroup(!1);\n        }\n      } else a.type == Blockly.Events.BLOCK_DELETE ? (b = this.getProcedureCall(), b = Blockly.Procedures.getDefinition(b, this.workspace), b || (Blockly.Events.setGroup(a.group), this.dispose(!0), Blockly.Events.setGroup(!1))) : a.type == Blockly.Events.CHANGE && \"disabled\" == a.element && (b = this.getProcedureCall(), (b = Blockly.Procedures.getDefinition(b, this.workspace)) && b.id == a.blockId && ((b = Blockly.Events.getGroup()) && console.log(\"Saw an existing group while responding to a definition change\"), Blockly.Events.setGroup(a.group), a.newValue ? (this.previousEnabledState_ = this.isEnabled(), this.setEnabled(!1)) : this.setEnabled(this.previousEnabledState_), Blockly.Events.setGroup(b)));\n    },\n    customContextMenu: function customContextMenu(a) {\n      if (this.workspace.isMovable()) {\n        var b = {\n          enabled: !0\n        };\n        b.text = Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;\n        var c = this.getProcedureCall(),\n            d = this.workspace;\n\n        b.callback = function () {\n          var e = Blockly.Procedures.getDefinition(c, d);\n          e && (d.centerOnBlock(e.id), e.select());\n        };\n\n        a.push(b);\n      }\n    },\n    defType_: \"procedures_defnoreturn\"\n  };\n  Blockly.Blocks.procedures_callreturn = {\n    init: function init() {\n      this.appendDummyInput(\"TOPROW\").appendField(\"\", \"NAME\");\n      this.setOutput(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);\n      this.arguments_ = [];\n      this.argumentVarModels_ = [];\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n      this.previousEnabledState_ = !0;\n    },\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters_: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,\n    updateShape_: Blockly.Blocks.procedures_callnoreturn.updateShape_,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVars: Blockly.Blocks.procedures_callnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType_: \"procedures_defreturn\"\n  };\n  Blockly.Blocks.procedures_ifreturn = {\n    init: function init() {\n      this.appendValueInput(\"CONDITION\").setCheck(\"Boolean\").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);\n      this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);\n      this.setInputsInline(!0);\n      this.setPreviousStatement(!0);\n      this.setNextStatement(!0);\n      this.setStyle(\"procedure_blocks\");\n      this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);\n      this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);\n      this.hasReturnValue_ = !0;\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"value\", Number(this.hasReturnValue_));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.hasReturnValue_ = 1 == a.getAttribute(\"value\");\n      this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN));\n    },\n    onchange: function onchange(a) {\n      if (this.workspace.isDragging && !this.workspace.isDragging()) {\n        a = !1;\n        var b = this;\n\n        do {\n          if (-1 != this.FUNCTION_TYPES.indexOf(b.type)) {\n            a = !0;\n            break;\n          }\n\n          b = b.getSurroundParent();\n        } while (b);\n\n        a ? (\"procedures_defnoreturn\" == b.type && this.hasReturnValue_ ? (this.removeInput(\"VALUE\"), this.appendDummyInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !1) : \"procedures_defreturn\" != b.type || this.hasReturnValue_ || (this.removeInput(\"VALUE\"), this.appendValueInput(\"VALUE\").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN), this.hasReturnValue_ = !0), this.setWarningText(null), this.isInFlyout || this.setEnabled(!0)) : (this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING), this.isInFlyout || this.getInheritedDisabled() || this.setEnabled(!1));\n      }\n    },\n    FUNCTION_TYPES: [\"procedures_defnoreturn\", \"procedures_defreturn\"]\n  };\n  Blockly.Blocks.texts = {};\n  Blockly.Constants.Text = {};\n  Blockly.Constants.Text.HUE = 160;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"text\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_input\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"text_quotes\", \"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_multiline\",\n    message0: \"%1 %2\",\n    args0: [{\n      type: \"field_image\",\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=\",\n      width: 12,\n      height: 17,\n      alt: \"\\xB6\"\n    }, {\n      type: \"field_multilinetext\",\n      name: \"TEXT\",\n      text: \"\"\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_TEXT_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    extensions: [\"parent_tooltip_when_inline\"]\n  }, {\n    type: \"text_join\",\n    message0: \"\",\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_JOIN_HELPURL}\",\n    tooltip: \"%{BKY_TEXT_JOIN_TOOLTIP}\",\n    mutator: \"text_join_mutator\"\n  }, {\n    type: \"text_create_join_container\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2\",\n    args0: [{\n      type: \"input_dummy\"\n    }, {\n      type: \"input_statement\",\n      name: \"STACK\"\n    }],\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_create_join_item\",\n    message0: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}\",\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}\",\n    enableContextMenu: !1\n  }, {\n    type: \"text_append\",\n    message0: \"%{BKY_TEXT_APPEND_TITLE}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_TEXT_APPEND_VARIABLE}\"\n    }, {\n      type: \"input_value\",\n      name: \"TEXT\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"text_blocks\",\n    extensions: [\"text_append_tooltip\"]\n  }, {\n    type: \"text_length\",\n    message0: \"%{BKY_TEXT_LENGTH_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_LENGTH_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_LENGTH_HELPURL}\"\n  }, {\n    type: \"text_isEmpty\",\n    message0: \"%{BKY_TEXT_ISEMPTY_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: [\"String\", \"Array\"]\n    }],\n    output: \"Boolean\",\n    style: \"text_blocks\",\n    tooltip: \"%{BKY_TEXT_ISEMPTY_TOOLTIP}\",\n    helpUrl: \"%{BKY_TEXT_ISEMPTY_HELPURL}\"\n  }, {\n    type: \"text_indexOf\",\n    message0: \"%{BKY_TEXT_INDEXOF_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"END\",\n      options: [[\"%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_INDEXOF_OPERATOR_LAST}\", \"LAST\"]]\n    }, {\n      type: \"input_value\",\n      name: \"FIND\",\n      check: \"String\"\n    }],\n    output: \"Number\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_INDEXOF_HELPURL}\",\n    inputsInline: !0,\n    extensions: [\"text_indexOf_tooltip\"]\n  }, {\n    type: \"text_charAt\",\n    message0: \"%{BKY_TEXT_CHARAT_TITLE}\",\n    args0: [{\n      type: \"input_value\",\n      name: \"VALUE\",\n      check: \"String\"\n    }, {\n      type: \"field_dropdown\",\n      name: \"WHERE\",\n      options: [[\"%{BKY_TEXT_CHARAT_FROM_START}\", \"FROM_START\"], [\"%{BKY_TEXT_CHARAT_FROM_END}\", \"FROM_END\"], [\"%{BKY_TEXT_CHARAT_FIRST}\", \"FIRST\"], [\"%{BKY_TEXT_CHARAT_LAST}\", \"LAST\"], [\"%{BKY_TEXT_CHARAT_RANDOM}\", \"RANDOM\"]]\n    }],\n    output: \"String\",\n    style: \"text_blocks\",\n    helpUrl: \"%{BKY_TEXT_CHARAT_HELPURL}\",\n    inputsInline: !0,\n    mutator: \"text_charAt_mutator\"\n  }]);\n  Blockly.Blocks.text_getSubstring = {\n    init: function init() {\n      this.WHERE_OPTIONS_1 = [[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST, \"FIRST\"]];\n      this.WHERE_OPTIONS_2 = [[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START, \"FROM_START\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END, \"FROM_END\"], [Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST, \"LAST\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"STRING\").setCheck(\"String\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);\n      this.appendDummyInput(\"AT1\");\n      this.appendDummyInput(\"AT2\");\n      Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);\n      this.setInputsInline(!0);\n      this.setOutput(!0, \"String\");\n      this.updateAt_(1, !0);\n      this.updateAt_(2, !0);\n      this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP);\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\"),\n          b = this.getInput(\"AT1\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at1\", b);\n      b = this.getInput(\"AT2\").type == Blockly.INPUT_VALUE;\n      a.setAttribute(\"at2\", b);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      var b = \"true\" == a.getAttribute(\"at1\");\n      a = \"true\" == a.getAttribute(\"at2\");\n      this.updateAt_(1, b);\n      this.updateAt_(2, a);\n    },\n    updateAt_: function updateAt_(a, b) {\n      this.removeInput(\"AT\" + a);\n      this.removeInput(\"ORDINAL\" + a, !0);\n      b ? (this.appendValueInput(\"AT\" + a).setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\" + a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)) : this.appendDummyInput(\"AT\" + a);\n      2 == a && Blockly.Msg.TEXT_GET_SUBSTRING_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));\n      var c = new Blockly.FieldDropdown(this[\"WHERE_OPTIONS_\" + a], function (d) {\n        var e = \"FROM_START\" == d || \"FROM_END\" == d;\n\n        if (e != b) {\n          var f = this.getSourceBlock();\n          f.updateAt_(a, e);\n          f.setFieldValue(d, \"WHERE\" + a);\n          return null;\n        }\n      });\n      this.getInput(\"AT\" + a).appendField(c, \"WHERE\" + a);\n      1 == a && (this.moveInputBefore(\"AT1\", \"AT2\"), this.getInput(\"ORDINAL1\") && this.moveInputBefore(\"ORDINAL1\", \"AT2\"));\n    }\n  };\n  Blockly.Blocks.text_changeCase = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE, \"UPPERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE, \"LOWERCASE\"], [Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE, \"TITLECASE\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"CASE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_trim = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH, \"BOTH\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT, \"LEFT\"], [Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT, \"RIGHT\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);\n      this.setStyle(\"text_blocks\");\n      this.appendValueInput(\"TEXT\").setCheck(\"String\").appendField(new Blockly.FieldDropdown(a), \"MODE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP);\n    }\n  };\n  Blockly.Blocks.text_print = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_PRINT_TITLE,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\"\n        }],\n        previousStatement: null,\n        nextStatement: null,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_PRINT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_PRINT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_prompt_ext = {\n    init: function init() {\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]];\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      var b = this;\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendValueInput(\"TEXT\").appendField(a, \"TYPE\");\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: function updateType_(a) {\n      this.outputConnection.setCheck(\"NUMBER\" == a ? \"Number\" : \"String\");\n    },\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"type\", this.getFieldValue(\"TYPE\"));\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.updateType_(a.getAttribute(\"type\"));\n    }\n  };\n  Blockly.Blocks.text_prompt = {\n    init: function init() {\n      this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n      var a = [[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT, \"TEXT\"], [Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER, \"NUMBER\"]],\n          b = this;\n      this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);\n      this.setStyle(\"text_blocks\");\n      a = new Blockly.FieldDropdown(a, function (c) {\n        b.updateType_(c);\n      });\n      this.appendDummyInput().appendField(a, \"TYPE\").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(\"\"), \"TEXT\").appendField(this.newQuote_(!1));\n      this.setOutput(!0, \"String\");\n      this.setTooltip(function () {\n        return \"TEXT\" == b.getFieldValue(\"TYPE\") ? Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT : Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER;\n      });\n    },\n    updateType_: Blockly.Blocks.text_prompt_ext.updateType_,\n    mutationToDom: Blockly.Blocks.text_prompt_ext.mutationToDom,\n    domToMutation: Blockly.Blocks.text_prompt_ext.domToMutation\n  };\n  Blockly.Blocks.text_count = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_COUNT_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"SUB\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"Number\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_COUNT_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_COUNT_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_replace = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REPLACE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"FROM\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TO\",\n          check: \"String\"\n        }, {\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REPLACE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REPLACE_HELPURL\n      });\n    }\n  };\n  Blockly.Blocks.text_reverse = {\n    init: function init() {\n      this.jsonInit({\n        message0: Blockly.Msg.TEXT_REVERSE_MESSAGE0,\n        args0: [{\n          type: \"input_value\",\n          name: \"TEXT\",\n          check: \"String\"\n        }],\n        output: \"String\",\n        inputsInline: !0,\n        style: \"text_blocks\",\n        tooltip: Blockly.Msg.TEXT_REVERSE_TOOLTIP,\n        helpUrl: Blockly.Msg.TEXT_REVERSE_HELPURL\n      });\n    }\n  };\n  Blockly.Constants.Text.QUOTE_IMAGE_MIXIN = {\n    QUOTE_IMAGE_LEFT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC\",\n    QUOTE_IMAGE_RIGHT_DATAURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==\",\n    QUOTE_IMAGE_WIDTH: 12,\n    QUOTE_IMAGE_HEIGHT: 12,\n    quoteField_: function quoteField_(a) {\n      for (var b = 0, c; c = this.inputList[b]; b++) {\n        for (var d = 0, e; e = c.fieldRow[d]; d++) {\n          if (a == e.name) {\n            c.insertFieldAt(d, this.newQuote_(!0));\n            c.insertFieldAt(d + 2, this.newQuote_(!1));\n            return;\n          }\n        }\n      }\n\n      console.warn('field named \"' + a + '\" not found in ' + this.toDevString());\n    },\n    newQuote_: function newQuote_(a) {\n      a = this.RTL ? !a : a;\n      return new Blockly.FieldImage(a ? this.QUOTE_IMAGE_LEFT_DATAURI : this.QUOTE_IMAGE_RIGHT_DATAURI, this.QUOTE_IMAGE_WIDTH, this.QUOTE_IMAGE_HEIGHT, a ? \"\\u201C\" : \"\\u201D\");\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_QUOTES_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.quoteField_(\"TEXT\");\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"items\", this.itemCount_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      this.itemCount_ = parseInt(a.getAttribute(\"items\"), 10);\n      this.updateShape_();\n    },\n    decompose: function decompose(a) {\n      var b = a.newBlock(\"text_create_join_container\");\n      b.initSvg();\n\n      for (var c = b.getInput(\"STACK\").connection, d = 0; d < this.itemCount_; d++) {\n        var e = a.newBlock(\"text_create_join_item\");\n        e.initSvg();\n        c.connect(e.previousConnection);\n        c = e.nextConnection;\n      }\n\n      return b;\n    },\n    compose: function compose(a) {\n      var b = a.getInputTargetBlock(\"STACK\");\n\n      for (a = []; b && !b.isInsertionMarker();) {\n        a.push(b.valueConnection_), b = b.nextConnection && b.nextConnection.targetBlock();\n      }\n\n      for (b = 0; b < this.itemCount_; b++) {\n        var c = this.getInput(\"ADD\" + b).connection.targetConnection;\n        c && -1 == a.indexOf(c) && c.disconnect();\n      }\n\n      this.itemCount_ = a.length;\n      this.updateShape_();\n\n      for (b = 0; b < this.itemCount_; b++) {\n        Blockly.Mutator.reconnect(a[b], this, \"ADD\" + b);\n      }\n    },\n    saveConnections: function saveConnections(a) {\n      a = a.getInputTargetBlock(\"STACK\");\n\n      for (var b = 0; a;) {\n        var c = this.getInput(\"ADD\" + b);\n        a.valueConnection_ = c && c.connection.targetConnection;\n        b++;\n        a = a.nextConnection && a.nextConnection.targetBlock();\n      }\n    },\n    updateShape_: function updateShape_() {\n      this.itemCount_ && this.getInput(\"EMPTY\") ? this.removeInput(\"EMPTY\") : this.itemCount_ || this.getInput(\"EMPTY\") || this.appendDummyInput(\"EMPTY\").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));\n\n      for (var a = 0; a < this.itemCount_; a++) {\n        if (!this.getInput(\"ADD\" + a)) {\n          var b = this.appendValueInput(\"ADD\" + a).setAlign(Blockly.ALIGN_RIGHT);\n          0 == a && b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH);\n        }\n      }\n\n      for (; this.getInput(\"ADD\" + a);) {\n        this.removeInput(\"ADD\" + a), a++;\n      }\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_JOIN_EXTENSION = function () {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    this.itemCount_ = 2;\n    this.updateShape_();\n    this.setMutator(new Blockly.Mutator([\"text_create_join_item\"]));\n  };\n\n  Blockly.Extensions.register(\"text_append_tooltip\", Blockly.Extensions.buildTooltipWithFieldText(\"%{BKY_TEXT_APPEND_TOOLTIP}\", \"VAR\"));\n\n  Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION = function () {\n    var a = this;\n    this.setTooltip(function () {\n      return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"0\" : \"-1\");\n    });\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN = {\n    mutationToDom: function mutationToDom() {\n      var a = Blockly.utils.xml.createElement(\"mutation\");\n      a.setAttribute(\"at\", !!this.isAt_);\n      return a;\n    },\n    domToMutation: function domToMutation(a) {\n      a = \"false\" != a.getAttribute(\"at\");\n      this.updateAt_(a);\n    },\n    updateAt_: function updateAt_(a) {\n      this.removeInput(\"AT\", !0);\n      this.removeInput(\"ORDINAL\", !0);\n      a && (this.appendValueInput(\"AT\").setCheck(\"Number\"), Blockly.Msg.ORDINAL_NUMBER_SUFFIX && this.appendDummyInput(\"ORDINAL\").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX));\n      Blockly.Msg.TEXT_CHARAT_TAIL && (this.removeInput(\"TAIL\", !0), this.appendDummyInput(\"TAIL\").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));\n      this.isAt_ = a;\n    }\n  };\n\n  Blockly.Constants.Text.TEXT_CHARAT_EXTENSION = function () {\n    this.getField(\"WHERE\").setValidator(function (b) {\n      b = \"FROM_START\" == b || \"FROM_END\" == b;\n      b != this.isAt_ && this.getSourceBlock().updateAt_(b);\n    });\n    this.updateAt_(!0);\n    var a = this;\n    this.setTooltip(function () {\n      var b = a.getFieldValue(\"WHERE\"),\n          c = Blockly.Msg.TEXT_CHARAT_TOOLTIP;\n      (\"FROM_START\" == b || \"FROM_END\" == b) && (b = \"FROM_START\" == b ? Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP : Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP) && (c += \"  \" + b.replace(\"%1\", a.workspace.options.oneBasedIndex ? \"#1\" : \"#0\"));\n      return c;\n    });\n  };\n\n  Blockly.Extensions.register(\"text_indexOf_tooltip\", Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);\n  Blockly.Extensions.register(\"text_quotes\", Blockly.Constants.Text.TEXT_QUOTES_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_join_mutator\", Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_JOIN_EXTENSION);\n  Blockly.Extensions.registerMutator(\"text_charAt_mutator\", Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN, Blockly.Constants.Text.TEXT_CHARAT_EXTENSION);\n  Blockly.Blocks.variables = {};\n  Blockly.Constants.Variables = {};\n  Blockly.Constants.Variables.HUE = 330;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }, {\n    type: \"variables_set\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableSetterGetter\"]\n  }]);\n  Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        if (\"variables_get\" == this.type) var b = \"variables_set\",\n            c = Blockly.Msg.VARIABLES_GET_CREATE_SET;else b = \"variables_get\", c = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n        var d = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            e = this.getField(\"VAR\").getText();\n        d.text = c.replace(\"%1\", e);\n        c = Blockly.utils.xml.createElement(\"field\");\n        c.setAttribute(\"name\", \"VAR\");\n        c.appendChild(Blockly.utils.xml.createTextNode(e));\n        e = Blockly.utils.xml.createElement(\"block\");\n        e.setAttribute(\"type\", b);\n        e.appendChild(c);\n        d.callback = Blockly.ContextMenu.callbackFactory(this, e);\n        a.push(d);\n      } else if (\"variables_get\" == this.type || \"variables_get_reporter\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, e = this.getField(\"VAR\").getText(), d = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", e),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(d);\n    }\n  };\n\n  Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableSetterGetter\", Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  Blockly.Constants.VariablesDynamic = {};\n  Blockly.Constants.VariablesDynamic.HUE = 310;\n  Blockly.defineBlocksWithJsonArray([{\n    type: \"variables_get_dynamic\",\n    message0: \"%1\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    output: null,\n    style: \"variable_dynamic_blocks\",\n    helpUrl: \"%{BKY_VARIABLES_GET_HELPURL}\",\n    tooltip: \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }, {\n    type: \"variables_set_dynamic\",\n    message0: \"%{BKY_VARIABLES_SET}\",\n    args0: [{\n      type: \"field_variable\",\n      name: \"VAR\",\n      variable: \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }, {\n      type: \"input_value\",\n      name: \"VALUE\"\n    }],\n    previousStatement: null,\n    nextStatement: null,\n    style: \"variable_dynamic_blocks\",\n    tooltip: \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    helpUrl: \"%{BKY_VARIABLES_SET_HELPURL}\",\n    extensions: [\"contextMenu_variableDynamicSetterGetter\"]\n  }]);\n  Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n    customContextMenu: function customContextMenu(a) {\n      if (!this.isInFlyout) {\n        var b = this.getFieldValue(\"VAR\");\n        var c = this.workspace.getVariableById(b).type;\n\n        if (\"variables_get_dynamic\" == this.type) {\n          b = \"variables_set_dynamic\";\n          var d = Blockly.Msg.VARIABLES_GET_CREATE_SET;\n        } else b = \"variables_get_dynamic\", d = Blockly.Msg.VARIABLES_SET_CREATE_GET;\n\n        var e = {\n          enabled: 0 < this.workspace.remainingCapacity()\n        },\n            f = this.getField(\"VAR\").getText();\n        e.text = d.replace(\"%1\", f);\n        d = Blockly.utils.xml.createElement(\"field\");\n        d.setAttribute(\"name\", \"VAR\");\n        d.setAttribute(\"variabletype\", c);\n        d.appendChild(Blockly.utils.xml.createTextNode(f));\n        f = Blockly.utils.xml.createElement(\"block\");\n        f.setAttribute(\"type\", b);\n        f.appendChild(d);\n        e.callback = Blockly.ContextMenu.callbackFactory(this, f);\n        a.push(e);\n      } else if (\"variables_get_dynamic\" == this.type || \"variables_get_reporter_dynamic\" == this.type) b = {\n        text: Blockly.Msg.RENAME_VARIABLE,\n        enabled: !0,\n        callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n      }, f = this.getField(\"VAR\").getText(), e = {\n        text: Blockly.Msg.DELETE_VARIABLE.replace(\"%1\", f),\n        enabled: !0,\n        callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n      }, a.unshift(b), a.unshift(e);\n    },\n    onchange: function onchange(a) {\n      a = this.getFieldValue(\"VAR\");\n      a = Blockly.Variables.getVariable(this.workspace, a);\n      \"variables_get_dynamic\" == this.type ? this.outputConnection.setCheck(a.type) : this.getInput(\"VALUE\").connection.setCheck(a.type);\n    }\n  };\n\n  Blockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      Blockly.Variables.renameVariable(b, c);\n    };\n  };\n\n  Blockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY = function (a) {\n    return function () {\n      var b = a.workspace,\n          c = a.getField(\"VAR\").getVariable();\n      b.deleteVariableById(c.getId());\n      b.refreshToolboxSelection();\n    };\n  };\n\n  Blockly.Extensions.registerMixin(\"contextMenu_variableDynamicSetterGetter\", Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n  return Blockly.Blocks;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core-browser', './msg/en', './blocks', './javascript'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core-browser'), require('./msg/en'), require('./blocks'), require('./javascript'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly, root.En, root.BlocklyBlocks, root.BlocklyJS);\n  }\n})(this, function (Blockly, En, BlocklyBlocks, BlocklyJS) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module for the browser. This includes Blockly core\n   * and built in blocks, the JavaScript code generator and the English block\n   * localization files.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Include the EN Locale by default.\n\n  Blockly.setLocale(En);\n  Blockly.Blocks = Blockly.Blocks || {};\n  Object.keys(BlocklyBlocks).forEach(function (k) {\n    Blockly.Blocks[k] = BlocklyBlocks[k];\n  });\n  Blockly.JavaScript = BlocklyJS;\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly core module for the browser. It includes blockly.js\n   *               and adds a helper method for setting the locale.\n   */\n\n  /* eslint-disable */\n  'use strict'; // Add a helper method to set the Blockly locale.\n\n  Blockly.setLocale = function (locale) {\n    Blockly.Msg = Blockly.Msg || {};\n    Object.keys(locale).forEach(function (k) {\n      Blockly.Msg[k] = locale[k];\n    });\n  };\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./browser'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./node'));\n  } else {\n    // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview Blockly module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  return Blockly;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./core', './javascript_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./core'), require('./javascript_compressed.js'));\n  } else {\n    // Browser\n    root.BlocklyJavaScript = factory(root.Blockly, root.BlocklyJavaScript);\n  }\n})(this, function (Blockly, BlocklyJavaScript) {\n  /**\n   * @license\n   * Copyright 2020 Google LLC\n   * SPDX-License-Identifier: Apache-2.0\n   */\n\n  /**\n   * @fileoverview JavaScript Generator module.\n   */\n\n  /* eslint-disable */\n  'use strict';\n\n  Blockly.JavaScript = BlocklyJavaScript;\n  return BlocklyJavaScript;\n});","// Do not edit this file; automatically generated by gulp.\n\n/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['./blockly_compressed.js'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('./blockly_compressed.js'));\n  } else {\n    // Browser\n    root.Blockly.JavaScript = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  'use strict';\n\n  Blockly.JavaScript = new Blockly.Generator(\"JavaScript\");\n  Blockly.JavaScript.addReservedWords(\"break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,\" + Object.getOwnPropertyNames(Blockly.utils.global).join(\",\"));\n  Blockly.JavaScript.ORDER_ATOMIC = 0;\n  Blockly.JavaScript.ORDER_NEW = 1.1;\n  Blockly.JavaScript.ORDER_MEMBER = 1.2;\n  Blockly.JavaScript.ORDER_FUNCTION_CALL = 2;\n  Blockly.JavaScript.ORDER_INCREMENT = 3;\n  Blockly.JavaScript.ORDER_DECREMENT = 3;\n  Blockly.JavaScript.ORDER_BITWISE_NOT = 4.1;\n  Blockly.JavaScript.ORDER_UNARY_PLUS = 4.2;\n  Blockly.JavaScript.ORDER_UNARY_NEGATION = 4.3;\n  Blockly.JavaScript.ORDER_LOGICAL_NOT = 4.4;\n  Blockly.JavaScript.ORDER_TYPEOF = 4.5;\n  Blockly.JavaScript.ORDER_VOID = 4.6;\n  Blockly.JavaScript.ORDER_DELETE = 4.7;\n  Blockly.JavaScript.ORDER_AWAIT = 4.8;\n  Blockly.JavaScript.ORDER_EXPONENTIATION = 5;\n  Blockly.JavaScript.ORDER_MULTIPLICATION = 5.1;\n  Blockly.JavaScript.ORDER_DIVISION = 5.2;\n  Blockly.JavaScript.ORDER_MODULUS = 5.3;\n  Blockly.JavaScript.ORDER_SUBTRACTION = 6.1;\n  Blockly.JavaScript.ORDER_ADDITION = 6.2;\n  Blockly.JavaScript.ORDER_BITWISE_SHIFT = 7;\n  Blockly.JavaScript.ORDER_RELATIONAL = 8;\n  Blockly.JavaScript.ORDER_IN = 8;\n  Blockly.JavaScript.ORDER_INSTANCEOF = 8;\n  Blockly.JavaScript.ORDER_EQUALITY = 9;\n  Blockly.JavaScript.ORDER_BITWISE_AND = 10;\n  Blockly.JavaScript.ORDER_BITWISE_XOR = 11;\n  Blockly.JavaScript.ORDER_BITWISE_OR = 12;\n  Blockly.JavaScript.ORDER_LOGICAL_AND = 13;\n  Blockly.JavaScript.ORDER_LOGICAL_OR = 14;\n  Blockly.JavaScript.ORDER_CONDITIONAL = 15;\n  Blockly.JavaScript.ORDER_ASSIGNMENT = 16;\n  Blockly.JavaScript.ORDER_YIELD = 17;\n  Blockly.JavaScript.ORDER_COMMA = 18;\n  Blockly.JavaScript.ORDER_NONE = 99;\n  Blockly.JavaScript.ORDER_OVERRIDES = [[Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_MEMBER], [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_FUNCTION_CALL], [Blockly.JavaScript.ORDER_LOGICAL_NOT, Blockly.JavaScript.ORDER_LOGICAL_NOT], [Blockly.JavaScript.ORDER_MULTIPLICATION, Blockly.JavaScript.ORDER_MULTIPLICATION], [Blockly.JavaScript.ORDER_ADDITION, Blockly.JavaScript.ORDER_ADDITION], [Blockly.JavaScript.ORDER_LOGICAL_AND, Blockly.JavaScript.ORDER_LOGICAL_AND], [Blockly.JavaScript.ORDER_LOGICAL_OR, Blockly.JavaScript.ORDER_LOGICAL_OR]];\n  Blockly.JavaScript.isInitialized = !1;\n\n  Blockly.JavaScript.init = function (a) {\n    Blockly.JavaScript.definitions_ = Object.create(null);\n    Blockly.JavaScript.functionNames_ = Object.create(null);\n    Blockly.JavaScript.variableDB_ ? Blockly.JavaScript.variableDB_.reset() : Blockly.JavaScript.variableDB_ = new Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_);\n    Blockly.JavaScript.variableDB_.setVariableMap(a.getVariableMap());\n\n    for (var b = [], c = Blockly.Variables.allDeveloperVariables(a), d = 0; d < c.length; d++) {\n      b.push(Blockly.JavaScript.variableDB_.getName(c[d], Blockly.Names.DEVELOPER_VARIABLE_TYPE));\n    }\n\n    a = Blockly.Variables.allUsedVarModels(a);\n\n    for (d = 0; d < a.length; d++) {\n      b.push(Blockly.JavaScript.variableDB_.getName(a[d].getId(), Blockly.VARIABLE_CATEGORY_NAME));\n    }\n\n    b.length && (Blockly.JavaScript.definitions_.variables = \"var \" + b.join(\", \") + \";\");\n    this.isInitialized = !0;\n  };\n\n  Blockly.JavaScript.finish = function (a) {\n    var b = [],\n        c;\n\n    for (c in Blockly.JavaScript.definitions_) {\n      b.push(Blockly.JavaScript.definitions_[c]);\n    }\n\n    delete Blockly.JavaScript.definitions_;\n    delete Blockly.JavaScript.functionNames_;\n    Blockly.JavaScript.variableDB_.reset();\n    return b.join(\"\\n\\n\") + \"\\n\\n\\n\" + a;\n  };\n\n  Blockly.JavaScript.scrubNakedValue = function (a) {\n    return a + \";\\n\";\n  };\n\n  Blockly.JavaScript.quote_ = function (a) {\n    a = a.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\\\n\").replace(/'/g, \"\\\\'\");\n    return \"'\" + a + \"'\";\n  };\n\n  Blockly.JavaScript.multiline_quote_ = function (a) {\n    return a.split(/\\n/g).map(Blockly.JavaScript.quote_).join(\" + '\\\\n' +\\n\");\n  };\n\n  Blockly.JavaScript.scrub_ = function (a, b, c) {\n    var d = \"\";\n\n    if (!a.outputConnection || !a.outputConnection.targetConnection) {\n      var e = a.getCommentText();\n      e && (e = Blockly.utils.string.wrap(e, Blockly.JavaScript.COMMENT_WRAP - 3), d += Blockly.JavaScript.prefixLines(e + \"\\n\", \"// \"));\n\n      for (var f = 0; f < a.inputList.length; f++) {\n        a.inputList[f].type == Blockly.inputTypes.VALUE && (e = a.inputList[f].connection.targetBlock()) && (e = Blockly.JavaScript.allNestedComments(e)) && (d += Blockly.JavaScript.prefixLines(e, \"// \"));\n      }\n    }\n\n    a = a.nextConnection && a.nextConnection.targetBlock();\n    c = c ? \"\" : Blockly.JavaScript.blockToCode(a);\n    return d + b + c;\n  };\n\n  Blockly.JavaScript.getAdjusted = function (a, b, c, d, e) {\n    c = c || 0;\n    e = e || Blockly.JavaScript.ORDER_NONE;\n    a.workspace.options.oneBasedIndex && c--;\n    var f = a.workspace.options.oneBasedIndex ? \"1\" : \"0\";\n    a = 0 < c ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_ADDITION) || f : 0 > c ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_SUBTRACTION) || f : d ? Blockly.JavaScript.valueToCode(a, b, Blockly.JavaScript.ORDER_UNARY_NEGATION) || f : Blockly.JavaScript.valueToCode(a, b, e) || f;\n    if (Blockly.isNumber(a)) a = Number(a) + c, d && (a = -a);else {\n      if (0 < c) {\n        a = a + \" + \" + c;\n        var g = Blockly.JavaScript.ORDER_ADDITION;\n      } else 0 > c && (a = a + \" - \" + -c, g = Blockly.JavaScript.ORDER_SUBTRACTION);\n\n      d && (a = c ? \"-(\" + a + \")\" : \"-\" + a, g = Blockly.JavaScript.ORDER_UNARY_NEGATION);\n      g = Math.floor(g);\n      e = Math.floor(e);\n      g && e >= g && (a = \"(\" + a + \")\");\n    }\n    return a;\n  };\n\n  Blockly.JavaScript.colour = {};\n\n  Blockly.JavaScript.colour_picker = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"COLOUR\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.colour_random = function (a) {\n    return [Blockly.JavaScript.provideFunction_(\"colourRandom\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"() {\", \"  var num = Math.floor(Math.random() * Math.pow(2, 24));\", \"  return '#' + ('00000' + num.toString(16)).substr(-6);\", \"}\"]) + \"()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_rgb = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"RED\", Blockly.JavaScript.ORDER_NONE) || 0,\n        c = Blockly.JavaScript.valueToCode(a, \"GREEN\", Blockly.JavaScript.ORDER_NONE) || 0;\n    a = Blockly.JavaScript.valueToCode(a, \"BLUE\", Blockly.JavaScript.ORDER_NONE) || 0;\n    return [Blockly.JavaScript.provideFunction_(\"colourRgb\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(r, g, b) {\", \"  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\", \"  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\", \"  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\", \"  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\", \"  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\", \"  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.colour_blend = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"COLOUR1\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\",\n        c = Blockly.JavaScript.valueToCode(a, \"COLOUR2\", Blockly.JavaScript.ORDER_NONE) || \"'#000000'\";\n    a = Blockly.JavaScript.valueToCode(a, \"RATIO\", Blockly.JavaScript.ORDER_NONE) || .5;\n    return [Blockly.JavaScript.provideFunction_(\"colourBlend\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(c1, c2, ratio) {\", \"  ratio = Math.max(Math.min(Number(ratio), 1), 0);\", \"  var r1 = parseInt(c1.substring(1, 3), 16);\", \"  var g1 = parseInt(c1.substring(3, 5), 16);\", \"  var b1 = parseInt(c1.substring(5, 7), 16);\", \"  var r2 = parseInt(c2.substring(1, 3), 16);\", \"  var g2 = parseInt(c2.substring(3, 5), 16);\", \"  var b2 = parseInt(c2.substring(5, 7), 16);\", \"  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\", \"  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\", \"  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\", \"  r = ('0' + (r || 0).toString(16)).slice(-2);\", \"  g = ('0' + (g || 0).toString(16)).slice(-2);\", \"  b = ('0' + (b || 0).toString(16)).slice(-2);\", \"  return '#' + r + g + b;\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists = {};\n\n  Blockly.JavaScript.lists_create_empty = function (a) {\n    return [\"[]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_create_with = function (a) {\n    for (var b = Array(a.itemCount_), c = 0; c < a.itemCount_; c++) {\n      b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [\"[\" + b.join(\", \") + \"]\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.lists_repeat = function (a) {\n    var b = Blockly.JavaScript.provideFunction_(\"listsRepeat\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(value, n) {\", \"  var array = [];\", \"  for (var i = 0; i < n; i++) {\", \"    array[i] = value;\", \"  }\", \"  return array;\", \"}\"]),\n        c = Blockly.JavaScript.valueToCode(a, \"ITEM\", Blockly.JavaScript.ORDER_NONE) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [b + \"(\" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.lists_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.lists_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_getIndex = function (a) {\n    var b = a.getFieldValue(\"MODE\") || \"GET\",\n        c = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        d = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == c ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n\n    switch (c) {\n      case \"FIRST\":\n        if (\"GET\" == b) return [d + \"[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".shift()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".shift();\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"GET\" == b) return [d + \".slice(-1)[0]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".pop()\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"REMOVE\" == b) return d + \".pop();\\n\";\n        break;\n\n      case \"FROM_START\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"GET\" == b) return [d + \"[\" + a + \"]\", Blockly.JavaScript.ORDER_MEMBER];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\\n\";\n        break;\n\n      case \"FROM_END\":\n        a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0);\n        if (\"GET\" == b) return [d + \".slice(\" + a + \")[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"GET_REMOVE\" == b) return [d + \".splice(\" + a + \", 1)[0]\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \".splice(\" + a + \", 1);\";\n        break;\n\n      case \"RANDOM\":\n        d = Blockly.JavaScript.provideFunction_(\"listsGetRandomItem\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list, remove) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  if (remove) {\", \"    return list.splice(x, 1)[0];\", \"  } else {\", \"    return list[x];\", \"  }\", \"}\"]) + \"(\" + d + \", \" + (\"GET\" != b) + \")\";\n        if (\"GET\" == b || \"GET_REMOVE\" == b) return [d, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n        if (\"REMOVE\" == b) return d + \";\\n\";\n    }\n\n    throw Error(\"Unhandled combination (lists_getIndex).\");\n  };\n\n  Blockly.JavaScript.lists_setIndex = function (a) {\n    function b() {\n      if (c.match(/^\\w+$/)) return \"\";\n      var g = Blockly.JavaScript.variableDB_.getDistinctName(\"tmpList\", Blockly.VARIABLE_CATEGORY_NAME),\n          h = \"var \" + g + \" = \" + c + \";\\n\";\n      c = g;\n      return h;\n    }\n\n    var c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        d = a.getFieldValue(\"MODE\") || \"GET\",\n        e = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        f = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"null\";\n\n    switch (e) {\n      case \"FIRST\":\n        if (\"SET\" == d) return c + \"[0] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".unshift(\" + f + \");\\n\";\n        break;\n\n      case \"LAST\":\n        if (\"SET\" == d) return a = b(), a + (c + \"[\" + c + \".length - 1] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return c + \".push(\" + f + \");\\n\";\n        break;\n\n      case \"FROM_START\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\");\n        if (\"SET\" == d) return c + \"[\" + e + \"] = \" + f + \";\\n\";\n        if (\"INSERT\" == d) return c + \".splice(\" + e + \", 0, \" + f + \");\\n\";\n        break;\n\n      case \"FROM_END\":\n        e = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n        a = b();\n        if (\"SET\" == d) return a + (c + \"[\" + c + \".length - \" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + c + \".length - \" + e + \", 0, \" + f + \");\\n\");\n        break;\n\n      case \"RANDOM\":\n        a = b();\n        e = Blockly.JavaScript.variableDB_.getDistinctName(\"tmpX\", Blockly.VARIABLE_CATEGORY_NAME);\n        a += \"var \" + e + \" = Math.floor(Math.random() * \" + c + \".length);\\n\";\n        if (\"SET\" == d) return a + (c + \"[\" + e + \"] = \" + f + \";\\n\");\n        if (\"INSERT\" == d) return a + (c + \".splice(\" + e + \", 0, \" + f + \");\\n\");\n    }\n\n    throw Error(\"Unhandled combination (lists_setIndex).\");\n  };\n\n  Blockly.JavaScript.lists.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.lists_getSublist = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\",\n        c = a.getFieldValue(\"WHERE1\"),\n        d = a.getFieldValue(\"WHERE2\");\n    if (\"FIRST\" == c && \"LAST\" == d) b += \".slice(0)\";else if (b.match(/^\\w+$/) || \"FROM_END\" != c && \"FROM_START\" == d) {\n      switch (c) {\n        case \"FROM_START\":\n          var e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          e = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          e = b + \".length - \" + e;\n          break;\n\n        case \"FIRST\":\n          e = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      switch (d) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = b + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = b + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (lists_getSublist).\");\n      }\n\n      b = b + \".slice(\" + e + \", \" + a + \")\";\n    } else {\n      e = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.lists.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[c] + g[d], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at1\" : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", c, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", d, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + b + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + e : \"\") + (\"FROM_END\" == d || \"FROM_START\" == d ? \", \" + a : \"\") + \")\";\n    }\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_sort = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\",\n        c = \"1\" === a.getFieldValue(\"DIRECTION\") ? 1 : -1;\n    a = a.getFieldValue(\"TYPE\");\n    var d = Blockly.JavaScript.provideFunction_(\"listsGetSortCompare\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(type, direction) {\", \"  var compareFuncs = {\", '    \"NUMERIC\": function(a, b) {', \"        return Number(a) - Number(b); },\", '    \"TEXT\": function(a, b) {', \"        return a.toString() > b.toString() ? 1 : -1; },\", '    \"IGNORE_CASE\": function(a, b) {', \"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\", \"  };\", \"  var compare = compareFuncs[type];\", \"  return function(a, b) { return compare(a, b) * direction; }\", \"}\"]);\n    return [b + \".slice().sort(\" + d + '(\"' + a + '\", ' + c + \"))\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_split = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"INPUT\", Blockly.JavaScript.ORDER_MEMBER),\n        c = Blockly.JavaScript.valueToCode(a, \"DELIM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = a.getFieldValue(\"MODE\");\n    if (\"SPLIT\" == a) b || (b = \"''\"), a = \"split\";else if (\"JOIN\" == a) b || (b = \"[]\"), a = \"join\";else throw Error(\"Unknown mode: \" + a);\n    return [b + \".\" + a + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.lists_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"[]\") + \".slice().reverse()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.logic = {};\n\n  Blockly.JavaScript.controls_if = function (a) {\n    var b = 0,\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n\n    do {\n      var d = Blockly.JavaScript.valueToCode(a, \"IF\" + b, Blockly.JavaScript.ORDER_NONE) || \"false\";\n      var e = Blockly.JavaScript.statementToCode(a, \"DO\" + b);\n      Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e);\n      c += (0 < b ? \" else \" : \"\") + \"if (\" + d + \") {\\n\" + e + \"}\";\n      ++b;\n    } while (a.getInput(\"IF\" + b));\n\n    if (a.getInput(\"ELSE\") || Blockly.JavaScript.STATEMENT_SUFFIX) e = Blockly.JavaScript.statementToCode(a, \"ELSE\"), Blockly.JavaScript.STATEMENT_SUFFIX && (e = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT) + e), c += \" else {\\n\" + e + \"}\";\n    return c + \"\\n\";\n  };\n\n  Blockly.JavaScript.controls_ifelse = Blockly.JavaScript.controls_if;\n\n  Blockly.JavaScript.logic_compare = function (a) {\n    var b = {\n      EQ: \"==\",\n      NEQ: \"!=\",\n      LT: \"<\",\n      LTE: \"<=\",\n      GT: \">\",\n      GTE: \">=\"\n    }[a.getFieldValue(\"OP\")],\n        c = \"==\" == b || \"!=\" == b ? Blockly.JavaScript.ORDER_EQUALITY : Blockly.JavaScript.ORDER_RELATIONAL,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c) || \"0\";\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_operation = function (a) {\n    var b = \"AND\" == a.getFieldValue(\"OP\") ? \"&&\" : \"||\",\n        c = \"&&\" == b ? Blockly.JavaScript.ORDER_LOGICAL_AND : Blockly.JavaScript.ORDER_LOGICAL_OR,\n        d = Blockly.JavaScript.valueToCode(a, \"A\", c);\n    a = Blockly.JavaScript.valueToCode(a, \"B\", c);\n\n    if (d || a) {\n      var e = \"&&\" == b ? \"true\" : \"false\";\n      d || (d = e);\n      a || (a = e);\n    } else a = d = \"false\";\n\n    return [d + \" \" + b + \" \" + a, c];\n  };\n\n  Blockly.JavaScript.logic_negate = function (a) {\n    var b = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"BOOL\", b) || \"true\"), b];\n  };\n\n  Blockly.JavaScript.logic_boolean = function (a) {\n    return [\"TRUE\" == a.getFieldValue(\"BOOL\") ? \"true\" : \"false\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_null = function (a) {\n    return [\"null\", Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.logic_ternary = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"IF\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"false\",\n        c = Blockly.JavaScript.valueToCode(a, \"THEN\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    a = Blockly.JavaScript.valueToCode(a, \"ELSE\", Blockly.JavaScript.ORDER_CONDITIONAL) || \"null\";\n    return [b + \" ? \" + c + \" : \" + a, Blockly.JavaScript.ORDER_CONDITIONAL];\n  };\n\n  Blockly.JavaScript.loops = {};\n\n  Blockly.JavaScript.controls_repeat_ext = function (a) {\n    var b = a.getField(\"TIMES\") ? String(Number(a.getFieldValue(\"TIMES\"))) : Blockly.JavaScript.valueToCode(a, \"TIMES\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        c = Blockly.JavaScript.statementToCode(a, \"DO\");\n    c = Blockly.JavaScript.addLoopTrap(c, a);\n    a = \"\";\n    var d = Blockly.JavaScript.variableDB_.getDistinctName(\"count\", Blockly.VARIABLE_CATEGORY_NAME),\n        e = b;\n    b.match(/^\\w+$/) || Blockly.isNumber(b) || (e = Blockly.JavaScript.variableDB_.getDistinctName(\"repeat_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + b + \";\\n\");\n    return a + (\"for (var \" + d + \" = 0; \" + d + \" < \" + e + \"; \" + d + \"++) {\\n\" + c + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n\n  Blockly.JavaScript.controls_whileUntil = function (a) {\n    var b = \"UNTIL\" == a.getFieldValue(\"MODE\"),\n        c = Blockly.JavaScript.valueToCode(a, \"BOOL\", b ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE) || \"false\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    b && (c = \"!\" + c);\n    return \"while (\" + c + \") {\\n\" + d + \"}\\n\";\n  };\n\n  Blockly.JavaScript.controls_for = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        d = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\",\n        e = Blockly.JavaScript.valueToCode(a, \"BY\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"1\",\n        f = Blockly.JavaScript.statementToCode(a, \"DO\");\n    f = Blockly.JavaScript.addLoopTrap(f, a);\n\n    if (Blockly.isNumber(c) && Blockly.isNumber(d) && Blockly.isNumber(e)) {\n      var g = Number(c) <= Number(d);\n      a = \"for (\" + b + \" = \" + c + \"; \" + b + (g ? \" <= \" : \" >= \") + d + \"; \" + b;\n      b = Math.abs(Number(e));\n      a = (1 == b ? a + (g ? \"++\" : \"--\") : a + ((g ? \" += \" : \" -= \") + b)) + (\") {\\n\" + f + \"}\\n\");\n    } else a = \"\", g = c, c.match(/^\\w+$/) || Blockly.isNumber(c) || (g = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_start\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + g + \" = \" + c + \";\\n\"), c = d, d.match(/^\\w+$/) || Blockly.isNumber(d) || (c = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_end\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + c + \" = \" + d + \";\\n\"), d = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_inc\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + d + \" = \", a = Blockly.isNumber(e) ? a + (Math.abs(e) + \";\\n\") : a + (\"Math.abs(\" + e + \");\\n\"), a = a + (\"if (\" + g + \" > \" + c + \") {\\n\") + (Blockly.JavaScript.INDENT + d + \" = -\" + d + \";\\n\"), a += \"}\\n\", a += \"for (\" + b + \" = \" + g + \"; \" + d + \" >= 0 ? \" + b + \" <= \" + c + \" : \" + b + \" >= \" + c + \"; \" + b + \" += \" + d + \") {\\n\" + f + \"}\\n\";\n\n    return a;\n  };\n\n  Blockly.JavaScript.controls_forEach = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME),\n        c = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"[]\",\n        d = Blockly.JavaScript.statementToCode(a, \"DO\");\n    d = Blockly.JavaScript.addLoopTrap(d, a);\n    a = \"\";\n    var e = c;\n    c.match(/^\\w+$/) || (e = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_list\", Blockly.VARIABLE_CATEGORY_NAME), a += \"var \" + e + \" = \" + c + \";\\n\");\n    c = Blockly.JavaScript.variableDB_.getDistinctName(b + \"_index\", Blockly.VARIABLE_CATEGORY_NAME);\n    d = Blockly.JavaScript.INDENT + b + \" = \" + e + \"[\" + c + \"];\\n\" + d;\n    return a + (\"for (var \" + c + \" in \" + e + \") {\\n\" + d + \"}\\n\");\n  };\n\n  Blockly.JavaScript.controls_flow_statements = function (a) {\n    var b = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n      var c = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);\n      c && !c.suppressPrefixSuffix && (b += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, c));\n    }\n\n    switch (a.getFieldValue(\"FLOW\")) {\n      case \"BREAK\":\n        return b + \"break;\\n\";\n\n      case \"CONTINUE\":\n        return b + \"continue;\\n\";\n    }\n\n    throw Error(\"Unknown flow statement.\");\n  };\n\n  Blockly.JavaScript.math = {};\n\n  Blockly.JavaScript.math_number = function (a) {\n    a = Number(a.getFieldValue(\"NUM\"));\n    return [a, 0 <= a ? Blockly.JavaScript.ORDER_ATOMIC : Blockly.JavaScript.ORDER_UNARY_NEGATION];\n  };\n\n  Blockly.JavaScript.math_arithmetic = function (a) {\n    var b = {\n      ADD: [\" + \", Blockly.JavaScript.ORDER_ADDITION],\n      MINUS: [\" - \", Blockly.JavaScript.ORDER_SUBTRACTION],\n      MULTIPLY: [\" * \", Blockly.JavaScript.ORDER_MULTIPLICATION],\n      DIVIDE: [\" / \", Blockly.JavaScript.ORDER_DIVISION],\n      POWER: [null, Blockly.JavaScript.ORDER_NONE]\n    }[a.getFieldValue(\"OP\")],\n        c = b[0];\n    b = b[1];\n    var d = Blockly.JavaScript.valueToCode(a, \"A\", b) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"B\", b) || \"0\";\n    return c ? [d + c + a, b] : [\"Math.pow(\" + d + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_single = function (a) {\n    var b = a.getFieldValue(\"OP\");\n    if (\"NEG\" == b) return a = Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_UNARY_NEGATION) || \"0\", \"-\" == a[0] && (a = \" \" + a), [\"-\" + a, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    a = \"SIN\" == b || \"COS\" == b || \"TAN\" == b ? Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_DIVISION) || \"0\" : Blockly.JavaScript.valueToCode(a, \"NUM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n\n    switch (b) {\n      case \"ABS\":\n        var c = \"Math.abs(\" + a + \")\";\n        break;\n\n      case \"ROOT\":\n        c = \"Math.sqrt(\" + a + \")\";\n        break;\n\n      case \"LN\":\n        c = \"Math.log(\" + a + \")\";\n        break;\n\n      case \"EXP\":\n        c = \"Math.exp(\" + a + \")\";\n        break;\n\n      case \"POW10\":\n        c = \"Math.pow(10,\" + a + \")\";\n        break;\n\n      case \"ROUND\":\n        c = \"Math.round(\" + a + \")\";\n        break;\n\n      case \"ROUNDUP\":\n        c = \"Math.ceil(\" + a + \")\";\n        break;\n\n      case \"ROUNDDOWN\":\n        c = \"Math.floor(\" + a + \")\";\n        break;\n\n      case \"SIN\":\n        c = \"Math.sin(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"COS\":\n        c = \"Math.cos(\" + a + \" / 180 * Math.PI)\";\n        break;\n\n      case \"TAN\":\n        c = \"Math.tan(\" + a + \" / 180 * Math.PI)\";\n    }\n\n    if (c) return [c, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (b) {\n      case \"LOG10\":\n        c = \"Math.log(\" + a + \") / Math.log(10)\";\n        break;\n\n      case \"ASIN\":\n        c = \"Math.asin(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ACOS\":\n        c = \"Math.acos(\" + a + \") / Math.PI * 180\";\n        break;\n\n      case \"ATAN\":\n        c = \"Math.atan(\" + a + \") / Math.PI * 180\";\n        break;\n\n      default:\n        throw Error(\"Unknown math operator: \" + b);\n    }\n\n    return [c, Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.math_constant = function (a) {\n    return {\n      PI: [\"Math.PI\", Blockly.JavaScript.ORDER_MEMBER],\n      E: [\"Math.E\", Blockly.JavaScript.ORDER_MEMBER],\n      GOLDEN_RATIO: [\"(1 + Math.sqrt(5)) / 2\", Blockly.JavaScript.ORDER_DIVISION],\n      SQRT2: [\"Math.SQRT2\", Blockly.JavaScript.ORDER_MEMBER],\n      SQRT1_2: [\"Math.SQRT1_2\", Blockly.JavaScript.ORDER_MEMBER],\n      INFINITY: [\"Infinity\", Blockly.JavaScript.ORDER_ATOMIC]\n    }[a.getFieldValue(\"CONSTANT\")];\n  };\n\n  Blockly.JavaScript.math_number_property = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"NUMBER_TO_CHECK\", Blockly.JavaScript.ORDER_MODULUS) || \"0\",\n        c = a.getFieldValue(\"PROPERTY\");\n    if (\"PRIME\" == c) return [Blockly.JavaScript.provideFunction_(\"mathIsPrime\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(n) {\", \"  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\", \"  if (n == 2 || n == 3) {\", \"    return true;\", \"  }\", \"  // False if n is NaN, negative, is 1, or not whole.\", \"  // And false if n is divisible by 2 or 3.\", \"  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\", \"    return false;\", \"  }\", \"  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\", \"  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\", \"    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\", \"      return false;\", \"    }\", \"  }\", \"  return true;\", \"}\"]) + \"(\" + b + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n    switch (c) {\n      case \"EVEN\":\n        var d = b + \" % 2 == 0\";\n        break;\n\n      case \"ODD\":\n        d = b + \" % 2 == 1\";\n        break;\n\n      case \"WHOLE\":\n        d = b + \" % 1 == 0\";\n        break;\n\n      case \"POSITIVE\":\n        d = b + \" > 0\";\n        break;\n\n      case \"NEGATIVE\":\n        d = b + \" < 0\";\n        break;\n\n      case \"DIVISIBLE_BY\":\n        a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\", d = b + \" % \" + a + \" == 0\";\n    }\n\n    return [d, Blockly.JavaScript.ORDER_EQUALITY];\n  };\n\n  Blockly.JavaScript.math_change = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DELTA\", Blockly.JavaScript.ORDER_ADDITION) || \"0\";\n    a = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    return a + \" = (typeof \" + a + \" == 'number' ? \" + a + \" : 0) + \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.math_round = Blockly.JavaScript.math_single;\n  Blockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n\n  Blockly.JavaScript.math_on_list = function (a) {\n    var b = a.getFieldValue(\"OP\");\n\n    switch (b) {\n      case \"SUM\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_MEMBER) || \"[]\";\n        a += \".reduce(function(x, y) {return x + y;})\";\n        break;\n\n      case \"MIN\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.min.apply(null, \" + a + \")\";\n        break;\n\n      case \"MAX\":\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = \"Math.max.apply(null, \" + a + \")\";\n        break;\n\n      case \"AVERAGE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMean\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  return myList.reduce(function(x, y) {return x + y;}) / myList.length;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MEDIAN\":\n        b = Blockly.JavaScript.provideFunction_(\"mathMedian\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(myList) {\", \"  var localList = myList.filter(function (x) {return typeof x == 'number';});\", \"  if (!localList.length) return null;\", \"  localList.sort(function(a, b) {return b - a;});\", \"  if (localList.length % 2 == 0) {\", \"    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\", \"  } else {\", \"    return localList[(localList.length - 1) / 2];\", \"  }\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"MODE\":\n        b = Blockly.JavaScript.provideFunction_(\"mathModes\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(values) {\", \"  var modes = [];\", \"  var counts = [];\", \"  var maxCount = 0;\", \"  for (var i = 0; i < values.length; i++) {\", \"    var value = values[i];\", \"    var found = false;\", \"    var thisCount;\", \"    for (var j = 0; j < counts.length; j++) {\", \"      if (counts[j][0] === value) {\", \"        thisCount = ++counts[j][1];\", \"        found = true;\", \"        break;\", \"      }\", \"    }\", \"    if (!found) {\", \"      counts.push([value, 1]);\", \"      thisCount = 1;\", \"    }\", \"    maxCount = Math.max(thisCount, maxCount);\", \"  }\", \"  for (var j = 0; j < counts.length; j++) {\", \"    if (counts[j][1] == maxCount) {\", \"        modes.push(counts[j][0]);\", \"    }\", \"  }\", \"  return modes;\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"STD_DEV\":\n        b = Blockly.JavaScript.provideFunction_(\"mathStandardDeviation\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(numbers) {\", \"  var n = numbers.length;\", \"  if (!n) return null;\", \"  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\", \"  var variance = 0;\", \"  for (var j = 0; j < n; j++) {\", \"    variance += Math.pow(numbers[j] - mean, 2);\", \"  }\", \"  variance = variance / n;\", \"  return Math.sqrt(variance);\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      case \"RANDOM\":\n        b = Blockly.JavaScript.provideFunction_(\"mathRandomList\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(list) {\", \"  var x = Math.floor(Math.random() * list.length);\", \"  return list[x];\", \"}\"]);\n        a = Blockly.JavaScript.valueToCode(a, \"LIST\", Blockly.JavaScript.ORDER_NONE) || \"[]\";\n        a = b + \"(\" + a + \")\";\n        break;\n\n      default:\n        throw Error(\"Unknown operator: \" + b);\n    }\n\n    return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_modulo = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"DIVIDEND\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"DIVISOR\", Blockly.JavaScript.ORDER_MODULUS) || \"0\";\n    return [b + \" % \" + a, Blockly.JavaScript.ORDER_MODULUS];\n  };\n\n  Blockly.JavaScript.math_constrain = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"0\",\n        c = Blockly.JavaScript.valueToCode(a, \"LOW\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"HIGH\", Blockly.JavaScript.ORDER_NONE) || \"Infinity\";\n    return [\"Math.min(Math.max(\" + b + \", \" + c + \"), \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_int = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [Blockly.JavaScript.provideFunction_(\"mathRandomInt\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(a, b) {\", \"  if (a > b) {\", \"    // Swap a and b to ensure a is smaller.\", \"    var c = a;\", \"    a = b;\", \"    b = c;\", \"  }\", \"  return Math.floor(Math.random() * (b - a + 1) + a);\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_random_float = function (a) {\n    return [\"Math.random()\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.math_atan2 = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"X\", Blockly.JavaScript.ORDER_NONE) || \"0\";\n    return [\"Math.atan2(\" + (Blockly.JavaScript.valueToCode(a, \"Y\", Blockly.JavaScript.ORDER_NONE) || \"0\") + \", \" + b + \") / Math.PI * 180\", Blockly.JavaScript.ORDER_DIVISION];\n  };\n\n  Blockly.JavaScript.procedures = {};\n\n  Blockly.JavaScript.procedures_defreturn = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME),\n        c = \"\";\n    Blockly.JavaScript.STATEMENT_PREFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX, a));\n    Blockly.JavaScript.STATEMENT_SUFFIX && (c += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a));\n    c && (c = Blockly.JavaScript.prefixLines(c, Blockly.JavaScript.INDENT));\n    var d = \"\";\n    Blockly.JavaScript.INFINITE_LOOP_TRAP && (d = Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.INFINITE_LOOP_TRAP, a), Blockly.JavaScript.INDENT));\n    var e = Blockly.JavaScript.statementToCode(a, \"STACK\"),\n        f = Blockly.JavaScript.valueToCode(a, \"RETURN\", Blockly.JavaScript.ORDER_NONE) || \"\",\n        g = \"\";\n    e && f && (g = c);\n    f && (f = Blockly.JavaScript.INDENT + \"return \" + f + \";\\n\");\n\n    for (var h = [], l = a.getVars(), k = 0; k < l.length; k++) {\n      h[k] = Blockly.JavaScript.variableDB_.getName(l[k], Blockly.VARIABLE_CATEGORY_NAME);\n    }\n\n    c = \"function \" + b + \"(\" + h.join(\", \") + \") {\\n\" + c + d + e + g + f + \"}\";\n    c = Blockly.JavaScript.scrub_(a, c);\n    Blockly.JavaScript.definitions_[\"%\" + b] = c;\n    return null;\n  };\n\n  Blockly.JavaScript.procedures_defnoreturn = Blockly.JavaScript.procedures_defreturn;\n\n  Blockly.JavaScript.procedures_callreturn = function (a) {\n    for (var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"NAME\"), Blockly.PROCEDURE_CATEGORY_NAME), c = [], d = a.getVars(), e = 0; e < d.length; e++) {\n      c[e] = Blockly.JavaScript.valueToCode(a, \"ARG\" + e, Blockly.JavaScript.ORDER_NONE) || \"null\";\n    }\n\n    return [b + \"(\" + c.join(\", \") + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.procedures_callnoreturn = function (a) {\n    return Blockly.JavaScript.procedures_callreturn(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.procedures_ifreturn = function (a) {\n    var b = \"if (\" + (Blockly.JavaScript.valueToCode(a, \"CONDITION\", Blockly.JavaScript.ORDER_NONE) || \"false\") + \") {\\n\";\n    Blockly.JavaScript.STATEMENT_SUFFIX && (b += Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, a), Blockly.JavaScript.INDENT));\n    a.hasReturnValue_ ? (a = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_NONE) || \"null\", b += Blockly.JavaScript.INDENT + \"return \" + a + \";\\n\") : b += Blockly.JavaScript.INDENT + \"return;\\n\";\n    return b + \"}\\n\";\n  };\n\n  Blockly.JavaScript.texts = {};\n\n  Blockly.JavaScript.text = function (a) {\n    return [Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.text_multiline = function (a) {\n    a = Blockly.JavaScript.multiline_quote_(a.getFieldValue(\"TEXT\"));\n    var b = -1 != a.indexOf(\"+\") ? Blockly.JavaScript.ORDER_ADDITION : Blockly.JavaScript.ORDER_ATOMIC;\n    return [a, b];\n  };\n\n  Blockly.JavaScript.text.forceString_ = function (a) {\n    return Blockly.JavaScript.text.forceString_.strRegExp.test(a) ? [a, Blockly.JavaScript.ORDER_ATOMIC] : [\"String(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text.forceString_.strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n\n  Blockly.JavaScript.text_join = function (a) {\n    switch (a.itemCount_) {\n      case 0:\n        return [\"''\", Blockly.JavaScript.ORDER_ATOMIC];\n\n      case 1:\n        return a = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\", Blockly.JavaScript.text.forceString_(a);\n\n      case 2:\n        var b = Blockly.JavaScript.valueToCode(a, \"ADD0\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.valueToCode(a, \"ADD1\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n        a = Blockly.JavaScript.text.forceString_(b)[0] + \" + \" + Blockly.JavaScript.text.forceString_(a)[0];\n        return [a, Blockly.JavaScript.ORDER_ADDITION];\n\n      default:\n        b = Array(a.itemCount_);\n\n        for (var c = 0; c < a.itemCount_; c++) {\n          b[c] = Blockly.JavaScript.valueToCode(a, \"ADD\" + c, Blockly.JavaScript.ORDER_NONE) || \"''\";\n        }\n\n        a = \"[\" + b.join(\",\") + \"].join('')\";\n        return [a, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n  };\n\n  Blockly.JavaScript.text_append = function (a) {\n    var b = Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME);\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return b + \" += \" + Blockly.JavaScript.text.forceString_(a)[0] + \";\\n\";\n  };\n\n  Blockly.JavaScript.text_length = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_MEMBER];\n  };\n\n  Blockly.JavaScript.text_isEmpty = function (a) {\n    return [\"!\" + (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".length\", Blockly.JavaScript.ORDER_LOGICAL_NOT];\n  };\n\n  Blockly.JavaScript.text_indexOf = function (a) {\n    var b = \"FIRST\" == a.getFieldValue(\"END\") ? \"indexOf\" : \"lastIndexOf\",\n        c = Blockly.JavaScript.valueToCode(a, \"FIND\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    b = (Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".\" + b + \"(\" + c + \")\";\n    return a.workspace.options.oneBasedIndex ? [b + \" + 1\", Blockly.JavaScript.ORDER_ADDITION] : [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_charAt = function (a) {\n    var b = a.getFieldValue(\"WHERE\") || \"FROM_START\",\n        c = Blockly.JavaScript.valueToCode(a, \"VALUE\", \"RANDOM\" == b ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    switch (b) {\n      case \"FIRST\":\n        return [c + \".charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"LAST\":\n        return [c + \".slice(-1)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_START\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\"), [c + \".charAt(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"FROM_END\":\n        return a = Blockly.JavaScript.getAdjusted(a, \"AT\", 1, !0), [c + \".slice(\" + a + \").charAt(0)\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n\n      case \"RANDOM\":\n        return [Blockly.JavaScript.provideFunction_(\"textRandomLetter\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(text) {\", \"  var x = Math.floor(Math.random() * text.length);\", \"  return text[x];\", \"}\"]) + \"(\" + c + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    throw Error(\"Unhandled option (text_charAt).\");\n  };\n\n  Blockly.JavaScript.text.getIndex_ = function (a, b, c) {\n    return \"FIRST\" == b ? \"0\" : \"FROM_END\" == b ? a + \".length - 1 - \" + c : \"LAST\" == b ? a + \".length - 1\" : c;\n  };\n\n  Blockly.JavaScript.text_getSubstring = function (a) {\n    var b = a.getFieldValue(\"WHERE1\"),\n        c = a.getFieldValue(\"WHERE2\"),\n        d = \"FROM_END\" != b && \"LAST\" != b && \"FROM_END\" != c && \"LAST\" != c,\n        e = Blockly.JavaScript.valueToCode(a, \"STRING\", d ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    if (\"FIRST\" == b && \"LAST\" == c) return [e, Blockly.JavaScript.ORDER_NONE];\n\n    if (e.match(/^'?\\w+'?$/) || d) {\n      switch (b) {\n        case \"FROM_START\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n          break;\n\n        case \"FROM_END\":\n          d = Blockly.JavaScript.getAdjusted(a, \"AT1\", 1, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          d = e + \".length - \" + d;\n          break;\n\n        case \"FIRST\":\n          d = \"0\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      switch (c) {\n        case \"FROM_START\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 1);\n          break;\n\n        case \"FROM_END\":\n          a = Blockly.JavaScript.getAdjusted(a, \"AT2\", 0, !1, Blockly.JavaScript.ORDER_SUBTRACTION);\n          a = e + \".length - \" + a;\n          break;\n\n        case \"LAST\":\n          a = e + \".length\";\n          break;\n\n        default:\n          throw Error(\"Unhandled option (text_getSubstring).\");\n      }\n\n      b = e + \".slice(\" + d + \", \" + a + \")\";\n    } else {\n      d = Blockly.JavaScript.getAdjusted(a, \"AT1\");\n      a = Blockly.JavaScript.getAdjusted(a, \"AT2\");\n      var f = Blockly.JavaScript.text.getIndex_,\n          g = {\n        FIRST: \"First\",\n        LAST: \"Last\",\n        FROM_START: \"FromStart\",\n        FROM_END: \"FromEnd\"\n      };\n      b = Blockly.JavaScript.provideFunction_(\"subsequence\" + g[b] + g[c], [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(sequence\" + (\"FROM_END\" == b || \"FROM_START\" == b ? \", at1\" : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", at2\" : \"\") + \") {\", \"  var start = \" + f(\"sequence\", b, \"at1\") + \";\", \"  var end = \" + f(\"sequence\", c, \"at2\") + \" + 1;\", \"  return sequence.slice(start, end);\", \"}\"]) + \"(\" + e + (\"FROM_END\" == b || \"FROM_START\" == b ? \", \" + d : \"\") + (\"FROM_END\" == c || \"FROM_START\" == c ? \", \" + a : \"\") + \")\";\n    }\n\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_changeCase = function (a) {\n    var b = {\n      UPPERCASE: \".toUpperCase()\",\n      LOWERCASE: \".toLowerCase()\",\n      TITLECASE: null\n    }[a.getFieldValue(\"CASE\")];\n    a = Blockly.JavaScript.valueToCode(a, \"TEXT\", b ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [b ? a + b : Blockly.JavaScript.provideFunction_(\"textToTitleCase\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(str) {\", \"  return str.replace(/\\\\S+/g,\", \"      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\", \"}\"]) + \"(\" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_trim = function (a) {\n    var b = {\n      LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n      RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n      BOTH: \".trim()\"\n    }[a.getFieldValue(\"MODE\")];\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_print = function (a) {\n    return \"window.alert(\" + (Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \");\\n\";\n  };\n\n  Blockly.JavaScript.text_prompt_ext = function (a) {\n    var b = \"window.prompt(\" + (a.getField(\"TEXT\") ? Blockly.JavaScript.quote_(a.getFieldValue(\"TEXT\")) : Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\") + \")\";\n    \"NUMBER\" == a.getFieldValue(\"TYPE\") && (b = \"Number(\" + b + \")\");\n    return [b, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_prompt = Blockly.JavaScript.text_prompt_ext;\n\n  Blockly.JavaScript.text_count = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"SUB\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textCount\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle) {\", \"  if (needle.length === 0) {\", \"    return haystack.length + 1;\", \"  } else {\", \"    return haystack.split(needle).length - 1;\", \"  }\", \"}\"]) + \"(\" + b + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_replace = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_NONE) || \"''\",\n        c = Blockly.JavaScript.valueToCode(a, \"FROM\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    a = Blockly.JavaScript.valueToCode(a, \"TO\", Blockly.JavaScript.ORDER_NONE) || \"''\";\n    return [Blockly.JavaScript.provideFunction_(\"textReplace\", [\"function \" + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + \"(haystack, needle, replacement) {\", '  needle = needle.replace(/([-()\\\\[\\\\]{}+?*.$\\\\^|,:#<!\\\\\\\\])/g,\"\\\\\\\\$1\")', '                 .replace(/\\\\x08/g,\"\\\\\\\\x08\");', \"  return haystack.replace(new RegExp(needle, 'g'), replacement);\", \"}\"]) + \"(\" + b + \", \" + c + \", \" + a + \")\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.text_reverse = function (a) {\n    return [(Blockly.JavaScript.valueToCode(a, \"TEXT\", Blockly.JavaScript.ORDER_MEMBER) || \"''\") + \".split('').reverse().join('')\", Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  };\n\n  Blockly.JavaScript.variables = {};\n\n  Blockly.JavaScript.variables_get = function (a) {\n    return [Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME), Blockly.JavaScript.ORDER_ATOMIC];\n  };\n\n  Blockly.JavaScript.variables_set = function (a) {\n    var b = Blockly.JavaScript.valueToCode(a, \"VALUE\", Blockly.JavaScript.ORDER_ASSIGNMENT) || \"0\";\n    return Blockly.JavaScript.variableDB_.getName(a.getFieldValue(\"VAR\"), Blockly.VARIABLE_CATEGORY_NAME) + \" = \" + b + \";\\n\";\n  };\n\n  Blockly.JavaScript.variablesDynamic = {};\n  Blockly.JavaScript.variables_get_dynamic = Blockly.JavaScript.variables_get;\n  Blockly.JavaScript.variables_set_dynamic = Blockly.JavaScript.variables_set;\n  return Blockly.JavaScript;\n});","/* eslint-disable */\n;\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['../core'], factory);\n  } else if (typeof exports === 'object') {\n    // Node.js\n    module.exports = factory(require('../core'));\n  } else {\n    // Browser\n    root.Blockly.Msg = factory(root.Blockly);\n  }\n})(this, function (Blockly) {\n  var Blockly = {};\n  Blockly.Msg = {}; // This file was automatically generated.  Do not modify.\n\n  'use strict';\n\n  Blockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\n  Blockly.Msg[\"CANNOT_DELETE_VARIABLE_PROCEDURE\"] = \"Can't delete the variable '%1' because it's part of the definition of the function '%2'\";\n  Blockly.Msg[\"CHANGE_VALUE_TITLE\"] = \"Change value:\";\n  Blockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\n  Blockly.Msg[\"COLLAPSED_WARNINGS_WARNING\"] = \"Collapsed blocks contain warnings.\";\n  Blockly.Msg[\"COLLAPSE_ALL\"] = \"Collapse Blocks\";\n  Blockly.Msg[\"COLLAPSE_BLOCK\"] = \"Collapse Block\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR1\"] = \"colour 1\";\n  Blockly.Msg[\"COLOUR_BLEND_COLOUR2\"] = \"colour 2\";\n  Blockly.Msg[\"COLOUR_BLEND_HELPURL\"] = \"https://meyerweb.com/eric/tools/color-blend/#:::rgbp\";\n  Blockly.Msg[\"COLOUR_BLEND_RATIO\"] = \"ratio\";\n  Blockly.Msg[\"COLOUR_BLEND_TITLE\"] = \"blend\";\n  Blockly.Msg[\"COLOUR_BLEND_TOOLTIP\"] = \"Blends two colours together with a given ratio (0.0 - 1.0).\";\n  Blockly.Msg[\"COLOUR_PICKER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Color\";\n  Blockly.Msg[\"COLOUR_PICKER_TOOLTIP\"] = \"Choose a colour from the palette.\";\n  Blockly.Msg[\"COLOUR_RANDOM_HELPURL\"] = \"http://randomcolour.com\";\n  Blockly.Msg[\"COLOUR_RANDOM_TITLE\"] = \"random colour\";\n  Blockly.Msg[\"COLOUR_RANDOM_TOOLTIP\"] = \"Choose a colour at random.\";\n  Blockly.Msg[\"COLOUR_RGB_BLUE\"] = \"blue\";\n  Blockly.Msg[\"COLOUR_RGB_GREEN\"] = \"green\";\n  Blockly.Msg[\"COLOUR_RGB_HELPURL\"] = \"https://www.december.com/html/spec/colorpercompact.html\";\n  Blockly.Msg[\"COLOUR_RGB_RED\"] = \"red\";\n  Blockly.Msg[\"COLOUR_RGB_TITLE\"] = \"colour with\";\n  Blockly.Msg[\"COLOUR_RGB_TOOLTIP\"] = \"Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#loop-termination-blocks\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK\"] = \"break out of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE\"] = \"continue with next iteration of loop\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK\"] = \"Break out of the containing loop.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE\"] = \"Skip the rest of this loop, and continue with the next iteration.\";\n  Blockly.Msg[\"CONTROLS_FLOW_STATEMENTS_WARNING\"] = \"Warning: This block may only be used within a loop.\";\n  Blockly.Msg[\"CONTROLS_FOREACH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#for-each\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TITLE\"] = \"for each item %1 in list %2\";\n  Blockly.Msg[\"CONTROLS_FOREACH_TOOLTIP\"] = \"For each item in a list, set the variable '%1' to the item, and then do some statements.\";\n  Blockly.Msg[\"CONTROLS_FOR_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#count-with\";\n  Blockly.Msg[\"CONTROLS_FOR_TITLE\"] = \"count with %1 from %2 to %3 by %4\";\n  Blockly.Msg[\"CONTROLS_FOR_TOOLTIP\"] = \"Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TOOLTIP\"] = \"Add a condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TOOLTIP\"] = \"Add a final, catch-all condition to the if block.\";\n  Blockly.Msg[\"CONTROLS_IF_HELPURL\"] = \"https://github.com/google/blockly/wiki/IfElse\";\n  Blockly.Msg[\"CONTROLS_IF_IF_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this if block.\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"] = \"else\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"] = \"else if\";\n  Blockly.Msg[\"CONTROLS_IF_MSG_IF\"] = \"if\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_1\"] = \"If a value is true, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_2\"] = \"If a value is true, then do the first block of statements. Otherwise, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_3\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.\";\n  Blockly.Msg[\"CONTROLS_IF_TOOLTIP_4\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.\";\n  Blockly.Msg[\"CONTROLS_REPEAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/For_loop\";\n  Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"] = \"do\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TITLE\"] = \"repeat %1 times\";\n  Blockly.Msg[\"CONTROLS_REPEAT_TOOLTIP\"] = \"Do some statements several times.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#repeat\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_UNTIL\"] = \"repeat until\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_WHILE\"] = \"repeat while\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL\"] = \"While a value is false, then do some statements.\";\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_WHILE\"] = \"While a value is true, then do some statements.\";\n  Blockly.Msg[\"DELETE_ALL_BLOCKS\"] = \"Delete all %1 blocks?\";\n  Blockly.Msg[\"DELETE_BLOCK\"] = \"Delete Block\";\n  Blockly.Msg[\"DELETE_VARIABLE\"] = \"Delete the '%1' variable\";\n  Blockly.Msg[\"DELETE_VARIABLE_CONFIRMATION\"] = \"Delete %1 uses of the '%2' variable?\";\n  Blockly.Msg[\"DELETE_X_BLOCKS\"] = \"Delete %1 Blocks\";\n  Blockly.Msg[\"DISABLE_BLOCK\"] = \"Disable Block\";\n  Blockly.Msg[\"DUPLICATE_BLOCK\"] = \"Duplicate\";\n  Blockly.Msg[\"DUPLICATE_COMMENT\"] = \"Duplicate Comment\";\n  Blockly.Msg[\"ENABLE_BLOCK\"] = \"Enable Block\";\n  Blockly.Msg[\"EXPAND_ALL\"] = \"Expand Blocks\";\n  Blockly.Msg[\"EXPAND_BLOCK\"] = \"Expand Block\";\n  Blockly.Msg[\"EXTERNAL_INPUTS\"] = \"External Inputs\";\n  Blockly.Msg[\"HELP\"] = \"Help\";\n  Blockly.Msg[\"INLINE_INPUTS\"] = \"Inline Inputs\";\n  Blockly.Msg[\"IOS_CANCEL\"] = \"Cancel\";\n  Blockly.Msg[\"IOS_ERROR\"] = \"Error\";\n  Blockly.Msg[\"IOS_OK\"] = \"OK\";\n  Blockly.Msg[\"IOS_PROCEDURES_ADD_INPUT\"] = \"+ Add Input\";\n  Blockly.Msg[\"IOS_PROCEDURES_ALLOW_STATEMENTS\"] = \"Allow statements\";\n  Blockly.Msg[\"IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR\"] = \"This function has duplicate inputs.\";\n  Blockly.Msg[\"IOS_PROCEDURES_INPUTS\"] = \"INPUTS\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_BUTTON\"] = \"Add\";\n  Blockly.Msg[\"IOS_VARIABLES_ADD_VARIABLE\"] = \"+ Add Variable\";\n  Blockly.Msg[\"IOS_VARIABLES_DELETE_BUTTON\"] = \"Delete\";\n  Blockly.Msg[\"IOS_VARIABLES_EMPTY_NAME_ERROR\"] = \"You can't use an empty variable name.\";\n  Blockly.Msg[\"IOS_VARIABLES_RENAME_BUTTON\"] = \"Rename\";\n  Blockly.Msg[\"IOS_VARIABLES_VARIABLE_NAME\"] = \"Variable name\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-empty-list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TITLE\"] = \"create empty list\";\n  Blockly.Msg[\"LISTS_CREATE_EMPTY_TOOLTIP\"] = \"Returns a list, of length 0, containing no data records\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TITLE_ADD\"] = \"list\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this list block.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_INPUT_WITH\"] = \"create list with\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TOOLTIP\"] = \"Add an item to the list.\";\n  Blockly.Msg[\"LISTS_CREATE_WITH_TOOLTIP\"] = \"Create a list with any number of items.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FIRST\"] = \"first\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_END\"] = \"# from end\";\n  Blockly.Msg[\"LISTS_GET_INDEX_FROM_START\"] = \"#\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET\"] = \"get\";\n  Blockly.Msg[\"LISTS_GET_INDEX_GET_REMOVE\"] = \"get and remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_LAST\"] = \"last\";\n  Blockly.Msg[\"LISTS_GET_INDEX_RANDOM\"] = \"random\";\n  Blockly.Msg[\"LISTS_GET_INDEX_REMOVE\"] = \"remove\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FIRST\"] = \"Returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FROM\"] = \"Returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_LAST\"] = \"Returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_RANDOM\"] = \"Returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST\"] = \"Removes and returns the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM\"] = \"Removes and returns the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST\"] = \"Removes and returns the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM\"] = \"Removes and returns a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST\"] = \"Removes the first item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM\"] = \"Removes the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST\"] = \"Removes the last item in a list.\";\n  Blockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM\"] = \"Removes a random item in a list.\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_END\"] = \"to # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_START\"] = \"to #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_END_LAST\"] = \"to last\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-a-sublist\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FIRST\"] = \"get sub-list from first\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_END\"] = \"get sub-list from # from end\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_START\"] = \"get sub-list from #\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TAIL\"] = \"\";\n  Blockly.Msg[\"LISTS_GET_SUBLIST_TOOLTIP\"] = \"Creates a copy of the specified portion of a list.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_END_TOOLTIP\"] = \"%1 is the last item.\";\n  Blockly.Msg[\"LISTS_INDEX_FROM_START_TOOLTIP\"] = \"%1 is the first item.\";\n  Blockly.Msg[\"LISTS_INDEX_OF_FIRST\"] = \"find first occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list\";\n  Blockly.Msg[\"LISTS_INDEX_OF_LAST\"] = \"find last occurrence of item\";\n  Blockly.Msg[\"LISTS_INDEX_OF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.\";\n  Blockly.Msg[\"LISTS_INLIST\"] = \"in list\";\n  Blockly.Msg[\"LISTS_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#is-empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"LISTS_ISEMPTY_TOOLTIP\"] = \"Returns true if the list is empty.\";\n  Blockly.Msg[\"LISTS_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#length-of\";\n  Blockly.Msg[\"LISTS_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"LISTS_LENGTH_TOOLTIP\"] = \"Returns the length of a list.\";\n  Blockly.Msg[\"LISTS_REPEAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\n  Blockly.Msg[\"LISTS_REPEAT_TITLE\"] = \"create list with item %1 repeated %2 times\";\n  Blockly.Msg[\"LISTS_REPEAT_TOOLTIP\"] = \"Creates a list consisting of the given value repeated the specified number of times.\";\n  Blockly.Msg[\"LISTS_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#reversing-a-list\";\n  Blockly.Msg[\"LISTS_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"LISTS_REVERSE_TOOLTIP\"] = \"Reverse a copy of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#in-list--set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_TO\"] = \"as\";\n  Blockly.Msg[\"LISTS_SET_INDEX_INSERT\"] = \"insert at\";\n  Blockly.Msg[\"LISTS_SET_INDEX_SET\"] = \"set\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST\"] = \"Inserts the item at the start of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FROM\"] = \"Inserts the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_LAST\"] = \"Append the item to the end of a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM\"] = \"Inserts the item randomly in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FIRST\"] = \"Sets the first item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FROM\"] = \"Sets the item at the specified position in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_LAST\"] = \"Sets the last item in a list.\";\n  Blockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_RANDOM\"] = \"Sets a random item in a list.\";\n  Blockly.Msg[\"LISTS_SORT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#sorting-a-list\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_ASCENDING\"] = \"ascending\";\n  Blockly.Msg[\"LISTS_SORT_ORDER_DESCENDING\"] = \"descending\";\n  Blockly.Msg[\"LISTS_SORT_TITLE\"] = \"sort %1 %2 %3\";\n  Blockly.Msg[\"LISTS_SORT_TOOLTIP\"] = \"Sort a copy of a list.\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_IGNORECASE\"] = \"alphabetic, ignore case\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_NUMERIC\"] = \"numeric\";\n  Blockly.Msg[\"LISTS_SORT_TYPE_TEXT\"] = \"alphabetic\";\n  Blockly.Msg[\"LISTS_SPLIT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists\";\n  Blockly.Msg[\"LISTS_SPLIT_LIST_FROM_TEXT\"] = \"make list from text\";\n  Blockly.Msg[\"LISTS_SPLIT_TEXT_FROM_LIST\"] = \"make text from list\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_JOIN\"] = \"Join a list of texts into one text, separated by a delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_TOOLTIP_SPLIT\"] = \"Split text into a list of texts, breaking at each delimiter.\";\n  Blockly.Msg[\"LISTS_SPLIT_WITH_DELIMITER\"] = \"with delimiter\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_FALSE\"] = \"false\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#values\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TOOLTIP\"] = \"Returns either true or false.\";\n  Blockly.Msg[\"LOGIC_BOOLEAN_TRUE\"] = \"true\";\n  Blockly.Msg[\"LOGIC_COMPARE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Inequality_(mathematics)\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_EQ\"] = \"Return true if both inputs equal each other.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GT\"] = \"Return true if the first input is greater than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GTE\"] = \"Return true if the first input is greater than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LT\"] = \"Return true if the first input is smaller than the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LTE\"] = \"Return true if the first input is smaller than or equal to the second input.\";\n  Blockly.Msg[\"LOGIC_COMPARE_TOOLTIP_NEQ\"] = \"Return true if both inputs are not equal to each other.\";\n  Blockly.Msg[\"LOGIC_NEGATE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#not\";\n  Blockly.Msg[\"LOGIC_NEGATE_TITLE\"] = \"not %1\";\n  Blockly.Msg[\"LOGIC_NEGATE_TOOLTIP\"] = \"Returns true if the input is false. Returns false if the input is true.\";\n  Blockly.Msg[\"LOGIC_NULL\"] = \"null\";\n  Blockly.Msg[\"LOGIC_NULL_HELPURL\"] = \"https://en.wikipedia.org/wiki/Nullable_type\";\n  Blockly.Msg[\"LOGIC_NULL_TOOLTIP\"] = \"Returns null.\";\n  Blockly.Msg[\"LOGIC_OPERATION_AND\"] = \"and\";\n  Blockly.Msg[\"LOGIC_OPERATION_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#logical-operations\";\n  Blockly.Msg[\"LOGIC_OPERATION_OR\"] = \"or\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_AND\"] = \"Return true if both inputs are true.\";\n  Blockly.Msg[\"LOGIC_OPERATION_TOOLTIP_OR\"] = \"Return true if at least one of the inputs is true.\";\n  Blockly.Msg[\"LOGIC_TERNARY_CONDITION\"] = \"test\";\n  Blockly.Msg[\"LOGIC_TERNARY_HELPURL\"] = \"https://en.wikipedia.org/wiki/%3F:\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_FALSE\"] = \"if false\";\n  Blockly.Msg[\"LOGIC_TERNARY_IF_TRUE\"] = \"if true\";\n  Blockly.Msg[\"LOGIC_TERNARY_TOOLTIP\"] = \"Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.\";\n  Blockly.Msg[\"MATH_ADDITION_SYMBOL\"] = \"+\";\n  Blockly.Msg[\"MATH_ARITHMETIC_HELPURL\"] = \"https://en.wikipedia.org/wiki/Arithmetic\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_ADD\"] = \"Return the sum of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_DIVIDE\"] = \"Return the quotient of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MINUS\"] = \"Return the difference of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MULTIPLY\"] = \"Return the product of the two numbers.\";\n  Blockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_POWER\"] = \"Return the first number raised to the power of the second number.\";\n  Blockly.Msg[\"MATH_ATAN2_HELPURL\"] = \"https://en.wikipedia.org/wiki/Atan2\";\n  Blockly.Msg[\"MATH_ATAN2_TITLE\"] = \"atan2 of X:%1 Y:%2\";\n  Blockly.Msg[\"MATH_ATAN2_TOOLTIP\"] = \"Return the arctangent of point (X, Y) in degrees from -180 to 180.\";\n  Blockly.Msg[\"MATH_CHANGE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter\";\n  Blockly.Msg[\"MATH_CHANGE_TITLE\"] = \"change %1 by %2\";\n  Blockly.Msg[\"MATH_CHANGE_TOOLTIP\"] = \"Add a number to variable '%1'.\";\n  Blockly.Msg[\"MATH_CONSTANT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Mathematical_constant\";\n  Blockly.Msg[\"MATH_CONSTANT_TOOLTIP\"] = \"Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).\";\n  Blockly.Msg[\"MATH_CONSTRAIN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Clamping_(graphics)\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TITLE\"] = \"constrain %1 low %2 high %3\";\n  Blockly.Msg[\"MATH_CONSTRAIN_TOOLTIP\"] = \"Constrain a number to be between the specified limits (inclusive).\";\n  Blockly.Msg[\"MATH_DIVISION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_IS_DIVISIBLE_BY\"] = \"is divisible by\";\n  Blockly.Msg[\"MATH_IS_EVEN\"] = \"is even\";\n  Blockly.Msg[\"MATH_IS_NEGATIVE\"] = \"is negative\";\n  Blockly.Msg[\"MATH_IS_ODD\"] = \"is odd\";\n  Blockly.Msg[\"MATH_IS_POSITIVE\"] = \"is positive\";\n  Blockly.Msg[\"MATH_IS_PRIME\"] = \"is prime\";\n  Blockly.Msg[\"MATH_IS_TOOLTIP\"] = \"Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.\";\n  Blockly.Msg[\"MATH_IS_WHOLE\"] = \"is whole\";\n  Blockly.Msg[\"MATH_MODULO_HELPURL\"] = \"https://en.wikipedia.org/wiki/Modulo_operation\";\n  Blockly.Msg[\"MATH_MODULO_TITLE\"] = \"remainder of %1  %2\";\n  Blockly.Msg[\"MATH_MODULO_TOOLTIP\"] = \"Return the remainder from dividing the two numbers.\";\n  Blockly.Msg[\"MATH_MULTIPLICATION_SYMBOL\"] = \"\";\n  Blockly.Msg[\"MATH_NUMBER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Number\";\n  Blockly.Msg[\"MATH_NUMBER_TOOLTIP\"] = \"A number.\";\n  Blockly.Msg[\"MATH_ONLIST_HELPURL\"] = \"\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_AVERAGE\"] = \"average of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MAX\"] = \"max of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MEDIAN\"] = \"median of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MIN\"] = \"min of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_MODE\"] = \"modes of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_RANDOM\"] = \"random item of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_STD_DEV\"] = \"standard deviation of list\";\n  Blockly.Msg[\"MATH_ONLIST_OPERATOR_SUM\"] = \"sum of list\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_AVERAGE\"] = \"Return the average (arithmetic mean) of the numeric values in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MAX\"] = \"Return the largest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MEDIAN\"] = \"Return the median number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MIN\"] = \"Return the smallest number in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_MODE\"] = \"Return a list of the most common item(s) in the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_RANDOM\"] = \"Return a random element from the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_STD_DEV\"] = \"Return the standard deviation of the list.\";\n  Blockly.Msg[\"MATH_ONLIST_TOOLTIP_SUM\"] = \"Return the sum of all the numbers in the list.\";\n  Blockly.Msg[\"MATH_POWER_SYMBOL\"] = \"^\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TITLE_RANDOM\"] = \"random fraction\";\n  Blockly.Msg[\"MATH_RANDOM_FLOAT_TOOLTIP\"] = \"Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).\";\n  Blockly.Msg[\"MATH_RANDOM_INT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TITLE\"] = \"random integer from %1 to %2\";\n  Blockly.Msg[\"MATH_RANDOM_INT_TOOLTIP\"] = \"Return a random integer between the two specified limits, inclusive.\";\n  Blockly.Msg[\"MATH_ROUND_HELPURL\"] = \"https://en.wikipedia.org/wiki/Rounding\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUND\"] = \"round\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDDOWN\"] = \"round down\";\n  Blockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDUP\"] = \"round up\";\n  Blockly.Msg[\"MATH_ROUND_TOOLTIP\"] = \"Round a number up or down.\";\n  Blockly.Msg[\"MATH_SINGLE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Square_root\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ABSOLUTE\"] = \"absolute\";\n  Blockly.Msg[\"MATH_SINGLE_OP_ROOT\"] = \"square root\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ABS\"] = \"Return the absolute value of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_EXP\"] = \"Return e to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LN\"] = \"Return the natural logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_LOG10\"] = \"Return the base 10 logarithm of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_NEG\"] = \"Return the negation of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_POW10\"] = \"Return 10 to the power of a number.\";\n  Blockly.Msg[\"MATH_SINGLE_TOOLTIP_ROOT\"] = \"Return the square root of a number.\";\n  Blockly.Msg[\"MATH_SUBTRACTION_SYMBOL\"] = \"-\";\n  Blockly.Msg[\"MATH_TRIG_ACOS\"] = \"acos\";\n  Blockly.Msg[\"MATH_TRIG_ASIN\"] = \"asin\";\n  Blockly.Msg[\"MATH_TRIG_ATAN\"] = \"atan\";\n  Blockly.Msg[\"MATH_TRIG_COS\"] = \"cos\";\n  Blockly.Msg[\"MATH_TRIG_HELPURL\"] = \"https://en.wikipedia.org/wiki/Trigonometric_functions\";\n  Blockly.Msg[\"MATH_TRIG_SIN\"] = \"sin\";\n  Blockly.Msg[\"MATH_TRIG_TAN\"] = \"tan\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ACOS\"] = \"Return the arccosine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ASIN\"] = \"Return the arcsine of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_ATAN\"] = \"Return the arctangent of a number.\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_COS\"] = \"Return the cosine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_SIN\"] = \"Return the sine of a degree (not radian).\";\n  Blockly.Msg[\"MATH_TRIG_TOOLTIP_TAN\"] = \"Return the tangent of a degree (not radian).\";\n  Blockly.Msg[\"NEW_COLOUR_VARIABLE\"] = \"Create colour variable...\";\n  Blockly.Msg[\"NEW_NUMBER_VARIABLE\"] = \"Create number variable...\";\n  Blockly.Msg[\"NEW_STRING_VARIABLE\"] = \"Create string variable...\";\n  Blockly.Msg[\"NEW_VARIABLE\"] = \"Create variable...\";\n  Blockly.Msg[\"NEW_VARIABLE_TITLE\"] = \"New variable name:\";\n  Blockly.Msg[\"NEW_VARIABLE_TYPE_TITLE\"] = \"New variable type:\";\n  Blockly.Msg[\"ORDINAL_NUMBER_SUFFIX\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_ALLOW_STATEMENTS\"] = \"allow statements\";\n  Blockly.Msg[\"PROCEDURES_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLNORETURN_TOOLTIP\"] = \"Run the user-defined function '%1'.\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_CALLRETURN_TOOLTIP\"] = \"Run the user-defined function '%1' and use its output.\";\n  Blockly.Msg[\"PROCEDURES_CALL_BEFORE_PARAMS\"] = \"with:\";\n  Blockly.Msg[\"PROCEDURES_CREATE_DO\"] = \"Create '%1'\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"] = \"Describe this function...\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"] = \"\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"] = \"do something\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"] = \"to\";\n  Blockly.Msg[\"PROCEDURES_DEFNORETURN_TOOLTIP\"] = \"Creates a function with no output.\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_RETURN\"] = \"return\";\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TOOLTIP\"] = \"Creates a function with an output.\";\n  Blockly.Msg[\"PROCEDURES_DEF_DUPLICATE_WARNING\"] = \"Warning: This function has duplicate parameters.\";\n  Blockly.Msg[\"PROCEDURES_HIGHLIGHT_DEF\"] = \"Highlight function definition\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_HELPURL\"] = \"http://c2.com/cgi/wiki?GuardClause\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_TOOLTIP\"] = \"If a value is true, then return a second value.\";\n  Blockly.Msg[\"PROCEDURES_IFRETURN_WARNING\"] = \"Warning: This block may be used only within a function definition.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TITLE\"] = \"input name:\";\n  Blockly.Msg[\"PROCEDURES_MUTATORARG_TOOLTIP\"] = \"Add an input to the function.\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TITLE\"] = \"inputs\";\n  Blockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TOOLTIP\"] = \"Add, remove, or reorder inputs to this function.\";\n  Blockly.Msg[\"REDO\"] = \"Redo\";\n  Blockly.Msg[\"REMOVE_COMMENT\"] = \"Remove Comment\";\n  Blockly.Msg[\"RENAME_VARIABLE\"] = \"Rename variable...\";\n  Blockly.Msg[\"RENAME_VARIABLE_TITLE\"] = \"Rename all '%1' variables to:\";\n  Blockly.Msg[\"TEXT_APPEND_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_APPEND_TITLE\"] = \"to %1 append text %2\";\n  Blockly.Msg[\"TEXT_APPEND_TOOLTIP\"] = \"Append some text to variable '%1'.\";\n  Blockly.Msg[\"TEXT_CHANGECASE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#adjusting-text-case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_LOWERCASE\"] = \"to lower case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_TITLECASE\"] = \"to Title Case\";\n  Blockly.Msg[\"TEXT_CHANGECASE_OPERATOR_UPPERCASE\"] = \"to UPPER CASE\";\n  Blockly.Msg[\"TEXT_CHANGECASE_TOOLTIP\"] = \"Return a copy of the text in a different case.\";\n  Blockly.Msg[\"TEXT_CHARAT_FIRST\"] = \"get first letter\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_END\"] = \"get letter # from end\";\n  Blockly.Msg[\"TEXT_CHARAT_FROM_START\"] = \"get letter #\";\n  Blockly.Msg[\"TEXT_CHARAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-text\";\n  Blockly.Msg[\"TEXT_CHARAT_LAST\"] = \"get last letter\";\n  Blockly.Msg[\"TEXT_CHARAT_RANDOM\"] = \"get random letter\";\n  Blockly.Msg[\"TEXT_CHARAT_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_CHARAT_TITLE\"] = \"in text %1 %2\";\n  Blockly.Msg[\"TEXT_CHARAT_TOOLTIP\"] = \"Returns the letter at the specified position.\";\n  Blockly.Msg[\"TEXT_COUNT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#counting-substrings\";\n  Blockly.Msg[\"TEXT_COUNT_MESSAGE0\"] = \"count %1 in %2\";\n  Blockly.Msg[\"TEXT_COUNT_TOOLTIP\"] = \"Count how many times some text occurs within some other text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TOOLTIP\"] = \"Add an item to the text.\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TITLE_JOIN\"] = \"join\";\n  Blockly.Msg[\"TEXT_CREATE_JOIN_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this text block.\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_END\"] = \"to letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_START\"] = \"to letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_END_LAST\"] = \"to last letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_INPUT_IN_TEXT\"] = \"in text\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FIRST\"] = \"get substring from first letter\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_END\"] = \"get substring from letter # from end\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_START\"] = \"get substring from letter #\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TAIL\"] = \"\";\n  Blockly.Msg[\"TEXT_GET_SUBSTRING_TOOLTIP\"] = \"Returns a specified portion of the text.\";\n  Blockly.Msg[\"TEXT_INDEXOF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#finding-text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_FIRST\"] = \"find first occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_OPERATOR_LAST\"] = \"find last occurrence of text\";\n  Blockly.Msg[\"TEXT_INDEXOF_TITLE\"] = \"in text %1 %2 %3\";\n  Blockly.Msg[\"TEXT_INDEXOF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.\";\n  Blockly.Msg[\"TEXT_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#checking-for-empty-text\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TITLE\"] = \"%1 is empty\";\n  Blockly.Msg[\"TEXT_ISEMPTY_TOOLTIP\"] = \"Returns true if the provided text is empty.\";\n  Blockly.Msg[\"TEXT_JOIN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-creation\";\n  Blockly.Msg[\"TEXT_JOIN_TITLE_CREATEWITH\"] = \"create text with\";\n  Blockly.Msg[\"TEXT_JOIN_TOOLTIP\"] = \"Create a piece of text by joining together any number of items.\";\n  Blockly.Msg[\"TEXT_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\n  Blockly.Msg[\"TEXT_LENGTH_TITLE\"] = \"length of %1\";\n  Blockly.Msg[\"TEXT_LENGTH_TOOLTIP\"] = \"Returns the number of letters (including spaces) in the provided text.\";\n  Blockly.Msg[\"TEXT_PRINT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#printing-text\";\n  Blockly.Msg[\"TEXT_PRINT_TITLE\"] = \"print %1\";\n  Blockly.Msg[\"TEXT_PRINT_TOOLTIP\"] = \"Print the specified text, number or other value.\";\n  Blockly.Msg[\"TEXT_PROMPT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#getting-input-from-the-user\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_NUMBER\"] = \"Prompt for user for a number.\";\n  Blockly.Msg[\"TEXT_PROMPT_TOOLTIP_TEXT\"] = \"Prompt for user for some text.\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_NUMBER\"] = \"prompt for number with message\";\n  Blockly.Msg[\"TEXT_PROMPT_TYPE_TEXT\"] = \"prompt for text with message\";\n  Blockly.Msg[\"TEXT_REPLACE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#replacing-substrings\";\n  Blockly.Msg[\"TEXT_REPLACE_MESSAGE0\"] = \"replace %1 with %2 in %3\";\n  Blockly.Msg[\"TEXT_REPLACE_TOOLTIP\"] = \"Replace all occurances of some text within some other text.\";\n  Blockly.Msg[\"TEXT_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#reversing-text\";\n  Blockly.Msg[\"TEXT_REVERSE_MESSAGE0\"] = \"reverse %1\";\n  Blockly.Msg[\"TEXT_REVERSE_TOOLTIP\"] = \"Reverses the order of the characters in the text.\";\n  Blockly.Msg[\"TEXT_TEXT_HELPURL\"] = \"https://en.wikipedia.org/wiki/String_(computer_science)\";\n  Blockly.Msg[\"TEXT_TEXT_TOOLTIP\"] = \"A letter, word, or line of text.\";\n  Blockly.Msg[\"TEXT_TRIM_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#trimming-removing-spaces\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_BOTH\"] = \"trim spaces from both sides of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_LEFT\"] = \"trim spaces from left side of\";\n  Blockly.Msg[\"TEXT_TRIM_OPERATOR_RIGHT\"] = \"trim spaces from right side of\";\n  Blockly.Msg[\"TEXT_TRIM_TOOLTIP\"] = \"Return a copy of the text with spaces removed from one or both ends.\";\n  Blockly.Msg[\"TODAY\"] = \"Today\";\n  Blockly.Msg[\"UNDO\"] = \"Undo\";\n  Blockly.Msg[\"UNNAMED_KEY\"] = \"unnamed\";\n  Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"] = \"item\";\n  Blockly.Msg[\"VARIABLES_GET_CREATE_SET\"] = \"Create 'set %1'\";\n  Blockly.Msg[\"VARIABLES_GET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#get\";\n  Blockly.Msg[\"VARIABLES_GET_TOOLTIP\"] = \"Returns the value of this variable.\";\n  Blockly.Msg[\"VARIABLES_SET\"] = \"set %1 to %2\";\n  Blockly.Msg[\"VARIABLES_SET_CREATE_GET\"] = \"Create 'get %1'\";\n  Blockly.Msg[\"VARIABLES_SET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#set\";\n  Blockly.Msg[\"VARIABLES_SET_TOOLTIP\"] = \"Sets this variable to be equal to the input.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS\"] = \"A variable named '%1' already exists.\";\n  Blockly.Msg[\"VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE\"] = \"A variable named '%1' already exists for another type: '%2'.\";\n  Blockly.Msg[\"WORKSPACE_ARIA_LABEL\"] = \"Blockly Workspace\";\n  Blockly.Msg[\"WORKSPACE_COMMENT_DEFAULT_TEXT\"] = \"Say something...\";\n  Blockly.Msg[\"CONTROLS_FOREACH_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_FOR_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSEIF_TITLE_ELSEIF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"];\n  Blockly.Msg[\"CONTROLS_IF_ELSE_TITLE_ELSE\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"];\n  Blockly.Msg[\"CONTROLS_IF_IF_TITLE_IF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_IF\"];\n  Blockly.Msg[\"CONTROLS_IF_MSG_THEN\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"CONTROLS_WHILEUNTIL_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\n  Blockly.Msg[\"LISTS_CREATE_WITH_ITEM_TITLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_HELPURL\"] = Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"];\n  Blockly.Msg[\"LISTS_GET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_GET_SUBLIST_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_INDEX_OF_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"LISTS_SET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\n  Blockly.Msg[\"MATH_CHANGE_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_COMMENT\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_DO\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_PROCEDURE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"];\n  Blockly.Msg[\"PROCEDURES_DEFRETURN_TITLE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"];\n  Blockly.Msg[\"TEXT_APPEND_VARIABLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n  Blockly.Msg[\"MATH_HUE\"] = \"230\";\n  Blockly.Msg[\"LOOPS_HUE\"] = \"120\";\n  Blockly.Msg[\"LISTS_HUE\"] = \"260\";\n  Blockly.Msg[\"LOGIC_HUE\"] = \"210\";\n  Blockly.Msg[\"VARIABLES_HUE\"] = \"330\";\n  Blockly.Msg[\"TEXTS_HUE\"] = \"160\";\n  Blockly.Msg[\"PROCEDURES_HUE\"] = \"290\";\n  Blockly.Msg[\"COLOUR_HUE\"] = \"20\";\n  Blockly.Msg[\"VARIABLES_DYNAMIC_HUE\"] = \"310\";\n  return Blockly.Msg;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _useBlocklyWorkspace2 = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar propTypes = {\n  initialXml: _propTypes.default.string,\n  toolboxConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  workspaceConfiguration: _propTypes.default.object,\n  // eslint-disable-line react/forbid-prop-types\n  className: _propTypes.default.string,\n  onWorkspaceChange: _propTypes.default.func,\n  onImportXmlError: _propTypes.default.func,\n  onXmlChange: _propTypes.default.func,\n  onInject: _propTypes.default.func,\n  onDispose: _propTypes.default.func\n};\nvar defaultProps = {\n  initialXml: null,\n  toolboxConfiguration: null,\n  workspaceConfiguration: null,\n  className: null,\n  onWorkspaceChange: null,\n  onImportXmlError: null,\n  onXmlChange: null,\n  onInject: null,\n  onDispose: null\n};\n\nfunction BlocklyWorkspace(_ref) {\n  var initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      className = _ref.className,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onXmlChange = _ref.onXmlChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var editorDiv = _react.default.useRef(null);\n\n  var _useBlocklyWorkspace = (0, _useBlocklyWorkspace2.default)({\n    ref: editorDiv,\n    initialXml: initialXml,\n    toolboxConfiguration: toolboxConfiguration,\n    workspaceConfiguration: workspaceConfiguration,\n    onWorkspaceChange: onWorkspaceChange,\n    onImportXmlError: onImportXmlError,\n    onInject: onInject,\n    onDispose: onDispose\n  }),\n      xml = _useBlocklyWorkspace.xml;\n\n  var onXmlChangeRef = _react.default.useRef(onXmlChange);\n\n  _react.default.useEffect(function () {\n    onXmlChangeRef.current = onXmlChange;\n  }, [onXmlChange]);\n\n  _react.default.useEffect(function () {\n    if (onXmlChangeRef.current && xml) {\n      onXmlChangeRef.current(xml);\n    }\n  }, [xml]);\n\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: className,\n    ref: editorDiv\n  });\n}\n\nBlocklyWorkspace.propTypes = propTypes;\nBlocklyWorkspace.defaultProps = defaultProps;\nvar _default = BlocklyWorkspace;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = debounce;\n\nfunction debounce(func, wait) {\n  var timeout = null;\n  var later = null;\n\n  var debouncedFunction = function debouncedFunction() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    later = function later() {\n      timeout = null;\n      func.apply(void 0, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n\n  var cancel = function cancel() {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      later();\n    }\n  };\n\n  return [debouncedFunction, cancel];\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"useBlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _useBlocklyWorkspace.default;\n  }\n});\nObject.defineProperty(exports, \"BlocklyWorkspace\", {\n  enumerable: true,\n  get: function get() {\n    return _BlocklyWorkspace.default;\n  }\n});\n\nvar _useBlocklyWorkspace = _interopRequireDefault(require(\"./useBlocklyWorkspace\"));\n\nvar _BlocklyWorkspace = _interopRequireDefault(require(\"./BlocklyWorkspace\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _blockly = _interopRequireDefault(require(\"blockly\"));\n\nvar _debounce3 = _interopRequireDefault(require(\"./debounce\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction importFromXml(xml, workspace, onImportXmlError) {\n  try {\n    _blockly.default.Xml.domToWorkspace(_blockly.default.Xml.textToDom(xml), workspace);\n\n    return true;\n  } catch (e) {\n    if (onImportXmlError) {\n      onImportXmlError(e);\n    }\n\n    return false;\n  }\n}\n\nvar useBlocklyWorkspace = function useBlocklyWorkspace(_ref) {\n  var ref = _ref.ref,\n      initialXml = _ref.initialXml,\n      toolboxConfiguration = _ref.toolboxConfiguration,\n      workspaceConfiguration = _ref.workspaceConfiguration,\n      onWorkspaceChange = _ref.onWorkspaceChange,\n      onImportXmlError = _ref.onImportXmlError,\n      onInject = _ref.onInject,\n      onDispose = _ref.onDispose;\n\n  var _React$useState = _react.default.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      workspace = _React$useState2[0],\n      setWorkspace = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(initialXml),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      xml = _React$useState4[0],\n      setXml = _React$useState4[1];\n\n  var _React$useState5 = _react.default.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      didInitialImport = _React$useState6[0],\n      setDidInitialImport = _React$useState6[1];\n\n  var _React$useState7 = _react.default.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      didHandleNewWorkspace = _React$useState8[0],\n      setDidHandleNewWorkspace = _React$useState8[1]; // we explicitly don't want to recreate the workspace when the configuration changes\n  // so, we'll keep it in a ref and update as necessary in an effect hook\n\n\n  var workspaceConfigurationRef = _react.default.useRef(workspaceConfiguration);\n\n  _react.default.useEffect(function () {\n    workspaceConfigurationRef.current = workspaceConfiguration;\n  }, [workspaceConfiguration]);\n\n  var toolboxConfigurationRef = _react.default.useRef(toolboxConfiguration);\n\n  _react.default.useEffect(function () {\n    toolboxConfigurationRef.current = toolboxConfiguration;\n\n    if (toolboxConfiguration && workspace) {\n      workspace.updateToolbox(toolboxConfiguration);\n    }\n  }, [toolboxConfiguration, workspace]);\n\n  var onInjectRef = _react.default.useRef(onInject);\n\n  var onDisposeRef = _react.default.useRef(onDispose);\n\n  _react.default.useEffect(function () {\n    onInjectRef.current = onInject;\n  }, [onInject]);\n\n  _react.default.useEffect(function () {\n    onDisposeRef.current = onDispose;\n  }, [onDispose]);\n\n  var handleWorkspaceChanged = _react.default.useCallback(function (newWorkspace) {\n    if (onWorkspaceChange) {\n      onWorkspaceChange(newWorkspace);\n    }\n  }, [onWorkspaceChange]); // Workspace creation\n\n\n  _react.default.useEffect(function () {\n    var newWorkspace = _blockly.default.inject(ref.current, _objectSpread(_objectSpread({}, workspaceConfigurationRef.current), {}, {\n      toolbox: toolboxConfigurationRef.current\n    }));\n\n    setWorkspace(newWorkspace);\n    setDidInitialImport(false); // force a re-import if we recreate the workspace\n\n    setDidHandleNewWorkspace(false); // Singal that a workspace change event needs to be sent.\n\n    if (onInjectRef.current) {\n      onInjectRef.current(newWorkspace);\n    }\n\n    var onDisposeFunction = onDisposeRef.current; // Dispose of the workspace when our div ref goes away (Equivalent to didComponentUnmount)\n\n    return function () {\n      newWorkspace.dispose();\n\n      if (onDisposeFunction) {\n        onDisposeFunction(newWorkspace);\n      }\n    };\n  }, [ref]); // Send a workspace change event when the workspace is created\n\n\n  _react.default.useEffect(function () {\n    if (workspace && !didHandleNewWorkspace) {\n      handleWorkspaceChanged(workspace);\n    }\n  }, [handleWorkspaceChanged, didHandleNewWorkspace, workspace]); // Workspace change listener\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var listener = function listener() {\n      handleWorkspaceChanged(workspace);\n    };\n\n    workspace.addChangeListener(listener);\n    return function () {\n      workspace.removeChangeListener(listener);\n    };\n  }, [workspace, handleWorkspaceChanged]); // xmlDidChange callback\n\n\n  _react.default.useEffect(function () {\n    if (workspace == null) {\n      return undefined;\n    }\n\n    var _debounce = (0, _debounce3.default)(function () {\n      var newXml = _blockly.default.Xml.domToText(_blockly.default.Xml.workspaceToDom(workspace));\n\n      if (newXml === xml) {\n        return;\n      }\n\n      setXml(newXml);\n    }, 200),\n        _debounce2 = _slicedToArray(_debounce, 2),\n        callback = _debounce2[0],\n        cancel = _debounce2[1];\n\n    workspace.addChangeListener(callback);\n    return function () {\n      workspace.removeChangeListener(callback);\n      cancel();\n    };\n  }, [workspace, xml]); // Initial Xml Changes\n\n\n  _react.default.useEffect(function () {\n    if (xml && workspace && !didInitialImport) {\n      var success = importFromXml(xml, workspace, onImportXmlError);\n\n      if (!success) {\n        setXml(null);\n      }\n\n      setDidInitialImport(true);\n    }\n  }, [xml, workspace, didInitialImport, onImportXmlError]);\n\n  return {\n    workspace: workspace,\n    xml: xml\n  };\n};\n\nvar _default = useBlocklyWorkspace;\nexports.default = _default;","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export interface VMError {\n    sourceId?: string\n    code?: number\n    message: string\n}\n\nexport interface VMBase {\n    type: \"ite\" | \"cmd\"\n    sourceId?: string\n}\n\nexport interface VMIfThenElse extends VMBase {\n    type: \"ite\"\n    expr: jsep.Expression\n    then?: VMBase[]\n    else?: VMBase[]\n}\n\nexport interface VMCommand extends VMBase {\n    type: \"cmd\"\n    command: jsep.CallExpression\n}\n\nexport interface VMHandler {\n    commands: VMBase[]\n    roles?: string[]\n    errors?: VMError[]\n    // this handler support the editing experience but\n    // should not be compiled down or debugged\n    meta?: boolean\n}\n\nexport interface VMRole {\n    role: string\n    serviceShortId: string\n}\n\nexport interface VMProgram {\n    roles: VMRole[]\n    handlers: VMHandler[]\n}\n\nexport type VMFunctionNames =\n    | \"awaitEvent\"\n    | \"awaitRegister\"\n    | \"awaitChange\"\n    | \"awaitCondition\"\n    | \"wait\"\n    | \"writeRegister\"\n    | \"writeLocal\"\n    | \"halt\"\n    | \"label\"\n    | \"jump\"\n    | \"branchOnCondition\"\n    | \"watch\"\n    | \"log\"\n\nexport const VMFunctions: jdtest.TestFunctionDescription[] = [\n    {\n        id: \"label\",\n        args: [\"Identifier\"],\n        prompt: `label target {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"jump\",\n        args: [\"Identifier\"],\n        prompt: `jump to label {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"branchOnCondition\",\n        args: [\"boolean\", \"Identifier\"],\n        prompt: `if {1} then jump to label {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitRegister\",\n        args: [\"register\"],\n        prompt: `wait on register {1} to change value`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitChange\",\n        args: [\"register\", \"number\"],\n        prompt: `wait for register {1} to change by {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"wait\",\n        args: [\"number\"],\n        prompt: `wait for {1} milliseconds`,\n        context: \"command\",\n    },\n    {\n        id: \"watch\",\n        args: [\"number\"],\n        prompt: `watch expression {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"log\",\n        args: [\"number\"],\n        prompt: `not used`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitEvent\",\n        args: [\"event\", [\"boolean\", true]],\n        prompt: `wait for event {1} and then check {2} (other events ignored)`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitCondition\",\n        args: [\"boolean\"],\n        prompt: `wait for condition {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"writeRegister\",\n        args: [\"register\", \"number\"],\n        prompt: `write value {2:val} to {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"writeLocal\",\n        args: [\"register\", \"number\"],\n        prompt: `write value {2:val} to {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"halt\",\n        args: [],\n        prompt: `terminates the current handler`,\n        context: \"command\",\n    },\n    {\n        id: \"nop\",\n        args: [],\n        prompt: `no operation`,\n        context: \"command\",\n    },\n    {\n        id: \"onRoleConnected\",\n        args: [\"Identifier\"],\n        prompt: `fires when a role is connected`,\n        context: \"command\",\n    },\n    {\n        id: \"onRoleDisconnected\",\n        args: [\"Identifier\"],\n        prompt: `fires when a role is disconnected`,\n        context: \"command\",\n    },\n    {\n        id: \"start\",\n        args: [],\n        prompt: `start block`,\n        context: \"command\",\n    },\n]\n","import { serviceSpecificationFromName } from \"../jdom/spec\"\nimport {\n    VMBase,\n    VMCommand,\n    VMError,\n    VMHandler,\n    VMIfThenElse,\n    VMProgram,\n    VMFunctions\n} from \"./ir\"\nimport {\n    VMChecker,\n    SpecSymbolResolver,\n} from \"../../jacdac-spec/spectool/jdutils\"\nimport { assert } from \"../jdom/utils\"\n\n\nexport function toIdentifier(id: string) {\n    return {\n        type: \"Identifier\",\n        name: id,\n    } as jsep.Identifier\n}\n\nexport function toMemberExpression(\n    root: string,\n    field: string | jsep.Expression\n) {\n    return {\n        type: \"MemberExpression\",\n        object: toIdentifier(root),\n        property: typeof field === \"string\" ? toIdentifier(field) : field,\n        computed: false,\n    } as jsep.MemberExpression\n}\n\nfunction handlerVisitor(\n    handler: VMHandler,\n    visitITE: (ite: VMIfThenElse, time: number) => void,\n    visitCommand: (c: VMCommand) => void\n) {\n    handler.commands.forEach(visitBase)\n\n    function visitBase(base: VMBase) {\n        switch (base.type) {\n            case \"cmd\": {\n                if (visitCommand) visitCommand(base as VMCommand)\n                break\n            }\n            case \"ite\": {\n                const ite = base as VMIfThenElse\n                if (visitITE) visitITE(ite, 0)\n                ite?.else?.forEach(visitBase)\n                if (visitITE) visitITE(ite, 1)\n                ite?.then?.forEach(visitBase)\n                if (visitITE) visitITE(ite, 2)\n            }\n        }\n    }\n}\n\nexport function compileProgram(prog: VMProgram) {\n    const newProgram: VMProgram = { roles: prog.roles.slice(0), handlers: [] }\n    // process start blocks\n    prog.handlers.forEach(startBlock)\n    // remove if-then-else\n    newProgram.handlers = prog.handlers.map(h => {\n        return { commands: removeIfThenElse(h), errors: h?.errors }\n    })\n    return newProgram\n}\n\nfunction checkCall(cmd: VMBase, id: string) {\n    if (cmd.type === \"cmd\") {\n        const callee = (cmd as VMCommand).command.callee \n        if (callee.type === \"Identifier\") {\n            const cid = (callee as jsep.Identifier).name\n            return id === cid \n        }\n    }\n    return undefined\n}\n\nfunction startBlock(handler: VMHandler) {\n    if (handler.commands.length && checkCall(handler.commands[0], \"start\")) {\n        handler.commands.shift()\n        handler.commands.push({\n            type: \"cmd\",\n            command: {\n                type: \"CallExpression\",\n                callee: toIdentifier(\"halt\"),\n                arguments: []\n            } \n        } as VMCommand )\n    }\n}\n\nfunction removeIfThenElse(handler: VMHandler): VMBase[] {\n    const newSequence: VMCommand[] = []\n    const labels: { then: string; end: string }[] = []\n    let labelId = 1\n    handlerVisitor(\n        handler,\n        (ite, time) => {\n            switch (time) {\n                case 0: {\n                    // create the labels and branch instruction\n                    const then = `then_${labelId}`\n                    const end = `end_${labelId}`\n                    labels.push({ then, end })\n                    labelId++\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"branchOnCondition\"),\n                            arguments: [ite.expr, toIdentifier(then)],\n                        },\n                    })\n                    break\n                }\n                case 1: {\n                    // insert the jump and then label\n                    const { then, end } = labels[labels.length - 1]\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"jump\"),\n                            arguments: [toIdentifier(end)],\n                        },\n                    })\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"label\"),\n                            arguments: [toIdentifier(then)],\n                        },\n                    })\n                    break\n                }\n                case 2: {\n                    assert(labels.length > 0)\n                    const { end } = labels[labels.length - 1]\n                    newSequence.push({\n                        type: \"cmd\",\n                        command: {\n                            type: \"CallExpression\",\n                            callee: toIdentifier(\"label\"),\n                            arguments: [toIdentifier(end)],\n                        },\n                    })\n                    labels.pop()\n                }\n            }\n        },\n        cmd => {\n            newSequence.push(cmd)\n        }\n    )\n    return newSequence\n}\n\nexport interface RoleRegister {\n    role: string\n    register: string\n}\n\nexport interface RoleEvent {\n    role: string\n    event: string\n}\n\nexport const getServiceFromRole = (info: VMProgram) => (role: string) => {\n    // lookup in roles first\n    const shortId = info.roles.find(pair => pair.role === role)\n    if (shortId) {\n        // must succeed\n        const def = serviceSpecificationFromName(shortId.serviceShortId)\n        assert(!!def, `service ${shortId.serviceShortId} not resolved`)\n        return def\n    } else {\n        const service = serviceSpecificationFromName(role)\n        return service\n    }\n}\n\nexport function checkProgram(prog: VMProgram): {\n    registers: RoleRegister[]\n    events: RoleEvent[]\n    errors: VMError[]\n} {\n    const allErrors: VMError[] = []\n    const goodHandlers: VMHandler[] = []\n    const errorFun = (e: string) => {\n        allErrors.push({ sourceId: undefined, message: e })\n    }\n    const symbolResolver = new SpecSymbolResolver(\n        undefined,\n        getServiceFromRole(prog),\n        errorFun\n    )\n    const checker = new VMChecker(symbolResolver, _ => true, errorFun)\n    prog.handlers.forEach(h => {\n        if (h?.errors.length) {\n            h?.errors.forEach(e => allErrors.push(e))\n            return\n        }\n        const errorCount = allErrors.length\n        symbolResolver.roles = []\n        handlerVisitor(h, undefined, c =>\n            checker.checkCommand(c.command, VMFunctions)\n        )\n        if (h?.errors.length === 0 && allErrors.length === errorCount) {\n            h.roles = symbolResolver.roles\n            goodHandlers.push(h)\n        } else {\n            h?.errors.forEach(e => allErrors.push(e))\n        }\n    })\n    prog.handlers = goodHandlers\n\n    return {\n        registers: symbolResolver.registers.map(s => {\n            const [root, fld] = s.split(\".\")\n            return { role: root, register: fld }\n        }),\n        events: symbolResolver.events.map(e => {\n            const [root, fld] = e.split(\".\")\n            return { role: root, event: fld }\n        }),\n        errors: allErrors,\n    }\n}\n","\nexport const VM_EVENT = \"vmEvent\"\n\nexport enum VMCode {\n    WatchChange = \"vmWatchChange\",\n    Breakpoint = \"vmBreakpoint\",\n    CommandStarted = \"vmCommandStarted\",\n    CommandCompleted = \"vmCommandCompleted\",\n    CommandFailed = \"vmCommandFailed\",\n    RoleMissing = \"vmRoleMissing\",\n    VariableValueChange = \"vmVariableChanged\",\n    DynamicTypeError = \"vmDynamicTypeError\", \n    InternalError = \"vmInternalError\",\n    LogEntry = \"vmLogEntry\"\n}\n","import { DependencyList, useEffect } from \"react\"\n\nexport default function useWindowEvent<K extends keyof WindowEventMap>(type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    passive = false,\n    deps: DependencyList) {\n    useEffect(() => {\n        if (typeof window === \"undefined\")\n            return undefined; // SSR\n\n        // initiate the event handler\n        window.addEventListener<K>(type, listener, passive)\n\n        // this will clean up the event every time the component is re-rendered\n        return () => {\n            window.removeEventListener<K>(type, listener)\n        }\n    }, [type, listener, passive].concat(deps || []))\n}","import { useMemo, useContext } from \"react\";\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { makeCodeServices } from \"../../../jacdac-ts/src/jdom/makecode\"\nimport useWindowEvent from \"../hooks/useWindowEvent\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\";\n\nexport interface MakeCodeSnippetSource {\n    code: string;\n    ghost?: string;\n    meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    }\n}\n\nexport interface MakeCodeSnippetRendered {\n    uri?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\n\n\nexport function parseMakeCodeSnippet(source: string): MakeCodeSnippetSource {\n    let ghost: string;\n    let code: string;\n    const meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    } = {\n        dependencies: []\n    }\n\n    if (/^---\\n/.test(source)) {\n        let front: string;\n        const parts = source.replace(/^---\\n/, '').split(/---\\n/gm)\n        switch (parts.length) {\n            case 1: front = ghost = undefined; code = source; break;\n            case 2: [front, code] = parts; break;\n            default: [front, ghost, code] = parts; break;\n        }\n\n        // parse front matter\n        front?.replace(/(.+):\\s*(.+)\\s*\\n/g, (m, name, value) => {\n            switch (name) {\n                case \"dep\": meta.dependencies.push(value); break;\n                case \"snippet\": meta.snippet = !!value; break;\n                default: meta[name] = value;\n            }\n            return \"\";\n        })\n    } else {\n        code = source;\n    }\n\n    // sniff services\n    const mkcds = makeCodeServices()\n    mkcds.filter(info => {\n        const src = (ghost || \"\") + \"\\n\" + (code || \"\");\n        return src.indexOf(info.client.qName) > -1\n            || (info.client.default && src.indexOf(info.client.default) > -1);\n    }).map(info => `${info.client.name.replace(/^pxt-/, '')}=github:${info.client.repo}`)\n        .forEach(dep => meta.dependencies.push(dep));\n\n    // add jacdac by default\n    if (!meta.dependencies.length)\n        meta.dependencies.push(\"jacdac=github:microsoft/pxt-jacdac\");\n\n    // ensure unique deps\n    meta.dependencies = unique(meta.dependencies);\n\n    return {\n        code,\n        ghost,\n        meta\n    }\n}\n\ninterface RenderBlocksRequestMessage {\n    type: \"renderblocks\",\n    id: string;\n    code: string;\n    ghost?: string;\n    options?: {\n        packageId?: string;\n        package?: string;\n        snippetMode?: boolean;\n        dependencies?: string[];\n    }\n}\n\ninterface RenderBlocksResponseMessage {\n    source: \"makecode\",\n    type: \"renderblocks\",\n    id: string;\n    uri?: string;\n    css?: string;\n    svg?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\ninterface RenderBlocksRequentResponse {\n    req: RenderBlocksRequestMessage,\n    resolve: (resp: RenderBlocksResponseMessage) => void,\n    reject: (e: unknown) => void\n}\n\nexport function useMakeCodeRenderer() {\n    const { target, rendererUrl } = useContext(MakeCodeSnippetContext);\n    const lang = \"\"\n    const iframeId = \"makecoderenderer\" + target;\n    const pendingRequests = useMemo<{\n        [index: string]: RenderBlocksRequentResponse\n    }>(() => ({}), [target, lang]);\n\n    const sendRequest = (req: RenderBlocksRequestMessage) => {\n        const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId) as HTMLIFrameElement;\n        if (iframe?.dataset.ready)\n            iframe?.contentWindow.postMessage(req, rendererUrl);\n    }\n\n    const render = (source: MakeCodeSnippetSource): Promise<MakeCodeSnippetRendered> => {\n        const { code, ghost, meta } = source;\n        const { dependencies, snippet } = meta;\n\n        // spin up iframe on demans\n        if (typeof document !== \"undefined\" && !document.getElementById(iframeId)) {\n            console.log(`mkcd: loading iframe`)\n            const f = document.createElement(\"iframe\");\n            f.id = iframeId;\n            f.style.position = \"absolute\";\n            f.style.left = \"0\";\n            f.style.bottom = \"0\";\n            f.style.width = \"1px\";\n            f.style.height = \"1px\";\n            f.src = `${rendererUrl}?render=1${lang ? `&lang=${lang}` : ''}`;\n            document.body.appendChild(f);\n        }\n\n        const req: RenderBlocksRequestMessage = {\n            type: \"renderblocks\",\n            id: \"r\" + Math.random(),\n            code,\n            ghost,\n            options: {\n                dependencies,\n                snippetMode: snippet\n            }\n        }\n        return new Promise<RenderBlocksResponseMessage>((resolve, reject) => {\n            pendingRequests[req.id] = { req, resolve, reject }\n            sendRequest(req);\n        })\n    }\n\n    // listen for messages\n    const handleMessage = (ev: MessageEvent) => {\n        const msg = ev.data;\n        if (msg.source != \"makecode\") return;\n        switch (msg.type) {\n            case \"renderready\": {\n                console.log(`mkcd: renderer ready, ${Object.keys(pendingRequests).length} pending`)\n                const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId)\n                if (iframe) {\n                    console.log(`flushing messages`)\n                    iframe.dataset.ready = \"1\"\n                    Object.keys(pendingRequests)\n                        .forEach(k => sendRequest(pendingRequests[k].req));\n                }\n                break;\n            }\n            case \"renderblocks\": {\n                const id = msg.id; // this is the id you sent\n                const r = pendingRequests[id];\n                if (!r) return;\n                delete pendingRequests[id];\n                r.resolve(msg as RenderBlocksResponseMessage);\n                break;\n            }\n        }\n    }\n\n    useWindowEvent(\"message\", handleMessage, false, [])\n\n    return {\n        render\n    }\n}\n","import { createStyles, makeStyles } from \"@material-ui/core\"\nimport React, { useContext, useEffect, useRef } from \"react\"\nimport {\n    PACKET_PROCESS,\n    PACKET_SEND,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { PacketMessage } from \"../../../jacdac-ts/src/jdom/iframebridgeclient\"\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport PaperBox from \"../ui/PaperBox\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\"\nimport { MakeCodeSnippetSource } from \"./useMakeCodeRenderer\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            width: \"100%\",\n        },\n        root2: {\n            position: \"relative\",\n            paddingTop: \"86.75%\",\n        },\n        iframe: {\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            border: \"none\",\n            width: \"100%\",\n            height: \"100%\",\n        },\n    })\n)\n\nexport default function MakeCodeSimulator(props: {\n    snippet: MakeCodeSnippetSource\n}) {\n    const { simUrl } = useContext(MakeCodeSnippetContext)\n    const { snippet } = props\n    const { code, ghost, meta } = snippet\n    const { dependencies } = meta\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const frameRef = useRef<HTMLIFrameElement>()\n    const classes = useStyles()\n\n    const src = `${ghost || \"\"}\\n${code || \"\"}`\n    const url = `${simUrl}#single=1&fullscren=1&nofooter=1&deps=${encodeURIComponent(\n        dependencies.join(\",\")\n    )}&code=${encodeURIComponent(src)}`\n    const origin = new URL(url).origin\n\n    useEffect(() =>\n        bus.subscribe([PACKET_SEND, PACKET_PROCESS], (pkt: Packet) => {\n            this.packetSent++\n            const msg: PacketMessage = {\n                type: \"messagepacket\",\n                channel: \"jacdac\",\n                broadcast: true,\n                data: pkt.toBuffer(),\n                sender: pkt.sender,\n            }\n            frameRef.current?.contentWindow?.postMessage(msg, origin)\n        })\n    )\n\n    return (\n        <PaperBox>\n            <div className={classes.root}>\n                <div className={classes.root2}>\n                    <iframe\n                        ref={frameRef}\n                        className={classes.iframe}\n                        src={url}\n                        aria-label=\"MakeCode rendering iframe to generate blocks images.\"\n                    />\n                </div>\n            </div>\n        </PaperBox>\n    )\n}\n","import React, { useState, useMemo, useContext } from \"react\";\nimport PaperBox from \"../ui/PaperBox\"\nimport { Tab, Tabs } from '@material-ui/core';\nimport CodeBlock from \"../CodeBlock\";\nimport TabPanel from '../ui/TabPanel';\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\";\nimport { parseMakeCodeSnippet } from \"./useMakeCodeRenderer\";\nimport MakeCodeSimulator from \"./MakeCodeSimulator\";\nimport { withPrefix } from \"gatsby\"\ninterface Rendered {\n    url: string;\n    width: number;\n    height: number;\n}\n\nexport default function MakeCodeSnippet(props: { renderedSource: string }) {\n    const { renderedSource } = props;\n    const { source, rendered } = JSON.parse(renderedSource) as { source: string; rendered: Rendered; }\n    const { height, width, url } = rendered || {};\n    const tabs = [\"blocks\", \"typescript\", \"sim\"]\n    const { editor, setEditor } = useContext(MakeCodeSnippetContext);\n    const [tab, setTab] = useState(tabs.indexOf(editor) || 0);\n    const handleTabChange = (event: React.ChangeEvent<unknown>, newValue: number) => {\n        if (newValue < tabs.length - 1)\n            setEditor(tabs[newValue]);\n        setTab(newValue);\n    };\n    const snippet = useMemo(() => parseMakeCodeSnippet(source), [source]);\n    const { code } = snippet;\n\n    return <PaperBox>\n        <Tabs value={tab} onChange={handleTabChange} aria-label=\"Select MakeCode editor\">\n            <Tab label={\"Blocks\"} />\n            <Tab label={\"JavaScript\"} />\n            <Tab label={\"Simulator\"} />\n        </Tabs>\n        <TabPanel value={tab} index={0}>\n            <img src={withPrefix(url)} alt={source} loading=\"lazy\" />\n        </TabPanel>\n        <TabPanel value={tab} index={1}>\n            <CodeBlock className=\"typescript\">{code}</CodeBlock>\n        </TabPanel>\n        <TabPanel value={tab} index={2}>\n            <MakeCodeSimulator snippet={snippet} />\n        </TabPanel>\n    </PaperBox>\n}\n","import React, { lazy, useContext } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/github\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./ui/DarkModeContext\"\nimport { IconButton, Link } from \"gatsby-theme-material-ui\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LaunchIcon from \"@material-ui/icons/Launch\"\nimport Tooltip from \"./ui/Tooltip\"\nimport MakeCodeSnippet from \"./makecode/MakeCodeSnippet\"\nimport Suspense from \"./ui/Suspense\"\n\nconst TraceSnippet = lazy(() => import(\"./TraceSnippet\"))\nconst CodeSandboxButton = lazy(() => import(\"./ui/CodeSandboxButton\"))\n\nfunction HighlightedCode(props: {\n    children: string\n    codeSandbox?: boolean\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    url?: string\n}) {\n    const {\n        children,\n        codeSandbox,\n        className,\n        downloadName,\n        downloadText,\n        url,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const language = className?.replace(/language-/, \"\") || \"\"\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const valueUri =\n        !!downloadText &&\n        `data:application/json;charset=UTF-8,${encodeURIComponent(\n            downloadText\n        )}`\n\n    return (\n        <Highlight\n            {...defaultProps}\n            code={children?.replace(/[\\s\\r\\n]*$/g, \"\") || \"\"}\n            language={language as Language}\n            theme={theme}\n        >\n            {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                <pre className={className} style={{ ...style }}>\n                    {!!url && (\n                        <Link style={{ float: \"right\" }} href={url}>\n                            <Tooltip title={`Open ${url}`}>\n                                <IconButton>\n                                    <LaunchIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {!!downloadText && (\n                        <Link\n                            style={{ float: \"right\" }}\n                            href={valueUri}\n                            download={downloadName || \"download\"}\n                        >\n                            <Tooltip title=\"Download\">\n                                <IconButton>\n                                    <GetAppIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {codeSandbox && (\n                        <div style={{ float: \"right\" }}>\n                            <Suspense>\n                                <CodeSandboxButton source={children} />\n                            </Suspense>\n                        </div>\n                    )}\n                    {tokens?.map((line, index) => {\n                        const lineProps = getLineProps({ line, key: index })\n                        return (\n                            <div key={index} {...lineProps}>\n                                {line.map((token, key) => (\n                                    <span\n                                        key={key}\n                                        {...getTokenProps({ token, key })}\n                                    />\n                                ))}\n                            </div>\n                        )\n                    })}\n                </pre>\n            )}\n        </Highlight>\n    )\n}\n\nexport default function CodeBlock(props: {\n    children: string\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    url?: string\n}) {\n    const { children, className } = props\n    const language = className?.replace(/language-/, \"\") || \"\"\n\n    switch (language) {\n        case \"trace\":\n            return (\n                <Suspense>\n                    <TraceSnippet source={children} />\n                </Suspense>\n            )\n        case \"blocks\":\n            return <MakeCodeSnippet renderedSource={children} />\n        case \"vanilla\":\n            return (\n                <HighlightedCode\n                    {...props}\n                    className={\"javascript\"}\n                    codeSandbox={true}\n                />\n            )\n        default:\n            return <HighlightedCode {...props} />\n    }\n}\n","import { JDEventSource } from \"../jdom/eventsource\"\nimport {\n    CHANGE,\n    DEVICE_ANNOUNCE,\n    DEVICE_DISCONNECT,\n    ROLE_BOUND,\n    ROLE_UNBOUND,\n} from \"../jdom/constants\"\nimport { JDBus } from \"../jdom/bus\"\nimport { JDDevice } from \"../jdom/device\"\nimport { JDService } from \"../jdom/service\"\nimport { serviceSpecificationFromName } from \"../jdom/spec\"\n\nexport interface RoleBinding {\n    role: string\n    serviceShortId: string\n    service?: JDService\n}\n\n// TODO: replicate MakeCode role manager logic\nexport default class RoleManager extends JDEventSource {\n    private readonly _roles: RoleBinding[] = []\n\n    constructor(private readonly bus: JDBus) {\n        super()\n\n        this.bus.on(DEVICE_ANNOUNCE, this.addServices.bind(this))\n        this.bus.on(DEVICE_DISCONNECT, this.removeServices.bind(this))\n\n        this.bus\n            .devices({ ignoreSelf: true, announced: true })\n            .forEach(dev => this.addServices(dev))\n\n        this.on(ROLE_UNBOUND, role => console.log(`role unbound`, { role }))\n        this.on(ROLE_BOUND, role => console.log(`role bound`, { role }))\n    }\n\n    get roles() {\n        return this._roles.slice(0)\n    }\n\n    get boundRoles() {\n        return this._roles.filter(r => !!r.service)\n    }\n\n    get unboundRoles() {\n        return this._roles.filter(r => !r.service)\n    }\n\n    setRoles(\n        newRoles: {\n            role: string\n            serviceShortId: string\n        }[]\n    ) {\n        let changed = false\n\n        // remove unknown roles\n        const supportedNewRoles = newRoles.filter(({ serviceShortId }) =>\n            serviceSpecificationFromName(serviceShortId)\n        )\n\n        // unbind removed roles\n        let i = 0\n        while (i < this._roles.length) {\n            const role = this._roles[i]\n            if (!supportedNewRoles.find(r => r.role === role.role)) {\n                changed = true\n                this._roles.splice(i, 1)\n                this.emit(ROLE_UNBOUND, role.role)\n            } else {\n                i++\n            }\n        }\n\n        // update or add roles\n        for (const newRole of supportedNewRoles) {\n            const existingRole = this._roles.find(r => r.role === newRole.role)\n            if (!existingRole) {\n                // added role\n                changed = true\n                this._roles.push({ ...newRole })\n            } else if (existingRole.serviceShortId !== newRole.serviceShortId) {\n                // modified type, force rebinding\n                changed = true\n                existingRole.serviceShortId = newRole.serviceShortId\n                if (existingRole.service) {\n                    existingRole.service = undefined\n                    this.emit(ROLE_UNBOUND, existingRole.role)\n                }\n            } // else unmodifed role\n        }\n\n        // emit change as needed\n        if (changed) this.emit(CHANGE)\n\n        // bound services\n        this.bindServices()\n    }\n\n    private bindServices() {\n        let changed = false\n        this.unboundRoles.forEach(binding => {\n            const boundRoles = this.boundRoles\n            const service = this.bus\n                .services({\n                    ignoreSelf: true,\n                    serviceName: binding.serviceShortId,\n                })\n                .find(srv => !boundRoles.find(b => b.service === srv))\n            binding.service = service\n            this.emit(ROLE_BOUND, binding.role)\n            changed = true\n        })\n        if (changed) this.emit(CHANGE)\n    }\n\n    private addServices(dev: JDDevice) {\n        if (dev === this.bus.selfDevice) return\n        this.bindServices()\n    }\n\n    private removeServices(dev: JDDevice) {\n        let changed = false\n        this._roles\n            .filter(r => r.service?.device === dev)\n            .forEach(r => {\n                r.service = undefined\n                this.emit(ROLE_UNBOUND, r.role)\n                changed = true\n            })\n        this.bindServices()\n        if (changed) this.emit(CHANGE)\n    }\n\n    public getService(role: string): JDService {\n        return this._roles.find(r => r.role === role)?.service\n    }\n\n    public addRoleService(role: string, serviceShortId: string) {\n        if (!serviceSpecificationFromName(serviceShortId)) return // unknown role type\n\n        let binding = this._roles.find(r => r.role === role)\n\n        // check if we already have this role\n        if (binding && serviceShortId === binding.serviceShortId) return\n\n        // new role\n        binding = { role, serviceShortId }\n        this._roles.push(binding)\n\n        const ret = this.bus\n            .services({ ignoreSelf: true, serviceName: serviceShortId })\n            .find(s => !this._roles.find(r => r.service === s))\n        if (ret) {\n            binding.service = ret\n            this.emit(ROLE_BOUND, role)\n        } else {\n            this.emit(ROLE_UNBOUND, role)\n        }\n        this.emit(CHANGE)\n    }\n}\n","import { useContext, useMemo } from \"react\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport RoleManager from \"../../../jacdac-ts/src/servers/rolemanager\"\n\nexport default function useRoleManager() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const roleManager = useMemo(() => new RoleManager(bus), [bus])\n    return roleManager\n}\n","import Blockly from \"blockly\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { SMap, toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport BlockDomainSpecificLanguage from \"./dsl/dsl\"\nimport ReactField from \"./fields/ReactField\"\nimport { resolveServiceBlockDefinition } from \"./toolbox\"\n\nexport interface VariableJSON {\n    // Boolean, Number, String, or service short id\n    type: string\n    id: string\n    name: string\n}\n\nexport type FieldJSON = {\n    id?: string\n    value?: number | string | boolean\n    // Boolean, Number, String, or service short id\n    variabletype?: string\n    // and extra fields, subclass\n}\n\nexport interface InputJSON {\n    type: number\n    name: string\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fields: SMap<FieldJSON>\n    child?: BlockJSON\n}\n\nexport interface BlockJSON {\n    type: string\n    id: string\n    children?: BlockJSON[]\n    value?: string | number | boolean\n    inputs?: InputJSON[]\n    next?: BlockJSON\n}\n\nexport interface WorkspaceJSON {\n    variables: VariableJSON[]\n    blocks: BlockJSON[]\n}\n\nexport function domToJSON(\n    workspace: Blockly.Workspace,\n    dsls: BlockDomainSpecificLanguage[]\n): WorkspaceJSON {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const clean = (o: any) =>\n        Object.keys(o)\n            .filter(k => o[k] === undefined || o[k] === null)\n            .forEach(k => delete o[k])\n    const builtins: SMap<(block: Blockly.Block) => string | number | boolean> =\n        {\n            logic_null: () => null,\n            text: block => block.getFieldValue(\"TEXT\"),\n            math_number: block => Number(block.getFieldValue(\"NUM\") || \"0\"),\n            logic_boolean: block => block.getFieldValue(\"BOOL\") === \"TRUE\",\n        }\n\n    const variableToJSON = (variable: Blockly.VariableModel): VariableJSON => ({\n        name: variable.name,\n        type: variable.type,\n        id: variable.getId(),\n    })\n    const fieldsToJSON = (fields: Blockly.Field[]) =>\n        !fields.length\n            ? undefined\n            : toMap(\n                  fields,\n                  field => (field.name as string)?.toLowerCase(),\n                  fieldToJSON\n              )\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const xmlToJSON = (xml: Element): any => {\n        const j = {}\n        if (Flags.diagnostics) j[\"xml\"] = xml.outerHTML\n        // dump attributes\n        for (const name of xml.getAttributeNames()) {\n            const v = xml.getAttribute(name)\n            j[name.toLowerCase()] = v\n        }\n        for (const child of xml.childNodes) {\n            if (child.nodeType === Node.TEXT_NODE) j[\"value\"] = xml.textContent\n            else if (child.nodeType === Node.ELEMENT_NODE) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const children: any[] = j[\"children\"] || (j[\"children\"] = [])\n                children.push(xmlToJSON(child as Element))\n            }\n        }\n        return j\n    }\n    const fieldToJSON = (field: Blockly.Field) => {\n        if (field.isSerializable()) {\n            // custom field can just return the value\n            if (field instanceof ReactField) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const value = (field as ReactField<any>).value\n                return { value }\n            } else {\n                const container = Blockly.utils.xml.createElement(\"field\")\n                const fieldXml = field.toXml(container)\n                return xmlToJSON(fieldXml)\n            }\n        }\n        return undefined\n    }\n    const flattenNext = (block: BlockJSON) => {\n        // flatten the linked list of next into an array\n        const children: BlockJSON[] = []\n        let current = block.next\n        while (current) {\n            children.push(current)\n            current = current.next\n        }\n        if (children.length) {\n            block.children = children\n            block.next = undefined\n        }\n    }\n    const blockToJSON = (block: Blockly.Block): BlockJSON => {\n        const blockToJSONHidden = (block: Blockly.Block): BlockJSON => {\n            // skip disabled blocks\n            if (!block?.isEnabled()) return undefined\n            // skip over insertion markers.\n            if (block.isInsertionMarker()) {\n                const child = block.getChildren(false)[0]\n                if (child) return blockToJSON(child)\n                else return undefined\n            }\n\n            const { type } = block\n            // allow DSL to handle conversion\n            let value = builtins[block.type]?.(block)\n            if (value === undefined) {\n                const definition = resolveServiceBlockDefinition(type)\n                const dsl =\n                    definition?.dsl && dsls.find(d => d.id === definition.dsl)\n                value = dsl?.blockToValue?.(block)\n            }\n            const element: BlockJSON = {\n                type: block.type,\n                id: block.id,\n                value,\n                inputs:\n                    value === undefined\n                        ? block.inputList.map(input => {\n                              const container: InputJSON = {\n                                  type: input.type,\n                                  name: input.name,\n                                  fields: fieldsToJSON(input.fieldRow),\n                                  child: blockToJSON(\n                                      input.connection?.targetBlock()\n                                  ),\n                              }\n                              return container\n                          })\n                        : undefined,\n                next: blockToJSONHidden(block.getNextBlock()),\n            }\n            clean(element)\n            return element\n        }\n        const top = blockToJSONHidden(block)\n        if (top) {\n            flattenNext(top)\n            clean(top)\n        }\n        return top\n    }\n\n    try {\n        const variables = Blockly.Variables.allUsedVarModels(workspace).sort(\n            (l, r) => l.name.localeCompare(r.name)\n        ) // stable sort name\n        const blocks = workspace.getTopBlocks(true)\n        const json: WorkspaceJSON = {\n            variables: variables.map(variableToJSON),\n            blocks: blocks.map(blockToJSON).filter(b => !!b),\n        }\n        return json\n    } catch (e) {\n        console.error(e)\n        return undefined\n    }\n}\n","import Blockly from \"blockly\"\nimport { useEffect } from \"react\"\nimport ReactField from \"./fields/ReactField\"\n\n// do not use block context\n\nexport default function useBlocklyEvents(workspace: Blockly.WorkspaceSvg) {\n    const handleChange = (\n        event: Blockly.Events.Abstract & { type: string }\n    ) => {\n        const { type } = event\n        switch (type) {\n            case Blockly.Events.BLOCK_CHANGE: {\n                const change = event as Blockly.Events.Change\n                const block = workspace.getBlockById(change.blockId)\n                // notify twin that the value changed\n                const twinInput = block.inputList[1]\n                const twinField = twinInput?.fieldRow.find(\n                    f => f.name === \"twin\"\n                ) as ReactField<unknown>\n                twinField?.emitChange?.()\n                break\n            }\n        }\n    }\n\n    // register hook\n    useEffect(() => {\n        workspace?.addChangeListener(handleChange)\n        return () => workspace?.removeChangeListener(handleChange)\n    }, [workspace])\n}\n","import _classCallCheck from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Number slider input field.\n * @author kozbial@google.com (Monica Kozbial)\n */\nimport * as Blockly from 'blockly/core';\n/**\n * Slider field.\n */\n\nexport var FieldSlider = /*#__PURE__*/function (_Blockly$FieldNumber) {\n  _inherits(FieldSlider, _Blockly$FieldNumber);\n\n  var _super = _createSuper(FieldSlider);\n\n  /**\n   * Class for an number slider field.\n   * @param {string|number=} opt_value The initial value of the field. Should\n   *    cast to a number. Defaults to 0.\n   * @param {?(string|number)=} opt_min Minimum value.\n   * @param {?(string|number)=} opt_max Maximum value.\n   * @param {?(string|number)=} opt_precision Precision for value.\n   * @param {?Function=} opt_validator A function that is called to validate\n   *    changes to the field's value. Takes in a number & returns a validated\n   *    number, or null to abort the change.\n   * @param {Object=} opt_config A map of options used to configure the field.\n   *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/number#creation}\n   *    for a list of properties this parameter supports.\n   * @extends {Blockly.FieldNumber}\n   * @constructor\n   */\n  function FieldSlider(opt_value, opt_min, opt_max, opt_precision, opt_validator, opt_config) {\n    var _this;\n\n    _classCallCheck(this, FieldSlider);\n\n    _this = _super.call(this, opt_value, opt_min, opt_max, opt_precision, opt_validator, opt_config);\n    /**\n     * Array holding info needed to unbind events.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     * @type {!Array.<Array<?>>}\n     * @private\n     */\n\n    _this.boundEvents_ = [];\n    /**\n     * The HTML range input element.\n     * @type {?HTMLInputElement}\n     * @private\n     */\n\n    _this.sliderInput_ = null;\n    return _this;\n  }\n  /**\n   * Constructs a FieldSlider from a JSON arg object.\n   * @param {!Object} options A JSON object with options (value, min, max, and\n   *                          precision).\n   * @return {!FieldSlider} The new field instance.\n   * @package\n   * @nocollapse\n   */\n\n\n  _createClass(FieldSlider, [{\n    key: \"showEditor_\",\n    value:\n    /**\n     * Show the inline free-text editor on top of the text along with the slider\n     *    editor.\n     * @param {Event=} opt_e Optional mouse event that triggered the field to\n     *     open, or undefined if triggered programmatically.\n     * @param {boolean=} _opt_quietInput Quiet input.\n     * @protected\n     * @override\n     */\n    function showEditor_(opt_e, _opt_quietInput) {\n      // Mobile browsers have issues with in-line textareas (focus & keyboards).\n      var noFocus = Blockly.utils.userAgent.MOBILE || Blockly.utils.userAgent.ANDROID || Blockly.utils.userAgent.IPAD;\n\n      _get(_getPrototypeOf(FieldSlider.prototype), \"showEditor_\", this).call(this, opt_e, noFocus); // Build the DOM.\n\n\n      var editor = this.dropdownCreate_();\n      Blockly.DropDownDiv.getContentDiv().appendChild(editor);\n      Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary, this.sourceBlock_.style.colourTertiary);\n      Blockly.DropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this));\n    }\n    /**\n     * Updates the slider when the field rerenders.\n     * @protected\n     * @override\n     */\n\n  }, {\n    key: \"render_\",\n    value: function render_() {\n      _get(_getPrototypeOf(FieldSlider.prototype), \"render_\", this).call(this);\n\n      this.updateSlider_();\n    }\n    /**\n     * Creates the slider editor and add event listeners.\n     * @return {!Element} The newly created slider.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownCreate_\",\n    value: function dropdownCreate_() {\n      var wrapper = document.createElement('div');\n      wrapper.className = 'fieldSliderContainer';\n      var sliderInput = document.createElement('input');\n      sliderInput.setAttribute('type', 'range');\n      sliderInput.setAttribute('min', this.min_);\n      sliderInput.setAttribute('max', this.max_);\n      sliderInput.setAttribute('step', this.precision_);\n      sliderInput.setAttribute('value', this.getValue());\n      sliderInput.className = 'fieldSlider';\n      wrapper.appendChild(sliderInput);\n      this.sliderInput_ = sliderInput;\n      this.boundEvents_.push(Blockly.bindEventWithChecks_(sliderInput, 'input', this, this.onSliderChange_));\n      return wrapper;\n    }\n    /**\n     * Disposes of events belonging to the slider editor.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownDispose_\",\n    value: function dropdownDispose_() {\n      var _iterator = _createForOfIteratorHelper(this.boundEvents_),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var event = _step.value;\n          Blockly.unbindEvent_(event);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.sliderInput_ = null;\n    }\n    /**\n     * Sets the text to match the slider's position.\n     * @private\n     */\n\n  }, {\n    key: \"onSliderChange_\",\n    value: function onSliderChange_() {\n      this.setEditorValue_(this.sliderInput_.value);\n    }\n    /**\n     * Updates the slider when the field rerenders.\n     * @private\n     */\n\n  }, {\n    key: \"updateSlider_\",\n    value: function updateSlider_() {\n      if (!this.sliderInput_) {\n        return;\n      }\n\n      this.sliderInput_.setAttribute('value', this.getValue());\n    }\n  }], [{\n    key: \"fromJson\",\n    value: function fromJson(options) {\n      return new FieldSlider(options['value'], undefined, undefined, undefined, undefined, options);\n    }\n  }]);\n\n  return FieldSlider;\n}(Blockly.FieldNumber);\nBlockly.fieldRegistry.register('field_slider', FieldSlider);\n/**\n * CSS for slider field.\n */\n\nBlockly.Css.register([\n/* eslint-disable indent */\n\".fieldSliderContainer {\\n      align-items: center;\\n      display: flex;\\n      height: 32px;\\n      justify-content: center;\\n      width: 150px;\\n    }\\n    .fieldSlider {\\n      -webkit-appearance: none;\\n      background: transparent; /* override white in chrome */\\n      margin: 4px;\\n      padding: 0;\\n      width: 100%;\\n    }\\n    .fieldSlider:focus {\\n      outline: none;\\n    }\\n    /* Webkit */\\n    .fieldSlider::-webkit-slider-runnable-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-webkit-slider-thumb {\\n      -webkit-appearance: none;\\n      background: #fff;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      margin-top: -7px;\\n      width: 24px;\\n    }\\n    /* Firefox */\\n    .fieldSlider::-moz-range-track {\\n      background: #ddd;\\n      border-radius: 5px;\\n      height: 10px;\\n    }\\n    .fieldSlider::-moz-range-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\\n    .fieldSlider::-moz-focus-outer {\\n      /* override the focus border style */\\n      border: 0;\\n    }\\n    /* IE */\\n    .fieldSlider::-ms-track {\\n      /* IE wont let the thumb overflow the track, so fake it */\\n      background: transparent;\\n      border-color: transparent;\\n      border-width: 15px 0;\\n      /* remove default tick marks */\\n      color: transparent;\\n      height: 10px;\\n      width: 100%;\\n      margin: -4px 0;\\n    }\\n    .fieldSlider::-ms-fill-lower  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-fill-upper  {\\n      background: #ddd;\\n      border-radius: 5px;\\n    }\\n    .fieldSlider::-ms-thumb {\\n      background: #fff;\\n      border: none;\\n      border-radius: 50%;\\n      box-shadow: 0 0 0 4px rgba(255,255,255,.15);\\n      cursor: pointer;\\n      height: 24px;\\n      width: 24px;\\n    }\"\n/* eslint-enable indent */\n]);","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nexport * from './field_slider';","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Overrides methods on Blockly.InsertionMarkerManager to\n * allow blocks to hook in dynamic functionality when they have pending\n * connections.\n * @author anjali@code.org (Anjali Pal)\n */\nimport * as Blockly from 'blockly/core';\n\nBlockly.InsertionMarkerManager.prototype.update = function (dxy, deleteArea) {\n  var candidate = this.getCandidate_(dxy);\n  this.wouldDeleteBlock_ = this.shouldDelete_(candidate, deleteArea);\n  var shouldUpdate = this.wouldDeleteBlock_ || this.shouldUpdatePreviews_(candidate, dxy);\n\n  if (shouldUpdate) {\n    // Begin monkey patch\n    if (candidate.closest && candidate.closest.sourceBlock_.onPendingConnection) {\n      candidate.closest.sourceBlock_.onPendingConnection(candidate.closest);\n\n      if (!this.pendingBlocks) {\n        this.pendingBlocks = new Set();\n      }\n\n      this.pendingBlocks.add(candidate.closest.sourceBlock_);\n    } // End monkey patch\n    // Don't fire events for insertion marker creation or movement.\n\n\n    Blockly.Events.disable();\n    this.maybeHidePreview_(candidate);\n    this.maybeShowPreview_(candidate);\n    Blockly.Events.enable();\n  }\n};\n\nvar oldDispose = Blockly.InsertionMarkerManager.prototype.dispose;\n\nBlockly.InsertionMarkerManager.prototype.dispose = function () {\n  if (this.pendingBlocks) {\n    this.pendingBlocks.forEach(function (block) {\n      if (block.finalizeConnections) {\n        block.finalizeConnections();\n      }\n    });\n  }\n\n  oldDispose.call(this);\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the if block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_if'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 1,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 1,\n\n  /**\n   * Block for if/elseif/else statements. Must have one if input.\n   * Can have any number of elseif inputs and optionally one else input.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['CONTROLS_IF_HELPURL']);\n    this.setStyle('logic_blocks');\n    this.appendValueInput('IF0').setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n    this.appendStatementInput('DO0').appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.setNextStatement(true);\n    this.setPreviousStatement(true);\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent if/elseif/else inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.filter(function (input) {\n      return input.name.includes('IF');\n    }).map(function (input) {\n      return input.name.replace('IF', '');\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    var hasElse = !!this.getInput('ELSE');\n    container.setAttribute('else', hasElse);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var inputs = xmlElement.getAttribute('inputs');\n\n    if (inputs) {\n      var inputNumbers = inputs.split(',');\n\n      if (this.getInput('IF0')) {\n        this.removeInput('IF0');\n      }\n\n      if (this.getInput('DO0')) {\n        this.removeInput('DO0');\n      }\n\n      var first = inputNumbers[0];\n      this.appendValueInput('IF' + first).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      this.appendStatementInput('DO' + first).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n\n      for (var i = 1; i < inputNumbers.length; i++) {\n        this.appendValueInput('IF' + inputNumbers[i]).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n        this.appendStatementInput('DO' + inputNumbers[i]).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n      }\n    }\n\n    var hasElse = xmlElement.getAttribute('else');\n\n    if (hasElse == 'true') {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Finds the index of a connection. Used to determine where in the block to\n   * insert new inputs.\n   * @param {!Blockly.Connection} connection A connection on this block.\n   * @return {?number} The index of the connection in the this.inputList.\n   */\n  findInputIndexForConnection: function findInputIndexForConnection(connection) {\n    for (var i = 0; i < this.inputList.length; i++) {\n      var input = this.inputList[i];\n\n      if (input.connection == connection) {\n        return i;\n      }\n    }\n\n    return null;\n  },\n\n  /**\n   * Inserts a boolean value input and statement input at the specified index.\n   * @param {number} index Index of the input before which to add new inputs.\n   */\n  insertElseIf: function insertElseIf(index) {\n    var caseNumber = this.inputCounter;\n    this.appendValueInput('IF' + caseNumber).setCheck('Boolean').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'], 'elseif');\n    this.appendStatementInput('DO' + caseNumber).appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    this.moveInputBefore('IF' + caseNumber, this.inputList[index].name);\n    this.moveInputBefore('DO' + caseNumber, this.inputList[index + 1].name);\n    this.inputCounter++;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    if (connection.type === Blockly.NEXT_STATEMENT && !this.getInput('ELSE')) {\n      this.appendStatementInput('ELSE').appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE'], 'else');\n    }\n\n    var inputIndex = this.findInputIndexForConnection(connection);\n\n    if (inputIndex === null) {\n      return;\n    }\n\n    var input = this.inputList[inputIndex];\n\n    if (connection.targetConnection && input.name.includes('IF')) {\n      var nextIfInput = this.inputList[inputIndex + 2];\n\n      if (!nextIfInput || nextIfInput.name == 'ELSE') {\n        this.insertElseIf(inputIndex + 2);\n      } else {\n        var nextIfConnection = nextIfInput && nextIfInput.connection.targetConnection;\n\n        if (nextIfConnection && !nextIfConnection.sourceBlock_.isInsertionMarker()) {\n          this.insertElseIf(inputIndex + 2);\n        }\n      }\n    }\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this = this;\n\n    var toRemove = []; // Remove Else If inputs if neither the if nor the do has a connected block.\n\n    for (var i = 2; i < this.inputList.length - 1; i += 2) {\n      var ifConnection = this.inputList[i];\n      var doConnection = this.inputList[i + 1];\n\n      if (!ifConnection.connection.targetConnection && !doConnection.connection.targetConnection) {\n        toRemove.push(ifConnection.name);\n        toRemove.push(doConnection.name);\n      }\n    }\n\n    toRemove.forEach(function (input) {\n      return _this.removeInput(input);\n    }); // Remove Else input if it doesn't have a connected block.\n\n    var elseInput = this.getInput('ELSE');\n\n    if (elseInput && !elseInput.connection.targetConnection) {\n      this.removeInput(elseInput.name);\n    } // Remove the If input if it is empty and there is at least one Else If\n\n\n    if (this.inputList.length > 2) {\n      var ifInput = this.inputList[0];\n      var doInput = this.inputList[1];\n      var nextInput = this.inputList[2];\n\n      if (nextInput.name.includes('IF') && !ifInput.connection.targetConnection && !doInput.connection.targetConnection) {\n        this.removeInput(ifInput.name);\n        this.removeInput(doInput.name);\n        nextInput.removeField('elseif');\n        nextInput.appendField(Blockly.Msg['CONTROLS_IF_MSG_IF'], 'if');\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the text_join block with dyanmic\n *    inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_text_join'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['TEXT_JOIN_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'String');\n    this.setTooltip(Blockly.Msg['TEXT_JOIN_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(function (input) {\n      return input.name;\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var _this = this;\n\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(function (name) {\n        return _this.appendValueInput(name);\n      });\n      this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   *     has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this2 = this;\n\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(function (input) {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(function (inputName) {\n        return _this2.removeInput(inputName);\n      }); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines a version of the list_create block with dyanmic\n *     inputs that appear when a block is dragged over inputs on the block.\n */\nimport * as Blockly from 'blockly/core';\nBlockly.Blocks['dynamic_list_create'] = {\n  /**\n   * Counter for the next input to add to this block.\n   * @type {number}\n   */\n  inputCounter: 2,\n\n  /**\n   * Minimum number of inputs for this block.\n   * @type {number}\n   */\n  minInputs: 2,\n\n  /**\n   * Block for concatenating any number of strings.\n   * @this {Blockly.Block}\n   */\n  init: function init() {\n    this.setHelpUrl(Blockly.Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('ADD0').appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    this.appendValueInput('ADD1');\n    this.setOutput(true, 'Array');\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function mutationToDom() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var inputNames = this.inputList.map(function (input) {\n      return input.name;\n    }).join(',');\n    container.setAttribute('inputs', inputNames);\n    container.setAttribute('next', this.inputCounter);\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function domToMutation(xmlElement) {\n    var _this = this;\n\n    var items = xmlElement.getAttribute('inputs');\n\n    if (items) {\n      var inputNames = items.split(',');\n      this.inputList = [];\n      inputNames.forEach(function (name) {\n        return _this.appendValueInput(name);\n      });\n      this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    }\n\n    var next = parseInt(xmlElement.getAttribute('next'));\n    this.inputCounter = next;\n  },\n\n  /**\n   * Check whether a new input should be added and determine where it should go.\n   * @param {!Blockly.Connection} connection The connection that has a\n   *     pending connection.\n   * @return {number} The index before which to insert a new input,\n   *     or null if no input should be added.\n   */\n  getIndexForNewInput: function getIndexForNewInput(connection) {\n    if (!connection.targetConnection) {\n      // this connection is available\n      return null;\n    }\n\n    var connectionIndex;\n\n    for (var i = 0; i < this.inputList.length; i++) {\n      if (this.inputList[i].connection == connection) {\n        connectionIndex = i;\n      }\n    }\n\n    if (connectionIndex == this.inputList.length - 1) {\n      // this connection is the last one and already has a block in it, so\n      // we should add a new connection at the end.\n      return this.inputList.length + 1;\n    }\n\n    var nextInput = this.inputList[connectionIndex + 1];\n    var nextConnection = nextInput && nextInput.connection.targetConnection;\n\n    if (nextConnection && !nextConnection.sourceBlock_.isInsertionMarker()) {\n      return connectionIndex + 1;\n    } // Don't add new connection\n\n\n    return null;\n  },\n\n  /**\n   * Called when a block is dragged over one of the connections on this block.\n   * @param {!Blockly.Connection} connection The connection on this block that\n   * has a pending connection.\n   */\n  onPendingConnection: function onPendingConnection(connection) {\n    var insertIndex = this.getIndexForNewInput(connection);\n\n    if (insertIndex == null) {\n      return;\n    }\n\n    this.appendValueInput('ADD' + this.inputCounter++);\n    this.moveNumberedInputBefore(this.inputList.length - 1, insertIndex);\n  },\n\n  /**\n   * Called when a block drag ends if the dragged block had a pending connection\n   * with this block.\n   */\n  finalizeConnections: function finalizeConnections() {\n    var _this2 = this;\n\n    if (this.inputList.length > this.minInputs) {\n      var toRemove = [];\n      this.inputList.forEach(function (input) {\n        var targetConnection = input.connection.targetConnection;\n\n        if (!targetConnection) {\n          toRemove.push(input.name);\n        }\n      });\n\n      if (this.inputList.length - toRemove.length < this.minInputs) {\n        // Always show at least two inputs\n        toRemove = toRemove.slice(this.minInputs);\n      }\n\n      toRemove.forEach(function (inputName) {\n        return _this2.removeInput(inputName);\n      }); // The first input should have the block text. If we removed the\n      // first input, add the block text to the new first input.\n\n      if (this.inputList[0].fieldRow.length == 0) {\n        this.inputList[0].appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n      }\n    }\n  }\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Adds blocks that replace the built-in mutator UI with dynamic\n *     connections that appear when a block is dragged over inputs on the block.\n */\nimport './insertion_marker_manager_monkey_patch';\nimport './dynamic_if.js';\nimport './dynamic_text_join.js';\nimport './dynamic_list_create.js';\nexport var overrideOldBlockDefinitions = function overrideOldBlockDefinitions() {\n  Blockly.Blocks['list_create'] = Blockly.Blocks['dynamic_list_create'];\n  Blockly.Blocks['text_join'] = Blockly.Blocks['dynamic_text_join'];\n  Blockly.Blocks['controls_if'] = Blockly.Blocks['dynamic_if'];\n};","import _classCallCheck from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/runner/work/jacdac-docs/jacdac-docs/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Plugin for changing the context menu to match the\n * `disableOrphans` event handler.\n */\nimport * as Blockly from 'blockly/core';\n/**\n * This plugin changes the logic of the enable/disable context menu item. It is\n * enabled for all blocks except top-level blocks that have output or\n * previous connections. In other words, the option is disabled for orphan\n * blocks. Using this plugin allows users to disable valid non-orphan blocks,\n * but not re-enable blocks that have been automatically disabled by\n * `disableOrphans`.\n */\n\nexport var DisableTopBlocks = /*#__PURE__*/function () {\n  function DisableTopBlocks() {\n    _classCallCheck(this, DisableTopBlocks);\n  }\n\n  _createClass(DisableTopBlocks, [{\n    key: \"init\",\n    value:\n    /**\n     * Modifies the context menu 'disable' option as described above.\n     */\n    function init() {\n      var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n      this.oldPreconditionFn = disableMenuItem.preconditionFn;\n\n      disableMenuItem.preconditionFn = function (\n      /** @type {!Blockly.ContextMenuRegistry.Scope} */\n      scope) {\n        var block = scope.block;\n\n        if (!block.isInFlyout && block.workspace.options.disable && block.isEditable()) {\n          if (block.getInheritedDisabled() || isOrphan(block)) {\n            return 'disabled';\n          }\n\n          return 'enabled';\n        }\n\n        return 'hidden';\n      };\n    }\n    /**\n     * Turn off the effects of this plugin and restore the initial behavior.\n     * This is never required to be called. It is optional in case you need to\n     * disable the plugin.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var disableMenuItem = Blockly.ContextMenuRegistry.registry.getItem('blockDisable');\n      disableMenuItem.preconditionFn = this.oldPreconditionFn;\n    }\n  }]);\n\n  return DisableTopBlocks;\n}();\n/**\n * A block is an orphan if its parent is an orphan, or if it doesn't have a\n * parent but it does have a previous or output connection (so it expects to be\n * attached to something). This means all children of orphan blocks are also\n * orphans and cannot be manually re-enabled.\n * @param {!Blockly.BlockSvg} block Block to check.\n * @return {boolean} Whether the block is an orphan.\n */\n\nfunction isOrphan(block) {\n  // If the parent is an orphan block, this block should also be considered\n  // an orphan so it cannot be manually re-enabled.\n  var parent =\n  /** @type {Blockly.BlockSvg} */\n  block.getParent();\n\n  if (parent && isOrphan(parent)) {\n    return true;\n  }\n\n  return !parent && !!(block.outputConnection || block.previousConnection);\n}","import Blockly, { ContextMenuRegistry } from \"blockly\"\nimport \"@blockly/field-slider\"\nimport \"@blockly/block-dynamic-connection\"\nimport { useEffect } from \"react\"\nimport { DisableTopBlocks } from \"@blockly/disable-top-blocks\"\n\n// do not use block context\n\nexport default function useBlocklyPlugins(workspace: Blockly.WorkspaceSvg) {\n    //plugins\n    useEffect(() => {\n        if (!workspace) return\n\n        // context menu stuff\n        if (ContextMenuRegistry.registry.getItem(\"blockInline\"))\n            ContextMenuRegistry.registry.unregister(\"blockInline\")\n        if (ContextMenuRegistry.registry.getItem(\"cleanWorkspace\"))\n            ContextMenuRegistry.registry.unregister(\"cleanWorkspace\")\n\n        // Add the disableOrphans event handler. This is not done automatically by\n        // the plugin and should be handled by your application.\n        workspace.addChangeListener(Blockly.Events.disableOrphans)\n\n        // The plugin must be initialized before it has any effect.\n        const disableTopBlocksPlugin = new DisableTopBlocks()\n        disableTopBlocksPlugin.init()\n        return () =>\n            workspace.removeChangeListener(Blockly.Events.disableOrphans)\n    }, [workspace])\n}\n","import Blockly from \"blockly\"\nimport { useEffect, useMemo } from \"react\"\nimport { arrayConcatMany } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useServices from \"../hooks/useServices\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport { Theme, useTheme } from \"@material-ui/core\"\nimport { registerFields } from \"./fields/fields\"\nimport {\n    BlockDefinition,\n    BlockReference,\n    ButtonDefinition,\n    CategoryDefinition,\n    ServiceBlockDefinitionFactory,\n    ToolboxConfiguration,\n} from \"./toolbox\"\nimport { WorkspaceJSON } from \"./jsongenerator\"\nimport { VMProgram } from \"../../../jacdac-ts/src/vm/ir\"\nimport BlockDomainSpecificLanguage from \"./dsl/dsl\"\n\n// overrides blockly emboss filter for svg elements\nBlockly.BlockSvg.prototype.setHighlighted = function (highlighted) {\n    if (!this.rendered) {\n        return\n    }\n    if (highlighted) {\n        this.addSelect()\n    } else {\n        this.removeSelect()\n    }\n}\n\ntype CachedBlockDefinitions = {\n    blocks: BlockDefinition[]\n}\n\nfunction loadBlocks(\n    dsls: BlockDomainSpecificLanguage[],\n    theme: Theme\n): CachedBlockDefinitions {\n    const blocks = arrayConcatMany(\n        dsls.map(dsl =>\n            dsl?.createBlocks?.({ theme }).map(b => {\n                b.dsl = dsl.id // ensure DSL is set\n                return b\n            })\n        )\n    )\n    console.log(`blocks`, { blocks })\n\n    // register field editors\n    registerFields()\n    // re-register blocks with blocklys\n    blocks.forEach(\n        block =>\n            (Blockly.Blocks[block.type] = <ServiceBlockDefinitionFactory>{\n                jacdacDefinition: block,\n                init: function () {\n                    this.jsonInit(block)\n                },\n            })\n    )\n\n    return {\n        blocks,\n    }\n}\n\nfunction patchCategoryJSONtoXML(cat: CategoryDefinition): CategoryDefinition {\n    if (cat.button) {\n        if (!cat.contents) cat.contents = []\n        cat.contents.unshift(cat.button)\n    }\n    cat.contents\n        ?.filter(node => node.kind === \"block\")\n        .map(node => <BlockReference>node)\n        .filter(block => {\n            const exists = Blockly.Blocks[block.type]\n            if (!exists && Flags.diagnostics)\n                console.warn(\n                    `block type '${block.type}' not found, consider refreshing page...`\n                )\n            return !!block.values && exists\n        }) // avoid broken blocks\n        .forEach(block => {\n            // yup, this suck but we have to go through it\n            block.blockxml = `<block type=\"${block.type}\">${Object.keys(\n                block.values\n            )\n                .map(name => {\n                    const { type } = block.values[name]\n                    const shadow = type !== \"variables_get\"\n                    return `<value name=\"${name}\"><${\n                        shadow ? \"shadow\" : \"field\"\n                    } type=\"${type}\" /></value>`\n                })\n                .join(\"\\n\")}</block>`\n            delete block.type\n        })\n    return cat\n}\n\nexport default function useToolbox(\n    dsls: BlockDomainSpecificLanguage[],\n    source: WorkspaceJSON\n): ToolboxConfiguration {\n    const liveServices = useServices({ specification: true })\n    const theme = useTheme()\n\n    useMemo(() => loadBlocks(dsls, theme), [theme, dsls])\n\n    const dslsCategories = arrayConcatMany(\n        dsls.map(dsl => dsl?.createCategory?.({ theme, source, liveServices }))\n    )\n        .filter(cat => !!cat)\n        .sort((l, r) => -(l.order - r.order))\n\n    const toolboxConfiguration: ToolboxConfiguration = {\n        kind: \"categoryToolbox\",\n        contents: dslsCategories\n            .filter(cat => !!cat)\n            .map(node =>\n                node.kind === \"category\"\n                    ? patchCategoryJSONtoXML(node as CategoryDefinition)\n                    : node\n            ),\n    }\n\n    return toolboxConfiguration\n}\n\n// do not use block context\n\nexport function useToolboxButtons(\n    workspace: Blockly.WorkspaceSvg,\n    toolboxConfiguration: ToolboxConfiguration\n) {\n    // track workspace changes and update callbacks\n    useEffect(() => {\n        if (!workspace) return\n\n        // collect buttons\n        const buttons: ButtonDefinition[] = toolboxConfiguration?.contents\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            .map(cat => (cat as CategoryDefinition).button)\n            .filter(btn => !!btn)\n        buttons?.forEach(button =>\n            workspace.registerButtonCallback(button.callbackKey, () =>\n                Blockly.Variables.createVariableButtonHandler(\n                    workspace,\n                    null,\n                    button.service.shortId\n                )\n            )\n        )\n    }, [workspace, JSON.stringify(toolboxConfiguration)])\n}\n","import { WorkspaceSvg } from \"blockly\"\nimport React, { createContext, ReactNode, useEffect, useState } from \"react\"\nimport { toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport RoleManager from \"../../../jacdac-ts/src/servers/rolemanager\"\nimport useRoleManager from \"../hooks/useRoleManager\"\nimport useLocalStorage from \"../useLocalStorage\"\nimport BlockDomainSpecificLanguage from \"./dsl/dsl\"\nimport { domToJSON, WorkspaceJSON } from \"./jsongenerator\"\nimport { NEW_PROJET_XML, ToolboxConfiguration } from \"./toolbox\"\nimport useBlocklyEvents from \"./useBlocklyEvents\"\nimport useBlocklyPlugins from \"./useBlocklyPlugins\"\nimport useToolbox, { useToolboxButtons } from \"./useToolbox\"\nimport {\n    BlocklyWorkspaceWithServices,\n    WorkspaceServices,\n} from \"./WorkspaceContext\"\n\nexport interface BlockWarning {\n    sourceId?: string\n    message: string\n}\n\nexport interface BlockProps {\n    dsls: BlockDomainSpecificLanguage[]\n    workspace: WorkspaceSvg\n    workspaceXml: string\n    workspaceJSON: WorkspaceJSON\n    toolboxConfiguration: ToolboxConfiguration\n    roleManager: RoleManager\n    setWorkspace: (ws: WorkspaceSvg) => void\n    setWorkspaceXml: (value: string) => void\n    setWarnings: (warnings: BlockWarning[]) => void\n}\n\nconst BlockContext = createContext<BlockProps>({\n    dsls: [],\n    workspace: undefined,\n    workspaceXml: undefined,\n    workspaceJSON: undefined,\n    toolboxConfiguration: undefined,\n    roleManager: undefined,\n    setWarnings: () => {},\n    setWorkspace: () => {},\n    setWorkspaceXml: () => {},\n})\nBlockContext.displayName = \"Block\"\n\nexport default BlockContext\n\n// eslint-disable-next-line react/prop-types\nexport function BlockProvider(props: {\n    storageKey?: string\n    dsls: BlockDomainSpecificLanguage[]\n    children: ReactNode\n}) {\n    const { storageKey, dsls, children } = props\n    const [storedXml, setStoredXml] = useLocalStorage(\n        storageKey,\n        NEW_PROJET_XML\n    )\n    const roleManager = useRoleManager()\n    const [workspace, setWorkspace] = useState<WorkspaceSvg>(undefined)\n    const [workspaceXml, _setWorkspaceXml] = useState<string>(storedXml)\n    const [workspaceJSON, setWorkspaceJSON] = useState<WorkspaceJSON>(undefined)\n    const [warnings, setWarnings] = useState<BlockWarning[]>([])\n\n    const setWorkspaceXml = (xml: string) => {\n        setStoredXml(xml)\n        _setWorkspaceXml(xml)\n    }\n\n    const toolboxConfiguration = useToolbox(dsls, workspaceJSON)\n\n    // plugins\n    useBlocklyPlugins(workspace)\n    useBlocklyEvents(workspace)\n    useToolboxButtons(workspace, toolboxConfiguration)\n\n    // role manager\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const ws = workspace as any as BlocklyWorkspaceWithServices\n        const services = ws?.jacdacServices\n        if (services) services.roleManager = roleManager\n    }, [workspace, roleManager])\n\n    useEffect(() => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const wws = workspace as any as BlocklyWorkspaceWithServices\n        if (wws && !wws.jacdacServices) {\n            wws.jacdacServices = new WorkspaceServices()\n            wws.jacdacServices.roleManager = roleManager\n        }\n    }, [workspace])\n    useEffect(() => {\n        if (!workspace || workspace.isDragging()) return\n\n        const newWorkspaceJSON = domToJSON(workspace, dsls)\n        if (\n            JSON.stringify(newWorkspaceJSON) !== JSON.stringify(workspaceJSON)\n        ) {\n            setWorkspaceJSON(newWorkspaceJSON)\n        }\n    }, [dsls, workspace, workspaceXml])\n\n    // apply errors\n    useEffect(() => {\n        if (!workspace) return\n        const allErrors = toMap(\n            warnings || [],\n            e => e.sourceId || \"\",\n            e => e.message\n        )\n        workspace\n            .getAllBlocks(false)\n            .forEach(b => b.setWarningText(allErrors[b.id] || null))\n    }, [workspace, warnings])\n\n    return (\n        <BlockContext.Provider\n            value={{\n                dsls,\n                workspace,\n                workspaceXml,\n                workspaceJSON,\n                toolboxConfiguration,\n                roleManager,\n                setWarnings,\n                setWorkspace,\n                setWorkspaceXml,\n            }}\n        >\n            {children}\n        </BlockContext.Provider>\n    )\n}\n","import { Grid, Typography } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\nimport BlockContext from \"./BlockContext\"\n\nexport default function BlockDiagnostics() {\n    const { workspaceXml, workspaceJSON } = useContext(BlockContext)\n    return (\n        <>\n            <Grid item xs={12}>\n                <Typography variant=\"subtitle1\">Blockly JSON</Typography>\n                <CodeBlock\n                    className=\"json\"\n                    downloadName={\"test.json\"}\n                    downloadText={JSON.stringify(workspaceJSON, null, 2)}\n                >\n                    {JSON.stringify(workspaceJSON, null, 2)}\n                </CodeBlock>\n            </Grid>\n            <Grid item xs={12}>\n                <Typography variant=\"subtitle1\">Blockly XML</Typography>\n                <CodeBlock className=\"xml\">{workspaceXml}</CodeBlock>\n            </Grid>\n        </>\n    )\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Modern theme.\n */\nimport Blockly from 'blockly/core';\nexport default Blockly.Theme.defineTheme('modern', {\n  'base': Blockly.Themes.Classic,\n  'blockStyles': {\n    'colour_blocks': {\n      'colourPrimary': '#a5745b',\n      'colourSecondary': '#dbc7bd',\n      'colourTertiary': '#845d49'\n    },\n    'list_blocks': {\n      'colourPrimary': '#745ba5',\n      'colourSecondary': '#c7bddb',\n      'colourTertiary': '#5d4984'\n    },\n    'logic_blocks': {\n      'colourPrimary': '#5b80a5',\n      'colourSecondary': '#bdccdb',\n      'colourTertiary': '#496684'\n    },\n    'loop_blocks': {\n      'colourPrimary': '#5ba55b',\n      'colourSecondary': '#bddbbd',\n      'colourTertiary': '#498449'\n    },\n    'math_blocks': {\n      'colourPrimary': '#5b67a5',\n      'colourSecondary': '#bdc2db',\n      'colourTertiary': '#495284'\n    },\n    'procedure_blocks': {\n      'colourPrimary': '#995ba5',\n      'colourSecondary': '#d6bddb',\n      'colourTertiary': '#7a4984'\n    },\n    'text_blocks': {\n      'colourPrimary': '#5ba58c',\n      'colourSecondary': '#bddbd1',\n      'colourTertiary': '#498470'\n    },\n    'variable_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'variable_dynamic_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a'\n    },\n    'hat_blocks': {\n      'colourPrimary': '#a55b99',\n      'colourSecondary': '#dbbdd6',\n      'colourTertiary': '#84497a',\n      'hat': 'cap'\n    }\n  },\n  'categoryStyles': {\n    'colour_category': {\n      'colour': '#a5745b'\n    },\n    'list_category': {\n      'colour': '#745ba5'\n    },\n    'logic_category': {\n      'colour': '#5b80a5'\n    },\n    'loop_category': {\n      'colour': '#5ba55b'\n    },\n    'math_category': {\n      'colour': '#5b67a5'\n    },\n    'procedure_category': {\n      'colour': '#995ba5'\n    },\n    'text_category': {\n      'colour': '#5ba58c'\n    },\n    'variable_category': {\n      'colour': '#a55b99'\n    },\n    'variable_dynamic_category': {\n      'colour': '#a55b99'\n    }\n  },\n  'componentStyles': {},\n  'fontStyle': {},\n  'startHats': null\n});","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dark theme.\n */\nimport Blockly from 'blockly/core';\n/**\n * Dark theme.\n */\n\nexport default Blockly.Theme.defineTheme('theme_dark', {\n  'base': Blockly.Themes.Classic,\n  'componentStyles': {\n    'workspaceBackgroundColour': '#1e1e1e',\n    'toolboxBackgroundColour': 'blackBackground',\n    'toolboxForegroundColour': '#fff',\n    'flyoutBackgroundColour': '#252526',\n    'flyoutForegroundColour': '#ccc',\n    'flyoutOpacity': 1,\n    'scrollbarColour': '#797979',\n    'insertionMarkerColour': '#fff',\n    'insertionMarkerOpacity': 0.3,\n    'scrollbarOpacity': 0.4,\n    'cursorColour': '#d0d0d0',\n    'blackBackground': '#333'\n  }\n});","import {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    TextField,\n} from \"@material-ui/core\"\nimport Blockly from \"blockly\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { ChangeEvent, useEffect, useRef, useState } from \"react\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function BlocklyModalDialogs() {\n    const [dialogType, setDialogType] =\n        useState<\"alert\" | \"confirm\" | \"prompt\">()\n    const [message, setMessage] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const callback = useRef<any>()\n    const showDialog = !!dialogType\n\n    useEffect(() => {\n        // store older\n        const previous = {\n            alert: Blockly.alert,\n            confirm: Blockly.confirm,\n            prompt: Blockly.prompt,\n        }\n\n        // replace\n        Blockly.alert = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"alert\")\n        }\n        Blockly.confirm = (message, cb) => {\n            setMessage(message)\n            callback.current = cb\n            setDialogType(\"confirm\")\n        }\n        Blockly.prompt = (message, defaultValue, cb) => {\n            setMessage(message)\n            setValue(defaultValue)\n            callback.current = cb\n            setDialogType(\"prompt\")\n        }\n\n        // cleanup\n        return () => {\n            console.log(\"cleanup\")\n            Blockly.alert = previous.alert\n            Blockly.confirm = previous.confirm\n            Blockly.prompt = previous.prompt\n        }\n    }, [])\n\n    const handleCloseConfirm = () => setDialogType(undefined)\n    const handleCancel = () => {\n        callback.current?.(undefined)\n        setDialogType(undefined)\n    }\n    const handleOk = () => {\n        switch (dialogType) {\n            case \"alert\":\n                callback.current?.()\n                break\n            case \"confirm\":\n                callback.current(true)\n                break\n            case \"prompt\":\n                callback.current(value)\n                break\n        }\n        setDialogType(undefined)\n    }\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <Dialog open={showDialog} onClose={handleCloseConfirm}>\n            <DialogContent>\n                <DialogContentText>{message}</DialogContentText>\n                {dialogType === \"prompt\" && (\n                    <TextField id={valueId} value={value} label=\"Value\" fullWidth={true} onChange={handleValueChange} />\n                )}\n            </DialogContent>\n            <DialogActions>\n                {dialogType !== \"alert\" && (\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                )}\n                <Button variant=\"contained\" color=\"primary\" onClick={handleOk}>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n","import React, { useContext, useEffect, useRef } from \"react\"\nimport { useBlocklyWorkspace } from \"react-blockly\"\nimport { WorkspaceSvg } from \"blockly\"\nimport Theme from \"@blockly/theme-modern\"\nimport DarkTheme from \"@blockly/theme-dark\"\nimport BlocklyModalDialogs from \"./BlocklyModalDialogs\"\nimport DarkModeContext from \"../ui/DarkModeContext\"\nimport AppContext from \"../AppContext\"\nimport { createStyles, makeStyles } from \"@material-ui/core\"\nimport clsx from \"clsx\"\nimport { withPrefix } from \"gatsby\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\nimport BlockContext from \"./BlockContext\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        editor: {\n            height: `calc(100vh - ${Flags.diagnostics ? 15 : 10}rem)`,\n            \"& .blocklyTreeLabel\": {\n                fontFamily: theme.typography.fontFamily,\n            },\n            \"& .blocklyText\": {\n                fontWeight: `normal !important`,\n                fontFamily: `${theme.typography.fontFamily} !important`,\n            },\n        },\n    })\n)\n\nexport default function BlockEditor(props: { className?: string }) {\n    const { className } = props\n    const {\n        toolboxConfiguration,\n        workspaceXml,\n        setWorkspace,\n        setWorkspaceXml,\n    } = useContext(BlockContext)\n    const classes = useStyles()\n    const { darkMode } = useContext(DarkModeContext)\n    const { setError } = useContext(AppContext)\n    const theme = darkMode === \"dark\" ? DarkTheme : Theme\n    const gridColor = darkMode === \"dark\" ? \"#555\" : \"#ccc\"\n\n    // ReactBlockly\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const blocklyRef = useRef(null)\n    const { workspace, xml } = useBlocklyWorkspace({\n        ref: blocklyRef,\n        toolboxConfiguration,\n        workspaceConfiguration: {\n            collapse: false,\n            disable: false,\n            comments: false,\n            css: true,\n            trashcan: false,\n            sounds: false,\n            grid: {\n                spacing: 25,\n                length: 1,\n                colour: gridColor,\n                snap: true,\n            },\n            renderer: \"zelos\",\n            theme,\n            oneBasedIndex: false,\n            move: {\n                scrollbars: {\n                    vertical: true,\n                    horizontal: true,\n                },\n            },\n            media: withPrefix(\"blockly/media/\"),\n            zoom: {\n                controls: true,\n                wheel: true,\n                startScale: 1.0,\n                maxScale: 3,\n                minScale: 0.1,\n                scaleSpeed: 1.2,\n                pinch: true,\n            },\n        },\n        initialXml: workspaceXml,\n        onImportXmlError: () => setError(\"Error loading blocks...\"),\n    }) as { workspace: WorkspaceSvg; xml: string }\n\n    // store ref\n    useEffect(() => setWorkspace(workspace), [workspace])\n    useEffect(() => setWorkspaceXml(xml), [xml])\n\n    // resize blockly\n    useEffect(() => {\n        const observer = new ResizeObserver(() => workspace?.resize())\n        observer.observe(blocklyRef.current)\n        return () => observer.disconnect()\n    }, [workspace, blocklyRef.current])\n\n    return (\n        <>\n            <div className={clsx(classes.editor, className)} ref={blocklyRef} />\n            <BlocklyModalDialogs />\n        </>\n    )\n}\n","import Blockly, { FieldVariable } from \"blockly\"\nimport React, { createContext, ReactNode, useEffect, useState } from \"react\"\nimport { CHANGE } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDEventSource } from \"../../../jacdac-ts/src/jdom/eventsource\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport RoleManager from \"../../../jacdac-ts/src/servers/rolemanager\"\nimport { VMProgramRunner } from \"../../../jacdac-ts/src/vm/runner\"\nimport useChange from \"../../jacdac/useChange\"\nimport ReactField from \"./fields/ReactField\"\n\nexport class WorkspaceServices extends JDEventSource {\n    private _runner: VMProgramRunner\n    private _roleManager: RoleManager\n\n    constructor() {\n        super()\n    }\n\n    get runner() {\n        return this._runner\n    }\n\n    set runner(value: VMProgramRunner) {\n        if (this._runner !== value) {\n            this._runner = value\n            this.emit(CHANGE)\n        }\n    }\n\n    get roleManager() {\n        return this._roleManager\n    }\n\n    set roleManager(value: RoleManager) {\n        if (this._roleManager !== value) {\n            this._roleManager = value\n            this.emit(CHANGE)\n        }\n    }\n}\n\nexport interface WorkspaceContextProps {\n    workspace?: Blockly.Workspace\n    sourceId?: string\n    services: WorkspaceServices\n    flyout?: boolean\n    role?: string\n    roleServiceShortId?: string\n    roleService?: JDService\n    runner?: VMProgramRunner\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextProps>({\n    workspace: undefined,\n    flyout: false,\n    sourceId: undefined,\n    services: undefined,\n    role: undefined,\n    roleServiceShortId: undefined,\n    roleService: undefined,\n    runner: undefined,\n})\nWorkspaceContext.displayName = \"Workspace\"\n\nexport default WorkspaceContext\n\nexport interface BlocklyWorkspaceWithServices extends Blockly.Workspace {\n    jacdacServices: WorkspaceServices\n}\n\nexport function WorkspaceProvider(props: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    field: ReactField<any>\n    children: ReactNode\n}) {\n    const { field, children } = props\n    const [sourceBlock, setSourceBlock] = useState<Blockly.Block>(\n        field?.getSourceBlock()\n    )\n    const sourceId = sourceBlock?.id\n    const workspace = sourceBlock?.workspace\n    const services = (workspace as BlocklyWorkspaceWithServices)?.jacdacServices\n    const roleManager = useChange(services, _ => _?.roleManager)\n    const runner = useChange(services, _ => _?.runner)\n\n    const resolveRole = () => {\n        const newSourceBlock = field.getSourceBlock()\n        const roleInput = newSourceBlock?.inputList[0]\n        const roleField = roleInput?.fieldRow.find(\n            f => f.name === \"role\" && f instanceof FieldVariable\n        ) as FieldVariable\n        if (roleField) {\n            const xml = document.createElement(\"xml\")\n            roleField?.toXml(xml)\n            const newRole = roleField?.getVariable()?.name\n            return newRole\n        }\n        return undefined\n    }\n    const resolveRoleService = () => {\n        const newRoleService = role && roleManager?.getService(role)\n        return newRoleService\n    }\n\n    const [role, setRole] = useState<string>(resolveRole())\n    const [roleService, setRoleService] = useState<JDService>(\n        resolveRoleService()\n    )\n    const roleServiceShortId = useChange(\n        roleManager,\n        _ => _?.roles.find(r => r.role === role)?.serviceShortId\n    )\n    const [flyout, setFlyout] = useState(!!sourceBlock?.isInFlyout)\n\n    // resolve role\n    useEffect(() => {\n        return field?.events.subscribe(CHANGE, () => {\n            const newSourceBlock = field.getSourceBlock()\n            console.log(`field change`, { newSourceBlock })\n            setSourceBlock(newSourceBlock)\n            setRole(resolveRole())\n            setFlyout(!!newSourceBlock?.isInFlyout)\n        })\n    }, [field, workspace, runner])\n\n    // resolve current role service\n    useEffect(() => {\n        setRoleService(resolveRoleService())\n        return roleManager?.subscribe(CHANGE, () =>\n            setRoleService(resolveRoleService())\n        )\n    }, [role, runner])\n\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <WorkspaceContext.Provider\n            value={{\n                sourceId,\n                services,\n                role,\n                roleServiceShortId,\n                roleService,\n                runner,\n                flyout,\n            }}\n        >\n            {children}\n        </WorkspaceContext.Provider>\n    )\n}\n","import { fieldShadows } from \"../fields/fields\"\nimport BlockDomainSpecificLanguage from \"./dsl\"\n\nconst fieldsDsl: BlockDomainSpecificLanguage = {\n    id: \"fields\",\n    createBlocks: () => fieldShadows(),\n}\nexport default fieldsDsl\n","import { Block } from \"blockly\"\nimport { SMap } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport {\n    ColorInputDefnition,\n    NumberInputDefinition,\n    OptionsInputDefinition,\n} from \"../toolbox\"\nimport BlockDomainSpecificLanguage from \"./dsl\"\n\nconst builtins: SMap<(block: Block) => string | number | boolean> = {\n    jacdac_on_off: block => block.getFieldValue(\"value\") === \"on\",\n    jacdac_yes_no: block => block.getFieldValue(\"value\") === \"on\",\n    jacdac_time_picker: block => Number(block.getFieldValue(\"value\") || \"0\"),\n    jacdac_angle: block => Number(block.getFieldValue(\"value\") || \"0\"),\n    jacdac_percent: block => Number(block.getFieldValue(\"value\") || \"0\"),\n    jacdac_ratio: block => Number(block.getFieldValue(\"value\") || \"0\"),\n}\n\nconst shadowDsl: BlockDomainSpecificLanguage = {\n    id: \"shadow\",\n    createBlocks: () => [\n        {\n            kind: \"block\",\n            type: `jacdac_on_off`,\n            message0: `%1`,\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"value\",\n                    options: [\n                        [\"enabled\", \"on\"],\n                        [\"disabled\", \"off\"],\n                    ],\n                },\n            ],\n            style: \"logic_blocks\",\n            output: \"Boolean\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_yes_no`,\n            message0: `%1`,\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"value\",\n                    options: [\n                        [\"yes\", \"on\"],\n                        [\"no\", \"off\"],\n                    ],\n                },\n            ],\n            style: \"logic_blocks\",\n            output: \"Boolean\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_time_picker`,\n            message0: `%1`,\n            args0: [\n                <OptionsInputDefinition>{\n                    type: \"field_dropdown\",\n                    name: \"value\",\n                    options: [\n                        [\"0.1\", \"0.1\"],\n                        [\"1\", \"1\"],\n                        [\"5\", \"5\"],\n                        [\"30\", \"30\"],\n                        [\"60\", \"60\"],\n                    ],\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_angle`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_angle\",\n                    name: \"value\",\n                    min: 0,\n                    max: 360,\n                    precision: 10,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_percent`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 100,\n                    precision: 1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_byte`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 255,\n                    precision: 1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_ratio`,\n            message0: `%1`,\n            args0: [\n                <NumberInputDefinition>{\n                    type: \"field_slider\",\n                    name: \"value\",\n                    min: 0,\n                    max: 1,\n                    precision: 0.1,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Number\",\n        },\n        {\n            kind: \"block\",\n            type: `jacdac_color`,\n            message0: `%1`,\n            args0: [\n                <ColorInputDefnition>{\n                    type: \"field_colour\",\n                    name: \"col\",\n                    colour: \"#ff0000\",\n                    colourOptions: [\n                        \"#ff0000\",\n                        \"#ff8000\",\n                        \"#ffff00\",\n                        \"#ff9da5\",\n                        \"#00ff00\",\n                        \"#b09eff\",\n                        \"#00ffff\",\n                        \"#007fff\",\n                        \"#65471f\",\n                        \"#0000ff\",\n                        \"#7f00ff\",\n                        \"#ff0080\",\n                        \"#ff00ff\",\n                        \"#ffffff\",\n                        \"#999999\",\n                        \"#000000\",\n                    ],\n                    columns: 4,\n                },\n            ],\n            style: \"math_blocks\",\n            output: \"Color\",\n        },\n    ],\n\n    blockToValue: block => builtins[block.type]?.(block),\n}\nexport default shadowDsl\n","import BlockDomainSpecificLanguage from \"./dsl\"\nimport {\n    toIdentifier,\n    toMemberExpression,\n} from \"../../../../jacdac-ts/src/vm/compile\"\nimport { makeVMBase } from \"../../vm/VMgenerator\"\n\nconst variablesDsl: BlockDomainSpecificLanguage = {\n    id: \"variables\",\n    types: [\"variables_get\", \"variables_set\", \"math_change\"],\n    createCategory: () => [\n        {\n            kind: \"category\",\n            name: \"Variables\",\n            colour: \"%{BKY_VARIABLES_HUE}\",\n            custom: \"VARIABLE\",\n        },\n    ],\n    compileExpressionToVM: ({ block /*definition*/ }) => {\n        const { type, inputs } = block\n        if (type === \"variables_get\") {\n            const { value: variable } = inputs[0].fields.var\n            const ret = {\n                expr: toMemberExpression(\"$\", variable.toString()),\n                errors: [],\n            }\n            console.log(ret)\n            return ret\n        }\n        return undefined\n    },\n    compileCommandToVM: ({\n        event,\n        block,\n        /*definition,*/ blockToExpression,\n    }) => {\n        const { type, inputs } = block\n        if (type === \"math_change\") {\n            // TODO change by\n        } else if (type === \"variables_set\") {\n            const { expr, errors } = blockToExpression(event, inputs[0].child)\n            const { value: variable } = inputs[0].fields.var\n            return {\n                cmd: makeVMBase(block, {\n                    type: \"CallExpression\",\n                    arguments: [\n                        toMemberExpression(\"$\", variable.toString()),\n                        expr,\n                    ],\n                    callee: toIdentifier(\"writeLocal\"),\n                }),\n                errors,\n            }\n        }\n        return undefined\n    },\n}\nexport default variablesDsl\n","import React, { lazy, useContext, PointerEvent } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport Suspense from \"../../ui/Suspense\"\nimport NoServiceAlert from \"./NoServiceAlert\"\n\nconst JDomServiceTreeView = lazy(\n    () => import(\"../../tools/JDomServiceTreeView\")\n)\n\nfunction JDomTreeWidget() {\n    const { roleService, flyout } = useContext(WorkspaceContext)\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        event.stopPropagation()\n    }\n\n    if (flyout) return null\n    if (!roleService) return <NoServiceAlert />\n\n    return (\n        <div\n            style={{ minWidth: \"12rem\", cursor: \"inherit\" }}\n            onPointerDown={onPointerStopPropagation}\n            onPointerUp={onPointerStopPropagation}\n            onPointerMove={onPointerStopPropagation}\n        >\n            {roleService && (\n                <Suspense>\n                    <JDomServiceTreeView\n                        service={roleService}\n                        defaultExpanded={[roleService.id]}\n                    />\n                </Suspense>\n            )}\n        </div>\n    )\n}\n\nexport default class JDomTreeField extends ReactInlineField {\n    static KEY = \"jacdac_jdom_service_tree\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new JDomTreeField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <JDomTreeWidget />\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { HidKeyboardModifiers } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport ReactField, { ReactFieldJSON } from \"./ReactField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { renderKeyboardKey } from \"../../../../jacdac-ts/src/servers/hidkeyboardserver\"\nconst KeyboardKeyInput = lazy(() => import(\"../../ui/KeyboardKeyInput\"))\n\nexport interface KeyboardFieldValue {\n    selector: number\n    modifiers: HidKeyboardModifiers\n}\n\nexport default class KeyboardKeyField extends ReactField<KeyboardFieldValue> {\n    static KEY = \"jacdac_field_keyboard_key\"\n\n    static fromJson(options: ReactFieldJSON) {\n        return new KeyboardKeyField(options?.value, undefined, options)\n    }\n\n    get defaultValue() {\n        return { selector: 4, modifiers: 0 }\n    }\n\n    getText_() {\n        const { selector, modifiers } = this.value\n        return renderKeyboardKey(selector, modifiers, true)\n    }\n\n    renderField(): ReactNode {\n        const { selector, modifiers } = this.value\n        const handleChange = (\n            newSelector: number,\n            newModifiers: HidKeyboardModifiers\n        ) => {\n            this.value = { selector: newSelector, modifiers: newModifiers }\n        }\n        return (\n            <Suspense>\n                <KeyboardKeyInput\n                    initialSelector={selector}\n                    initialModifiers={modifiers}\n                    onChange={handleChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport { rgbToHtmlColor } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { child } from \"../../widgets/svg\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst LEDWidget = lazy(() => import(\"../../widgets/LEDWidget\"))\n\nfunction LEDColorFieldWidget() {\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <LEDWidget\n                ledColor={value}\n                onLedColorChange={onValueChange}\n                ledCount={3}\n                color=\"secondary\"\n            />\n        </Suspense>\n    )\n}\n\nexport default class LEDColorField extends ReactField<number> {\n    static KEY = \"jacdac_field_led_color\"\n    static SHADOW = toShadowDefinition(LEDColorField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDColorField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 28, height: 28 })\n    }\n\n    protected initCustomView() {\n        const { width } = this.size_\n        const r = width >> 1\n        return child(this.fieldGroup_, \"circle\", {\n            r: width >> 1,\n            cx: r,\n            cy: r,\n            strokeWidth: 2,\n            stroke: \"#777\",\n        }) as SVGCircleElement\n    }\n\n    updateView() {\n        const c = rgbToHtmlColor(this.value)\n        const circle = this.view as SVGCircleElement\n        if (c) {\n            circle?.setAttribute(\"fill\", c)\n        }\n    }\n\n    getText_() {\n        return rgbToHtmlColor(this.value)\n    }\n\n    renderField(): ReactNode {\n        return <LEDColorFieldWidget />\n    }\n}\n","import ReactField from \"./ReactField\"\nimport Blockly from \"blockly\"\nimport { child } from \"../../widgets/svg\"\n\nexport default class ReactImageField<T> extends ReactField<T> {\n    constructor(value: string, width = 32, height = 32) {\n        super(value, undefined, undefined, { width, height })\n    }\n\n    setSize(width: number, height: number) {\n        this.size_ = new Blockly.utils.Size(width, height)\n        const img = this.view as SVGImageElement\n        if (img) {\n            img.setAttribute(\"width\", width + \"\")\n            img.setAttribute(\"height\", height + \"\")\n        }\n    }\n\n    protected updateView() {\n        const imgUri = this.renderValue()\n        const img = this.view as SVGImageElement\n        if (imgUri) {\n            img?.setAttributeNS(\n                \"http://www.w3.org/1999/xlink\",\n                \"xlink:href\",\n                imgUri\n            )\n            img?.setAttribute(\"alt\", this.getText())\n        }\n    }\n\n    /**\n     * Renders the value to a data uri string\n     */\n    protected renderValue(): string {\n        return undefined\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        return child(this.fieldGroup_, \"image\", {\n            height,\n            width,\n            alt: this.getText(),\n        }) as SVGImageElement\n    }\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { fromHex, toHex } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, VALUE_CHANGE } from \"./ReactField\"\nimport ReactImageField from \"./ReactImageField\"\nconst LEDMatrixWidget = lazy(() => import(\"../../widgets/LEDMatrixWidget\"))\n\nexport interface LEDMatrixFieldValue {\n    // hex data\n    leds: string\n    rows: number\n    columns: number\n}\n\nexport default class LEDMatrixField extends ReactImageField<LEDMatrixFieldValue> {\n    static KEY = \"jacdac_field_led_matrix\"\n\n    constructor(value: string) {\n        super(value)\n\n        this.events.on(VALUE_CHANGE, () => {\n            const { rows, columns } = this.value\n            this.setSize(32, (32 / columns) * rows)\n        })\n    }\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LEDMatrixField(options?.value)\n    }\n\n    get defaultValue() {\n        return {\n            leds: toHex(new Uint8Array(0)),\n            rows: 5,\n            columns: 5,\n        }\n    }\n\n    getText_() {\n        const { leds, rows, columns } = this.value\n        return `${leds} (${rows}x${columns})`\n    }\n\n    renderValue(): string {\n        const { leds, rows, columns } = this.value\n        // render current state to LEDmatrix field\n        const columnspadded = columns + (8 - (columns % 8))\n        const ledsBytes = fromHex(leds)\n        const cvs = document.createElement(\"canvas\")\n        const b = 3\n        const pw = 8\n        const ph = 8\n        const w = rows * pw + (rows - 1) * b\n        const h = columns * ph + (columns - 1) * b\n        cvs.width = w + 2 * b\n        cvs.height = h + 2 * b\n        const ctx = cvs.getContext(\"2d\")\n        ctx.fillStyle = \"#444\"\n        ctx.fillRect(b, b, w, h)\n        ctx.fillStyle = \"blue\"\n        for (let x = 0; x < columns; ++x) {\n            for (let y = 0; y < rows; ++y) {\n                const bitindex = y * columnspadded + x\n                const byte = ledsBytes[bitindex >> 3]\n                const bit = bitindex % 8\n                const on = 1 === ((byte >> bit) & 1)\n                ctx.fillStyle = on ? \"#ffc400\" : \"#000\"\n                ctx.fillRect(x * (pw + b) + b, y * (ph + b) + b, pw, ph)\n            }\n        }\n        const dataUri = cvs.toDataURL(\"image/png\")\n        return dataUri\n    }\n\n    renderField(): ReactNode {\n        const { leds, rows, columns } = this.value\n        const ledsBytes = fromHex(leds)\n        console.log(`led bytes`, { leds, ledsBytes })\n        const onChange = (newLeds: Uint8Array) =>\n            (this.value = {\n                leds: toHex(newLeds),\n                rows,\n                columns,\n            })\n        return (\n            <Suspense>\n                <LEDMatrixWidget\n                    color=\"secondary\"\n                    brightness={1}\n                    leds={ledsBytes}\n                    rows={rows}\n                    columns={columns}\n                    onChange={onChange}\n                />\n            </Suspense>\n        )\n    }\n}\n","import { useTheme } from \"@material-ui/core\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport { VMCode, VM_EVENT } from \"../../../../jacdac-ts/src/vm/events\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport ReactInlineField from \"./ReactInlineField\"\n\nfunction LogViewWidget() {\n    const { runner } = useContext(WorkspaceContext)\n    const theme = useTheme()\n    const [logs, setLogs] = useState<{ text: string; count: number }[]>([])\n\n    useEffect(() =>\n        runner?.subscribe(VM_EVENT, code => {\n            if (code === VMCode.LogEntry) setLogs(runner?.logData || [])\n        })\n    )\n\n    return (\n        <pre\n            style={{\n                padding: \"0\",\n                marginBottom: \"0\",\n                background: \"none\",\n                color: theme.palette.text.primary,\n                maxHeight: \"80vh\",\n                overflowY: \"auto\",\n            }}\n        >\n            {logs\n                .slice(-20)\n                .map(l => `${l.count > 1 ? `${l.count}: ` : \"\"}${l.text}`)\n                .join(\"\\n\")}\n        </pre>\n    )\n}\n\nexport default class LogViewField extends ReactInlineField {\n    static KEY = \"jacdac_log_view\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new LogViewField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <LogViewWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport { Button } from \"@material-ui/core\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport { startServiceProviderFromServiceClass } from \"../../../../jacdac-ts/src/servers/servers\"\nimport JacdacContext, { JacdacContextProps } from \"../../../jacdac/Context\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport { serviceSpecificationFromName } from \"../../../../jacdac-ts/src/jdom/spec\"\nimport { Alert } from \"@material-ui/lab\"\n\nexport default function NoServiceAlert() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { roleService, roleServiceShortId, flyout } =\n        useContext(WorkspaceContext)\n    const spec = serviceSpecificationFromName(roleServiceShortId)\n    const handleStartSimulator = () =>\n        startServiceProviderFromServiceClass(bus, spec.classIdentifier)\n\n    // nothing to do here\n    if (roleService || flyout) return null\n\n    // unresolved, unknown service\n    if (!roleService && !roleServiceShortId) return null\n\n    // unknown spec\n    if (!spec) return <Alert severity=\"warning\">Unknown service</Alert>\n\n    return (\n        <Button\n            variant=\"outlined\"\n            color=\"default\"\n            startIcon={<AddIcon />}\n            onClick={handleStartSimulator}\n        >\n            start {spec.name}\n        </Button>\n    )\n}\n","import React, { lazy, ReactNode } from \"react\"\nimport { createToneContext, ToneContext } from \"../../hooks/toneContext\"\nimport Suspense from \"../../ui/Suspense\"\nimport ReactField, {\n    ReactFieldJSON,\n    toShadowDefinition,\n    UNMOUNT,\n} from \"./ReactField\"\nconst PianoWidget = lazy(() => import(\"../../widgets/PianoWidget\"))\n\nexport default class NoteField extends ReactField<number> {\n    static KEY = \"jacdac_field_note\"\n    static SHADOW = toShadowDefinition(NoteField)\n    toneContext: ToneContext\n\n    static fromJson(options: ReactFieldJSON) {\n        return new NoteField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options)\n        this.events.on(UNMOUNT, () => {\n            this.toneContext?.close()\n            this.toneContext = undefined\n        })\n    }\n\n    get defaultValue() {\n        return 440\n    }\n\n    getText_() {\n        return (this.value | 0) + \"\"\n    }\n\n    renderField(): ReactNode {\n        const handlePlayTone = async (newFrequency: number) => {\n            this.value = newFrequency\n            if (!this.toneContext) this.toneContext = createToneContext()\n            this.toneContext?.playTone(newFrequency, 400)\n        }\n        return (\n            <Suspense>\n                <PianoWidget playTone={handlePlayTone} />\n            </Suspense>\n        )\n    }\n}\n","import React, { PointerEvent, ReactNode } from \"react\"\n\nexport function PointerBoundary(props: {\n    className?: string\n    children: ReactNode\n}) {\n    const { className, children } = props\n    const onPointerStopPropagation = (event: PointerEvent<HTMLDivElement>) => {\n        // make sure blockly does not handle drags when interacting with UI\n        event.stopPropagation()\n    }\n    return (\n        <div\n            className={className}\n            style={{ cursor: \"inherit\" }}\n            onPointerDown={onPointerStopPropagation}\n            onPointerUp={onPointerStopPropagation}\n            onPointerMove={onPointerStopPropagation}\n        >\n            {children}\n        </div>\n    )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Blockly from \"blockly\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport { ReactNode } from \"react\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport { Box } from \"@material-ui/core\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { ValueProvider } from \"./ValueContext\"\nimport { JDEventSource } from \"../../../../jacdac-ts/src/jdom/eventsource\"\nimport { CHANGE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport { WorkspaceProvider } from \"../WorkspaceContext\"\n\ndeclare module \"blockly\" {\n    interface Block {\n        getColourTertiary(): string\n    }\n}\n\nexport type ReactFieldJSON = any\n\nexport const SOURCE_BLOCK_CHANGE = \"sourceBlockChange\"\nexport const VALUE_CHANGE = \"valueChange\"\nexport const MOUNT = \"mount\"\nexport const UNMOUNT = \"unmount\"\n\nexport default class ReactField<T> extends Blockly.Field {\n    SERIALIZABLE = true\n    public readonly events = new JDEventSource()\n    protected div_: Element\n    protected view: SVGElement\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(\n        value: string,\n        validator?: any,\n        options?: any,\n        size?: { width: number; height: number }\n    ) {\n        super(value, validator, options)\n        if (size) this.size_ = new Blockly.utils.Size(size.width, size.height)\n    }\n\n    get defaultValue(): T {\n        return {} as T\n    }\n\n    get value(): T {\n        try {\n            const v = JSON.parse(this.getValue())\n            return (v || this.defaultValue) as T\n        } catch (e) {\n            console.warn(e)\n            return this.defaultValue\n        }\n    }\n\n    set value(v: T) {\n        this.setValue(JSON.stringify(v))\n    }\n\n    // override to support custom view\n    protected initCustomView(): SVGElement {\n        return null\n    }\n\n    // override to update view\n    protected updateView() {}\n\n    getText_() {\n        return JSON.stringify(this.value)\n    }\n\n    toXml(fieldElement: Element) {\n        fieldElement.textContent = JSON.stringify(this.value)\n        return fieldElement\n    }\n\n    fromXml(fieldElement: Element) {\n        try {\n            const v = JSON.parse(fieldElement.textContent)\n            this.value = v\n        } catch (e) {\n            console.log(e, { text: fieldElement.textContent })\n            this.value = undefined\n        }\n    }\n\n    emitChange() {\n        this.events.emit(CHANGE)\n    }\n\n    setSourceBlock(block: Blockly.Block) {\n        const changed = block !== this.sourceBlock_\n        super.setSourceBlock(block)\n        if (changed) {\n            this.events.emit(SOURCE_BLOCK_CHANGE, block)\n            this.emitChange()\n        }\n    }\n\n    initView() {\n        this.view = this.initCustomView()\n        if (this.view) this.updateView()\n        else super.initView()\n    }\n\n    updateSize_() {\n        if (!this.view) super.updateSize_()\n    }\n\n    doValueUpdate_(newValue: string) {\n        const change = this.value_ !== newValue\n        if (this.view) {\n            this.value_ = newValue\n            this.updateView()\n        } else super.doValueUpdate_(newValue)\n        if (change) {\n            this.events.emit(VALUE_CHANGE, this.value)\n            this.emitChange()\n        }\n    }\n\n    showEditor_() {\n        this.div_ = Blockly.DropDownDiv.getContentDiv()\n        ReactDOM.render(this.render(), this.div_)\n        const border = this.sourceBlock_.getColourTertiary()\n        Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(), border)\n\n        // the div_ size has not been computed yet, so let the browse handle this\n        setTimeout(() => {\n            Blockly.DropDownDiv.showPositionedByField(\n                this,\n                this.dropdownDispose_.bind(this)\n            )\n            this.events.emit(MOUNT)\n        }, 200)\n    }\n\n    hide() {\n        Blockly.DropDownDiv.hideIfOwner(this, true)\n    }\n\n    dropdownDispose_() {\n        // this blows on hot reloads\n        try {\n            this.events.emit(UNMOUNT)\n            ReactDOM.unmountComponentAtNode(this.div_)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    render() {\n        const onValueChange = (newValue: any) => (this.value = newValue)\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode={\"dark\"}>\n                    <IdProvider>\n                        <JacdacProvider>\n                            <AppTheme>\n                                <ValueProvider\n                                    value={this.value}\n                                    onValueChange={onValueChange}\n                                >\n                                    <Box\n                                        m={0.5}\n                                        borderRadius={\"0.25rem\"}\n                                        bgcolor=\"background.paper\"\n                                    >\n                                        {this.renderField()}\n                                    </Box>\n                                </ValueProvider>\n                            </AppTheme>\n                        </JacdacProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    renderField(): ReactNode {\n        return <span>not implemented</span>\n    }\n\n    dispose() {\n        this.view = undefined\n        super.dispose()\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toShadowDefinition(fieldType: any): BlockDefinition {\n    assert(!!fieldType.KEY)\n    const type = fieldType.KEY + \"_shadow\"\n    return {\n        kind: \"block\",\n        type,\n        message0: `%1`,\n        args0: [\n            {\n                type: fieldType.KEY,\n                name: \"value\",\n            },\n        ],\n        style: \"math_blocks\",\n        output: \"Number\",\n        template: \"shadow\",\n    }\n}\n","import React, { ReactNode } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport ReactField from \"./ReactField\"\nimport { child } from \"../../widgets/svg\"\nimport DarkModeProvider from \"../../ui/DarkModeProvider\"\nimport { IdProvider } from \"react-use-id-hook\"\nimport JacdacProvider from \"../../../jacdac/Provider\"\nimport AppTheme from \"../../ui/AppTheme\"\nimport Blockly from \"blockly\"\nimport { WorkspaceProvider } from \"../WorkspaceContext\"\n\nexport default class ReactInlineField extends ReactField<unknown> {\n    protected container: HTMLDivElement\n    protected resizeObserver: ResizeObserver\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options?.value, undefined, options, { width: 1, height: 1 })\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"inline-block\"\n        c.style.minWidth = \"14rem\"\n        return c\n    }\n\n    protected initCustomView() {\n        const { width, height } = this.size_\n        const fo = child(this.fieldGroup_, \"foreignObject\", {\n            x: 0,\n            y: 0,\n            width,\n            height,\n        }) as SVGForeignObjectElement\n\n        this.container = this.createContainer()\n        fo.appendChild(this.container)\n\n        this.resizeObserver = new ResizeObserver(\n            (entries: ResizeObserverEntry[]) => {\n                const entry = entries[0]\n                const { contentRect } = entry\n                this.size_.width = contentRect.width\n                this.size_.height = contentRect.height\n                fo.setAttribute(\"width\", this.size_.width + \"\")\n                fo.setAttribute(\"height\", this.size_.height + \"\")\n                this.forceRerender()\n            }\n        )\n        this.resizeObserver.observe(this.container)\n\n        ReactDOM.render(this.renderBlock(), this.container)\n        return fo\n    }\n\n    dispose() {\n        if (this.container) {\n            ReactDOM.unmountComponentAtNode(this.container)\n            this.container = undefined\n        }\n        if (this.resizeObserver) {\n            this.resizeObserver.disconnect()\n            this.resizeObserver = undefined\n        }\n        super.dispose()\n    }\n\n    renderField(): ReactNode {\n        return <div>not used</div>\n    }\n\n    renderInlineField(): ReactNode {\n        return null\n    }\n\n    renderBlock(): ReactNode {\n        return (\n            <WorkspaceProvider field={this}>\n                <DarkModeProvider fixedDarkMode=\"dark\">\n                    <IdProvider>\n                        <JacdacProvider>\n                            <AppTheme>{this.renderInlineField()}</AppTheme>\n                        </JacdacProvider>\n                    </IdProvider>\n                </DarkModeProvider>\n            </WorkspaceProvider>\n        )\n    }\n\n    getText_() {\n        return \"...\"\n    }\n\n    // don't bind any mouse event\n    bindEvents_() {\n        Blockly.Tooltip.bindMouseEvents(this.getClickTarget_())\n    }\n}\n","import { Grid, Slider } from \"@material-ui/core\"\nimport React, { ReactNode, useContext } from \"react\"\nimport ReactField from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nfunction FieldWithSlider(props: { children: ReactNode }) {\n    const { children } = props\n    const { value, onValueChange } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    const handleChange = async (ev: unknown, nv: number | number[]) => {\n        const newValue = nv as number\n        onValueChange(newValue)\n    }\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                {children}\n            </Grid>\n            <Grid item xs={12}>\n                <Slider\n                    color=\"secondary\"\n                    valueLabelDisplay=\"auto\"\n                    valueLabelFormat={`${Math.round(value)}`}\n                    min={-90}\n                    max={90}\n                    step={5}\n                    value={value}\n                    onChange={handleChange}\n                    aria-label=\"angle\"\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class SliderField extends ReactField<number> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(value: string, options?: any) {\n        super(value, undefined, options)\n    }\n\n    get defaultValue() {\n        return 0\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderField(): ReactNode {\n        return <FieldWithSlider>{this.renderWidget()}</FieldWithSlider>\n    }\n\n    renderWidget(): ReactNode {\n        return null\n    }\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport SliderField from \"./SliderField\"\nimport Suspense from \"../../ui/Suspense\"\nimport { ReactFieldJSON, toShadowDefinition } from \"./ReactField\"\nimport ValueContext, { ValueContextProps } from \"./ValueContext\"\n\nconst ServoWidget = lazy(() => import(\"../../widgets/ServoWidget\"))\n\nfunction ServiceFieldWidget() {\n    const { value } =\n        useContext<ValueContextProps<number>>(ValueContext)\n    return (\n        <Suspense>\n            <ServoWidget\n                angle={value}\n                offset={0}\n                color=\"secondary\"\n                enabled={true}\n            />\n        </Suspense>\n    )\n}\n\nexport default class ServoAngleField extends SliderField {\n    static KEY = \"jacdac_field_servo_angle\"\n    static SHADOW = toShadowDefinition(ServoAngleField)\n\n    static fromJson(options: ReactFieldJSON) {\n        return new ServoAngleField(options?.value, options)\n    }\n\n    getText_() {\n        return this.value + \"\"\n    }\n\n    renderWidget(): ReactNode {\n        return <ServiceFieldWidget />\n    }\n}\n","import React, { useContext } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport { Grid } from \"@material-ui/core\"\nimport DashboardServiceWidget from \"../../dashboard/DashboardServiceWidget\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport NoServiceAlert from \"./NoServiceAlert\"\nimport { PointerBoundary } from \"./PointerBoundary\"\n\nfunction TwinWidget() {\n    const { roleService, flyout } = useContext(WorkspaceContext)\n    if (flyout) return null\n    if (!roleService) return <NoServiceAlert />\n\n    return (\n        <Grid\n            container\n            alignItems=\"center\"\n            alignContent=\"center\"\n            justify=\"center\"\n            spacing={1}\n        >\n            <Grid item>\n                <PointerBoundary>\n                    <DashboardServiceWidget\n                        service={roleService}\n                        visible={true}\n                        variant=\"icon\"\n                    />\n                </PointerBoundary>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default class TwinField extends ReactInlineField {\n    static KEY = \"jacdac_field_twin\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new TwinField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    renderInlineField() {\n        return <TwinWidget />\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { createContext, ReactNode, useState } from \"react\"\n\nexport interface ValueContextProps<T = any> {\n    value: T\n    onValueChange: (value: T) => void\n}\n\nexport const ValueContext = createContext<ValueContextProps>({\n    value: undefined,\n    onValueChange: undefined,\n})\nValueContext.displayName = \"Value\"\n\nexport default ValueContext\n\nexport function ValueProvider(props: {\n    value: any\n    onValueChange?: (newValue: any) => any\n    children: ReactNode\n}) {\n    const {\n        children,\n        value: initialValue,\n        onValueChange: onFieldValueChange,\n    } = props\n    const [value, setValue] = useState<any>(initialValue)\n    const onValueChange = (newValue: any) => {\n        setValue(newValue)\n        onFieldValueChange?.(newValue)\n    }\n    return (\n        // eslint-disable-next-line react/react-in-jsx-scope\n        <ValueContext.Provider value={{ value, onValueChange }}>\n            {children}\n        </ValueContext.Provider>\n    )\n}\n","import React, { useContext, useState } from \"react\"\nimport { makeStyles, createStyles, useTheme } from \"@material-ui/core\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        mini: {\n            display: \"inline-block\",\n            width: \"10rem\",\n        },\n    })\n)\n\nexport function useTrendChartData(maxLength = 25) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [trendData, setTrendData] = useState<[number, number][]>([])\n\n    const addTrendValue = (value: number) => {\n        if (isNaN(value)) return\n\n        const { timestamp } = bus\n        const entry: [number, number] = [timestamp, value]\n        setTrendData(trendData => [...trendData.slice(-(maxLength - 1)), entry])\n    }\n\n    return {\n        trendData,\n        addTrendValue,\n    }\n}\n\nexport default function TrendChart(props: {\n    data: [number, number][]\n    useGradient?: boolean\n    unit?: string\n    width?: number\n    height?: number\n    dot?: number\n    mini?: boolean\n}) {\n    const {\n        useGradient,\n        data,\n        unit,\n        width = 80,\n        height = 15,\n        dot,\n        mini,\n    } = props\n\n    const theme = useTheme()\n    const classes = useStyles()\n\n    // nothing to show for\n    if (data?.length < 2) return null\n\n    const vpw = width\n    const vph = height\n\n    const color = theme.palette.secondary.main\n    const shape = unit === \"#\" ? \"step\" : \"line\"\n    const symmetric = unit === \"g\" ? true : false\n\n    const values = data.map(r => r[1])\n    const mint = data[0][0]\n    const maxt = data[data.length - 1][0]\n    let minv = unit === \"/\" ? 0 : Math.min.apply(null, values)\n    let maxv = unit === \"/\" ? 1 : Math.max.apply(null, values)\n    const opposite = unit !== \"/\" && Math.sign(minv) != Math.sign(maxv)\n    if (isNaN(minv) && isNaN(maxv)) {\n        minv = 0\n        maxv = 1\n    }\n    if (symmetric) {\n        maxv = Math.max(Math.abs(minv), Math.abs(maxv))\n        minv = -maxv\n    }\n    const rv = maxv - minv\n\n    const margin = 2\n    const h = maxv - minv || 10\n    const w = maxt - mint || 10\n\n    const strokeWidth = 0.25\n    const axisWidth = 0.2\n    const axisColor = \"#ccc\"\n    const pointRadius = strokeWidth * 1.5\n    const toffset = -pointRadius * 3\n\n    const x = (t: number) => ((t - mint) / w) * vpw\n    const y = (v: number) => {\n        if (v === undefined || isNaN(v)) v = minv\n        // adding random for lineragradient bug workaround\n        // which does not render perfectly\n        // horizontal lines\n        return (\n            ((Math.random() * 0.0001 * rv - (v - minv)) / h) *\n            (vph - 2 * margin)\n        )\n    }\n    const lastRow = data[data.length - 1]\n    const path =\n        shape == \"step\"\n            ? data\n                  .map((row, ri) =>\n                      ri == 0\n                          ? `M ${x(row[0])} ${y(row[1])}`\n                          : `H ${x(row[0])} V ${y(row[1])}`\n                  )\n                  .join(\" \")\n            : data\n                  .map(\n                      (row, ri) =>\n                          `${ri == 0 ? `M` : `L`} ${x(row[0])} ${y(row[1])}`\n                  )\n                  .join(\" \")\n    return (\n        <div className={mini ? classes.mini : undefined}>\n            <svg\n                viewBox={`0 0 ${vpw} ${vph}`}\n                style={{ maxHeight: mini ? \"5vh\" : \"10vh\", maxWidth: \"100%\" }}\n            >\n                {useGradient && (\n                    <defs>\n                        <linearGradient\n                            key={`gradaxis`}\n                            id={`gradientaxis`}\n                            x1=\"0%\"\n                            y1=\"0%\"\n                            x2=\"100%\"\n                            y2=\"0%\"\n                        >\n                            <stop\n                                offset=\"0%\"\n                                stopOpacity=\"0\"\n                                stopColor={axisColor}\n                            />\n                            <stop\n                                offset=\"5%\"\n                                stopOpacity=\"0\"\n                                stopColor={axisColor}\n                            />\n                            <stop\n                                offset=\"40%\"\n                                stopOpacity=\"1\"\n                                stopColor={axisColor}\n                            />\n                            <stop\n                                offset=\"100%\"\n                                stopOpacity=\"1\"\n                                stopColor={axisColor}\n                            />\n                        </linearGradient>\n                        {useGradient && (\n                            <linearGradient\n                                id={`gradient0`}\n                                x1=\"0%\"\n                                y1=\"0%\"\n                                x2=\"100%\"\n                                y2=\"0%\"\n                            >\n                                <stop\n                                    offset=\"0%\"\n                                    stopOpacity=\"0\"\n                                    stopColor={color}\n                                />\n                                <stop\n                                    offset=\"5%\"\n                                    stopOpacity=\"0\"\n                                    stopColor={color}\n                                />\n                                <stop\n                                    offset=\"40%\"\n                                    stopOpacity=\"1\"\n                                    stopColor={color}\n                                />\n                                <stop\n                                    offset=\"100%\"\n                                    stopOpacity=\"1\"\n                                    stopColor={color}\n                                />\n                            </linearGradient>\n                        )}\n                    </defs>\n                )}\n                <g transform={`translate(${toffset}, ${vph - margin})`}>\n                    {opposite && (\n                        <line\n                            x1={x(mint)}\n                            x2={x(maxt)}\n                            y1={y(0)}\n                            y2={y(0)}\n                            strokeWidth={axisWidth}\n                            stroke={\n                                useGradient ? `url(#gradientaxis)` : axisColor\n                            }\n                        />\n                    )}\n                    <g>\n                        <path\n                            d={path}\n                            fill=\"none\"\n                            stroke={useGradient ? `url(#gradient0)` : color}\n                            strokeWidth={strokeWidth}\n                            strokeLinejoin=\"round\"\n                        />\n                        {dot && (\n                            <circle\n                                cx={x(lastRow[0])}\n                                cy={y(lastRow[1])}\n                                r={pointRadius}\n                                fill={color}\n                            />\n                        )}\n                    </g>\n                </g>\n            </svg>\n        </div>\n    )\n}\n","import React, { useContext, useEffect, useState } from \"react\"\nimport { ReactFieldJSON } from \"./ReactField\"\nimport { Box, Grid, Switch, Typography, useTheme } from \"@material-ui/core\"\nimport WorkspaceContext from \"../WorkspaceContext\"\nimport ReactInlineField from \"./ReactInlineField\"\nimport { PointerBoundary } from \"./PointerBoundary\"\nimport { WatchValueType } from \"../../../../jacdac-ts/src/vm/runner\"\nimport { VM_EVENT, VMCode } from \"../../../../jacdac-ts/src/vm/events\"\nimport { roundWithPrecision } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport TrendChart, { useTrendChartData } from \"../../TrendChart\"\n\nfunction WatchValueWidget() {\n    const { runner, sourceId } = useContext(WorkspaceContext)\n    const theme = useTheme()\n\n    // track changes\n    const [value, setValue] = useState<WatchValueType>(\n        runner?.lookupWatch(sourceId)\n    )\n    const { trendData, addTrendValue } = useTrendChartData()\n\n    useEffect(() => {\n        setValue(undefined)\n        return runner?.subscribe(\n            VM_EVENT,\n            (code: VMCode, watchSourceId?: string) => {\n                if (code === VMCode.WatchChange && watchSourceId === sourceId) {\n                    const newValue = runner.lookupWatch(sourceId)\n                    setValue(newValue)\n                    addTrendValue(newValue)\n                }\n            }\n        )\n    }, [runner, sourceId])\n\n    let valueNumber = typeof value === \"number\" ? (value as number) : undefined\n    if (!isNaN(valueNumber)) {\n        const step = Math.ceil(Math.abs(valueNumber)) / 10\n        const precision = step < 1 ? Math.ceil(-Math.log10(step)) : 0\n        valueNumber = roundWithPrecision(valueNumber, precision)\n    }\n\n    return (\n        <Box\n            bgcolor={theme.palette.background.paper}\n            borderRadius={theme.spacing(1)}\n            color={theme.palette.text.primary}\n        >\n            <Grid\n                container\n                alignItems=\"flex-end\"\n                alignContent=\"center\"\n                justify=\"center\"\n                spacing={1}\n            >\n                <Grid item>\n                    <PointerBoundary>\n                        {!isNaN(valueNumber) ? (\n                            <Typography variant=\"body1\">\n                                {valueNumber}\n                            </Typography>\n                        ) : typeof value === \"boolean\" ? (\n                            <Switch value={!!value} />\n                        ) : (\n                            <Typography variant=\"body1\">\n                                {value === undefined ? \"...\" : value + \"\"}\n                            </Typography>\n                        )}\n                    </PointerBoundary>\n                </Grid>\n                {!isNaN(valueNumber) && (\n                    <Grid item>\n                        <PointerBoundary>\n                            <TrendChart\n                                data={trendData}\n                                mini={true}\n                                dot={2}\n                                useGradient={true}\n                            />\n                        </PointerBoundary>\n                    </Grid>\n                )}\n            </Grid>\n        </Box>\n    )\n}\n\nexport default class WatchValueField extends ReactInlineField {\n    static KEY = \"jacdac_watch_value\"\n    static EDITABLE = false\n\n    static fromJson(options: ReactFieldJSON) {\n        return new WatchValueField(options)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(options?: any) {\n        super(options)\n    }\n\n    protected createContainer(): HTMLDivElement {\n        const c = document.createElement(\"div\")\n        c.style.display = \"inline-block\"\n        c.style.minWidth = \"4rem\"\n        return c\n    }\n\n    renderInlineField() {\n        return <WatchValueWidget />\n    }\n}\n","import Blockly from \"blockly\"\nimport NoteField from \"./NoteField\"\nimport KeyboardKeyField from \"./KeyboardKeyField\"\nimport LEDMatrixField from \"./LEDMatrixField\"\nimport ServoAngleField from \"./ServoAngleField\"\nimport { BlockDefinition } from \"../toolbox\"\nimport { assert } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport LEDColorField from \"./LEDColorField\"\nimport TwinField from \"./TwinField\"\nimport JDomTreeField from \"./JDomTreeField\"\nimport WatchValueField from \"./WatchValueField\"\nimport LogViewField from \"./LogViewField\"\n\nlet reactFieldShadows: BlockDefinition[]\nexport function registerFields() {\n    if (reactFieldShadows) return\n\n    reactFieldShadows = []\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const registerType = (fieldType: any) => {\n        const key = fieldType.KEY\n        assert(!!key)\n        try {\n            Blockly.fieldRegistry.unregister(key) // hot reload issues\n        } catch (e) {\n            // ignore hot reload issues\n        }\n        Blockly.fieldRegistry.register(key, fieldType)\n        if (fieldType.SHADOW) reactFieldShadows.push(fieldType.SHADOW)\n    }\n    const fieldTypes = [\n        KeyboardKeyField,\n        NoteField,\n        LEDMatrixField,\n        ServoAngleField,\n        LEDColorField,\n        TwinField,\n        JDomTreeField,\n        WatchValueField,\n        LogViewField,\n    ]\n    fieldTypes.forEach(registerType)\n}\n\nexport function fieldShadows() {\n    registerFields()\n    return reactFieldShadows.slice(0)\n}\n","import { SMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport Blockly from \"blockly\"\n\nexport const NEW_PROJET_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>'\n\nexport interface InputDefinition {\n    type: string\n    name?: string\n}\n\nexport interface ValueInputDefinition extends InputDefinition {\n    type: \"input_value\"\n    check?: string | string[]\n}\n\nexport interface DummyInputDefinition extends InputDefinition {\n    type: \"input_dummy\"\n}\n\nexport interface StatementInputDefinition extends InputDefinition {\n    type: \"input_statement\"\n    check?: string | string[]\n}\n\nexport interface VariableInputDefinition extends InputDefinition {\n    type: \"field_variable\"\n    variable?: string\n    variableTypes?: string[]\n    defaultType?: string\n}\n\nexport interface TextInputDefinition extends InputDefinition {\n    type: \"field_input\"\n    text?: string\n}\n\nexport interface OptionsInputDefinition extends InputDefinition {\n    type: \"field_dropdown\"\n    options?: [string, string][]\n}\n\nexport interface NumberInputDefinition extends InputDefinition {\n    min?: number\n    max?: number\n    precision?: number\n}\n\nexport interface ColorInputDefnition extends InputDefinition {\n    color?: string\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface BlockReference {\n    kind: \"block\"\n    type: string\n    values?: SMap<BlockReference>\n    blockxml?: string\n\n    value?: number\n    min?: number\n    max?: number\n}\n\nexport type EventTemplate = \"event\"\n\nexport type EventFieldTemplate = \"event_field\"\n\nexport type RegisterTemplate =\n    | \"register_change_event\"\n    | \"register_set\"\n    | \"register_get\"\n\nexport type CommandTemplate = \"command\"\n\nexport type BlockTemplate =\n    | EventTemplate\n    | EventFieldTemplate\n    | RegisterTemplate\n    | CommandTemplate\n    | \"shadow\"\n    | \"meta\"\n    | string\n\nexport interface BlockDefinition extends BlockReference {\n    message0?: string\n    args0?: InputDefinition[]\n    colour?: number | string\n    inputsInline?: boolean\n    previousStatement?: string | string[]\n    nextStatement?: string | string[]\n    tooltip?: string\n    helpUrl?: string\n    style?: string\n    output?: string\n    extensions?: string[]\n    template?: BlockTemplate\n    dsl?: string\n}\n\nexport interface ServiceBlockDefinition extends BlockDefinition {\n    template: BlockTemplate\n    service: jdspec.ServiceSpec\n}\n\nexport interface ServiceBlockDefinitionFactory {\n    jacdacDefinition: ServiceBlockDefinition\n    init: () => void\n}\n\nexport function resolveServiceBlockDefinition(type: string) {\n    const b = Blockly.Blocks[type] as ServiceBlockDefinitionFactory\n    return b?.jacdacDefinition\n}\n\nexport interface EventBlockDefinition extends ServiceBlockDefinition {\n    template: EventTemplate\n    events: jdspec.PacketInfo[]\n}\n\nexport interface EventFieldDefinition extends ServiceBlockDefinition {\n    template: EventFieldTemplate\n    event: jdspec.PacketInfo\n}\n\nexport interface RegisterBlockDefinition extends ServiceBlockDefinition {\n    template: RegisterTemplate\n    register: jdspec.PacketInfo\n    field?: jdspec.PacketMember\n}\n\nexport interface CommandBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: CommandTemplate\n    command: jdspec.PacketInfo\n}\n\nexport interface CustomBlockDefinition extends ServiceBlockDefinition {\n    kind: \"block\"\n    template: \"custom\"\n    expression?: string\n}\n\nexport const JSON_TYPE = \"JSON\"\nexport const STRING_TYPE = \"String\"\nexport const BOOLEAN_TYPE = \"Boolean\"\nexport const NUMBER_TYPE = \"Number\"\nexport const PRIMITIVE_TYPES = [STRING_TYPE, BOOLEAN_TYPE, NUMBER_TYPE]\nexport const BUILTIN_TYPES = [\"\", ...PRIMITIVE_TYPES]\n\nexport const CODE_STATEMENT_TYPE = \"Code\"\n\nexport interface ContentDefinition {\n    kind: \"category\" | \"sep\" | \"button\" | \"label\"\n    order?: number\n    hidden?: boolean\n}\n\nexport interface CategoryDefinition extends ContentDefinition {\n    kind: \"category\"\n    name: string\n    custom?: \"VARIABLE\" | \"PROCEDURE\"\n    expanded?: boolean\n    colour?: string\n    categorystyle?: string\n    contents?: (\n        | BlockReference\n        | ButtonDefinition\n        | SeparatorDefinition\n        | LabelDefinition\n    )[]\n    button?: ButtonDefinition\n}\n\nexport interface ButtonDefinition extends ContentDefinition {\n    kind: \"button\"\n    text: string\n    callbackKey: string\n    service: jdspec.ServiceSpec\n}\n\nexport interface SeparatorDefinition extends ContentDefinition {\n    kind: \"sep\"\n    gap?: number\n}\n\nexport interface LabelDefinition extends ContentDefinition {\n    kind: \"label\"\n    text: string\n}\n\nexport interface ToolboxConfiguration {\n    kind: \"categoryToolbox\"\n    contents: ContentDefinition[]\n}\n","const VOLUME_GAIN = 0.4\n\nexport interface ToneContext {\n    close: () => void\n    playTone: (frequency: number, duration: number) => void\n    setVolume: (vol: number) => void\n}\n\nexport function createToneContext(defaultVolume?: number): ToneContext {\n    try {\n        console.log(`create tone context`)\n        const ctx = new (window.AudioContext ||\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (window as any).webkitAudioContext)()\n\n        // play silence sound within onlick to unlock it\n        const buffer = ctx.createBuffer(1, 1, 22050)\n        const source = ctx.createBufferSource()\n        source.buffer = buffer\n        source.connect(ctx.destination)\n        source.start()\n\n        // output node with volume\n        const volume = ctx.createGain()\n        volume.connect(ctx.destination)\n        volume.gain.value =\n            (defaultVolume !== undefined ? defaultVolume : 0.2) * VOLUME_GAIN\n\n        const setVolume = (v: number) => {\n            if (volume && !isNaN(v)) {\n                volume.gain.value = v * VOLUME_GAIN\n            }\n        }\n\n        const playTone = (frequency: number, duration: number) => {\n            try {\n                const tone = ctx.createOscillator()\n                tone.type = \"sawtooth\"\n                tone.connect(volume)\n                tone.frequency.value = frequency // update frequency\n                tone.start() // start and stop\n                tone.stop(ctx.currentTime + duration / 1000)\n            } catch (e) {\n                console.debug(e)\n            }\n        }\n\n        const close = () => {\n            try {\n                if (ctx.state === \"running\") ctx.close()\n            } catch (e) {\n                console.warn(e)\n            }\n        }\n\n        console.log(`tone context created`)\n\n        return {\n            setVolume,\n            playTone,\n            close,\n        }\n    } catch (e) {\n        return undefined\n    }\n}\n","import { useContext } from \"react\";\nimport { DeviceFilter, ServiceFilter } from \"../../../jacdac-ts/src/jdom/bus\";\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\nimport useChange from '../../jacdac/useChange';\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, b => b.services(options), [\n        JSON.stringify(options),\n    ])\n    return services\n}","import {\n    createMuiTheme,\n    responsiveFontSizes,\n    ThemeOptions,\n    ThemeProvider,\n} from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport DarkModeContext from \"./DarkModeContext\"\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default function AppTheme(props: any) {\n    const { darkMode } = useContext(DarkModeContext)\n    const isDark = darkMode === \"dark\"\n    const themeDef: ThemeOptions = {\n        palette: {\n            primary: {\n                main: isDark ? \"#56d364\" : \"#2e7d32\",\n            },\n            secondary: {\n                main: \"#ffc400\",\n            },\n            contrastThreshold: isDark ? 5.1 : 3.1,\n            type: darkMode,\n        },\n    }\n    const rawTheme = createMuiTheme(themeDef)\n    const theme = responsiveFontSizes(rawTheme)\n    return <ThemeProvider theme={theme} {...props} />\n}\n","import { Box, BoxProps, Paper, PaperProps, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function PaperBox(props: { padding?: number; elevation?: number; bgcolor?: string } & BoxProps) {\n    const { children, padding, elevation, bgcolor, ...others } = props;\n    const theme = useTheme();\n\n    return <Box {...others} bgcolor={bgcolor} mb={theme.spacing(0.25)}>\n        <Paper square elevation={elevation}>\n            {padding !== 0 && <Box p={theme.spacing(padding || 0.25)}>\n                {children}\n            </Box>}\n            {padding === 0 && children}\n        </Paper>\n    </Box>\n}","import { BlockJSON, WorkspaceJSON } from \"../blockly/jsongenerator\"\nimport {\n    VMBase,\n    VMHandler,\n    VMProgram,\n    VMRole,\n    VMIfThenElse,\n    VMError,\n} from \"../../../jacdac-ts/src/vm/ir\"\nimport { toIdentifier, RoleEvent } from \"../../../jacdac-ts/src/vm/compile\"\n\nimport { assert } from \"../../../jacdac-ts/src/jdom/utils\"\nimport {\n    BUILTIN_TYPES,\n    resolveServiceBlockDefinition,\n} from \"../blockly/toolbox\"\nimport Blockly from \"blockly\"\nimport BlockDomainSpecificLanguage from \"../blockly/dsl/dsl\"\n\nexport interface ExpressionWithErrors {\n    expr: jsep.Expression\n    errors: VMError[]\n}\n\nexport interface CmdWithErrors {\n    cmd: VMBase\n    errors: VMError[]\n}\n\nexport const makeVMBase = (block: BlockJSON, command: jsep.CallExpression) => {\n    return {\n        sourceId: block.id,\n        type: \"cmd\",\n        command,\n    } as VMBase\n}\n\nexport const processErrors = (block: BlockJSON, errors: VMError[]) => {\n    return errors.map((e: VMError) => {\n        return {\n            sourceId: e.sourceId ? e.sourceId : block.id,\n            message: e.message,\n        }\n    })\n}\n\nexport default function workspaceJSONToVMProgram(\n    workspace: WorkspaceJSON,\n    dsls: BlockDomainSpecificLanguage[]\n): VMProgram {\n    console.debug(`compile vm`, { workspace, dsls })\n\n    if (!workspace) return undefined\n\n    const resolveDsl = (type: string) => {\n        const dsl = dsls.find(dsl => dsl.types?.indexOf(type) > -1)\n        if (dsl) return dsl\n\n        const { dsl: dslName } = resolveServiceBlockDefinition(type)\n        if (!dslName) {\n            console.warn(`unknown dsl for ${type}`)\n            return undefined\n        }\n        return dsls?.find(dsl => dsl.id === dslName)\n    }\n\n    const roles: VMRole[] = workspace.variables\n        .filter(v => BUILTIN_TYPES.indexOf(v.type) < 0)\n        .map(v => ({ role: v.name, serviceShortId: v.type }))\n\n    class EmptyExpression extends Error {}\n\n    const blockToExpression: (\n        ev: RoleEvent,\n        block: BlockJSON\n    ) => ExpressionWithErrors = (ev: RoleEvent, blockIn: BlockJSON) => {\n        const errors: VMError[] = []\n\n        const blockToExpressionInner = (ev: RoleEvent, block: BlockJSON) => {\n            if (!block) {\n                throw new EmptyExpression()\n            }\n            const { type, value, inputs } = block\n            console.log(`block2e`, { ev, block, type, value, inputs })\n\n            if (value !== undefined)\n                // literal\n                return <jsep.Literal>{\n                    type: \"Literal\",\n                    value: value,\n                    raw: value + \"\",\n                }\n\n            const dsl = resolveDsl(type)\n            if (!dsl) {\n                console.warn(`unknown block ${type}`, {\n                    type,\n                    ev,\n                    block,\n                    d: Blockly.Blocks[type],\n                })\n                errors.push({\n                    sourceId: block.id,\n                    message: `unknown block ${type}`,\n                })\n            } else {\n                const definition = resolveServiceBlockDefinition(type)\n                const res = dsl.compileExpressionToVM?.({\n                    event: ev,\n                    definition,\n                    block,\n                    blockToExpressionInner,\n                })\n                if (res) {\n                    if (res.errors) res.errors.forEach(e => errors.push(e))\n                    return res.expr\n                }\n\n                const { template } = definition\n                if (template === \"shadow\") {\n                    const field = inputs[0].fields[\"value\"]\n                    const v = field.value\n                    return <jsep.Literal>{\n                        type: \"Literal\",\n                        value: v,\n                        raw: v + \"\",\n                    }\n                }\n\n                errors.push({\n                    sourceId: block.id,\n                    message: `unknown block ${type}`,\n                })\n                console.warn(`unsupported block ${type}`, {\n                    ev,\n                    block,\n                    definition,\n                })\n            }\n            throw new EmptyExpression()\n        }\n        return {\n            expr: blockToExpressionInner(ev, blockIn),\n            errors,\n        }\n    }\n\n    const blockToCommand = (\n        event: RoleEvent,\n        block: BlockJSON\n    ): CmdWithErrors => {\n        const { type, inputs } = block\n        console.debug(`block2c`, { event, type, block, inputs })\n        switch (type) {\n            case \"dynamic_if\": {\n                const thenHandler: VMHandler = {\n                    commands: [],\n                    errors: [],\n                }\n                const elseHandler: VMHandler = {\n                    commands: [],\n                    errors: [],\n                }\n                const t = inputs[1]?.child\n                const e = inputs[2]?.child\n                if (t) {\n                    addCommands(\n                        event,\n                        [t, ...(t.children ? t.children : [])],\n                        thenHandler\n                    )\n                }\n                if (e) {\n                    addCommands(\n                        event,\n                        [e, ...(e.children ? e.children : [])],\n                        elseHandler\n                    )\n                }\n                let exprErrors: ExpressionWithErrors = undefined\n                try {\n                    exprErrors = blockToExpression(event, inputs[0]?.child)\n                } catch (e) {\n                    if (e instanceof EmptyExpression) {\n                        exprErrors = {\n                            expr: {\n                                type: \"Literal\",\n                                value: false,\n                                raw: \"false \",\n                            } as jsep.Literal,\n                            errors: [],\n                        }\n                    } else {\n                        throw e\n                    }\n                }\n                const { expr, errors } = exprErrors\n\n                const ifThenElse: VMIfThenElse = {\n                    sourceId: block.id,\n                    type: \"ite\",\n                    expr,\n                    then: thenHandler.commands,\n                    else: elseHandler.commands,\n                }\n                return {\n                    cmd: ifThenElse,\n                    errors: processErrors(\n                        block,\n                        errors\n                            .concat(thenHandler.errors)\n                            .concat(elseHandler.errors)\n                    ),\n                }\n            }\n            // more builts\n            default: {\n                const dsl = resolveDsl(type)\n                if (dsl) {\n                    const definition = resolveServiceBlockDefinition(type)\n                    const dslRes = dsl.compileCommandToVM?.({\n                        event,\n                        block,\n                        definition,\n                        blockToExpression,\n                    })\n                    if (dslRes) {\n                        dslRes.errors = processErrors(block, dslRes.errors)\n                        return dslRes\n                    }\n                }\n                console.warn(`unsupported block ${type}`, { block })\n                return {\n                    cmd: undefined,\n                    errors: [\n                        {\n                            sourceId: block.id,\n                            message: `unsupported block ${type}`,\n                        },\n                    ],\n                }\n            }\n        }\n    }\n\n    const nop = {\n        type: \"CallExpression\",\n        arguments: [],\n        callee: toIdentifier(\"nop\"),\n    } as jsep.CallExpression\n\n    const addCommands = (\n        event: RoleEvent,\n        blocks: BlockJSON[],\n        handler: VMHandler\n    ) => {\n        blocks\n            ?.filter(child => !!child)\n            .forEach(child => {\n                try {\n                    const { cmd, errors } = blockToCommand(event, child)\n                    if (cmd) handler.commands.push(cmd)\n                    errors.forEach(e => handler.errors.push(e))\n                } catch (e) {\n                    if (e instanceof EmptyExpression) {\n                        handler.commands.push({\n                            sourceId: child.id,\n                            type: \"cmd\",\n                            command: nop,\n                        } as VMBase)\n                    } else {\n                        console.debug(e)\n                    }\n                }\n            })\n    }\n\n    const handlers: VMHandler[] = workspace.blocks\n        .map(top => {\n            const { type } = top\n            let command: jsep.CallExpression\n            let topEvent: RoleEvent\n            let topErrors: VMError[]\n            let topMeta = false\n\n            try {\n                const dsl = resolveDsl(type)\n                const definition = resolveServiceBlockDefinition(type)\n                const { expression, errors, event, meta } =\n                    dsl?.compileEventToVM?.({\n                        block: top,\n                        definition,\n                        blockToExpression,\n                    }) || {}\n                command = expression as jsep.CallExpression\n                topErrors = errors\n                topEvent = event\n                topMeta = meta\n\n                // if dsl didn't compile anything try again\n                const { template } = definition || {}\n                if (!command && !topErrors?.length) {\n                    switch (template) {\n                        case \"meta\": {\n                            break\n                        }\n                        default: {\n                            topErrors = [\n                                {\n                                    sourceId: top.id,\n                                    message: `unsupported block ${type}`,\n                                },\n                            ]\n                            console.debug(\n                                `unsupported handler template ${template} for ${type}`,\n                                { top }\n                            )\n                            break\n                        }\n                    }\n                }\n            } catch (e) {\n                console.debug(e)\n                if (e instanceof EmptyExpression) {\n                    return undefined\n                } else {\n                    throw e\n                }\n            }\n\n            // nothing to compile here\n            if (!command && !topErrors?.length) return undefined\n\n            const handler: VMHandler = {\n                commands: [\n                    {\n                        sourceId: top.id,\n                        type: \"cmd\",\n                        command,\n                    } as VMBase,\n                ],\n                errors: topErrors || [],\n                meta: !!topMeta,\n            }\n\n            addCommands(topEvent, top.children, handler)\n            return handler\n        })\n        .filter(handler => !!handler)\n\n    return {\n        roles,\n        handlers,\n    }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction mkTitle(txt: string): SVGTitleElement {\n    const t = <SVGTitleElement>elt(\"title\")\n    t.textContent = txt\n    return t\n}\nexport function title(el: SVGElement, txt: string): SVGTitleElement {\n    const t = mkTitle(txt)\n    el.appendChild(t)\n    return t\n}\n\nexport function hydrate(el: SVGElement, props: any) {\n    for (const k in props) {\n        if (k == \"title\") {\n            title(el, props[k])\n        } else el.setAttributeNS(null, k, props[k])\n    }\n}\n\nexport function elt(name: string, props?: any): SVGElement {\n    const el = document.createElementNS(\"http://www.w3.org/2000/svg\", name)\n    if (props) hydrate(el, props)\n    return el\n}\n\nexport function child(parent: Element, name: string, props?: any): SVGElement {\n    const el = elt(name, props)\n    parent.appendChild(el)\n    return el\n}\n"],"sourceRoot":""}