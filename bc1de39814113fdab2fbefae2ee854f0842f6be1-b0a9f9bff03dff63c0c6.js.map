{"version":3,"sources":["webpack:///./src/components/hooks/useRegisterHost.ts","webpack:///./src/components/hooks/useReadingAuxilliaryValue.ts","webpack:///./src/components/RegisterInput.tsx","webpack:///./src/components/widgets/SvgWidget.tsx","webpack:///./src/components/hooks/useFireKey.ts","webpack:///./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js","webpack:///./src/components/widgets/GaugeWidget.tsx","webpack:///./src/components/widgets/ValueWithUnitWidget.tsx","webpack:///./src/components/icons/HumidityIcon.tsx","webpack:///./src/components/hooks/useUnitIcon.tsx","webpack:///./src/components/fields/MemberInput.tsx","webpack:///./src/components/fields/MembersInput.tsx","webpack:///./src/components/widgets/useWidgetTheme.ts","webpack:///./src/components/widgets/ButtonWidget.tsx","webpack:///./src/components/widgets/PowerButton.tsx","webpack:///./src/components/ui/LoadingProgress.tsx","webpack:///./src/components/hooks/useServiceHost.ts","webpack:///./src/components/widgets/svgutils.ts","webpack:///./src/components/hooks/useThrottledValue.ts","webpack:///./src/components/hooks/useSvgButtonProps.ts","webpack:///./src/components/widgets/useWidgetSize.ts","webpack:///./src/components/RegisterTrend.tsx","webpack:///./src/components/hooks/useAnimationFrame.ts"],"names":["useRegisterHost","register","host","useServiceHost","service","code","useReadingAuxilliaryValue","identifier","SystemReg","ReadingError","ReadingResolution","MaxReading","MinReading","StreamingInterval","StreamingPreferredInterval","reading","Reading","Value","auxilliaryRegister","undefined","useState","unpackedValue","value","setValue","useEffect","subscribe","REPORT_UPDATE","RegisterInput","props","showRegisterName","showDeviceName","showServiceName","hideMissingValues","showTrend","showDataType","variant","off","toggleOff","specification","device","fields","useContext","AppContext","setAppError","setError","working","setWorking","args","setArgs","hasSet","kind","hasData","data","color","minReading","maxReading","readingError","resolution","vs","handleRefresh","refresh","sendArgs","values","setValues","sendSetPackedAsync","packFormat","length","serviceName","name","toLocaleLowerCase","replace","registerName","map","f","SvgWidget","width","height","size","background","children","role","title","viewBox","tabIndex","h","aspectRatio","vertical","position","ENTER_KEY","SPACE_KEY","keyCodeFromEvent","e","which","keyCode","useFireKey","handler","charCode","preventDefault","GaugeWidget","min","max","step","valueLabel","onChange","useWidgetTheme","active","textProps","sliderPathRef","useRef","w","m","roff","riff","sw","cx","cy","r","sa","ea","_step","displayValue","useThrottledValue","computeArc","v","mid","fraction","describeArc","va","db","dvalue","dactual","lineCap","tvalue","clickeable","handlePointerDown","ev","buttons","svg","current","ownerSVGElement","pos","svgPointerPoint","closest","closestPoint","pointerStyle","cursor","pathProps","onPointerDown","onPointerMove","style","handleSliderChange","newValue","ValueWithUnitWidget","secondaryLabel","icon","label","labelVariant","precision","Math","ceil","log10","hasValue","isNaN","valueText","roundWithPrecision","toLocaleString","valueTextLength","isSet","reduce","l","valueVariant","valueStyle","minWidth","unit","resolveUnit","runit","MemberInput","serviceSpecification","serviceMemberSpecification","error","showLoading","typicalMin","typicalMax","absoluteMin","absoluteMax","type","enumInfo","enums","disabled","errorText","setErrorText","textValue","setTextValue","valueString","memberValueToString","isWidget","widgetSize","useWidgetSize","unitIcon","useUnitIcon","minValue","pick","test","maxValue","errorValue","floor","prettyUnit","helperText","prettyMemberUnit","filter","join","inputId","useId","inputType","isSimpleType","isIntegerType","handleChecked","checked","handleChange","target","tryParseMemberValue","handleEnumChange","event","isFlags","flagsToValue","percentValueFormat","valueLabelFormat","percentValueLabelFormat","round","offFormat","isValueOrIntensity","valueToFlags","Object","keys","members","n","signed","storage","hasTypicalRange","marks","MembersInput","specifications","index","c","slice","field","fieldi","theme","useTheme","palette","DarkModeContext","darkMode","primary","main","secondary","info","backgroundColor","default","grey","controlBackground","textPrimary","text","fill","alignmentBaseline","dominantBaseline","textAnchor","pointerEvents","letterSpacing","userSelect","ButtonWidget","onDown","onUp","buttonProps","useSvgButtonProps","mo","ro","ri","rn","PowerButton","onClick","strokeWidth","borderStroke","a","d","btnlabel","iconStroke","LoadingProgress","useDeviceHost","serviceIndex","point","createSVGPoint","x","clientX","y","clientY","res","matrixTransform","getScreenCTM","inverse","pathNode","pathLength","getTotalLength","distance2","p","dx","dy","bestLength","bestDistance","Infinity","scanLength","scan","getPointAtLength","scanDistance","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","PI","cos","sin","startAngle","endAngle","large","start","end","largeArcFlag","maxRate","actual","setActual","animated","useAnimationFrame","time","dt","maxError","sign","abs","fireDownOnEnter","fireUpOnEnter","preventify","className","onPointerUp","onPointerLeave","onKeyDown","onKeyUp","widgetCount","mini","DEFAULT_HORIZON","DEFAULT_HEIGHT","RegisterTrend","horizon","interval","JacdacContext","bus","useChartPalette","dataSet","FieldDataSet","create","useChange","addRow","REPORT_RECEIVE","id","setInterval","clearInterval","callback","deps","requestRef","previousTimeRef","animate","deltaTime","requestAnimationFrame","cancelAnimationFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAEe,SAASA,eAAT,CAAyBC,QAAzB,EAA+C;AAC1D,MAAMC,IAAI,GAAGC,yCAAc,CAACF,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEG,OAAX,CAA3B;AACA,SAAOF,IAAP,aAAOA,IAAP,uBAAOA,IAAI,CAAED,QAAN,CAAeA,QAAf,aAAeA,QAAf,uBAAeA,QAAQ,CAAEI,IAAzB,CAAP;AACH,C;;ACND;AACA;AAIe,SAASC,yBAAT,CAAmCL,QAAnC,EAAyDM,UAAzD,EAOH;AAAA,MAP4DA,UAO5D;AAP4DA,cAO5D,GANRC,+BAAS,CAACC,YAAV,GACED,+BAAS,CAACE,iBADZ,GAEEF,+BAAS,CAACG,UAFZ,GAGEH,+BAAS,CAACI,UAHZ,GAIEJ,+BAAS,CAACK,iBAJZ,GAKEL,+BAAS,CAACM,0BACJ;AAAA;;AAAA,MACAV,OADA,GACkBH,QADlB,CACAG,OADA;AAAA,MACSC,IADT,GACkBJ,QADlB,CACSI,IADT;AAER,MAAMU,OAAO,GAAGV,IAAI,KAAKG,+BAAS,CAACQ,OAAnB,IAA8BX,IAAI,KAAKG,+BAAS,CAACS,KAAjE;AACA,MAAMC,kBAAkB,GAAGH,OAAO,GAAGX,OAAO,CAACH,QAAR,CAAiBM,UAAjB,CAAH,GAAkCY,SAApE;;AAHQ,kBAIkBC,yBAAQ,CAAWF,kBAAX,aAAWA,kBAAX,uBAAWA,kBAAkB,CAAEG,aAA/B,CAJ1B;AAAA,MAIDC,KAJC;AAAA,MAIMC,QAJN;;AAMRC,4BAAS,CAAC;AAAA,WAAMN,kBAAN,aAAMA,kBAAN,uBAAMA,kBAAkB,CAAEO,SAApB,CAA8BC,mCAA9B,EAA6C,YAAM;AAC/DH,cAAQ,CAACL,kBAAD,aAACA,kBAAD,uBAACA,kBAAkB,CAAEG,aAArB,CAAR;AACH,KAFe,CAAN;AAAA,GAAD,EAEL,CAACpB,QAAD,EAAWiB,kBAAX,CAFK,CAAT;AAIA,SAAOI,KAAP;AACH,C;;;;ACvBD;AACA;AACA;CAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAIe,SAASK,aAAT,CAAuBC,KAAvB,EAWZ;AAAA,MAEK3B,QAFL,GAYK2B,KAZL,CAEK3B,QAFL;AAAA,MAGK4B,gBAHL,GAYKD,KAZL,CAGKC,gBAHL;AAAA,MAIKC,cAJL,GAYKF,KAZL,CAIKE,cAJL;AAAA,MAKKC,eALL,GAYKH,KAZL,CAKKG,eALL;AAAA,MAMKC,iBANL,GAYKJ,KAZL,CAMKI,iBANL;AAAA,MAOKC,SAPL,GAYKL,KAZL,CAOKK,SAPL;AAAA,MAQKC,YARL,GAYKN,KAZL,CAQKM,YARL;AAAA,MASKC,OATL,GAYKP,KAZL,CASKO,OATL;AAAA,MAUKC,GAVL,GAYKR,KAZL,CAUKQ,GAVL;AAAA,MAWKC,SAXL,GAYKT,KAZL,CAWKS,SAXL;AAAA,MAaSjC,OAbT,GAaoCH,QAbpC,CAaSG,OAbT;AAAA,MAakBkC,aAblB,GAaoCrC,QAbpC,CAakBqC,aAblB;AAAA,MAcSC,MAdT,GAcoBnC,OAdpB,CAcSmC,MAdT;AAAA,MAeSC,MAfT,GAeoBvC,QAfpB,CAeSuC,MAfT;;AAAA,oBAgBmCC,2BAAU,CAACC,6BAAD,CAhB7C;AAAA,MAgBmBC,WAhBnB,eAgBSC,QAhBT;;AAAA,kBAiB+BxB,yBAAQ,CAAC,KAAD,CAjBvC;AAAA,MAiBQyB,OAjBR;AAAA,MAiBiBC,UAjBjB,iBAkBC;;;AAlBD,mBAmByB1B,yBAAQ,CAAQnB,QAAQ,CAACoB,aAAT,IAA0B,EAAlC,CAnBjC;AAAA,MAmBQ0B,IAnBR;AAAA,MAmBcC,OAnBd;;AAoBC,MAAM9C,IAAI,GAAGF,eAAe,CAACC,QAAD,CAA5B;AACA,MAAMgD,MAAM,GACRX,aAAa,CAACY,IAAd,KAAuB,IAAvB,IAAgChD,IAAI,IAAIoC,aAAa,CAACY,IAAd,KAAuB,OADnE;AAEA,MAAMC,OAAO,GAAG,CAAC,CAAClD,QAAQ,CAACmD,IAA3B;AACA,MAAMC,KAAK,GAAGJ,MAAM,GAAG,WAAH,GAAiB,SAArC;AACA,MAAMK,UAAU,GAAGhD,yBAAyB,CAACL,QAAD,EAAWO,+BAAS,CAACI,UAArB,CAA5C;AACA,MAAM2C,UAAU,GAAGjD,yBAAyB,CAACL,QAAD,EAAWO,+BAAS,CAACG,UAArB,CAA5C;AACA,MAAM6C,YAAY,GAAGlD,yBAAyB,CAC1CL,QAD0C,EAE1CO,+BAAS,CAACC,YAFgC,CAA9C;AAIA,MAAMgD,UAAU,GAAGnD,yBAAyB,CACxCL,QADwC,EAExCO,+BAAS,CAACE,iBAF8B,CAA5C;AAKAc,4BAAS,CACL;AAAA,WACIvB,QAAQ,CAACwB,SAAT,CAAmBC,mCAAnB,EAAkC,YAAM;AACpC,UAAMgC,EAAE,GAAGzD,QAAQ,CAACoB,aAApB;AACA,UAAIqC,EAAE,KAAKvC,SAAX,EAAsB6B,OAAO,CAACU,EAAD,CAAP;AACzB,KAHD,CADJ;AAAA,GADK,EAML,CAACzD,QAAD,CANK,CAAT;;AAQA,MAAM0D,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB1D,YAAQ,CAAC2D,OAAT,CAAiB,IAAjB;AACH,GAFD,CA5CD,CA+CC;;;AACA,MAAMC,QAAQ;AAAA,oGAAG,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA,mBACTjB,OADS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAGTC,wBAAU,CAAC,IAAD,CAAV;;AAHS,mBAIL5C,IAJK;AAAA;AAAA;AAAA;;AAKLA,kBAAI,CAAC6D,SAAL,CAAeD,MAAf;AALK;AAAA,qBAMC7D,QAAQ,CAAC2D,OAAT,EAND;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAQC3D,QAAQ,CAAC+D,kBAAT,CACF1B,aAAa,CAAC2B,UADZ,EAEFH,MAFE,EAGF,IAHE,CARD;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcTnB,yBAAW,aAAX;;AAdS;AAAA;AAgBTG,wBAAU,CAAC,KAAD,CAAV;AAhBS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARe,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAoBA,MAAI,CAACvB,aAAL,EACI,oBACI,8BAAC,wBAAD;AAAO,YAAQ,EAAC;AAAhB,yBAA2CrC,QAAQ,CAACG,OAApD,SAA+DH,QAAQ,CAACI,IAAxE,CADJ;AAIJ,MAAI,CAACmC,MAAM,CAAC0B,MAAZ,EAAoB,OAAO,IAAP,CAzErB,CAyEiC;;AAEhC,MAAIlC,iBAAiB,IAAI,CAACmB,OAA1B,EAAmC,OAAO,IAAP;AAEnC,MAAMgB,WAAW,GAAGlE,QAAQ,CAACG,OAAT,CAAiBgE,IAAjB,CACfC,iBADe,GAEfC,OAFe,CAEP,IAFO,EAED,GAFC,CAApB;AAGA,MAAMC,YAAY,GAAGjC,aAAa,CAAC8B,IAAd,CAAmBE,OAAnB,CAA2B,IAA3B,EAAiC,GAAjC,CAArB;AACA,sBACI,8DACKxC,cAAc,iBACX,8BAAC,6BAAD;AAAY,aAAS,EAAC,MAAtB;AAA6B,OAAG,EAAC;AAAjC,kBACI,8BAAC,6BAAD;AAAY,UAAM,EAAES;AAApB,IADJ,MAFR,EAMKR,eAAe,IAAIO,aAAnB,iBACG,8BAAC,6BAAD;AACI,WAAO,EAAC,SADZ;AAEI,OAAG,EAAC,aAFR;AAGI,kBAAY6B;AAHhB,KAKKA,WALL,CAPR,EAeKtC,gBAAgB,IAAIS,aAApB,IAAqC6B,WAAW,KAAKI,YAArD,iBACG,8BAAC,6BAAD;AACI,WAAO,EAAC,SADZ;AAEI,OAAG,EAAC,cAFR;AAGI,kBAAYA;AAHhB,KAKK,MAAMA,YALX,CAhBR,EAwBK,CAACpB,OAAD,iBACG,8BAAC,sBAAD,qBACI,8BAAC,yCAAD;AACI,SAAK,EAAC,SADV;AAEI,iBAAa,EAAE,IAFnB;AAGI,WAAO,EAAEQ;AAHb,IADJ,CAzBR,EAiCK1B,SAAS,IAAIkB,OAAb,iBACG,8BAAC,gCAAD;AAAe,YAAQ,EAAElD,QAAzB;AAAmC,QAAI,EAAE,KAAzC;AAAgD,WAAO,EAAE;AAAzD,IAlCR,EAoCKkD,OAAO,iBACJ,8BAAC,+BAAD;AACI,SAAK,EAAEE,KADX;AAEI,wBAAoB,EAAEjD,OAAO,CAACkC,aAFlC;AAGI,8BAA0B,EAAEA,aAHhC;AAII,kBAAc,EAAEE,MAAM,CAACgC,GAAP,CAAW,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACnC,aAAN;AAAA,KAAZ,CAJpB;AAKI,UAAM,EAAES,IALZ;AAMI,aAAS,EAAEE,MAAM,IAAIY,QANzB;AAOI,gBAAY,EAAE3B,YAPlB;AAQI,WAAO,EAAEC,OARb;AASI,OAAG,EAAEmB,UATT;AAUI,OAAG,EAAEC,UAVT;AAWI,cAAU,EAAEE,UAXhB;AAYI,SAAK,EAAED,YAZX;AAaI,OAAG,EAAEpB,GAbT;AAcI,aAAS,EAAEC;AAdf,IArCR,CADJ;AAyDH,C;;;;;;;;ACrKD;AAAA;AAAA;AAAA;AAEe,SAASqC,SAAT,CAAmB9C,KAAnB,EAUZ;AAAA,MACS+C,KADT,GACgG/C,KADhG,CACS+C,KADT;AAAA,MACgBC,MADhB,GACgGhD,KADhG,CACgBgD,MADhB;AAAA,oBACgGhD,KADhG,CACwBiD,IADxB;AAAA,MACwBA,IADxB,4BAC+B,MAD/B;AAAA,MACuCC,UADvC,GACgGlD,KADhG,CACuCkD,UADvC;AAAA,MACmDC,QADnD,GACgGnD,KADhG,CACmDmD,QADnD;AAAA,MAC6DC,IAD7D,GACgGpD,KADhG,CAC6DoD,IAD7D;AAAA,MACmEC,KADnE,GACgGrD,KADhG,CACmEqD,KADnE;AAAA,MAC0EC,OAD1E,GACgGtD,KADhG,CAC0EsD,OAD1E;AAAA,MACmFC,QADnF,GACgGvD,KADhG,CACmFuD,QADnF;AAEC,MAAMC,CAAC,GAAGR,MAAM,IAAID,KAApB;AACA,MAAMU,WAAW,GAAGV,KAAK,GAAGC,MAA5B;AACA,MAAMU,QAAQ,GAAGD,WAAW,GAAG,CAA/B;AAEA,sBAAO;AAAK,SAAK,EAAG;AAChBE,cAAQ,EAAE,UADM;AAEhBX,YAAM,EAAEU,QAAQ,GAAGT,IAAH,GAAU1D,SAFV;AAGhBwD,WAAK,EAAEW,QAAQ,GAAGnE,SAAH,GAAe0D;AAHd;AAAb,kBAKH;AACI,SAAK,EAAC,4BADV;AAEI,YAAQ,EAAEM,QAFd;AAGI,WAAO,EAAED,OAAO,aAAWP,KAAX,SAAoBS,CAHxC;AAII,kBAAYH,KAJhB;AAKI,SAAK,EAAG;AACJL,YAAM,EAAEU,QAAQ,GAAG,MAAH,GAAYnE,SADxB;AAEJwD,WAAK,EAAEW,QAAQ,GAAInE,SAAJ,GAAgB;AAF3B,KALZ;AASI,QAAI,EAAE6D,IAAI,IAAI;AATlB,KAUKF,UAAU,iBAAI;AAAM,KAAC,EAAE,CAAT;AAAY,KAAC,EAAE,CAAf;AAAkB,SAAK,EAAEH,KAAzB;AAAgC,UAAM,EAAEC,MAAxC;AAAgD,QAAI,EAAEE,UAAtD;AAAkE,MAAE,EAAE,CAAtE;AAAyE,MAAE,EAAE;AAA7E,IAVnB,EAWKC,QAXL,CALG,CAAP;AAmBH,C;;;;;;;;ACnCD;AAAA;AAAA,IAAMS,SAAS,GAAG,EAAlB;AACA,IAAMC,SAAS,GAAG,EAAlB;AAEO,SAASC,gBAAT,CAA0BC,CAA1B,EAAkC;AACrC,SAAQ,OAAOA,CAAC,CAACC,KAAT,IAAkB,QAAnB,GAA+BD,CAAC,CAACC,KAAjC,GAAyCD,CAAC,CAACE,OAAlD;AACH;AAEc,SAASC,UAAT,CAA8CC,OAA9C,EAAoI;AAC/I,MAAI,CAACA,OAAL,EACI,OAAO5E,SAAP;AACJ,SAAO,UAACwE,CAAD,EAA+B;AAClC,QAAMK,QAAQ,GAAGN,gBAAgB,CAACC,CAAD,CAAjC;;AACA,QAAIK,QAAQ,KAAKR,SAAb,IAA0BQ,QAAQ,KAAKP,SAA3C,EAAsD;AAClDE,OAAC,CAACM,cAAF;AACAF,aAAO;AACV;AACJ,GAND;AAOH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnByD;AACgC;AAC3D;AACP;AACqB;AACG;AACF;AACP;AACM;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL,8DAA8D,KAAK;AACnE,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,iCAAgB,gBAAgB,mBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAwB;;AAEtC,uBAAuB,yCAAc;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,sBAAmB,UAAU,sCAAQ;AAC3D,eAAe,iCAAI,sFAAsF,qCAAU;AACnH;AACA,GAAG,uBAAuB,qBAAkB,sCAAsC,sBAAmB,CAAC,6BAAU;AAChH;AACA,eAAe,iCAAI;AACnB,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,+GAAU;AACzB;AACA,CAAC,EAAE,iCAAgB,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GpB;AACA;AACA;AACA;AACA;AAEA;AACA;AAEe,SAASG,WAAT,CAAqBtE,KAArB,EAcZ;AAAA,MACSN,KADT,GAE4CM,KAF5C,CACSN,KADT;AAAA,MACgB+B,KADhB,GAE4CzB,KAF5C,CACgByB,KADhB;AAAA,MACuBwB,IADvB,GAE4CjD,KAF5C,CACuBiD,IADvB;AAAA,MAC6BsB,GAD7B,GAE4CvE,KAF5C,CAC6BuE,GAD7B;AAAA,MACkCC,GADlC,GAE4CxE,KAF5C,CACkCwE,GADlC;AAAA,MACuCC,IADvC,GAE4CzE,KAF5C,CACuCyE,IADvC;AAAA,MAC6ClE,OAD7C,GAE4CP,KAF5C,CAC6CO,OAD7C;AAAA,MACsDmE,UADtD,GAE4C1E,KAF5C,CACsD0E,UADtD;AAAA,MAEKlE,GAFL,GAE4CR,KAF5C,CAEKQ,GAFL;AAAA,MAEUC,SAFV,GAE4CT,KAF5C,CAEUS,SAFV;AAAA,MAEqBkE,QAFrB,GAE4C3E,KAF5C,CAEqB2E,QAFrB;AAAA,MAE+BpB,QAF/B,GAE4CvD,KAF5C,CAE+BuD,QAF/B;;AAAA,wBAG2CqB,yCAAc,CAACnD,KAAD,CAHzD;AAAA,MAGSyB,UAHT,mBAGSA,UAHT;AAAA,MAGqB2B,MAHrB,mBAGqBA,MAHrB;AAAA,MAG6BC,SAH7B,mBAG6BA,SAH7B;;AAKC,MAAMC,aAAa,GAAGC,uBAAM,EAA5B;AACA,MAAMC,CAAC,GAAG,GAAV;AACA,MAAMzB,CAAC,GAAG,GAAV;AACA,MAAM0B,CAAC,GAAG,CAAV;AACA,MAAMC,IAAI,GAAG,EAAb;AACA,MAAMC,IAAI,GAAG,EAAb;AACA,MAAMC,EAAE,GAAGH,CAAC,IAAI,CAAhB;AACA,MAAMI,EAAE,GAAGL,CAAC,IAAI,CAAhB;AACA,MAAMM,EAAE,GAAG/B,CAAC,IAAI,CAAhB;AACA,MAAMgC,CAAC,GAAG,CAACP,CAAC,IAAI,CAAN,IAAWC,CAArB;AACA,MAAMO,EAAE,GAAG,CAAC,GAAZ;AACA,MAAMC,EAAE,GAAG,GAAX;;AACA,MAAMC,KAAK,GAAGlB,IAAI,IAAI,CAACD,GAAG,GAAGD,GAAP,IAAc,EAApC;;AACA,MAAMqB,YAAY,GAAGC,4CAAiB,CAACnG,KAAD,EAAQ,CAAC8E,GAAG,GAAGD,GAAP,IAAc,CAAtB,CAAtC;;AAEA,MAAMuB,UAAU,GAAG,SAAbA,UAAa,CAACC,CAAD,EAAe;AAC9B,QAAIxF,OAAO,KAAK,UAAhB,EAA4B;AACxB,UAAMyF,GAAG,GAAG,CAACN,EAAE,GAAGD,EAAN,IAAY,CAAxB;AACA,UAAMQ,QAAQ,GAAGF,CAAC,IAAIvB,GAAG,GAAGD,GAAV,CAAD,IAAmBmB,EAAE,GAAGD,EAAxB,CAAjB;AACA,UAAIQ,QAAQ,GAAG,CAAf,EACI,OAAOC,uCAAW,CAACZ,EAAD,EAAKC,EAAL,EAASC,CAAT,EAAYQ,GAAG,GAAGC,QAAlB,EAA4BD,GAA5B,CAAlB,CADJ,KAGI,OAAOE,uCAAW,CAACZ,EAAD,EAAKC,EAAL,EAASC,CAAT,EAAYQ,GAAZ,EAAiBA,GAAG,GAAGC,QAAvB,CAAlB;AACP,KAPD,MAOO;AACH,UAAMA,SAAQ,GAAG,CAACF,CAAC,GAAGxB,GAAL,KAAaC,GAAG,GAAGD,GAAnB,CAAjB;;AACA,UAAM4B,EAAE,GAAGV,EAAE,GAAGQ,SAAQ,IAAIP,EAAE,GAAGD,EAAT,CAAxB;AACA,aAAOS,uCAAW,CAACZ,EAAD,EAAKC,EAAL,EAASC,CAAT,EAAYC,EAAZ,EAAgBU,EAAhB,CAAlB;AACH;AACJ,GAbD;;AAeA,MAAMC,EAAE,GAAGF,uCAAW,CAACZ,EAAD,EAAKC,EAAL,EAASC,CAAT,EAAYC,EAAZ,EAAgBC,EAAhB,CAAtB;AACA,MAAMW,MAAM,GAAGP,UAAU,CAACpG,KAAD,CAAzB;AACA,MAAM4G,OAAO,GAAGR,UAAU,CAACF,YAAD,CAA1B;AACA,MAAMW,OAAO,GAAG,OAAhB;AACA,MAAMC,MAAM,GAAG9B,UAAU,CAAChF,KAAD,CAAzB;AACA,MAAM+G,UAAU,GAAG,CAAC,CAAC9B,QAArB;;AAEA,MAAM+B,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,EAAD,EAA4C;AAClEA,MAAE,CAACtC,cAAH;AACA,QAAI,CAACsC,EAAE,CAACC,OAAR,EAAiB;AACjB,QAAMC,GAAG,GAAG9B,aAAa,CAAC+B,OAAd,CAAsBC,eAAlC;AACA,QAAMC,GAAG,GAAGC,2CAAe,CAACJ,GAAD,EAAMF,EAAN,CAA3B;AACA,QAAMO,OAAO,GAAGC,wCAAY,CAACpC,aAAa,CAAC+B,OAAf,EAAwBnB,KAAxB,EAA+BqB,GAA/B,CAA5B;AACArC,YAAQ,CAACgC,EAAD,EAAKpC,GAAG,GAAG,CAAC,IAAI2C,OAAL,KAAiB1C,GAAG,GAAGD,GAAvB,CAAX,CAAR;AACH,GAPD;;AAQA,MAAM6C,YAA2B,GAAGX,UAAU,IAAI;AAC9CY,UAAM,EAAE;AADsC,GAAlD;AAGA,MAAMC,SAAwC,GAAG;AAC7CC,iBAAa,EAAEd,UAAU,GAAGC,iBAAH,GAAuBnH,SADH;AAE7CiI,iBAAa,EAAEf,UAAU,GAAGC,iBAAH,GAAuBnH,SAFH;AAG7CkI,SAAK,EAAEhB,UAAU,GAAGW,YAAH,GAAkB7H;AAHU,GAAjD;;AAKA,MAAMmI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACf,EAAD,EAAcgB,QAAd,EAA8C;AACrEhD,YAAQ,CAACgC,EAAD,EAAKgB,QAAL,CAAR;AACH,GAFD;;AAIA,sBAAO,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,aAAS,EAAC;AAA1B,kBACH,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACI,8BAAC,4BAAD;AAAW,YAAQ,EAAEpE,QAArB;AAA+B,SAAK,EAAE0B,CAAtC;AAAyC,UAAM,EAAEzB,CAAjD;AAAoD,QAAI,EAAEP;AAA1D,kBACI;AAAM,OAAG,EAAE8B,aAAX;AAA0B,eAAW,EAAEM,EAAvC;AAA2C,UAAM,EAAEnC,UAAnD;AAA+D,KAAC,EAAEkD,EAAlE;AAAsE,iBAAa,EAAEG,OAArF;AAA8F,QAAI,EAAC;AAAnG,KACQe,SADR,EADJ,EAIK,CAAC9G,GAAD,iBAAQ;AAAM,eAAW,EAAE6E,EAAnB;AAAuB,UAAM,EAAER,MAA/B;AAAuC,iBAAa,EAAE0B,OAAtD;AAA+D,KAAC,EAAEF,MAAlE;AAA0E,WAAO,EAAE,GAAnF;AAAwF,QAAI,EAAC;AAA7F,KACDiB,SADC,EAJb,EAOK,CAAC9G,GAAD,iBAAQ;AAAM,eAAW,EAAE6E,EAAnB;AAAuB,UAAM,EAAER,MAA/B;AAAuC,iBAAa,EAAE0B,OAAtD;AAA+D,KAAC,EAAED,OAAlE;AAA2E,QAAI,EAAC;AAAhF,KACDgB,SADC,EAPb,EAUK9G,GAAG,KAAKjB,SAAR,gBACK,8BAAC,8BAAD;AAAa,OAAG,EAAEiB,GAAlB;AAAuB,SAAK,EAAEgG,MAA9B;AAAsC,MAAE,EAAElB,EAA1C;AAA8C,MAAE,EAAEC,EAAlD;AAAsD,KAAC,EAAEJ,IAAzD;AAA+D,MAAE,EAAEC,IAAnE;AAAyE,SAAK,EAAE3D,KAAhF;AAAuF,WAAO,EAAEhB;AAAhG,IADL,gBAEK,wDAAUqE,SAAV;AAAqB,KAAC,EAAEQ,EAAxB;AAA4B,KAAC,EAAEC,EAA/B;AAAmC,kBAAYiB;AAA/C,MAAwDA,MAAxD,CAZV,CADJ,CADG,EAiBFC,UAAU,iBAAI,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACX,8BAAC,yBAAD;AACI,YAAQ,EAAEjG,GADd;AAEI,SAAK,EAAEiB,KAFX;AAGI,OAAG,EAAE8C,GAHT;AAGc,OAAG,EAAEC,GAHnB;AAGwB,QAAI,EAAEmB,KAH9B;AAGqC,qBAAiB,EAAC,KAHvD;AAII,SAAK,EAAEjG,KAJX;AAIkB,YAAQ,EAAEgI;AAJ5B,IADW,CAjBZ,CAAP;AA0BH,C;;;;;AC/GD;AACA;AACA;AAGe,SAASE,mBAAT,CAA6B5H,KAA7B,EAYZ;AAAA,MACSN,KADT,GACoFM,KADpF,CACSN,KADT;AAAA,MACgB6E,GADhB,GACoFvE,KADpF,CACgBuE,GADhB;AAAA,MACqBC,GADrB,GACoFxE,KADpF,CACqBwE,GADrB;AAAA,MAC0BC,IAD1B,GACoFzE,KADpF,CAC0ByE,IAD1B;AAAA,MACgCoD,cADhC,GACoF7H,KADpF,CACgC6H,cADhC;AAAA,MACgDC,IADhD,GACoF9H,KADpF,CACgD8H,IADhD;AAAA,MACsDC,KADtD,GACoF/H,KADpF,CACsD+H,KADtD;AAAA,MAC6DxE,QAD7D,GACoFvD,KADpF,CAC6DuD,QAD7D;AAAA,MACuEoB,QADvE,GACoF3E,KADpF,CACuE2E,QADvE;AAEC,MAAMqD,YAAY,GAAG,WAArB;AACA,MAAMC,SAAS,GAAGxD,IAAI,KAAKlF,SAAT,GAAqB,CAArB,GAAyBkF,IAAI,GAAG,CAAP,GAAWyD,IAAI,CAACC,IAAL,CAAU,CAACD,IAAI,CAACE,KAAL,CAAW3D,IAAX,CAAX,CAAX,GAA0C,CAArF;AACA,MAAM4D,QAAQ,GAAG,CAACC,KAAK,CAAC5I,KAAD,CAAvB;AACA,MAAM6I,SAAS,GAAGF,QAAQ,GAAGG,2CAAkB,CAAC9I,KAAD,EAAQuI,SAAR,CAAlB,CAAqCQ,cAArC,EAAH,GAA2D,IAArF;AACA,MAAMC,eAAe,GAAGC,8BAAK,CAACpE,GAAD,CAAL,IAAcoE,8BAAK,CAACnE,GAAD,CAAnB,GAA2B,CAACD,GAAD,EAAMC,GAAN,EAAWD,GAAG,GAAG,CAACA,GAAG,GAAGC,GAAP,IAAc,CAA/B,EAC9C5B,GAD8C,CAC1C,UAAAmD,CAAC;AAAA,WAAIyC,2CAAkB,CAACzC,CAAD,EAAIkC,SAAJ,CAAlB,CAAiCQ,cAAjC,GAAkD/F,OAAlD,CAA0D,MAA1D,EAAkE,EAAlE,EAAsEJ,MAA1E;AAAA,GADyC,EAE9CsG,MAF8C,CAEvC,UAACC,CAAD,EAAIrD,CAAJ;AAAA,WAAU0C,IAAI,CAAC1D,GAAL,CAASqE,CAAT,EAAYrD,CAAZ,CAAV;AAAA,GAFuC,EAEb,CAFa,IAG7CyC,SAHkB,GAGNM,SAAS,CAACjG,MAH5B,CAND,CAWC;;AACA,MAAMwG,YAAY,GAAGJ,eAAe,GAAG,CAAlB,GAAsB,IAAtB,GACfA,eAAe,GAAG,CAAlB,GAAsB,IAAtB,GACIA,eAAe,GAAG,CAAlB,GAAsB,IAAtB,GACIA,eAAe,GAAG,EAAlB,GAAuB,IAAvB,GACI,IAJlB;AAKA,MAAMK,UAAyB,GAAG;AAC9BC,YAAQ,EAAKd,IAAI,CAAC1D,GAAL,CAAS,CAAT,EAAYkE,eAAe,GAAG,CAA9B,CAAL;AADsB,GAAlC;AAIA,sBAAO,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,aAAS,EAAC,QAA1B;AAAmC,YAAQ,EAAEnF,QAA7C;AAAuD,kBAAegF,SAAf,SAA4BR;AAAnF,kBACH,8BAAC,uBAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACI,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,aAAS,EAAC,KAA1B;AAAgC,gBAAY,EAAC;AAA7C,kBACI,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACI,8BAAC,6BAAD;AAAY,QAAI,EAAC,OAAjB;AAAyB,SAAK,EAAC,OAA/B;AAAuC,WAAO,EAAEe,YAAhD;AACI,SAAK,EAAEC;AADX,KACwBjB,IADxB,EAC8BS,SAD9B,CADJ,CADJ,eAKI,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACI,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,aAAS,EAAC,QAA1B;AAAmC,gBAAY,EAAC;AAAhD,kBACI,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACI,8BAAC,6BAAD;AAAY,WAAO,EAAEP;AAArB,KAAoCD,KAApC,CADJ,CADJ,EAIKF,cAAc,iBAAI,8BAAC,uBAAD;AAAM,QAAI;AAAV,kBACf,8BAAC,6BAAD;AAAY,WAAO,EAAE;AAArB,KAAiCA,cAAjC,CADe,CAJvB,CADJ,CALJ,CADJ,CADG,EAmBFlD,QAAQ,IAAIjF,KAAK,KAAKH,SAAtB,iBAAmC,8BAAC,uBAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBAChC,8BAAC,yBAAD;AAAQ,qBAAiB,EAAC,KAA1B;AAAgC,SAAK,EAAC,WAAtC;AACI,OAAG,EAAEgF,GADT;AACc,OAAG,EAAEC,GADnB;AACwB,QAAI,EAAEC,IAD9B;AACoC,SAAK,EAAE/E,KAD3C;AACkD,YAAQ,EAAEiF;AAD5D,IADgC,CAnBjC,CAAP;AAwBH,C;;;;;AC9DD;AACA;AAEe,2DAAC3E,KAAD;AAAA,sBACX,8BAAC,0BAAD,EAAaA,KAAb,eACI;AAAM,KAAC,EAAC;AAAR,IADJ,CADW;AAAA,CAAf,E;;;;;ACHA;AACA;AACA;AAGe,0DAACiJ,IAAD,EAAejJ,KAAf,EAAwC;AAAA,aAC3BkJ,qCAAW,CAACD,IAAD,CAAX,IAAqB,EADM;AAAA,MACrCE,KADqC,QAC3CF,IAD2C;;AAEnD,UAAQE,KAAR;AACI,SAAK,KAAL;AAAY,0BAAO,8BAAC,YAAD,EAAkBnJ,KAAlB,CAAP;;AACZ;AAAS,aAAO,IAAP;AAFb;AAIH,CAND,E;;;;;;;;CCJA;;AACA;AACA;AACA;AAMA;AAMA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEe,SAASoJ,WAAT,CAAqBpJ,KAArB,EAgBZ;AAAA;;AAAA,MAEKU,aAFL,GAiBKV,KAjBL,CAEKU,aAFL;AAAA,MAGK2I,oBAHL,GAiBKrJ,KAjBL,CAGKqJ,oBAHL;AAAA,MAIKC,0BAJL,GAiBKtJ,KAjBL,CAIKsJ,0BAJL;AAAA,MAKK5J,KALL,GAiBKM,KAjBL,CAKKN,KALL;AAAA,MAMKC,QANL,GAiBKK,KAjBL,CAMKL,QANL;AAAA,MAOKW,YAPL,GAiBKN,KAjBL,CAOKM,YAPL;AAAA,MAQKmB,KARL,GAiBKzB,KAjBL,CAQKyB,KARL;AAAA,MASKlB,OATL,GAiBKP,KAjBL,CASKO,OATL;AAAA,MAUKgE,GAVL,GAiBKvE,KAjBL,CAUKuE,GAVL;AAAA,MAWKC,GAXL,GAiBKxE,KAjBL,CAWKwE,GAXL;AAAA,MAYK3C,UAZL,GAiBK7B,KAjBL,CAYK6B,UAZL;AAAA,MAaK0H,KAbL,GAiBKvJ,KAjBL,CAaKuJ,KAbL;AAAA,MAcKC,WAdL,GAiBKxJ,KAjBL,CAcKwJ,WAdL;AAAA,MAeKhJ,GAfL,GAiBKR,KAjBL,CAeKQ,GAfL;AAAA,MAgBKC,SAhBL,GAiBKT,KAjBL,CAgBKS,SAhBL;AAAA,MAmBKgJ,UAnBL,GAwBK/I,aAxBL,CAmBK+I,UAnBL;AAAA,MAoBKC,UApBL,GAwBKhJ,aAxBL,CAoBKgJ,UApBL;AAAA,MAqBKC,WArBL,GAwBKjJ,aAxBL,CAqBKiJ,WArBL;AAAA,MAsBKC,WAtBL,GAwBKlJ,aAxBL,CAsBKkJ,WAtBL;AAAA,MAuBKC,IAvBL,GAwBKnJ,aAxBL,CAuBKmJ,IAvBL;AAyBC,MAAMC,QAAQ,4BAAGT,oBAAoB,CAACU,KAAxB,0DAAG,sBAA6BrJ,aAAa,CAACmJ,IAA3C,CAAjB;AACA,MAAMG,QAAQ,GAAG,CAACrK,QAAlB;;AA1BD,kBA2BmCH,yBAAQ,CAAC,EAAD,CA3B3C;AAAA,MA2BQyK,SA3BR;AAAA,MA2BmBC,YA3BnB;;AAAA,mBA4BmC1K,yBAAQ,CAAC,EAAD,CA5B3C;AAAA,MA4BQ2K,SA5BR;AAAA,MA4BmBC,YA5BnB;;AA6BC,MAAMC,WAAW,GAAGC,2CAAmB,CAAC5K,KAAD,EAAQgB,aAAR,CAAvC;AACA,MAAM8B,IAAI,GACN9B,aAAa,CAAC8B,IAAd,KAAuB,GAAvB,GACM8G,0BAA0B,CAAC9G,IADjC,GAEM9B,aAAa,CAAC8B,IAHxB;AAIA,MAAMuF,KAAK,GAAGvF,IAAd;AACA,MAAM+H,QAAQ,GAAGhK,OAAO,KAAK,QAA7B;AACA,MAAMiK,UAAU,GAAGC,wCAAa,EAAhC;AACA,MAAMC,QAAQ,GAAGC,WAAW,CAACjK,aAAa,CAACuI,IAAf,EAAqB;AAAE,kBAAclB;AAAhB,GAArB,CAA5B;AAEA,MAAM6C,QAAQ,GAAGC,6BAAI,CACjBtG,GADiB,EAEjBkF,UAFiB,EAGjBE,WAHiB,EAIjB,KAAKmB,IAAL,CAAUjB,IAAV,IAAkB,CAAlB,GAAsBtK,SAJL,CAArB;AAMA,MAAMwL,QAAQ,GAAGF,6BAAI,CAACrG,GAAD,EAAMkF,UAAN,EAAkBE,WAAlB,CAArB;AACA,MAAMoB,UAAU,GAAGzB,KAAK,GAClB,MACAf,2CAAkB,CACde,KADc,EAEd,IAAIrB,IAAI,CAAC+C,KAAL,CAAW/C,IAAI,CAACE,KAAL,CAAWmB,KAAX,CAAX,CAFU,CAAlB,CAGEd,cAHF,EAFkB,GAMlBlJ,SANN;AAOA,MAAM0J,IAAI,GAAGiC,oCAAU,CAACxK,aAAa,CAACuI,IAAf,CAAvB;AACA,MAAMkC,UAAU,GACZlB,SAAS,IACT,CAACmB,0CAAgB,CAAC1K,aAAD,EAAgBJ,YAAhB,CAAjB,EAAgD0K,UAAhD,EACKK,MADL,CACY,UAAAtF,CAAC;AAAA,WAAIA,CAAC,KAAKxG,SAAV;AAAA,GADb,EAEK+L,IAFL,CAEU,IAFV,CAFJ;AAKA,MAAMC,OAAO,GAAGC,8CAAK,EAArB;AAEA,MAAMC,SAAS,GACX/K,aAAa,CAACmJ,IAAd,KAAuB,QAAvB,IAAmCnJ,aAAa,CAACmJ,IAAd,KAAuB,SAA1D,GACM,QADN,GAEMnJ,aAAa,CAACgL,YAAd,IAA8BC,qCAAa,CAACjL,aAAa,CAACmJ,IAAf,CAA3C,GACA,QADA,GAEA,EALV,CA7DD,CAoEC;;AACAjK,4BAAS,CAAC,YAAM;AACZwK,gBAAY,CAACC,WAAD,CAAZ;AACH,GAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;;AAIA,MAAMuB,aAAa,GAAG,SAAhBA,aAAgB,CAACjF,EAAD,EAAKkF,OAAL,EAA0B;AAC5ClM,YAAQ,CAACkM,OAAD,CAAR;AACH,GAFD;;AAGA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAnF,EAAE,EAAI;AACvB,QAAMgB,QAAQ,GAAGhB,EAAE,CAACoF,MAAH,CAAUrM,KAA3B;AACA0K,gBAAY,CAACzC,QAAD,CAAZ;AACA,QAAMnC,CAAC,GAAGwG,2CAAmB,CAACrE,QAAD,EAAWjH,aAAX,CAA7B;AACA,QAAI8E,CAAC,CAAC9F,KAAF,KAAYH,SAAhB,EAA2BI,QAAQ,CAAC6F,CAAC,CAAC9F,KAAH,CAAR;AAC3BwK,gBAAY,CAAC1E,CAAC,CAAC+D,KAAH,CAAZ;AACH,GAND,CA5ED,CAmFC;;;AACA,MAAM0C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAA8C;AACnE,QAAMnG,CAAC,GAAG+D,QAAQ,CAACqC,OAAT,GACJC,sCAAY,CAACF,KAAK,CAACH,MAAN,CAAarM,KAAd,CADR,GAEHwM,KAAK,CAACH,MAAN,CAAarM,KAFpB;AAGAC,YAAQ,CAACoG,CAAD,CAAR;AACH,GALD;;AAMA,MAAM2B,kBAAkB,GAAG,SAArBA,kBAAqB,CACvBwE,KADuB,EAEvBvE,QAFuB,EAGtB;AACD,QAAM5B,CAAC,GAAG4B,QAAV;AACAhI,YAAQ,CAACoG,CAAD,CAAR;AACH,GAND;;AAOA,MAAMsG,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC3M,KAAD,EAAmB;AAC1C;AACA,WAAO,CAAEA,KAAK,GAAG,GAAT,IAAiB,CAAlB,IAAuB,GAA9B;AACH,GAHD;;AAKA,MAAM4M,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC5M,KAAD,EAAmB;AACxC;AACA,WAAO8I,2CAAkB,CAAC9I,KAAD,EAAQ,CAAR,CAAlB,IAAgCuJ,IAAI,IAAI,EAAxC,CAAP;AACH,GAHD;;AAIA,MAAMsD,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACxG,CAAD,EAAe;AAC3C,WAAUmC,IAAI,CAACsE,KAAL,CAAWzG,CAAC,GAAG,GAAf,CAAV;AACH,GAFD;;AAGA,MAAM0G,SAAS,GAAG,SAAZA,SAAY;AAAA,WAAM,KAAN;AAAA,GAAlB,CA7GD,CA+GC;;;AACA,MAAInD,0BAA0B,CAAChI,IAA3B,KAAoC,SAApC,IAAiD5B,KAAK,KAAKH,SAA/D,EAA0E;AACtE,QAAIiK,WAAJ,EACI,oBAAO,8BAAC,kCAAD,OAAP,CADJ,KAEK,OAAO,IAAP;AACR,GApHF,CAsHC;;;AACA,MAAI9I,aAAa,CAACmJ,IAAd,KAAuB,MAA3B,EAAmC;AAC/B,wBACI,oFACS,4CAAOnJ,aAAa,CAAC8B,IAArB,CADT,CADJ;AAKH,GAND,MAMO,IAAI9B,aAAa,CAACmJ,IAAd,KAAuB,MAA3B,EAAmC;AACtC,QAAIU,QAAQ,IAAI,CAACmC,0CAAkB,CAACpD,0BAAD,CAAnC,EAAiE;AAC7D,0BACI,8BAAC,+BAAD;AACI,aAAK,EAAE,CAACiB,QAAD,IAAaxC,KADxB;AAEI,eAAO,EAAE,CAAC,CAACrI,KAFf;AAGI,aAAK,EAAE+B,KAHX;AAII,YAAI,EAAE+I;AAJV,QADJ;AAQH;;AAED,wBACI,8BAAC,qCAAD;AACI,aAAO,eACH,8BAAC,yBAAD;AACI,eAAO,EAAE,CAAC,CAAC9K,KADf;AAEI,gBAAQ,EAAEsK,QAAQ,GAAGzK,SAAH,GAAeqM,aAFrC;AAGI,aAAK,EAAEnK;AAHX,QAFR;AAQI,WAAK,EAAEsG;AARX,MADJ;AAYH,GAxBM,MAwBA,IAAI+B,QAAQ,KAAKvK,SAAjB,EAA4B;AAC/B,wBACI,8BAAC,yBAAD;AACI,oBAAYwI,KADhB;AAEI,cAAQ,EAAEiC,QAFd;AAGI,cAAQ,EAAEF,QAAQ,CAACqC,OAHvB;AAII,WAAK,EACDrC,QAAQ,CAACqC,OAAT,GACMQ,sCAAY,CAAC7C,QAAD,EAAWpK,KAAX,CADlB,GAEMA,KAPd;AASI,cAAQ,EAAEuM;AATd,OAWKW,MAAM,CAACC,IAAP,CAAY/C,QAAQ,CAACgD,OAArB,EAA8BlK,GAA9B,CAAkC,UAAAmK,CAAC;AAAA,0BAChC,8BAAC,2BAAD;AAAU,WAAG,EAAEA,CAAf;AAAkB,aAAK,EAAEjD,QAAQ,CAACgD,OAAT,CAAiBC,CAAjB;AAAzB,SACKA,CADL,CADgC;AAAA,KAAnC,CAXL,CADJ;AAmBH,GApBM,MAoBA,IAAIrM,aAAa,CAACuI,IAAd,KAAuB,GAA3B,EAAgC;AACnC,QAAM+D,MAAM,GAAGtM,aAAa,CAACuM,OAAd,GAAwB,CAAvC;;AACA,QAAM1I,IAAG,GAAGyI,MAAM,GAAG,CAAC,CAAJ,GAAQ,CAA1B;;AACA,QAAMxI,IAAG,GAAG,CAAZ;AACA,QAAMC,IAAI,GAAG5C,UAAU,KAAKtC,SAAf,GAA2BsC,UAA3B,GAAwC,IAArD;AACA,QAAI0I,QAAJ,EACI,oBACI,8BAAC,WAAD;AACI,cAAQ,EAAE,CADd;AAEI,WAAK,EAAExC,KAFX;AAGI,WAAK,EAAErI,KAHX;AAII,WAAK,EAAE+B,KAJX;AAKI,aAAO,EAAEuL,MAAM,GAAG,UAAH,GAAgBzN,SALnC;AAMI,SAAG,EAAEgF,IANT;AAOI,SAAG,EAAEC,IAPT;AAQI,UAAI,EAAEC,IARV;AASI,gBAAU,EAAE8H,uBAThB;AAUI,cAAQ,EAAEvC,QAAQ,GAAGzK,SAAH,GAAemI,kBAVrC;AAWI,SAAG,EAAElH,GAXT;AAYI,eAAS,EAAEC;AAZf,MADJ;AAiBJ,wBACI,8BAAC,yBAAD;AACI,oBAAYsH,KADhB;AAEI,WAAK,EAAEtG,KAFX;AAGI,WAAK,EAAE/B,KAHX;AAII,sBAAgB,EAAE2M,kBAJtB;AAKI,cAAQ,EAAErC,QAAQ,GAAGzK,SAAH,GAAemI,kBALrC;AAMI,SAAG,EAAEnD,IANT;AAOI,SAAG,EAAEC,IAPT;AAQI,UAAI,EAAEC,IARV;AASI,uBAAiB,EAAC;AATtB,MADJ;AAaH,GApCM,MAoCA,IAAIkE,8BAAK,CAACiC,QAAD,CAAL,IAAmBjC,8BAAK,CAACoC,QAAD,CAA5B,EAAwC;AAC3C,QAAMmC,eAAe,GAAGvE,8BAAK,CAACc,UAAD,CAAL,IAAqBd,8BAAK,CAACe,UAAD,CAAlD;;AACA,QAAIjF,KAAI,GACJ5C,UAAU,KAAKtC,SAAf,GACMsC,UADN,GAEMqL,eAAe,GACf,CAACxM,aAAa,CAACgJ,UAAd,GAA2BhJ,aAAa,CAAC+I,UAA1C,IAAwD,GADzC,GAEf,CAACsB,QAAQ,GAAGH,QAAZ,IAAwB,GALlC;;AAMA,QAAInG,KAAI,KAAK,CAAT,IAAc6D,KAAK,CAAC7D,KAAD,CAAvB,EACI;AACAA,WAAI,GAAGlF,SAAP;AACJ,QAAM4N,KAAK,GACPD,eAAe,KACdzD,UAAU,KAAKmB,QAAf,IAA2BlB,UAAU,KAAKqB,QAD5B,CAAf,GAEM,CACI;AACIrL,WAAK,EAAE+J;AADX,KADJ,EAII;AACI/J,WAAK,EAAEgK;AADX,KAJJ,CAFN,GAUMnK,SAXV;AAYA,QAAIgL,QAAJ,EACI,oBACI,8BAAC,mBAAD;AACI,cAAQ,EAAE,CADd;AAEI,WAAK,EAAE7J,aAAa,CAACuI,IAFzB;AAGI,WAAK,EAAEvJ,KAHX;AAII,SAAG,EAAEkL,QAJT;AAKI,SAAG,EAAEG,QALT;AAMI,UAAI,EAAEL,QANV;AAOI,UAAI,EAAEjG,KAPV;AAQI,oBAAc,EAAEuG,UARpB;AASI,WAAK,EAAEvJ,KATX;AAUI,cAAQ,EAAEuI,QAAQ,GAAGzK,SAAH,GAAemI;AAVrC,MADJ;AAeJ,wBACI,8BAAC,yBAAD;AACI,WAAK,EAAEhI,KADX;AAEI,WAAK,EAAE+B,KAFX;AAGI,sBAAgB,EAAEjB,GAAG,GAAGiM,SAAH,GAAeH,gBAHxC;AAII,cAAQ,EAAEtC,QAAQ,GAAGzK,SAAH,GAAemI,kBAJrC;AAKI,SAAG,EAAEkD,QALT;AAMI,SAAG,EAAEG,QANT;AAOI,UAAI,EAAEtG,KAPV;AAQI,WAAK,EAAE0I,KARX;AASI,uBAAiB,EAAC;AATtB,MADJ;AAaH,GApDM,MAoDA,IAAIzM,aAAa,CAACmJ,IAAd,KAAuB,OAA3B,EAAoC;AAAA;;AACvC,wBACI,8BAAC,4BAAD;AACI,QAAE,EAAE0B,OADR;AAEI,gBAAU,EAAE,KAFhB;AAGI,WAAK,EAAEpB,SAHX;AAII,WAAK,EAAEpC,KAJX;AAKI,gBAAU,mBAAK,YAAL,IAAoBA,KAApB,OALd;AAMI,gBAAU,EAAEoD,UANhB;AAOI,cAAQ,EAAEnB,QAAQ,GAAGzK,SAAH,GAAeuM,YAPrC;AAQI,cAAQ,EAAEpM,KAAK,KAAKH,SARxB;AASI,WAAK,EAAE,CAAC,CAAC0K,SATb;AAUI,UAAI,EAAE;AAVV,MADJ;AAcH,GAfM,MAeA;AAAA;;AACH;AACA,QAAIM,QAAJ,EACI;AACA,0BACI,8BAAC,mBAAD;AACI,gBAAQ,EAAE,CADd;AAEI,aAAK,EAAE/B,2CAAkB,CAAC9I,KAAD,EAAkB,CAAlB,CAF7B;AAGI,aAAK,EAAEgB,aAAa,CAACuI,IAHzB;AAII,aAAK,EAAExH,KAJX;AAKI,YAAI,EAAE+I;AALV,QADJ;AAUJ,wBACI,8BAAC,4BAAD;AACI,QAAE,EAAEe,OADR;AAEI,gBAAU,EAAE,KAFhB;AAGI,WAAK,EAAEpB,SAHX;AAII,WAAK,EAAEpC,KAJX;AAKI,gBAAU,qBAAK,YAAL,IAAoBA,KAApB,QALd;AAMI,gBAAU,EAAEoD,UANhB;AAOI,cAAQ,EAAEnB,QAAQ,GAAGzK,SAAH,GAAeuM,YAPrC;AAQI,cAAQ,EAAEpM,KAAK,KAAKH,SARxB;AASI,WAAK,EAAE,CAAC,CAAC0K,SATb;AAUI,UAAI,EAAEwB;AAVV,MADJ;AAcH;AACJ,C;;ACxVD;AACA;AAEA;AAEe,SAAS2B,YAAT,CAAsBpN,KAAtB,EAeZ;AAAA,MACSqJ,oBADT,GAGqDrJ,KAHrD,CACSqJ,oBADT;AAAA,MAC+BC,0BAD/B,GAGqDtJ,KAHrD,CAC+BsJ,0BAD/B;AAAA,MAC2D+D,cAD3D,GAGqDrN,KAHrD,CAC2DqN,cAD3D;AAAA,MAEKnL,MAFL,GAGqDlC,KAHrD,CAEKkC,MAFL;AAAA,MAEaC,SAFb,GAGqDnC,KAHrD,CAEamC,SAFb;AAAA,MAEwB7B,YAFxB,GAGqDN,KAHrD,CAEwBM,YAFxB;AAAA,MAEsCmB,KAFtC,GAGqDzB,KAHrD,CAEsCyB,KAFtC;AAAA,MAE6ClB,OAF7C,GAGqDP,KAHrD,CAE6CO,OAF7C;AAAA,MAGKgE,GAHL,GAGqDvE,KAHrD,CAGKuE,GAHL;AAAA,MAGUC,GAHV,GAGqDxE,KAHrD,CAGUwE,GAHV;AAAA,MAGe3C,UAHf,GAGqD7B,KAHrD,CAGe6B,UAHf;AAAA,MAG2B0H,KAH3B,GAGqDvJ,KAHrD,CAG2BuJ,KAH3B;AAAA,MAGkC/I,GAHlC,GAGqDR,KAHrD,CAGkCQ,GAHlC;AAAA,MAGuCC,SAHvC,GAGqDT,KAHrD,CAGuCS,SAHvC;;AAIC,MAAMd,QAAQ,GAAG,SAAXA,QAAW,CAAC2N,KAAD;AAAA,WAAmB,UAAC5N,KAAD,EAAgB;AAChD,UAAM6N,CAAC,GAAGrL,MAAM,CAACsL,KAAP,CAAa,CAAb,CAAV;AACAD,OAAC,CAACD,KAAD,CAAD,GAAW5N,KAAX;AACAyC,eAAS,CAACoL,CAAD,CAAT;AACH,KAJgB;AAAA,GAAjB;;AAMA,sBAAO,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,WAAO,EAAE;AAAzB,KACFF,cAAc,CAACzK,GAAf,CAAmB,UAAC6K,KAAD,EAAQC,MAAR,EAAmB;AACnC,QAAMhO,KAAK,GAAGwC,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAGwL,MAAH,CAApB;AACA,wBAAO,8BAAC,uBAAD;AAAM,UAAI,MAAV;AAAW,SAAG,EAAEA,MAAhB;AAAwB,QAAE,EAAE;AAA5B,oBACH,8BAAC,WAAD;AACI,0BAAoB,EAAErE,oBAD1B;AAEI,gCAA0B,EAAEC,0BAFhC;AAGI,mBAAa,EAAEmE,KAHnB;AAII,kBAAY,EAAEnN,YAJlB;AAKI,WAAK,EAAEZ,KALX;AAMI,WAAK,EAAE+B,KANX;AAOI,cAAQ,EAAES,MAAM,IAAIC,SAAV,IAAuBxC,QAAQ,CAAC+N,MAAD,CAP7C;AAQI,aAAO,EAAEnN,OARb;AASI,SAAG,EAAEgE,GAAF,aAAEA,GAAF,uBAAEA,GAAG,CAAGmJ,MAAH,CATZ;AAUI,SAAG,EAAElJ,GAAF,aAAEA,GAAF,uBAAEA,GAAG,CAAGkJ,MAAH,CAVZ;AAWI,gBAAU,EAAE7L,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAG6L,MAAH,CAX1B;AAYI,WAAK,EAAEnE,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAGmE,MAAH,CAZhB;AAaI,SAAG,EAAElN,GAbT;AAcI,eAAS,EAAEC;AAdf,MADG,CAAP;AAkBH,GApBA,CADE,CAAP;AAuBH,C;;;;;;;;ACrDD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEe,SAASmE,cAAT,CAAwBnD,KAAxB,EAAyD;AACpE,MAAMkM,KAAK,GAAGC,yEAAQ,EAAtB;AADoE,MAE5DC,OAF4D,GAEhDF,KAFgD,CAE5DE,OAF4D;AAAA,MAG5D3K,UAH4D,GAG7C2K,OAH6C,CAG5D3K,UAH4D;;AAAA,oBAI/CrC,wDAAU,CAACiN,mEAAD,CAJqC;AAAA,MAI5DC,QAJ4D,eAI5DA,QAJ4D;;AAMpE,MAAMlJ,MAAc,GAAGpD,KAAK,KAAK,SAAV,GAAsBoM,OAAO,CAACG,OAAR,CAAgBC,IAAtC,GACjBxM,KAAK,KAAK,WAAV,GAAwBoM,OAAO,CAACK,SAAR,CAAkBD,IAA1C,GACIJ,OAAO,CAACM,IAAR,CAAaF,IAFvB;AAGA,MAAMG,eAAe,GAAGL,QAAQ,KAAK,MAAb,GAAsB7K,UAAU,CAACmL,OAAjC,GAA2CR,OAAO,CAACS,IAAR,CAAa,GAAb,CAAnE;AACA,MAAMC,iBAAiB,GAAGR,QAAQ,KAAK,MAAb,GAAsBF,OAAO,CAACS,IAAR,CAAa,GAAb,CAAtB,GAA0CT,OAAO,CAACS,IAAR,CAAa,GAAb,CAApE;AACA,MAAME,WAAW,GAAGX,OAAO,CAACY,IAAR,CAAaT,OAAjC;AACA,MAAMlJ,SAAmC,GAAG;AACxC4J,QAAI,EAAEF,WADkC;AAExCG,qBAAiB,EAAE,SAFqB;AAGxCC,oBAAgB,EAAE,QAHsB;AAIxCC,cAAU,EAAE,QAJ4B;AAKxCC,iBAAa,EAAE,MALyB;AAMxCC,iBAAa,EAAE,CANyB;AAOxCtH,SAAK,EAAE;AACHuH,gBAAU,EAAE,MADT;AAEHF,mBAAa,EAAE;AAFZ;AAPiC,GAA5C;AAaA,SAAO;AACH5L,cAAU,EAAEkL,eADT;AAEHG,qBAAiB,EAAjBA,iBAFG;AAGH1J,UAAM,EAANA,MAHG;AAIH2J,eAAW,EAAXA,WAJG;AAKH1J,aAAS,EAATA;AALG,GAAP;AAOH,C;;;;;;;;ACpCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AAEe,SAASmK,YAAT,CAAsBjP,KAAtB,EAOZ;AAAA,MACS6L,OADT,GACuD7L,KADvD,CACS6L,OADT;AAAA,MACkB9D,KADlB,GACuD/H,KADvD,CACkB+H,KADlB;AAAA,MACyBtG,KADzB,GACuDzB,KADvD,CACyByB,KADzB;AAAA,MACgCwB,IADhC,GACuDjD,KADvD,CACgCiD,IADhC;AAAA,MACsCiM,MADtC,GACuDlP,KADvD,CACsCkP,MADtC;AAAA,MAC8CC,IAD9C,GACuDnP,KADvD,CAC8CmP,IAD9C;;AAAA,wBAEmDvK,uEAAc,CAACnD,KAAD,CAFjE;AAAA,MAESyB,UAFT,mBAESA,UAFT;AAAA,MAEqBqL,iBAFrB,mBAEqBA,iBAFrB;AAAA,MAEwC1J,MAFxC,mBAEwCA,MAFxC;;AAIC,MAAMuK,WAAW,GAAGC,gFAAiB,CAAmBtH,KAAnB,EAA0BmH,MAA1B,EAAkCC,IAAlC,CAArC;AACA,MAAMlK,CAAC,GAAG,EAAV;AACA,MAAMqK,EAAE,GAAGzD,OAAO,GAAG,CAAH,GAAO,CAAzB;AACA,MAAMrG,CAAC,GAAGP,CAAC,GAAG,CAAd;AACA,MAAMK,EAAE,GAAGE,CAAX;AACA,MAAMD,EAAE,GAAGC,CAAX;AACA,MAAM+J,EAAE,GAAG/J,CAAX;AACA,MAAMgK,EAAE,GAAGhK,CAAC,GAAG8J,EAAf;AACA,MAAMG,EAAE,GAAG,CAAX;AACA,sBAAO,2DAAC,0DAAD;AAAW,SAAK,EAAExK,CAAlB;AAAqB,QAAI,EAAEhC;AAA3B,kBACH;AAAM,KAAC,EAAE,CAAT;AAAY,KAAC,EAAE,CAAf;AAAkB,MAAE,EAAE,CAAtB;AAAyB,MAAE,EAAE,CAA7B;AAAgC,SAAK,EAAEgC,CAAvC;AAA0C,UAAM,EAAEA,CAAlD;AAAqD,QAAI,EAAE/B;AAA3D,IADG,eAEH;AAAQ,MAAE,EAAEuM,EAAZ;AAAgB,MAAE,EAAEA,EAApB;AAAwB,KAAC,EAAEA,EAAE,IAAI,CAAjC;AAAoC,QAAI,EAAElB;AAA1C,IAFG,eAGH;AAAQ,MAAE,EAAEtJ,CAAC,GAAGwK,EAAhB;AAAoB,MAAE,EAAEA,EAAxB;AAA4B,KAAC,EAAEA,EAAE,IAAI,CAArC;AAAwC,QAAI,EAAElB;AAA9C,IAHG,eAIH;AAAQ,MAAE,EAAEtJ,CAAC,GAAGwK,EAAhB;AAAoB,MAAE,EAAExK,CAAC,GAAGwK,EAA5B;AAAgC,KAAC,EAAEA,EAAE,IAAI,CAAzC;AAA4C,QAAI,EAAElB;AAAlD,IAJG,eAKH;AAAQ,MAAE,EAAEkB,EAAZ;AAAgB,MAAE,EAAExK,CAAC,GAAGwK,EAAxB;AAA4B,KAAC,EAAEA,EAAE,IAAI,CAArC;AAAwC,QAAI,EAAElB;AAA9C,IALG,eAMH;AAAQ,MAAE,EAAEjJ,EAAZ;AAAgB,MAAE,EAAEC,EAApB;AAAwB,KAAC,EAAEiK,EAA3B;AACI,iBAAU,QADd;AAEI,QAAI,EAAE3D,OAAO,GAAGhH,MAAH,GAAY0J;AAF7B,KAGQa,WAHR,EANG,CAAP;AAYH,C;;;;;;;;ACvCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,SAASM,WAAT,CAAqB1P,KAArB,EAWZ;AAAA,MACSsF,EADT,GACkFtF,KADlF,CACSsF,EADT;AAAA,MACaC,EADb,GACkFvF,KADlF,CACauF,EADb;AAAA,MACiBC,CADjB,GACkFxF,KADlF,CACiBwF,CADjB;AAAA,MACoBgK,EADpB,GACkFxP,KADlF,CACoBwP,EADpB;AAAA,MACwBG,OADxB,GACkF3P,KADlF,CACwB2P,OADxB;AAAA,MACiCnP,GADjC,GACkFR,KADlF,CACiCQ,GADjC;AAAA,MACsCiB,KADtC,GACkFzB,KADlF,CACsCyB,KADtC;AAAA,MAC6CsG,KAD7C,GACkF/H,KADlF,CAC6C+H,KAD7C;AAAA,MACoD6H,WADpD,GACkF5P,KADlF,CACoD4P,WADpD;AAAA,MACiEC,YADjE,GACkF7P,KADlF,CACiE6P,YADjE;;AAAA,wBAE8DjL,uEAAc,CAACnD,KAAD,CAF5E;AAAA,MAESyB,UAFT,mBAESA,UAFT;AAAA,MAEqB2B,MAFrB,mBAEqBA,MAFrB;AAAA,MAE6B0J,iBAF7B,mBAE6BA,iBAF7B;AAAA,MAEgDzJ,SAFhD,mBAEgDA,SAFhD;;AAGC,MAAMgL,CAAC,GAAG,GAAV;AACA,MAAMC,CAAC,GAAG7J,qEAAW,CAACZ,EAAD,EAAKC,EAAL,EAASiK,EAAT,EAAa,CAACM,CAAd,EAAiBA,CAAjB,EAAoB,IAApB,CAArB;AACA,MAAME,QAAQ,GAAGxP,GAAG,GAAG,SAAH,GAAe,UAAnC;AACA,MAAM4O,WAAW,GAAGC,gFAAiB,CAAmBW,QAAnB,EAA6BL,OAA7B,CAArC;AACA,MAAMtK,EAAE,GAAGuK,WAAW,IAAI,CAA1B;AACA,MAAM5F,QAAQ,GAAG,CAAC2F,OAAlB;AAEA,MAAMM,UAAU,GAAGjG,QAAQ,IAAI,CAACxJ,GAAb,GAAmB0C,UAAnB,GAAgC2B,MAAnD;AAEA,sBAAO,mFACH,0EAAQmL,QAAR,CADG,eAEH;AAAQ,MAAE,EAAE1K,EAAZ;AAAgB,MAAE,EAAEC,EAApB;AAAwB,KAAC,EAAEC,CAA3B;AAA8B,QAAI,EAAE+I,iBAApC;AACI,eAAW,EAAElJ,EADjB;AACqB,UAAM,EAAEwK,YAAY,IAAI3M;AAD7C,KAEQkM,WAFR,EAFG,EAKF,CAAC5O,GAAG,IAAI,CAACuH,KAAT,kBAAmB;AAAG,aAAS,mBAAiBzC,EAAjB,UAAwBC,EAAxB;AAAZ,kBAChB;AAAM,KAAC,EAAEwK,CAAT;AAAY,iBAAa,EAAC,OAA1B;AAAkC,QAAI,EAAC,MAAvC;AACI,eAAW,EAAE1K,EADjB;AACqB,UAAM,EAAE4K,UAD7B;AAEI,SAAK,EAAG;AAAEjB,gBAAU,EAAE,MAAd;AAAsBF,mBAAa,EAAE;AAArC;AAFZ,IADgB,eAIhB;AAAM,iBAAa,EAAC,OAApB;AAA4B,MAAE,EAAExJ,EAAhC;AAAoC,MAAE,EAAEC,EAAE,GAAGiK,EAAE,GAAG,CAAlD;AAAqD,MAAE,EAAElK,EAAzD;AAA6D,MAAE,EAAEC,EAAE,GAAGiK,EAAtE;AACI,UAAM,EAAES,UADZ;AACwB,eAAW,EAAE5K,EADrC;AAEI,SAAK,EAAG;AAAE2J,gBAAU,EAAE,MAAd;AAAsBF,mBAAa,EAAE;AAArC;AAFZ,IAJgB,CALjB,EAaF,CAACtO,GAAD,IAAQuH,KAAR,iBAAiB;AAAM,kBAAYA,KAAlB;AAAyB,KAAC,EAAEzC,EAA5B;AAAgC,KAAC,EAAEC;AAAnC,KAA2CT,SAA3C,GAAuDiD,KAAvD,CAbf,CAAP;AAeH,C;;;;;;;;AC3CD;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,SAASmI,eAAT,CAAyBlQ,KAAzB,EAAmD;AAAA,MACtDiD,IADsD,GAC7CjD,KAD6C,CACtDiD,IADsD;AAE9D,sBAAO,2DAAC,iEAAD;AACH,iBAAa,MADV;AAEH,WAAO,EAAC,eAFL;AAGH,QAAI,EAAEA,IAAI,IAAI;AAHX,IAAP;AAKH,C;;;;;;;;ACRD;AAAA;AAAA;AAEe,SAAS1E,cAAT,CAA+CC,OAA/C,EAAmE;AAC9E,MAAMF,IAAI,GAAG6R,sEAAa,CAAC3R,OAAO,CAACmC,MAAT,CAA1B;AACA,SAAOrC,IAAP,aAAOA,IAAP,uBAAOA,IAAI,CAAEE,OAAN,CAAcA,OAAd,aAAcA,OAAd,uBAAcA,OAAO,CAAE4R,YAAvB,CAAP;AACH,C;;;;;;;;ACLD;AAAA;AAAA;AAAA;AAAO,SAASnJ,eAAT,CACHJ,GADG,EAEHqF,KAFG,EAGK;AACR,MAAMmE,KAAK,GAAGxJ,GAAG,CAACyJ,cAAJ,EAAd;AACAD,OAAK,CAACE,CAAN,GAAUrE,KAAK,CAACsE,OAAhB;AACAH,OAAK,CAACI,CAAN,GAAUvE,KAAK,CAACwE,OAAhB;AACA,MAAMC,GAAG,GAAGN,KAAK,CAACO,eAAN,CAAsB/J,GAAG,CAACgK,YAAJ,GAAmBC,OAAnB,EAAtB,CAAZ;AACA,SAAOH,GAAP;AACH;AAEM,SAASxJ,YAAT,CACH4J,QADG,EAEHtM,IAFG,EAGH4L,KAHG,EAIG;AACN,MAAMW,UAAU,GAAGD,QAAQ,CAACE,cAAT,EAAnB;;AAEA,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD,EAAiB;AAC/B,QAAMC,EAAE,GAAGD,CAAC,CAACZ,CAAF,GAAMF,KAAK,CAACE,CAAvB;AACA,QAAMc,EAAE,GAAGF,CAAC,CAACV,CAAF,GAAMJ,KAAK,CAACI,CAAvB;AACA,WAAOW,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAtB;AACH,GAJD;;AAMA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,YAAY,GAAGC,QAAnB;;AACA,OAAK,IAAIC,UAAU,GAAG,CAAtB,EAAyBA,UAAU,IAAIT,UAAvC,EAAmDS,UAAU,IAAIhN,IAAjE,EAAuE;AACnE,QAAMiN,IAAI,GAAGX,QAAQ,CAACY,gBAAT,CAA0BF,UAA1B,CAAb;AACA,QAAMG,YAAY,GAAGV,SAAS,CAACQ,IAAD,CAA9B;;AACA,QAAIE,YAAY,GAAGL,YAAnB,EAAiC;AAC7BD,gBAAU,GAAGG,UAAb;AACAF,kBAAY,GAAGK,YAAf;AACH;AACJ;;AACD,SAAON,UAAU,GAAGN,UAApB;AACH;AAEM,SAASa,gBAAT,CACHC,OADG,EAEHC,OAFG,EAGHC,MAHG,EAIHC,cAJG,EAKL;AACE,MAAMC,cAAc,GAAI,CAACD,cAAc,GAAG,EAAlB,IAAwB/J,IAAI,CAACiK,EAA9B,GAAoC,KAA3D;AAEA,SAAO;AACH5B,KAAC,EAAEuB,OAAO,GAAGE,MAAM,GAAG9J,IAAI,CAACkK,GAAL,CAASF,cAAT,CADnB;AAEHzB,KAAC,EAAEsB,OAAO,GAAGC,MAAM,GAAG9J,IAAI,CAACmK,GAAL,CAASH,cAAT;AAFnB,GAAP;AAIH;AAEM,SAAShM,WAAT,CACHqK,CADG,EAEHE,CAFG,EAGHuB,MAHG,EAIHM,UAJG,EAKHC,QALG,EAMHC,KANG,EAOL;AACE,MAAMC,KAAK,GAAGZ,gBAAgB,CAACtB,CAAD,EAAIE,CAAJ,EAAOuB,MAAP,EAAeO,QAAf,CAA9B;AACA,MAAMG,GAAG,GAAGb,gBAAgB,CAACtB,CAAD,EAAIE,CAAJ,EAAOuB,MAAP,EAAeM,UAAf,CAA5B;AAEA,MAAMK,YAAY,GACdH,KAAK,KAAK,IAAV,IAAkBD,QAAQ,GAAGD,UAAX,IAAyB,GAA3C,GAAiD,GAAjD,GAAuD,GAD3D;AAGA,MAAMvC,CAAC,GAAG,CACN,GADM,EAEN0C,KAAK,CAAClC,CAFA,EAGNkC,KAAK,CAAChC,CAHA,EAIN,GAJM,EAKNuB,MALM,EAMNA,MANM,EAON,CAPM,EAQNW,YARM,EASN,CATM,EAUND,GAAG,CAACnC,CAVE,EAWNmC,GAAG,CAACjC,CAXE,EAYRnF,IAZQ,CAYH,GAZG,CAAV;AAcA,SAAOyE,CAAP;AACH,C;;;;;;;;AClFD;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,SAASlK,iBAAT,CAA2BnG,KAA3B,EAA0CkT,OAA1C,EAA2D;AAAA,kBAC1CpT,sDAAQ,CAASE,KAAT,CADkC;AAAA,MAC/DmT,MAD+D;AAAA,MACvDC,SADuD;;AAGtE,MAAIC,QAAQ,GAAGF,MAAf;AACAG,4EAAiB,CAAC,UAAAC,IAAI,EAAI;AACtB;AACA,QAAI3K,KAAK,CAACsK,OAAD,CAAL,IAAkBtK,KAAK,CAACyK,QAAD,CAA3B,EAAuC;AACnCD,eAAS,CAACpT,KAAD,CAAT;AACA,aAAO,KAAP;AACH,KALqB,CAOtB;;;AACA,QAAMwT,EAAE,GAAGD,IAAI,GAAG,IAAlB,CARsB,CAQE;;AACxB,QAAM1J,KAAK,GAAG7J,KAAK,GAAGqT,QAAtB;AACA,QAAMI,QAAQ,GAAGP,OAAO,GAAGM,EAA3B,CAVsB,CAUS;;AAC/B,QAAIrO,MAAM,GAAG,IAAb;AACAkO,YAAQ,IAAI7K,IAAI,CAACkL,IAAL,CAAU7J,KAAV,IAAmBrB,IAAI,CAAC3D,GAAL,CAAS2D,IAAI,CAACmL,GAAL,CAAS9J,KAAT,CAAT,EAA0B4J,QAA1B,CAA/B;;AACA,QAAIjL,IAAI,CAACmL,GAAL,CAAS3T,KAAK,GAAGqT,QAAjB,IAA6BH,OAA7B,GAAuC,IAA3C,EAAiD;AAC7CG,cAAQ,GAAGrT,KAAX;AACAmF,YAAM,GAAG,KAAT;AACH;;AACDiO,aAAS,CAACC,QAAD,CAAT;AACA,WAAOlO,MAAP;AACH,GAnBgB,EAmBd,CAACnF,KAAD,EAAQkT,OAAR,CAnBc,CAAjB;AAqBA,SAAOC,MAAP;AACH,C;;;;;;;;AC5BD;AAAA;AAAA;AAEe,SAASxD,iBAAT,CACXtH,KADW,EAEXmH,MAFW,EAGXC,IAHW,EAIA;AAAA;;AAEX,MAAMnF,QAAQ,GAAG,CAACkF,MAAD,IAAW,CAACC,IAA7B;AACA,MAAMmE,eAAe,GAAGpP,mEAAU,CAACgL,MAAD,CAAlC;AACA,MAAMqE,aAAa,GAAGrP,mEAAU,CAACiL,IAAD,CAAhC;;AAEA,MAAMqE,UAAU,GAAG,SAAbA,UAAa,CAACrP,OAAD,EAAqD;AACpE,QAAIA,OAAJ,EACI,OAAO,UAAC+H,KAAD,EAAkC;AACrCA,WAAK,CAAC7H,cAAN;AACAF,aAAO,CAAC+H,KAAD,CAAP;AACH,KAHD,CADJ,KAMI,OAAO3M,SAAP;AACP,GARD;;AAUA;AACIkU,aAAS,EAAEzJ,QAAQ,GAAGzK,SAAH,GAAe,YADtC;AAEI6D,QAAI,EAAE4G,QAAQ,GAAGzK,SAAH,GAAe,QAFjC;AAGIgE,YAAQ,EAAEyG,QAAQ,GAAGzK,SAAH,GAAe;AAHrC,UAIK,YAJL,IAIoBwI,KAJpB,OAKIR,aALJ,GAKmBiM,UAAU,CAACtE,MAAD,CAL7B,OAMIwE,WANJ,GAMiBF,UAAU,CAACrE,IAAD,CAN3B,OAOIwE,cAPJ,GAOoBH,UAAU,CAACrE,IAAD,CAP9B,OAQIyE,SARJ,GAQeN,eARf,OASIO,OATJ,GASaN,aATb;AAWH,C;;;;;;;;AChCD;AAAe,SAAS9I,aAAT,CAAuBlK,OAAvB,EAA8CuT,WAA9C,EAAoE;AAC/E,MAAMhM,IAAI,GAAGvH,OAAO,KAAK,MAAzB;AAEA,MAAMwT,IAAI,GAAGjM,IAAb;AACA,MAAI0C,UAAJ;;AACA,UAAQsJ,WAAW,IAAI,CAAvB;AACI,SAAK,CAAL;AACA,SAAK,CAAL;AACItJ,gBAAU,GAAGuJ,IAAI,GAAG,MAAH,GAAY,MAA7B;AACA;;AACJ,SAAK,CAAL;AACA,SAAK,CAAL;AACA,SAAK,CAAL;AACA,SAAK,CAAL;AACIvJ,gBAAU,GAAGuJ,IAAI,GAAG,MAAH,GAAY,MAA7B;AACA;;AACJ;AACIvJ,gBAAU,GAAGuJ,IAAI,GAAG,KAAH,GAAW,KAA5B;AACA;AAbR;;AAeA,SAAOvJ,UAAP;AACH,C;;;;;;;;ACvBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA,IAAMwJ,eAAe,GAAG,EAAxB;AACA,IAAMC,cAAc,GAAG,EAAvB;AAEe,SAASC,aAAT,CAAuBlU,KAAvB,EAOZ;AAAA,MACS3B,QADT,GACuD2B,KADvD,CACS3B,QADT;AAAA,MACmB0V,IADnB,GACuD/T,KADvD,CACmB+T,IADnB;AAAA,MACyBI,OADzB,GACuDnU,KADvD,CACyBmU,OADzB;AAAA,MACkCnR,MADlC,GACuDhD,KADvD,CACkCgD,MADlC;AAAA,MAC0CoR,QAD1C,GACuDpU,KADvD,CAC0CoU,QAD1C;;AAAA,oBAEiBvT,wDAAU,CAAqBwT,+DAArB,CAF3B;AAAA,MAESC,GAFT,eAESA,GAFT;;AAGC,MAAMzG,OAAO,GAAG0G,wEAAe,EAA/B;AACA,MAAMC,OAAO,GAAGxP,oDAAM,CAACyP,6DAAY,CAACC,MAAb,CAAoBJ,GAApB,EAAyB,CAACjW,QAAD,CAAzB,EAAqC,QAArC,EAA+CwP,OAA/C,EAAwD,GAAxD,CAAD,CAAtB;AAEA8G,2EAAS,CAACH,OAAO,CAAC1N,OAAT,CAAT;;AAEA,MAAM8N,MAAM,GAAG,SAATA,MAAS;AAAA,WAAMJ,OAAO,CAAC1N,OAAR,CAAgB8N,MAAhB,EAAN;AAAA,GAAf,CARD,CASC;;;AACAhV,yDAAS,CAAC;AAAA,WAAMwU,QAAQ,GAAG7U,SAAH,GAAelB,QAAf,aAAeA,QAAf,uBAAeA,QAAQ,CAAEwB,SAAV,CAAoBgV,qFAApB,EAAoCD,MAApC,CAA7B;AAAA,GAAD,EAA2E,CAACR,QAAD,EAAW/V,QAAX,CAA3E,CAAT,CAVD,CAWC;;AACAuB,yDAAS,CAAC,YAAM;AACZ,QAAMkV,EAAE,GAAGV,QAAQ,IAAIW,WAAW,CAACH,MAAD,EAASR,QAAT,CAAlC;AACA,WAAO;AAAA,aAAMU,EAAE,IAAIE,aAAa,CAACF,EAAD,CAAzB;AAAA,KAAP;AACH,GAHQ,EAGN,CAACV,QAAD,CAHM,CAAT;AAKA,sBAAO,2DAAC,sDAAD;AAAO,WAAO,EAAEI,OAAO,CAAC1N,OAAxB;AACH,WAAO,EAAEqN,OAAO,IAAIH,eADjB;AAEH,YAAQ,EAAE,IAFP;AAGH,UAAM,EAAEhR,MAAM,IAAIiR,cAHf;AAG+B,QAAI,EAAEF;AAHrC,IAAP;AAIH,C;;;;;;;;ACxCD;AAAA;AAAA;AAAA;AAEe,SAASf,iBAAT,CAA2BiC,QAA3B,EAAgEC,IAAhE,EAAuF;AAClG,MAAMC,UAAU,GAAGnQ,oDAAM,EAAzB;AACA,MAAMoQ,eAAe,GAAGpQ,oDAAM,EAA9B;;AAEA,MAAMqQ,OAAO,GAAG,SAAVA,OAAU,CAACpC,IAAD,EAAkB;AAC9B,QAAIpO,MAAM,GAAG,IAAb;;AACA,QAAIuQ,eAAe,CAACtO,OAAhB,IAA2BvH,SAA/B,EAA0C;AACtC,UAAM+V,SAAS,GAAGrC,IAAI,GAAGmC,eAAe,CAACtO,OAAzC;AACAjC,YAAM,GAAGoQ,QAAQ,CAACK,SAAD,CAAjB;AACH;;AACDF,mBAAe,CAACtO,OAAhB,GAA0BmM,IAA1B;AACA,QAAIpO,MAAJ,EACIsQ,UAAU,CAACrO,OAAX,GAAqByO,qBAAqB,CAACF,OAAD,CAA1C,CADJ,KAEK;AACDF,gBAAU,CAACrO,OAAX,GAAqBvH,SAArB;AACP,GAXD;;AAaAK,yDAAS,CAAC,YAAM;AACZwV,mBAAe,CAACtO,OAAhB,GAA0BvH,SAA1B;AACA4V,cAAU,CAACrO,OAAX,GAAqByO,qBAAqB,CAACF,OAAD,CAA1C;AACA,WAAO;AAAA,aAAMF,UAAU,CAACrO,OAAX,KAAuBvH,SAAvB,IACNiW,oBAAoB,CAACL,UAAU,CAACrO,OAAZ,CADpB;AAAA,KAAP;AAEH,GALQ,EAKNoO,IAAI,IAAI,EALF,CAAT;AAMH,C","file":"bc1de39814113fdab2fbefae2ee854f0842f6be1-b0a9f9bff03dff63c0c6.js","sourcesContent":["import { JDRegister } from \"../../../jacdac-ts/src/jdom/register\";\nimport useServiceHost from \"./useServiceHost\";\n\nexport default function useRegisterHost(register: JDRegister) {\n    const host = useServiceHost(register?.service);\n    return host?.register(register?.code);\n}","import { useEffect, useState } from \"react\";\nimport { REPORT_UPDATE, SystemReg } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\";\n\n\nexport default function useReadingAuxilliaryValue(register: JDRegister, identifier: number =\n    SystemReg.ReadingError\n    | SystemReg.ReadingResolution\n    | SystemReg.MaxReading\n    | SystemReg.MinReading\n    | SystemReg.StreamingInterval\n    | SystemReg.StreamingPreferredInterval\n): number[] {\n    const { service, code } = register;\n    const reading = code === SystemReg.Reading || code === SystemReg.Value;\n    const auxilliaryRegister = reading ? service.register(identifier) : undefined;\n    const [value, setValue] = useState<number[]>(auxilliaryRegister?.unpackedValue);\n\n    useEffect(() => auxilliaryRegister?.subscribe(REPORT_UPDATE, () => {\n        setValue(auxilliaryRegister?.unpackedValue);\n    }), [register, auxilliaryRegister]);\n\n    return value;\n}\n","import { Box, Typography } from \"@material-ui/core\"\nimport DeviceName from \"./devices/DeviceName\"\nimport Alert from \"./ui/Alert\"\nimport React, { useContext, useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport { REPORT_UPDATE, SystemReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport AppContext from \"./AppContext\"\nimport MembersInput from \"./fields/MembersInput\"\nimport RegisterTrend from \"./RegisterTrend\"\nimport IconButtonWithProgress from \"./ui/IconButtonWithProgress\"\nimport useRegisterHost from \"./hooks/useRegisterHost\"\nimport useReadingAuxilliaryValue from \"./hooks/useReadingAuxilliaryValue\"\n\nexport type RegisterInputVariant = \"widget\" | \"\"\n\nexport default function RegisterInput(props: {\n    register: JDRegister\n    showDeviceName?: boolean\n    showServiceName?: boolean\n    showRegisterName?: boolean\n    hideMissingValues?: boolean\n    showTrend?: boolean\n    showDataType?: boolean\n    variant?: RegisterInputVariant\n    off?: boolean\n    toggleOff?: () => void\n}) {\n    const {\n        register,\n        showRegisterName,\n        showDeviceName,\n        showServiceName,\n        hideMissingValues,\n        showTrend,\n        showDataType,\n        variant,\n        off,\n        toggleOff,\n    } = props\n    const { service, specification } = register\n    const { device } = service\n    const { fields } = register\n    const { setError: setAppError } = useContext(AppContext)\n    const [working, setWorking] = useState(false)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const [args, setArgs] = useState<any[]>(register.unpackedValue || [])\n    const host = useRegisterHost(register)\n    const hasSet =\n        specification.kind === \"rw\" || (host && specification.kind !== \"const\")\n    const hasData = !!register.data\n    const color = hasSet ? \"secondary\" : \"primary\"\n    const minReading = useReadingAuxilliaryValue(register, SystemReg.MinReading)\n    const maxReading = useReadingAuxilliaryValue(register, SystemReg.MaxReading)\n    const readingError = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingError\n    )\n    const resolution = useReadingAuxilliaryValue(\n        register,\n        SystemReg.ReadingResolution\n    )\n\n    useEffect(\n        () =>\n            register.subscribe(REPORT_UPDATE, () => {\n                const vs = register.unpackedValue\n                if (vs !== undefined) setArgs(vs)\n            }),\n        [register]\n    )\n    const handleRefresh = () => {\n        register.refresh(true)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const sendArgs = async (values: any[]) => {\n        if (working) return\n        try {\n            setWorking(true)\n            if (host) {\n                host.setValues(values)\n                await register.refresh()\n            } else\n                await register.sendSetPackedAsync(\n                    specification.packFormat,\n                    values,\n                    true\n                )\n        } catch (e) {\n            setAppError(e)\n        } finally {\n            setWorking(false)\n        }\n    }\n\n    if (!specification)\n        return (\n            <Alert severity=\"error\">{`Unknown member ${register.service}:${register.code}`}</Alert>\n        )\n\n    if (!fields.length) return null // nothing to see here\n\n    if (hideMissingValues && !hasData) return null\n\n    const serviceName = register.service.name\n        .toLocaleLowerCase()\n        .replace(/_/g, \" \")\n    const registerName = specification.name.replace(/_/g, \" \")\n    return (\n        <>\n            {showDeviceName && (\n                <Typography component=\"span\" key=\"devicenamename\">\n                    <DeviceName device={device} />/\n                </Typography>\n            )}\n            {showServiceName && specification && (\n                <Typography\n                    variant=\"caption\"\n                    key=\"servicename\"\n                    aria-label={serviceName}\n                >\n                    {serviceName}\n                </Typography>\n            )}\n            {showRegisterName && specification && serviceName !== registerName && (\n                <Typography\n                    variant=\"caption\"\n                    key=\"registername\"\n                    aria-label={registerName}\n                >\n                    {\" \" + registerName}\n                </Typography>\n            )}\n            {!hasData && (\n                <Box>\n                    <IconButtonWithProgress\n                        title=\"refresh\"\n                        indeterminate={true}\n                        onClick={handleRefresh}\n                    />\n                </Box>\n            )}\n            {showTrend && hasData && (\n                <RegisterTrend register={register} mini={false} horizon={24} />\n            )}\n            {hasData && (\n                <MembersInput\n                    color={color}\n                    serviceSpecification={service.specification}\n                    serviceMemberSpecification={specification}\n                    specifications={fields.map(f => f.specification)}\n                    values={args}\n                    setValues={hasSet && sendArgs}\n                    showDataType={showDataType}\n                    variant={variant}\n                    min={minReading}\n                    max={maxReading}\n                    resolution={resolution}\n                    error={readingError}\n                    off={off}\n                    toggleOff={toggleOff}\n                />\n            )}\n        </>\n    )\n}\n","import React, { ReactNode } from \"react\";\n\nexport default function SvgWidget(props: {\n    width: number,\n    height?: number,\n    size?: string,\n    role?: string,\n    title?: string,\n    viewBox?: string,\n    tabIndex?: number,\n    background?: string,\n    children: ReactNode\n}) {\n    const { width, height, size = \"100%\", background, children, role, title, viewBox, tabIndex } = props;\n    const h = height || width;\n    const aspectRatio = width / height;\n    const vertical = aspectRatio < 1;\n\n    return <div style={({\n        position: \"relative\",\n        height: vertical ? size : undefined,\n        width: vertical ? undefined : size,\n    })}>\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            tabIndex={tabIndex}\n            viewBox={viewBox || `0 0 ${width} ${h}`}\n            aria-label={title}\n            style={({ \n                height: vertical ? \"100%\" : undefined,\n                width: vertical ?  undefined : \"100%\",\n            })}\n            role={role || \"group\"}>\n            {background && <rect x={0} y={0} width={width} height={height} fill={background} rx={1} ry={1} />}\n            {children}\n        </svg>\n    </div>\n}","import React, { KeyboardEvent, PointerEvent } from \"react\"\n\nconst ENTER_KEY = 13;\nconst SPACE_KEY = 32;\n\nexport function keyCodeFromEvent(e: any) {\n    return (typeof e.which == \"number\") ? e.which : e.keyCode;\n}\n\nexport default function useFireKey<TElement extends Element>(handler: (ev?: PointerEvent<TElement>) => void): (e: KeyboardEvent<TElement>) => void {\n    if (!handler)\n        return undefined;\n    return (e: KeyboardEvent<Element>) => {\n        const charCode = keyCodeFromEvent(e);\n        if (charCode === ENTER_KEY || charCode === SPACE_KEY) {\n            e.preventDefault();\n            handler();\n        }\n    }\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport { useFormControl } from '../FormControl';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      cursor: 'pointer',\n      // For correct alignment with the text.\n      verticalAlign: 'middle',\n      WebkitTapHighlightColor: 'transparent',\n      marginLeft: -11,\n      marginRight: 16,\n      // used for row presentation of radio/checkbox\n      '&$disabled': {\n        cursor: 'default'\n      }\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"start\"`. */\n    labelPlacementStart: {\n      flexDirection: 'row-reverse',\n      marginLeft: 16,\n      // used for row presentation of radio/checkbox\n      marginRight: -11\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"top\"`. */\n    labelPlacementTop: {\n      flexDirection: 'column-reverse',\n      marginLeft: 16\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"bottom\"`. */\n    labelPlacementBottom: {\n      flexDirection: 'column',\n      marginLeft: 16\n    },\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the label's Typography component. */\n    label: {\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    }\n  };\n};\n/**\n * Drop in replacement of the `Radio`, `Switch` and `Checkbox` component.\n * Use this component if you want to display an extra label.\n */\n\nvar FormControlLabel = /*#__PURE__*/React.forwardRef(function FormControlLabel(props, ref) {\n  var checked = props.checked,\n      classes = props.classes,\n      className = props.className,\n      control = props.control,\n      disabledProp = props.disabled,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$labelPlacement = props.labelPlacement,\n      labelPlacement = _props$labelPlacement === void 0 ? 'end' : _props$labelPlacement,\n      name = props.name,\n      onChange = props.onChange,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"checked\", \"classes\", \"className\", \"control\", \"disabled\", \"inputRef\", \"label\", \"labelPlacement\", \"name\", \"onChange\", \"value\"]);\n\n  var muiFormControl = useFormControl();\n  var disabled = disabledProp;\n\n  if (typeof disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n\n  if (typeof disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  var controlProps = {\n    disabled: disabled\n  };\n  ['checked', 'name', 'onChange', 'value', 'inputRef'].forEach(function (key) {\n    if (typeof control.props[key] === 'undefined' && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"label\", _extends({\n    className: clsx(classes.root, className, labelPlacement !== 'end' && classes[\"labelPlacement\".concat(capitalize(labelPlacement))], disabled && classes.disabled),\n    ref: ref\n  }, other), /*#__PURE__*/React.cloneElement(control, controlProps), /*#__PURE__*/React.createElement(Typography, {\n    component: \"span\",\n    className: clsx(classes.label, disabled && classes.disabled)\n  }, label));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormControlLabel'\n})(FormControlLabel);","import React, { SVGAttributes, useRef } from \"react\";\nimport useWidgetTheme from \"./useWidgetTheme\";\nimport SvgWidget from \"./SvgWidget\";\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport { closestPoint, describeArc, svgPointerPoint } from \"./svgutils\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\nimport PowerButton from \"./PowerButton\";\nimport { Grid, Slider } from \"@material-ui/core\";\n\nexport default function GaugeWidget(props: {\n    value: number,\n    min: number,\n    max: number,\n    step?: number,\n    label?: string,\n    color?: \"primary\" | \"secondary\",\n    size?: string,\n    variant?: \"fountain\",\n    tabIndex?: number,\n    valueLabel?: (v: number) => string,\n    onChange?: (ev: unknown, newValue: number) => void\n    off?: boolean,\n    toggleOff?: () => void\n}) {\n    const { value, color, size, min, max, step, variant, valueLabel,\n        off, toggleOff, onChange, tabIndex } = props;\n    const { background, active, textProps } = useWidgetTheme(color);\n\n    const sliderPathRef = useRef<SVGPathElement>();\n    const w = 120;\n    const h = 120;\n    const m = 8;\n    const roff = 30;\n    const riff = 10;\n    const sw = m << 1;\n    const cx = w >> 1;\n    const cy = h >> 1;\n    const r = (w >> 1) - m;\n    const sa = -135;\n    const ea = 135;\n    const _step = step || (max - min) / 10\n    const displayValue = useThrottledValue(value, (max - min) * 2);\n\n    const computeArc = (v: number) => {\n        if (variant === \"fountain\") {\n            const mid = (ea + sa) / 2;\n            const fraction = v / (max - min) * (ea - sa);\n            if (fraction < 0)\n                return describeArc(cx, cy, r, mid + fraction, mid);\n            else\n                return describeArc(cx, cy, r, mid, mid + fraction);\n        } else {\n            const fraction = (v - min) / (max - min);\n            const va = sa + fraction * (ea - sa);\n            return describeArc(cx, cy, r, sa, va);\n        }\n    }\n\n    const db = describeArc(cx, cy, r, sa, ea);\n    const dvalue = computeArc(value);\n    const dactual = computeArc(displayValue);\n    const lineCap = \"round\"\n    const tvalue = valueLabel(value);\n    const clickeable = !!onChange;\n\n    const handlePointerDown = (ev: React.PointerEvent<SVGPathElement>) => {\n        ev.preventDefault();\n        if (!ev.buttons) return;\n        const svg = sliderPathRef.current.ownerSVGElement\n        const pos = svgPointerPoint(svg, ev);\n        const closest = closestPoint(sliderPathRef.current, _step, pos);\n        onChange(ev, min + (1 - closest) * (max - min))\n    }\n    const pointerStyle: CSSProperties = clickeable && {\n        cursor: \"pointer\"\n    }\n    const pathProps: SVGAttributes<SVGPathElement> = {\n        onPointerDown: clickeable ? handlePointerDown : undefined,\n        onPointerMove: clickeable ? handlePointerDown : undefined,\n        style: clickeable ? pointerStyle : undefined\n    }\n    const handleSliderChange = (ev: unknown, newValue: number | number[]) => {\n        onChange(ev, newValue as number);\n    }\n\n    return <Grid container direction=\"column\">\n        <Grid item>\n            <SvgWidget tabIndex={tabIndex} width={w} height={h} size={size}>\n                <path ref={sliderPathRef} strokeWidth={sw} stroke={background} d={db} strokeLinecap={lineCap} fill=\"transparent\"\n                    {...pathProps}\n                />\n                {!off && <path strokeWidth={sw} stroke={active} strokeLinecap={lineCap} d={dvalue} opacity={0.2} fill=\"transparent\"\n                    {...pathProps}\n                />}\n                {!off && <path strokeWidth={sw} stroke={active} strokeLinecap={lineCap} d={dactual} fill=\"transparent\"\n                    {...pathProps}\n                />}\n                {off !== undefined\n                    ? <PowerButton off={off} label={tvalue} cx={cx} cy={cy} r={roff} ri={riff} color={color} onClick={toggleOff} />\n                    : <text {...textProps} x={cx} y={cy} aria-label={tvalue}>{tvalue}</text>}\n            </SvgWidget>\n        </Grid>\n        {clickeable && <Grid item>\n            <Slider\n                disabled={off}\n                color={color}\n                min={min} max={max} step={_step} valueLabelDisplay=\"off\"\n                value={value} onChange={handleSliderChange} />\n        </Grid>}\n    </Grid>\n\n}","import React from \"react\";\nimport { Grid, Slider, Typography } from \"@material-ui/core\";\nimport { isSet, roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\n\nexport default function ValueWithUnitWidget(props: {\n    value: number,\n    min?: number,\n    max?: number,\n    step?: number,\n    icon?: JSX.Element,\n    label: string,\n    secondaryLabel?: string,\n    tabIndex?: number,\n    color?: \"primary\" | \"secondary\",\n    size?: string,\n    onChange?: (event: unknown, newValue: number | number[]) => void\n}) {\n    const { value, min, max, step, secondaryLabel, icon, label, tabIndex, onChange } = props;\n    const labelVariant = \"subtitle1\";\n    const precision = step === undefined ? 1 : step < 1 ? Math.ceil(-Math.log10(step)) : 0;\n    const hasValue = !isNaN(value);\n    const valueText = hasValue ? roundWithPrecision(value, precision).toLocaleString() : \"--\"\n    const valueTextLength = isSet(min) && isSet(max) ? [min, max, min + (min + max) / 3]\n        .map(v => roundWithPrecision(v, precision).toLocaleString().replace(/[,.]/, '').length)\n        .reduce((l, r) => Math.max(l, r), 0)\n        + precision : valueText.length;\n\n    //console.log({ min, max, step, precision })\n    const valueVariant = valueTextLength < 4 ? \"h1\"\n        : valueTextLength < 7 ? \"h2\"\n            : valueTextLength < 9 ? \"h3\"\n                : valueTextLength < 12 ? \"h4\"\n                    : \"h6\";\n    const valueStyle: CSSProperties = {\n        minWidth: `${Math.max(2, valueTextLength - 1)}em`\n    }\n\n    return <Grid container direction=\"column\" tabIndex={tabIndex} aria-label={`${valueText} ${label}`}>\n        <Grid item xs={12}>\n            <Grid container direction=\"row\" alignContent=\"flex-end\">\n                <Grid item>\n                    <Typography role=\"timer\" align=\"right\" variant={valueVariant}\n                        style={valueStyle}>{icon}{valueText}</Typography>\n                </Grid>\n                <Grid item>\n                    <Grid container direction=\"column\" alignContent=\"space-between\">\n                        <Grid item>\n                            <Typography variant={labelVariant}>{label}</Typography>\n                        </Grid>\n                        {secondaryLabel && <Grid item>\n                            <Typography variant={\"caption\"}>{secondaryLabel}</Typography>\n                        </Grid>}\n                    </Grid>\n                </Grid>\n            </Grid>\n        </Grid>\n        {onChange && value !== undefined && <Grid item xs={12}>\n            <Slider valueLabelDisplay=\"off\" color=\"secondary\"\n                min={min} max={max} step={step} value={value} onChange={onChange} />\n        </Grid>}\n    </Grid>;\n}","import { SvgIcon, SvgIconProps } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default (props: SvgIconProps) =>\n    <SvgIcon {...props}>\n        <path d=\"M8.8-.03A49.327 49.327 0 00.956 11.112a8.824 8.824 0 1015.693 0A49.327 49.327 0 008.801-.029zm0 3.132a47.244 47.244 0 015.995 8.962 6.74 6.74 0 11-11.986 0A47.243 47.243 0 018.8 3.102z\" />\n    </SvgIcon>\n","import React from \"react\";\nimport HumidityIcon from \"../icons/HumidityIcon\"\nimport { resolveUnit } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { SvgIconProps } from \"@material-ui/core\";\n\nexport default (unit: string, props?: SvgIconProps) => {\n    const { unit: runit } = resolveUnit(unit) || {};\n    switch (runit) {\n        case \"%RH\": return <HumidityIcon {...props} />;\n        default: return null;\n    }\n}","import React, { useEffect, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { FormControlLabel, Slider } from \"@material-ui/core\"\nimport { MenuItem, Select, Switch, TextField } from \"@material-ui/core\"\nimport {\n    flagsToValue,\n    prettyMemberUnit,\n    prettyUnit,\n    valueToFlags,\n} from \"../../../jacdac-ts/src/jdom/pretty\"\nimport {\n    isIntegerType,\n    isValueOrIntensity,\n    memberValueToString,\n    tryParseMemberValue,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport { isSet, pick, roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\"\nimport { RegisterInputVariant } from \"../RegisterInput\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport GaugeWidget from \"../widgets/GaugeWidget\"\nimport useWidgetSize from \"../widgets/useWidgetSize\"\nimport ValueWithUnitWidget from \"../widgets/ValueWithUnitWidget\"\nimport useUnitIcon from \"../hooks/useUnitIcon\"\nimport { PackedSimpleValue } from \"../../../jacdac-ts/src/jdom/pack\"\nimport { useId } from \"react-use-id-hook\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\n\nexport default function MemberInput(props: {\n    specification: jdspec.PacketMember\n    serviceSpecification: jdspec.ServiceSpec\n    serviceMemberSpecification: jdspec.PacketInfo\n    value: PackedSimpleValue\n    setValue?: (v: PackedSimpleValue) => void\n    showDataType?: boolean\n    color?: \"primary\" | \"secondary\"\n    variant?: RegisterInputVariant\n    min?: number\n    max?: number\n    resolution?: number\n    error?: number\n    showLoading?: boolean\n    off?: boolean\n    toggleOff?: () => void\n}) {\n    const {\n        specification,\n        serviceSpecification,\n        serviceMemberSpecification,\n        value,\n        setValue,\n        showDataType,\n        color,\n        variant,\n        min,\n        max,\n        resolution,\n        error,\n        showLoading,\n        off,\n        toggleOff,\n    } = props\n    const {\n        typicalMin,\n        typicalMax,\n        absoluteMin,\n        absoluteMax,\n        type,\n    } = specification\n    const enumInfo = serviceSpecification.enums?.[specification.type]\n    const disabled = !setValue\n    const [errorText, setErrorText] = useState(\"\")\n    const [textValue, setTextValue] = useState(\"\")\n    const valueString = memberValueToString(value, specification)\n    const name =\n        specification.name === \"_\"\n            ? serviceMemberSpecification.name\n            : specification.name\n    const label = name\n    const isWidget = variant === \"widget\"\n    const widgetSize = useWidgetSize()\n    const unitIcon = useUnitIcon(specification.unit, { \"aria-label\": label })\n\n    const minValue = pick(\n        min,\n        typicalMin,\n        absoluteMin,\n        /^u/.test(type) ? 0 : undefined\n    )\n    const maxValue = pick(max, typicalMax, absoluteMax)\n    const errorValue = error\n        ? \"\" +\n          roundWithPrecision(\n              error,\n              1 - Math.floor(Math.log10(error))\n          ).toLocaleString()\n        : undefined\n    const unit = prettyUnit(specification.unit)\n    const helperText =\n        errorText ||\n        [prettyMemberUnit(specification, showDataType), errorValue]\n            .filter(v => v !== undefined)\n            .join(\", \")\n    const inputId = useId()\n\n    const inputType =\n        specification.type === \"string\" || specification.type === \"string0\"\n            ? \"string\"\n            : specification.isSimpleType || isIntegerType(specification.type)\n            ? \"number\"\n            : \"\"\n\n    // update coming from device\n    useEffect(() => {\n        setTextValue(valueString)\n    }, [valueString])\n\n    const handleChecked = (ev, checked: boolean) => {\n        setValue(checked)\n    }\n    const handleChange = ev => {\n        const newValue = ev.target.value\n        setTextValue(newValue)\n        const r = tryParseMemberValue(newValue, specification)\n        if (r.value !== undefined) setValue(r.value)\n        setErrorText(r.error)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleEnumChange = (event: React.ChangeEvent<{ value: any }>) => {\n        const v = enumInfo.isFlags\n            ? flagsToValue(event.target.value as number[])\n            : (event.target.value as number)\n        setValue(v)\n    }\n    const handleSliderChange = (\n        event: unknown,\n        newValue: number | number[]\n    ) => {\n        const v = newValue as number\n        setValue(v)\n    }\n    const percentValueFormat = (value: number) => {\n        // avoid super long floats\n        return ((value * 100) >> 0) + \"%\"\n    }\n\n    const valueLabelFormat = (value: number) => {\n        // avoid super long floats\n        return roundWithPrecision(value, 1) + (unit || \"\")\n    }\n    const percentValueLabelFormat = (v: number) => {\n        return `${Math.round(v * 100)}%`\n    }\n    const offFormat = () => \"off\"\n\n    // value hasn't been loaded yet\n    if (serviceMemberSpecification.kind !== \"command\" && value === undefined) {\n        if (showLoading)\n            return <LoadingProgress />\n        else return null\n    }\n\n    //\n    if (specification.type === \"pipe\") {\n        return (\n            <>\n                pipe <code>{specification.name}</code>\n            </>\n        )\n    } else if (specification.type === \"bool\") {\n        if (isWidget && !isValueOrIntensity(serviceMemberSpecification)) {\n            return (\n                <ButtonWidget\n                    label={!isWidget && label}\n                    checked={!!value}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n        }\n\n        return (\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={!!value}\n                        onChange={disabled ? undefined : handleChecked}\n                        color={color}\n                    />\n                }\n                label={label}\n            />\n        )\n    } else if (enumInfo !== undefined) {\n        return (\n            <Select\n                aria-label={label}\n                disabled={disabled}\n                multiple={enumInfo.isFlags}\n                value={\n                    enumInfo.isFlags\n                        ? valueToFlags(enumInfo, value as number)\n                        : value\n                }\n                onChange={handleEnumChange}\n            >\n                {Object.keys(enumInfo.members).map(n => (\n                    <MenuItem key={n} value={enumInfo.members[n]}>\n                        {n}\n                    </MenuItem>\n                ))}\n            </Select>\n        )\n    } else if (specification.unit === \"/\") {\n        const signed = specification.storage < 0\n        const min = signed ? -1 : 0\n        const max = 1\n        const step = resolution !== undefined ? resolution : 0.01\n        if (isWidget)\n            return (\n                <GaugeWidget\n                    tabIndex={0}\n                    label={label}\n                    value={value as number}\n                    color={color}\n                    variant={signed ? \"fountain\" : undefined}\n                    min={min}\n                    max={max}\n                    step={step}\n                    valueLabel={percentValueLabelFormat}\n                    onChange={disabled ? undefined : handleSliderChange}\n                    off={off}\n                    toggleOff={toggleOff}\n                />\n            )\n\n        return (\n            <Slider\n                aria-label={label}\n                color={color}\n                value={value as number}\n                valueLabelFormat={percentValueFormat}\n                onChange={disabled ? undefined : handleSliderChange}\n                min={min}\n                max={max}\n                step={step}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (isSet(minValue) && isSet(maxValue)) {\n        const hasTypicalRange = isSet(typicalMin) && isSet(typicalMax)\n        let step =\n            resolution !== undefined\n                ? resolution\n                : hasTypicalRange\n                ? (specification.typicalMax - specification.typicalMin) / 100\n                : (maxValue - minValue) / 100\n        if (step === 0 || isNaN(step))\n            // edge case\n            step = undefined\n        const marks =\n            hasTypicalRange &&\n            (typicalMin !== minValue || typicalMax !== maxValue)\n                ? [\n                      {\n                          value: typicalMin,\n                      },\n                      {\n                          value: typicalMax,\n                      },\n                  ]\n                : undefined\n        if (isWidget)\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    label={specification.unit}\n                    value={value as number}\n                    min={minValue}\n                    max={maxValue}\n                    icon={unitIcon}\n                    step={step}\n                    secondaryLabel={errorValue}\n                    color={color}\n                    onChange={disabled ? undefined : handleSliderChange}\n                />\n            )\n\n        return (\n            <Slider\n                value={value as number}\n                color={color}\n                valueLabelFormat={off ? offFormat : valueLabelFormat}\n                onChange={disabled ? undefined : handleSliderChange}\n                min={minValue}\n                max={maxValue}\n                step={step}\n                marks={marks}\n                valueLabelDisplay=\"auto\"\n            />\n        )\n    } else if (specification.type === \"bytes\") {\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{ [\"aria-label\"]: label }}\n                helperText={helperText}\n                onChange={disabled ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={\"text\"}\n            />\n        )\n    } else {\n        // numbers or string or uintarrays\n        if (isWidget)\n            // we need min/max to support a slider\n            return (\n                <ValueWithUnitWidget\n                    tabIndex={0}\n                    value={roundWithPrecision(value as number, 1)}\n                    label={specification.unit}\n                    color={color}\n                    size={widgetSize}\n                />\n            )\n\n        return (\n            <TextField\n                id={inputId}\n                spellCheck={false}\n                value={textValue}\n                label={label}\n                inputProps={{ [\"aria-label\"]: label }}\n                helperText={helperText}\n                onChange={disabled ? undefined : handleChange}\n                required={value === undefined}\n                error={!!errorText}\n                type={inputType}\n            />\n        )\n    }\n}\n","import { Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport { RegisterInputVariant } from \"../RegisterInput\";\nimport MemberInput from \"./MemberInput\";\n\nexport default function MembersInput(props: {\n    serviceSpecification: jdspec.ServiceSpec,\n    serviceMemberSpecification?: jdspec.PacketInfo,\n    specifications: jdspec.PacketMember[],\n    values?: any[],\n    setValues?: (values: any[]) => void,\n    showDataType?: boolean,\n    color?: \"primary\" | \"secondary\",\n    variant?: RegisterInputVariant,\n    min?: number[],\n    max?: number[],\n    resolution?: number[],\n    error?: number[],\n    off?: boolean,\n    toggleOff?: () => void\n}) {\n    const { serviceSpecification, serviceMemberSpecification, specifications,\n        values, setValues, showDataType, color, variant,\n        min, max, resolution, error, off, toggleOff } = props;\n    const setValue = (index: number) => (value: any) => {\n        const c = values.slice(0)\n        c[index] = value;\n        setValues(c)\n    }\n\n    return <Grid container spacing={1}>\n        {specifications.map((field, fieldi) => {\n            const value = values?.[fieldi];\n            return <Grid item key={fieldi} xs={12}>\n                <MemberInput\n                    serviceSpecification={serviceSpecification}\n                    serviceMemberSpecification={serviceMemberSpecification}\n                    specification={field}\n                    showDataType={showDataType}\n                    value={value}\n                    color={color}\n                    setValue={values && setValues && setValue(fieldi)}\n                    variant={variant}\n                    min={min?.[fieldi]}\n                    max={max?.[fieldi]}\n                    resolution={resolution?.[fieldi]}\n                    error={error?.[fieldi]}\n                    off={off}\n                    toggleOff={toggleOff}\n                />\n            </Grid>;\n        })}\n    </Grid>\n}\n","import { createStyles, makeStyles, useTheme } from \"@material-ui/core\";\nimport { SVGProps, useContext } from \"react\";\nimport DarkModeContext from \"../ui/DarkModeContext\"\n\nexport default function useWidgetTheme(color?: \"primary\" | \"secondary\") {\n    const theme = useTheme();\n    const { palette } = theme;\n    const { background } = palette;\n    const { darkMode } = useContext(DarkModeContext);\n\n    const active: string = color === \"primary\" ? palette.primary.main\n        : color === \"secondary\" ? palette.secondary.main\n            : palette.info.main;\n    const backgroundColor = darkMode === \"dark\" ? background.default : palette.grey[800];\n    const controlBackground = darkMode === \"dark\" ? palette.grey[800] : palette.grey[400]\n    const textPrimary = palette.text.primary\n    const textProps: SVGProps<SVGTextElement> = {\n        fill: textPrimary,\n        alignmentBaseline: \"central\",\n        dominantBaseline: \"middle\",\n        textAnchor: \"middle\",\n        pointerEvents: \"none\",\n        letterSpacing: 0,\n        style: {\n            userSelect: \"none\",\n            pointerEvents: \"none\"\n        }\n    }\n\n    return {\n        background: backgroundColor,\n        controlBackground,\n        active,\n        textPrimary,\n        textProps\n    }\n}","import React from \"react\";\nimport { useTheme } from \"@material-ui/core\";\nimport SvgWidget from \"./SvgWidget\";\nimport useWidgetTheme from \"./useWidgetTheme\";\nimport { useId } from \"react-use-id-hook\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\";\n\nexport default function ButtonWidget(props: {\n    checked?: boolean;\n    label?: string\n    color?: \"primary\" | \"secondary\",\n    size?: string,\n    onDown?: () => void,\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props;\n    const { background, controlBackground, active } = useWidgetTheme(color);\n\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(label, onDown, onUp)\n    const w = 64;\n    const mo = checked ? 3 : 5;\n    const r = w / 2;\n    const cx = r;\n    const cy = r;\n    const ro = r;\n    const ri = r - mo;\n    const rn = 8;\n    return <SvgWidget width={w} size={size}>\n        <rect x={0} y={0} rx={2} ry={2} width={w} height={w} fill={background} />\n        <circle cx={rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n        <circle cx={w - rn} cy={rn} r={rn >> 1} fill={controlBackground} />\n        <circle cx={w - rn} cy={w - rn} r={rn >> 1} fill={controlBackground} />\n        <circle cx={rn} cy={w - rn} r={rn >> 1} fill={controlBackground} />\n        <circle cx={cx} cy={cy} r={ri}\n            aria-live=\"polite\"\n            fill={checked ? active : controlBackground}\n            {...buttonProps}\n        />\n    </SvgWidget>\n}","import React from \"react\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\";\nimport { describeArc } from \"./svgutils\";\nimport useWidgetTheme from \"./useWidgetTheme\";\n\nexport default function PowerButton(props: {\n    cx: number,\n    cy: number,\n    r: number,\n    ri: number,\n    strokeWidth?: number,\n    label?: string,\n    color?: \"primary\" | \"secondary\",\n    off?: boolean,\n    borderStroke?: string,\n    onClick?: () => void\n}) {\n    const { cx, cy, r, ri, onClick, off, color, label, strokeWidth, borderStroke } = props;\n    const { background, active, controlBackground, textProps } = useWidgetTheme(color);\n    const a = 135;\n    const d = describeArc(cx, cy, ri, -a, a, true);\n    const btnlabel = off ? \"turn on\" : \"turn off\";\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(btnlabel, onClick)\n    const sw = strokeWidth || 3;\n    const disabled = !onClick;\n\n    const iconStroke = disabled || !off ? background : active;\n\n    return <g>\n        <title>{btnlabel}</title>\n        <circle cx={cx} cy={cy} r={r} fill={controlBackground}\n            strokeWidth={sw} stroke={borderStroke || background}\n            {...buttonProps} />\n        {(off || !label) && <g transform={`rotate(180, ${cx}, ${cy})`}>\n            <path d={d} strokeLinecap=\"round\" fill=\"none\"\n                strokeWidth={sw} stroke={iconStroke}\n                style={({ userSelect: \"none\", pointerEvents: \"none\" })} />\n            <line strokeLinecap=\"round\" x1={cx} y1={cy + ri / 4} x2={cx} y2={cy + ri}\n                stroke={iconStroke} strokeWidth={sw}\n                style={({ userSelect: \"none\", pointerEvents: \"none\" })} />\n        </g>}\n        {!off && label && <text aria-label={label} x={cx} y={cy} {...textProps}>{label}</text>}\n    </g>\n}","import { CircularProgress } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function LoadingProgress(props: { size?: string }) {\n    const { size } = props;\n    return <CircularProgress\n        disableShrink\n        variant=\"indeterminate\"\n        size={size || \"1em\"}\n    />\n}","import { JDService } from \"../../../jacdac-ts/src/jdom/service\";\nimport ServiceHost from \"../../../jacdac-ts/src/jdom/servicehost\";\nimport useDeviceHost from \"./useDeviceHost\";\n\nexport default function useServiceHost<T extends ServiceHost>(service: JDService) {\n    const host = useDeviceHost(service.device);\n    return host?.service(service?.serviceIndex) as T;\n}","import React from \"react\"\n\nexport function svgPointerPoint(\n    svg: SVGSVGElement,\n    event: React.PointerEvent\n): DOMPoint {\n    const point = svg.createSVGPoint()\n    point.x = event.clientX\n    point.y = event.clientY\n    const res = point.matrixTransform(svg.getScreenCTM().inverse())\n    return res\n}\n\nexport function closestPoint(\n    pathNode: SVGPathElement,\n    step: number,\n    point: DOMPoint\n): number {\n    const pathLength = pathNode.getTotalLength()\n\n    const distance2 = (p: DOMPoint) => {\n        const dx = p.x - point.x\n        const dy = p.y - point.y\n        return dx * dx + dy * dy\n    }\n\n    let bestLength = 0\n    let bestDistance = Infinity\n    for (let scanLength = 0; scanLength <= pathLength; scanLength += step) {\n        const scan = pathNode.getPointAtLength(scanLength)\n        const scanDistance = distance2(scan)\n        if (scanDistance < bestDistance) {\n            bestLength = scanLength\n            bestDistance = scanDistance\n        }\n    }\n    return bestLength / pathLength\n}\n\nexport function polarToCartesian(\n    centerX: number,\n    centerY: number,\n    radius: number,\n    angleInDegrees: number\n) {\n    const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0\n\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    }\n}\n\nexport function describeArc(\n    x: number,\n    y: number,\n    radius: number,\n    startAngle: number,\n    endAngle: number,\n    large?: boolean\n) {\n    const start = polarToCartesian(x, y, radius, endAngle)\n    const end = polarToCartesian(x, y, radius, startAngle)\n\n    const largeArcFlag =\n        large !== true && endAngle - startAngle <= 180 ? \"0\" : \"1\"\n\n    const d = [\n        \"M\",\n        start.x,\n        start.y,\n        \"A\",\n        radius,\n        radius,\n        0,\n        largeArcFlag,\n        0,\n        end.x,\n        end.y,\n    ].join(\" \")\n\n    return d\n}\n","import { useState } from \"react\";\nimport useAnimationFrame from \"./useAnimationFrame\";\n\nexport default function useThrottledValue(value: number, maxRate: number) {\n    const [actual, setActual] = useState<number>(value);\n\n    let animated = actual;\n    useAnimationFrame(time => {\n        // no valid rate\n        if (isNaN(maxRate) || isNaN(animated)) {\n            setActual(value);\n            return false;\n        }\n\n        // increment towards value\n        const dt = time / 1000; // s\n        const error = value - animated;\n        const maxError = maxRate * dt; // deg\n        let active = true;\n        animated += Math.sign(error) * Math.min(Math.abs(error), maxError)\n        if (Math.abs(value - animated) / maxRate < 0.01) {\n            animated = value;\n            active = false;\n        }\n        setActual(animated);\n        return active;\n    }, [value, maxRate]);\n\n    return actual;\n}","import { SVGProps } from \"react\";\nimport useFireKey from \"./useFireKey\";\n\nexport default function useSvgButtonProps<T extends SVGElement>(\n    label: string,\n    onDown?: (event: React.PointerEvent<T>) => void,\n    onUp?: (event: React.PointerEvent<T>) => void\n): SVGProps<T> {\n\n    const disabled = !onDown && !onUp;\n    const fireDownOnEnter = useFireKey(onDown);\n    const fireUpOnEnter = useFireKey(onUp);\n\n    const preventify = (handler: (event: React.PointerEvent<T>) => void) => {\n        if (handler)\n            return (event: React.PointerEvent<T>) => {\n                event.preventDefault();\n                handler(event);\n            }\n        else\n            return undefined;\n    }\n\n    return {\n        className: disabled ? undefined : \"clickeable\",\n        role: disabled ? undefined : \"button\",\n        tabIndex: disabled ? undefined : 0,\n        [\"aria-label\"]: label,\n        onPointerDown: preventify(onDown),\n        onPointerUp: preventify(onUp),\n        onPointerLeave: preventify(onUp),\n        onKeyDown: fireDownOnEnter,\n        onKeyUp: fireUpOnEnter\n    }\n}","import { useMediaQuery, useTheme } from \"@material-ui/core\";\n\nexport default function useWidgetSize(variant?: \"icon\" | \"\", widgetCount?: number) {\n    const icon = variant === \"icon\"\n\n    const mini = icon;\n    let widgetSize: string;\n    switch (widgetCount || 1) {\n        case 1:\n        case 2:\n            widgetSize = mini ? \"12em\" : \"16em\";\n            break;\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n            widgetSize = mini ? \"10em\" : \"14em\";\n            break;\n        default:\n            widgetSize = mini ? \"4em\" : \"5em\";\n            break;\n    }\n    return widgetSize;\n}","import React, { useContext, useEffect, useRef } from \"react\";\nimport { REPORT_RECEIVE } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\";\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\";\nimport FieldDataSet from \"./FieldDataSet\"\nimport Trend from \"./Trend\"\nimport useChartPalette from \"./useChartPalette\";\nimport useChange from \"../jacdac/useChange\"\n\nconst DEFAULT_HORIZON = 50\nconst DEFAULT_HEIGHT = 12\n\nexport default function RegisterTrend(props: {\n    register: JDRegister,\n    showName?: boolean,\n    horizon?: number,\n    height?: number,\n    mini?: boolean,\n    interval?: number,\n}) {\n    const { register, mini, horizon, height, interval } = props;\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const palette = useChartPalette()\n    const dataSet = useRef(FieldDataSet.create(bus, [register], \"output\", palette, 100));\n\n    useChange(dataSet.current);\n\n    const addRow = () => dataSet.current.addRow();\n    // register on change if no intervals\n    useEffect(() => interval ? undefined : register?.subscribe(REPORT_RECEIVE, addRow), [interval, register])\n    // keep logging\n    useEffect(() => {\n        const id = interval && setInterval(addRow, interval);\n        return () => id && clearInterval(id);\n    }, [interval])\n\n    return <Trend dataSet={dataSet.current}\n        horizon={horizon || DEFAULT_HORIZON}\n        gradient={true}\n        height={height || DEFAULT_HEIGHT} mini={mini} />\n}","import { DependencyList, useEffect, useRef } from \"react\";\n\nexport default function useAnimationFrame(callback: (time: number) => boolean, deps?: DependencyList) {\n    const requestRef = useRef<number>();\n    const previousTimeRef = useRef<number>();\n\n    const animate = (time: number) => {\n        let active = true;\n        if (previousTimeRef.current != undefined) {\n            const deltaTime = time - previousTimeRef.current;\n            active = callback(deltaTime)\n        }\n        previousTimeRef.current = time;\n        if (active)\n            requestRef.current = requestAnimationFrame(animate);\n        else // we're done\n            requestRef.current = undefined;\n    }\n\n    useEffect(() => {\n        previousTimeRef.current = undefined;\n        requestRef.current = requestAnimationFrame(animate);\n        return () => requestRef.current !== undefined\n            && cancelAnimationFrame(requestRef.current);\n    }, deps || []);\n}"],"sourceRoot":""}